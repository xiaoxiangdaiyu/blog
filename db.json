{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/sourcemap/index.js.map","path":"sourcemap/index.js.map","modified":1,"renderable":0},{"_id":"source/img/bfc/1.png","path":"img/bfc/1.png","modified":1,"renderable":0},{"_id":"source/img/bfc/2.png","path":"img/bfc/2.png","modified":1,"renderable":0},{"_id":"source/img/bfc/4.png","path":"img/bfc/4.png","modified":1,"renderable":0},{"_id":"source/img/bfc/3.png","path":"img/bfc/3.png","modified":1,"renderable":0},{"_id":"source/img/redux/middleware.jpg","path":"img/redux/middleware.jpg","modified":1,"renderable":0},{"_id":"source/pwa/asset/sw.jpg","path":"pwa/asset/sw.jpg","modified":1,"renderable":0},{"_id":"themes/hexo-theme-next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"source/img/jstype/2.png","path":"img/jstype/2.png","modified":1,"renderable":0},{"_id":"source/img/performance/1.png","path":"img/performance/1.png","modified":1,"renderable":0},{"_id":"source/img/performance/2.png","path":"img/performance/2.png","modified":1,"renderable":0},{"_id":"source/img/jstype/3.png","path":"img/jstype/3.png","modified":1,"renderable":0},{"_id":"source/img/jstype/1.png","path":"img/jstype/1.png","modified":1,"renderable":0},{"_id":"source/img/pwa/3.png","path":"img/pwa/3.png","modified":1,"renderable":0},{"_id":"source/img/pwa/4.png","path":"img/pwa/4.png","modified":1,"renderable":0},{"_id":"themes/hexo-theme-next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"source/img/pwa/2.png","path":"img/pwa/2.png","modified":1,"renderable":0},{"_id":"themes/hexo-theme-next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"source/img/pwa/1.png","path":"img/pwa/1.png","modified":1,"renderable":0},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"source/img/watchfile/md51.gif","path":"img/watchfile/md51.gif","modified":1,"renderable":0},{"_id":"source/img/watchfile/watch1.gif","path":"img/watchfile/watch1.gif","modified":1,"renderable":0},{"_id":"source/img/watchfile/watchFile.gif","path":"img/watchfile/watchFile.gif","modified":1,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"8962578830ff3908b06d264d46ed7a0c287ebc2e","modified":1535096899000},{"_id":"source/.DS_Store","hash":"8983992a301632f377142eb0de9b7125c7a7c97a","modified":1555424015906},{"_id":"themes/hexo-theme-next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1535099702000},{"_id":"themes/hexo-theme-next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1535099702000},{"_id":"themes/hexo-theme-next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1535099702000},{"_id":"themes/hexo-theme-next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1535099702000},{"_id":"themes/hexo-theme-next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1535099702000},{"_id":"themes/hexo-theme-next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1535099702000},{"_id":"themes/hexo-theme-next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1535099702000},{"_id":"themes/hexo-theme-next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1535099702000},{"_id":"themes/hexo-theme-next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1535099702000},{"_id":"themes/hexo-theme-next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1535099702000},{"_id":"themes/hexo-theme-next/README.cn.md","hash":"2c766b3369ed477bce134a5450dab45bef161504","modified":1535099702000},{"_id":"themes/hexo-theme-next/README.md","hash":"8ce60ce578963eb4e1eb5e33e1efc2fc4779af9c","modified":1535099702000},{"_id":"themes/hexo-theme-next/bower.json","hash":"0674f11d3d514e087a176da0e1d85c2286aa5fba","modified":1535099702000},{"_id":"themes/hexo-theme-next/_config.yml","hash":"54fcd5125c6f837d3c69e263c26356dc4746ea2b","modified":1535100007000},{"_id":"themes/hexo-theme-next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1535099702000},{"_id":"themes/hexo-theme-next/package.json","hash":"036d3a1346203d2f1a3958024df7f74e7ac07bfe","modified":1535099702000},{"_id":"source/_posts/AOP.md","hash":"b259608ed38249344ab5f489f1c5c66d76806336","modified":1540554589000},{"_id":"source/_posts/CORS.md","hash":"5e217a07bb7256b696d5affbf7847553a5cba9c4","modified":1562031922392},{"_id":"source/_posts/Di.md","hash":"c5398f53bf6d7e33b35690dfe75cde7c0b60369e","modified":1540455746000},{"_id":"source/_posts/babelplugin.md","hash":"fafc7da1d1f3728ab169125bf347e5cd3ecc688f","modified":1569229705446},{"_id":"source/_posts/bfc.md","hash":"1a5e2e1e2f40922d04302eec9a7a0c63efa07313","modified":1535096899000},{"_id":"source/_posts/content-type.md","hash":"0c70a10f4464844de934b587978a227377cef10b","modified":1555386468777},{"_id":"source/_posts/debug.md","hash":"afb1feb7e7eabf0c29dc6d9bbbbd9d3c9e276877","modified":1577689566339},{"_id":"source/_posts/data-structure.md","hash":"58a120bf55f6bb205a22387125db38fa8bf7b7b5","modified":1572953951749},{"_id":"source/_posts/gitcheckout.md","hash":"26570108e1d9092875da1e34936d8e7e088c503a","modified":1577763880728},{"_id":"source/_posts/event.md","hash":"c1bc81839df0abe6ed108ceb7747e95e6fd97db4","modified":1535247085000},{"_id":"source/_posts/f5.md","hash":"356224297bbbba0c6486a7995aeea5d7e0428844","modified":1543548007903},{"_id":"source/_posts/domevent.md","hash":"ee817893d03d75326bb237838a3d3b77e4dd51d5","modified":1535096899000},{"_id":"source/_posts/index.md","hash":"15cc52b747f3986742b3a69dc0db2088b390fff9","modified":1535096899000},{"_id":"source/_posts/header.md","hash":"a38228ecdadb35b3023c847300610f3b30b44361","modified":1543548002474},{"_id":"source/_posts/ifelse.md","hash":"7f7c30753981bdf98147a8a4a8cb64ea7a50a3ea","modified":1547090489867},{"_id":"source/_posts/jstype.md","hash":"18b1b7b20b3e4db015f528806c81fcf6fbb6e7f5","modified":1535096899000},{"_id":"source/_posts/ioc.md","hash":"e67d6cfd0bdeca9851d1808ea026422bd6e1c5b4","modified":1540455271000},{"_id":"source/_posts/normalize.md","hash":"7df2e088ff5c80272d3b84191d9cf7a5f0e3d4be","modified":1550565436487},{"_id":"source/_posts/performance.md","hash":"74036855e631757b1bb1e7335de93d3f4d037dd0","modified":1535096899000},{"_id":"source/_posts/review.md","hash":"82b69e7b3e6685e28e987cf8d45304ba52d6eed2","modified":1535096899000},{"_id":"source/_posts/pwa.md","hash":"2cdfa819224a8b0d4d862f393c92c10f384e0955","modified":1535096899000},{"_id":"source/_posts/react-redux.md","hash":"e7bc2ffea513d65a179232aa09c83ef8b5bbed64","modified":1558345623292},{"_id":"source/_posts/react-router.md","hash":"b58d020e3444ef599953271dcb4323d64d18a121","modified":1541768203848},{"_id":"source/_posts/watchfile.md","hash":"54cbb97c9ca6766380431c83233750a7eea8c8f0","modified":1555424351683},{"_id":"source/_posts/scroll.md","hash":"c83ed21de7a7ee9c577929fa259ce60d8ea619de","modified":1535099922000},{"_id":"source/canvas/cav.html","hash":"f3fcb4d11912f08afece2a4a49868cdd05055992","modified":1547716407134},{"_id":"source/_posts/webpack.md","hash":"34d37cb052b409973c04ee86d589722bb879cb19","modified":1570709556869},{"_id":"source/canvas/demo1.js","hash":"99b4a4d64250d79016b3808e4f6894e00d2154f6","modified":1545141546710},{"_id":"source/canvas/demo2.js","hash":"aaceef8f2ce0022e80544f27c430b4340c62d547","modified":1545382488916},{"_id":"source/canvas/index.js","hash":"59f28bea344a9c32e881b48c50c0d7ece120fd05","modified":1545140864367},{"_id":"source/event/index.html","hash":"46fa01858f5adffc6732baaa04c4fc5b3c5fcbf7","modified":1535206977000},{"_id":"source/img/.DS_Store","hash":"de9d6fc26a61acb29c9392f3bc6e655d3a314dc0","modified":1558429186180},{"_id":"source/ioc/index.js","hash":"089dd152adb09ce8bda49e4dfe3ef79f7924edab","modified":1540382778000},{"_id":"source/pwa/index.js","hash":"192300dc1d7d5f3d501085e60775528a4d2ea71c","modified":1535096899000},{"_id":"source/pwa/mainfest.json","hash":"3231742038985fbf47796e6100e570242239b108","modified":1535096899000},{"_id":"source/pwa/sw1.js","hash":"13af6af10204ff87872fa13e836f87554c998f44","modified":1535096899000},{"_id":"source/pwa/demo.html","hash":"7e805b18e6116094cd2180d04156ff6e0e34b56c","modified":1535096899000},{"_id":"source/sourcemap/index.html","hash":"aa4287e9e1b33a3751da82bafab9ebb534664b09","modified":1568615060348},{"_id":"source/structure/linklist.js","hash":"6dd9933850bc9b76c06e0643fe086af553dd12f9","modified":1576485175377},{"_id":"source/structure/data.js","hash":"9cc5dc6ed949b96f4a9aabc1562656bfb633cea6","modified":1576487374647},{"_id":"source/sourcemap/index.js","hash":"81eb5b2195cca80e92f1b1b6b0865a3051bfa854","modified":1568615060349},{"_id":"source/sourcemap/index.js.map","hash":"9742a7afb4b2e606939c98c41d0db95883ab8b6e","modified":1568615060351},{"_id":"themes/hexo-theme-next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1535099702000},{"_id":"themes/hexo-theme-next/.git/COMMIT_EDITMSG","hash":"92beb40d1a86a6509c300d948703802d656b31c9","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/config","hash":"a33539305f85ea695520b496f67659d5751acff8","modified":1535099702000},{"_id":"source/structure/sort.js","hash":"a314f88a4f97500b252d32048ec9d41000929096","modified":1576487320407},{"_id":"themes/hexo-theme-next/.git/index","hash":"8153416512e36ce7b263b337f0c4249eafa2c8a9","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/packed-refs","hash":"69237944e31c16fe545d1f47b0b1e5b1d99660da","modified":1535099702000},{"_id":"themes/hexo-theme-next/.github/ISSUE_TEMPLATE.md","hash":"50d48c47162817a3810a9d9ad51104e83947419a","modified":1535099702000},{"_id":"themes/hexo-theme-next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1535099702000},{"_id":"themes/hexo-theme-next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1535099702000},{"_id":"themes/hexo-theme-next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/de.yml","hash":"057e7df11ddeb1c8c15a5d7c5ff29430d725ec6b","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/default.yml","hash":"44ef3f26917f467459326c2c8be2f73e4d947f35","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/en.yml","hash":"7e680d9bb8f3a3a9d1ba1c9d312b3d257183dded","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/fr-FR.yml","hash":"7e4eb7011b8feee641cfb11c6e73180b0ded1c0f","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/id.yml","hash":"b5de1ea66dd9ef54cac9a1440eaa4e3f5fc011f5","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/it.yml","hash":"aa595f2bda029f73ef7bfa104b4c55c3f4e9fb4c","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/ja.yml","hash":"3c76e16fd19b262864475faa6854b718bc08c4d8","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/ko.yml","hash":"ea5b46056e73ebcee121d5551627af35cbffc900","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/nl-NL.yml","hash":"edca4f3598857dbc3cbf19ed412213329b6edd47","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/pt-BR.yml","hash":"b1694ae766ed90277bcc4daca4b1cfa19cdcb72b","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/pt.yml","hash":"44b61f2d085b827b507909a0b8f8ce31c6ef5d04","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/vi.yml","hash":"fd08d3c8d2c62965a98ac420fdaf95e54c25d97c","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/zh-Hans.yml","hash":"16ef56d0dea94638de7d200984c90ae56f26b4fe","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/zh-hk.yml","hash":"9396f41ae76e4fef99b257c93c7354e661f6e0fa","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/ru.yml","hash":"98ec6f0b7183282e11cffc7ff586ceb82400dd75","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/merge-configs.js","hash":"81e86717ecfb775986b945d17f0a4ba27532ef07","modified":1535099702000},{"_id":"themes/hexo-theme-next/languages/zh-tw.yml","hash":"50b71abb3ecc0686f9739e179e2f829cd074ecd9","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_layout.swig","hash":"da0929166674ea637e0ad454f85ad0d7bac4aff2","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/archive.swig","hash":"f0a8225feafd971419837cdb4bcfec98a4a59b2f","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/page.swig","hash":"969caaee05bdea725e99016eb63d810893a73e99","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/post.swig","hash":"b3589a8e46288a10d20e41c7a5985d2493725aec","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1535099702000},{"_id":"themes/hexo-theme-next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1535099702000},{"_id":"themes/hexo-theme-next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1535099702000},{"_id":"themes/hexo-theme-next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"source/_posts/css/postcss.md","hash":"0191b0790a7ada76777f6b8add267a203e4d9f32","modified":1535096899000},{"_id":"source/_posts/redux/redux1.md","hash":"c455cdb9bfbd8e33fe62a811571664adf7ccd787","modified":1535096899000},{"_id":"source/_posts/redux/redux2.md","hash":"7d293ee71056284a29ca4833f694768ae183cd4e","modified":1558425279972},{"_id":"source/_posts/webpack/code-splitting.md","hash":"6bca00c152249bc7bde8bb30b2563dfc4e1b0016","modified":1535096899000},{"_id":"source/_posts/webpack/loader.md","hash":"fb996f7834812b4ffb71c80f03bb51e3101d6b1f","modified":1535096899000},{"_id":"source/_posts/webpack/plugin.md","hash":"bce074830c7163f37f1417b20ba30e4cde58126c","modified":1535096899000},{"_id":"source/_posts/websocket/node.md","hash":"4dd3bd961e3018e1d0c4907c3dbc5dc3d86e45ea","modified":1535096899000},{"_id":"source/_posts/websocket/frame.md","hash":"e830c299edc51c914fb387fc1fe0945687ebd7e0","modified":1535096899000},{"_id":"source/img/bfc/1.png","hash":"073a5170e8ea6b34853b9c13d4cdcb7f3fc1dc08","modified":1535096899000},{"_id":"source/img/bfc/2.png","hash":"dcdc1c2294a080b12b25d3d6180a00c9dc1f1046","modified":1535096899000},{"_id":"source/img/bfc/4.png","hash":"e60e1ef6ae9141a6fbe082c0738e2b710dea4f23","modified":1535096899000},{"_id":"source/img/bfc/3.png","hash":"ea2033a704bca3c71c6b2930c922c048f37dda0a","modified":1535096899000},{"_id":"source/img/redux/.DS_Store","hash":"247c43e5c384cb8325cfefd652724eddcfadcdc4","modified":1558424964069},{"_id":"source/img/redux/middleware.jpg","hash":"66ec46bd39239d4772e841c33b89407ab00f6612","modified":1558424914024},{"_id":"source/ioc/v1/player.js","hash":"55a50f1f1de4b280f91c1cba88069c1a13ab3d58","modified":1540382512000},{"_id":"source/ioc/v1/team.js","hash":"48a24182fa4272297687fb37a8a33e9dc8a7a84a","modified":1540382472000},{"_id":"source/pwa/asset/sw.jpg","hash":"55965b91726892f738ba56643f2eaeb8af7fd762","modified":1535096899000},{"_id":"source/sourcemap/src/main.js","hash":"7a9252308df7754de2f63a9929a5681426c6699f","modified":1568615060353},{"_id":"source/theme/part1/index.html","hash":"c483e1c613ff5d152180c083c9212782be659deb","modified":1568951482789},{"_id":"source/sourcemap/src/log.js","hash":"11acdb3cb01a1e174f7028e7a7a14115c6d3204c","modified":1568615060352},{"_id":"themes/hexo-theme-next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1535099616000},{"_id":"themes/hexo-theme-next/.git/logs/HEAD","hash":"98a99a4b18cf2befbe23e239d117dde1b491ad7e","modified":1535206609000},{"_id":"themes/hexo-theme-next/scripts/tags/button.js","hash":"d023f10a00077f47082b0517e2ad666e6e994f60","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/label.js","hash":"2f8f41a7316372f0d1ed6b51190dc4acd3e16fff","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/lazy-image.js","hash":"eeeabede68cf263de9e6593ecf682f620da16f0a","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/note.js","hash":"64de4e9d01cf3b491ffc7d53afdf148ee5ad9779","modified":1535099702000},{"_id":"themes/hexo-theme-next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/post-copyright.swig","hash":"665a928604f99d2ba7dc4a4a9150178229568cc6","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/reward.swig","hash":"56e8d8556cf474c56ae1bef9cb7bbd26554adb07","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/sidebar.swig","hash":"6a54c3c85ff6b19d275827a327abbf4bd99b2ebf","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/wechat-subscriber.swig","hash":"39852700e4084ecccffa6d4669168e5cc0514c9e","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_macro/post.swig","hash":"446a35a2cd389f8cfc3aa38973a9b44ad0740134","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/comments.swig","hash":"4a6f5b1792b2e5262b7fdab9a716b3108e2f09c7","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/footer.swig","hash":"c4d6181f5d3db5365e622f78714af8cc58d7a45e","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/head.swig","hash":"6b94fe8f3279daea5623c49ef4bb35917ba57510","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/header.swig","hash":"ed042be6252848058c90109236ec988e392d91d4","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/vendors.swig","hash":"a266f96ad06ee87bdeae6e105a4b53cd587bbd04","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/needsharebutton.swig","hash":"5fe0447cc88a5a63b530cf0426f93c4634811876","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1535099702000},{"_id":"source/img/jstype/2.png","hash":"08957b47ee972258c8aab3d5e4c9abd49010db26","modified":1535096899000},{"_id":"source/img/performance/1.png","hash":"2051f0f5801d2e336fc95e0052ecedba7fb08a0f","modified":1535096899000},{"_id":"source/img/performance/2.png","hash":"a7e1421f5df1fcb8203c76d457fb813221aa3e85","modified":1535096899000},{"_id":"themes/hexo-theme-next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1535099702000},{"_id":"source/img/jstype/3.png","hash":"70f96b01ef09e050a5c179f40342c3179eca714d","modified":1535096899000},{"_id":"source/img/jstype/1.png","hash":"313fa0d1e78fc4fbcf5d7f1e71681a3466f4a81a","modified":1535096899000},{"_id":"source/img/pwa/3.png","hash":"cb936733f999e28e9349d189fb3d26b1b6c86929","modified":1535096899000},{"_id":"source/img/pwa/4.png","hash":"ea21e2618ecf07e76d81e24977d4f379bed83b38","modified":1535096899000},{"_id":"themes/hexo-theme-next/.git/objects/a2/e3d850aae3f8f1b6c67ff3002f7ce41892ecd0","hash":"241306ed5176a17f88de21151fcf05e6ab929a31","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/objects/d2/5721aca4e06a41237bafec5fc934cdf9cccacf","hash":"654eb59b25445797f50bb97bad03df5f8d4b63a5","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/refs/heads/master","hash":"c713f141967fa31143d1f75f69d7c4964fc75b22","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/objects/91/eb989e04f79998fd924c335513b040b4551cac","hash":"91183616612f806cccff90e32ff15af1a4d2474e","modified":1535206609000},{"_id":"themes/hexo-theme-next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/schemes/gemini.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/firestore.swig","hash":"1cd01c6e92ab1913d48e556a92bb4f28b6dc4996","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/lean-analytics.swig","hash":"fc65b9c98a0a8ab43a5e7aabff6c5f03838e09c8","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/gitment.swig","hash":"10160daceaa6f1ecf632323d422ebe2caae49ddf","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/index.swig","hash":"aa0629277d751c55c6d973e7691bf84af9b17a60","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/livere.swig","hash":"8a2e393d2e49f7bf560766d8a07cd461bf3fce4f","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/valine.swig","hash":"fcabbb241f894c9a6309c44e126cf3e8fea81fd4","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/comments/youyan.swig","hash":"8b6650f77fe0a824c8075b2659e0403e0c78a705","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/search/localsearch.swig","hash":"385c066af96bee30be2459dbec8aae1f15d382f5","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/Pisces.styl","hash":"9ab65361ba0a12a986edd103e56492644c2db0b8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_mixins/base.styl","hash":"82f9055955920ed88a2ab6a20ab02169abb2c634","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/Gemini.styl","hash":"99fbb4686ea9a3e03a4726ed7cf4d8f529034452","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/Pisces.styl","hash":"f29165e36489a87ba32d17dddfd2720d84e3f3ec","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_variables/base.styl","hash":"29c261fa6b4046322559074d75239c6b272fb8a3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1535099702000},{"_id":"source/img/pwa/2.png","hash":"3d8170ef49e9c7a6eb717abb7e6ff506a8fb0222","modified":1535096899000},{"_id":"themes/hexo-theme-next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1535099702000},{"_id":"themes/hexo-theme-next/.git/logs/refs/heads/master","hash":"98a99a4b18cf2befbe23e239d117dde1b491ad7e","modified":1535206609000},{"_id":"themes/hexo-theme-next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1535099702000},{"_id":"themes/hexo-theme-next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/base.styl","hash":"f7c44b0ee46cf2cf82a4c9455ba8d8b55299976f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Gemini/index.styl","hash":"18c3336ee3d09bd2da6a876e1336539f03d5a973","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"3b25edfa187d1bbbd0d38b50dd013cef54758abf","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/_menu.styl","hash":"4aac01962520d60b03b23022ab601ad4bd19c08c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9d16fa3c14ed76b71229f022b63a02fd0f580958","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1535099702000},{"_id":"source/img/pwa/1.png","hash":"59f1ce1a903ed76b8434af748258d6172da506d1","modified":1535096899000},{"_id":"themes/hexo-theme-next/.git/logs/refs/remotes/origin/HEAD","hash":"3fa8302e1213bb25857d86f680d8ef390dce85bc","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/footer/footer.styl","hash":"7905a7f625702b45645d8be1268cb8af3f698c70","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/highlight/highlight.styl","hash":"25dc25f61a232f03ca72472b7852f882448ec185","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-expand.styl","hash":"535b3b4f8cb1eec2558e094320e7dfb01f94c0e7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-meta.styl","hash":"aea21141015ca8c409d8b33e3e34ec505f464e93","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-title.styl","hash":"d5a4e4fc17f1f7e7c3a61b52d8e2e9677e139de7","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"0a6c0efffdf18bddbc1d1238feaed282b09cd0fe","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/post/post.styl","hash":"262debfd4442fa03d9919ceb88b948339df03fb0","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"12937cae17c96c74d5c58db6cb29de3b2dfa14a2","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/sidebar.styl","hash":"50305b6ad7d09d2ffa4854e39f41ec1f4fe984fd","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/full-image.styl","hash":"37e951e734a252fe8a81f452b963df2ba90bfe90","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_common/components/third-party/third-party.styl","hash":"1ccfbd4d0f5754b2dc2719a91245c95f547a7652","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1535099702000},{"_id":"themes/hexo-theme-next/.git/objects/pack/pack-c612b977fdee8f070a000761134eeb6350850a38.idx","hash":"baccc333989b5a1b1719965c6c3a9891cce61ff6","modified":1535099701000},{"_id":"themes/hexo-theme-next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1535099702000},{"_id":"themes/hexo-theme-next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1535099702000},{"_id":"themes/hexo-theme-next/.git/objects/pack/pack-c612b977fdee8f070a000761134eeb6350850a38.pack","hash":"1310fd9358c94811f585a7fa3724d7431f130898","modified":1535099701000},{"_id":"source/img/watchfile/md51.gif","hash":"ee8ed90f330134ef4c46db69ca9af77fd4771d51","modified":1555423100800},{"_id":"source/img/watchfile/watch1.gif","hash":"d183ad2f874747b2839416f3b9abb2cd4fb73447","modified":1555421766608},{"_id":"source/img/watchfile/watchFile.gif","hash":"619ccaa8479ca06c946814252ea3a86e2737f8a3","modified":1555468761053}],"Category":[],"Data":[],"Page":[{"_content":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src https://*;\">\n    <title>canvas</title>\n</head>\n\n<body>\n\n    \n    <div id='root'>\n    </div>\n    <canvas id=\"tutorial\" width=\"150\" height=\"150\">current stock price: $3.15 +0.15</canvas>\n    <!-- <script src=\"./index.js\"></script> -->\n    <script src=\"./demo2.js\"></script>\n</body>\n\n</html>\n","source":"canvas/cav.html","raw":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src https://*;\">\n    <title>canvas</title>\n</head>\n\n<body>\n\n    \n    <div id='root'>\n    </div>\n    <canvas id=\"tutorial\" width=\"150\" height=\"150\">current stock price: $3.15 +0.15</canvas>\n    <!-- <script src=\"./index.js\"></script> -->\n    <script src=\"./demo2.js\"></script>\n</body>\n\n</html>\n","date":"2019-01-17T09:13:27.134Z","updated":"2019-01-17T09:13:27.134Z","path":"canvas/cav.html","title":"","comments":1,"layout":"page","_id":"ck4tbvt120001gw92m7bcb8o8","content":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src https://*;\">\n    <title>canvas</title>\n</head>\n\n<body>\n\n    \n    <div id=\"root\">\n    </div>\n    <canvas id=\"tutorial\" width=\"150\" height=\"150\">current stock price: $3.15 +0.15</canvas>\n    <!-- <script src=\"./index.js\"></script> -->\n    <script src=\"./demo2.js\"></script>\n</body>\n\n</html>\n","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src https://*;\">\n    <title>canvas</title>\n</head>\n\n<body>\n\n    \n    <div id=\"root\">\n    </div>\n    <canvas id=\"tutorial\" width=\"150\" height=\"150\">current stock price: $3.15 +0.15</canvas>\n    <!-- <script src=\"./index.js\"></script> -->\n    <script src=\"./demo2.js\"></script>\n</body>\n\n</html>\n"},{"_content":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            var ctx = canvas.getContext(\"2d\");\n\n            ctx.fillStyle = \"rgb(200,0,0)\";\n            ctx.fillRect(10, 10, 55, 50);\n\n            ctx.fillStyle = \"rgba(0, 0, 200, 0.5)\";\n            ctx.fillRect(30, 30, 55, 50);\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","source":"canvas/demo1.js","raw":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            var ctx = canvas.getContext(\"2d\");\n\n            ctx.fillStyle = \"rgb(200,0,0)\";\n            ctx.fillRect(10, 10, 55, 50);\n\n            ctx.fillStyle = \"rgba(0, 0, 200, 0.5)\";\n            ctx.fillRect(30, 30, 55, 50);\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","date":"2018-12-18T13:59:06.710Z","updated":"2018-12-18T13:59:06.710Z","path":"canvas/demo1.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt140003gw92dy6pmwl5","content":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            var ctx = canvas.getContext(\"2d\");\n\n            ctx.fillStyle = \"rgb(200,0,0)\";\n            ctx.fillRect(10, 10, 55, 50);\n\n            ctx.fillStyle = \"rgba(0, 0, 200, 0.5)\";\n            ctx.fillRect(30, 30, 55, 50);\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","site":{"data":{}},"excerpt":"","more":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            var ctx = canvas.getContext(\"2d\");\n\n            ctx.fillStyle = \"rgb(200,0,0)\";\n            ctx.fillRect(10, 10, 55, 50);\n\n            ctx.fillStyle = \"rgba(0, 0, 200, 0.5)\";\n            ctx.fillRect(30, 30, 55, 50);\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()"},{"_content":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            ctx.beginPath();\n            ctx.lineWidth = 10;\n            ctx.moveTo(20, 20);\n            ctx.lineTo(100, 50);\n            ctx.lineTo(20, 100);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(100, 100);\n            ctx.lineTo(100, 150);\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","source":"canvas/demo2.js","raw":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            ctx.beginPath();\n            ctx.lineWidth = 10;\n            ctx.moveTo(20, 20);\n            ctx.lineTo(100, 50);\n            ctx.lineTo(20, 100);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(100, 100);\n            ctx.lineTo(100, 150);\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","date":"2018-12-21T08:54:48.916Z","updated":"2018-12-21T08:54:48.916Z","path":"canvas/demo2.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt160005gw928a9ophpe","content":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            ctx.beginPath();\n            ctx.lineWidth = 10;\n            ctx.moveTo(20, 20);\n            ctx.lineTo(100, 50);\n            ctx.lineTo(20, 100);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(100, 100);\n            ctx.lineTo(100, 150);\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()","site":{"data":{}},"excerpt":"","more":"var Demo1 =  {\n    init(){\n        var canvas = document.querySelector('#tutorial');\n        var ctx = canvas.getContext('2d');\n        if(ctx){\n            ctx.beginPath();\n            ctx.lineWidth = 10;\n            ctx.moveTo(20, 20);\n            ctx.lineTo(100, 50);\n            ctx.lineTo(20, 100);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(100, 100);\n            ctx.lineTo(100, 150);\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n        }else{\n            alert('')\n        }\n    }\n    \n}\nDemo1.init()"},{"_content":"import Demo1 from './demo1'\nfunction draw(){\n    var d1 = new Demo1()\n}\ndraw()","source":"canvas/index.js","raw":"import Demo1 from './demo1'\nfunction draw(){\n    var d1 = new Demo1()\n}\ndraw()","date":"2018-12-18T13:47:44.367Z","updated":"2018-12-18T13:47:44.367Z","path":"canvas/index.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt180007gw92zrw21dd2","content":"import Demo1 from './demo1'\nfunction draw(){\n    var d1 = new Demo1()\n}\ndraw()","site":{"data":{}},"excerpt":"","more":"import Demo1 from './demo1'\nfunction draw(){\n    var d1 = new Demo1()\n}\ndraw()"},{"_content":"const  Player = require('./v1/player');\nplayer.info()","source":"ioc/index.js","raw":"const  Player = require('./v1/player');\nplayer.info()","date":"2018-10-24T12:06:18.000Z","updated":"2018-10-24T12:06:18.000Z","path":"ioc/index.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt1a0009gw920chphn7r","content":"const  Player = require('./v1/player');\nplayer.info()","site":{"data":{}},"excerpt":"","more":"const  Player = require('./v1/player');\nplayer.info()"},{"_content":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <div><input type='text' id='el' value=10 /></div>\n    <div>5<span id='el2'>50</span></div>\n</body>\n<script>\n    // \n    class Event1 {\n        constructor() {\n            // \n            this._events = {}\n        }\n        // typecall\n        on(type, call) {\n            let funs = this._events[type]\n            // \n            // push\n            if (funs) {\n                funs.push(call)\n            } else {\n                this._events.type = []\n                this._events.type.push(call)\n            }\n        }\n        // \n        trigger(type) {\n            let funs = this._events.type,\n                [first, ...other] = Array.from(arguments)\n            //  \n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    cb.apply(this, other);\n                }\n            }\n        }\n        // \n        off(type, func) {\n            let funs = this._events.type\n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    if (cb === func) {\n                        funs.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n            return this\n        }\n    }\n    const count = document.querySelector('#el'),\n        total1 = document.querySelector('#el2');\n    const event1 = new Event1()\n    const eventAwesome = new CustomEvent('priceChange', {\n        bubbles: true,\n        detail: { getprice: () => count.value }\n    });\n    event1.on('priceChange', function (e) {\n        var price = count.value || 0\n        total1.innerHTML = 5 * price\n    })\n    el.addEventListener('change', function (e) {\n        var val = e.target.value\n        event1.trigger('priceChange')\n    });\n    /*************  *************/\n    // document.addEventListener('priceChange', function (e) {\n    //     var price = e.detail.getprice() || 0\n    //     total1.innerHTML=5 * price\n    //   })\n    // el.addEventListener('change', function (e) {\n    //   var val = e.target.value\n    //   e.target.dispatchEvent(eventAwesome)\n    // });\n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","source":"event/index.html","raw":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <div><input type='text' id='el' value=10 /></div>\n    <div>5<span id='el2'>50</span></div>\n</body>\n<script>\n    // \n    class Event1 {\n        constructor() {\n            // \n            this._events = {}\n        }\n        // typecall\n        on(type, call) {\n            let funs = this._events[type]\n            // \n            // push\n            if (funs) {\n                funs.push(call)\n            } else {\n                this._events.type = []\n                this._events.type.push(call)\n            }\n        }\n        // \n        trigger(type) {\n            let funs = this._events.type,\n                [first, ...other] = Array.from(arguments)\n            //  \n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    cb.apply(this, other);\n                }\n            }\n        }\n        // \n        off(type, func) {\n            let funs = this._events.type\n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    if (cb === func) {\n                        funs.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n            return this\n        }\n    }\n    const count = document.querySelector('#el'),\n        total1 = document.querySelector('#el2');\n    const event1 = new Event1()\n    const eventAwesome = new CustomEvent('priceChange', {\n        bubbles: true,\n        detail: { getprice: () => count.value }\n    });\n    event1.on('priceChange', function (e) {\n        var price = count.value || 0\n        total1.innerHTML = 5 * price\n    })\n    el.addEventListener('change', function (e) {\n        var val = e.target.value\n        event1.trigger('priceChange')\n    });\n    /*************  *************/\n    // document.addEventListener('priceChange', function (e) {\n    //     var price = e.detail.getprice() || 0\n    //     total1.innerHTML=5 * price\n    //   })\n    // el.addEventListener('change', function (e) {\n    //   var val = e.target.value\n    //   e.target.dispatchEvent(eventAwesome)\n    // });\n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","date":"2018-08-25T14:22:57.000Z","updated":"2018-08-25T14:22:57.000Z","path":"event/index.html","title":"","comments":1,"layout":"page","_id":"ck4tbvt1c000bgw92cxxzg8b1","content":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <div><input type=\"text\" id=\"el\" value=\"10\"></div>\n    <div>5<span id=\"el2\">50</span></div>\n</body>\n<script>\n    // \n    class Event1 {\n        constructor() {\n            // \n            this._events = {}\n        }\n        // typecall\n        on(type, call) {\n            let funs = this._events[type]\n            // \n            // push\n            if (funs) {\n                funs.push(call)\n            } else {\n                this._events.type = []\n                this._events.type.push(call)\n            }\n        }\n        // \n        trigger(type) {\n            let funs = this._events.type,\n                [first, ...other] = Array.from(arguments)\n            //  \n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    cb.apply(this, other);\n                }\n            }\n        }\n        // \n        off(type, func) {\n            let funs = this._events.type\n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    if (cb === func) {\n                        funs.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n            return this\n        }\n    }\n    const count = document.querySelector('#el'),\n        total1 = document.querySelector('#el2');\n    const event1 = new Event1()\n    const eventAwesome = new CustomEvent('priceChange', {\n        bubbles: true,\n        detail: { getprice: () => count.value }\n    });\n    event1.on('priceChange', function (e) {\n        var price = count.value || 0\n        total1.innerHTML = 5 * price\n    })\n    el.addEventListener('change', function (e) {\n        var val = e.target.value\n        event1.trigger('priceChange')\n    });\n    /*************  *************/\n    // document.addEventListener('priceChange', function (e) {\n    //     var price = e.detail.getprice() || 0\n    //     total1.innerHTML=5 * price\n    //   })\n    // el.addEventListener('change', function (e) {\n    //   var val = e.target.value\n    //   e.target.dispatchEvent(eventAwesome)\n    // });\n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <div><input type=\"text\" id=\"el\" value=\"10\"></div>\n    <div>5<span id=\"el2\">50</span></div>\n</body>\n<script>\n    // \n    class Event1 {\n        constructor() {\n            // \n            this._events = {}\n        }\n        // typecall\n        on(type, call) {\n            let funs = this._events[type]\n            // \n            // push\n            if (funs) {\n                funs.push(call)\n            } else {\n                this._events.type = []\n                this._events.type.push(call)\n            }\n        }\n        // \n        trigger(type) {\n            let funs = this._events.type,\n                [first, ...other] = Array.from(arguments)\n            //  \n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    cb.apply(this, other);\n                }\n            }\n        }\n        // \n        off(type, func) {\n            let funs = this._events.type\n            if (funs) {\n                let i = 0,\n                    j = funs.length;\n                for (i = 0; i < j; i++) {\n                    let cb = funs[i];\n                    if (cb === func) {\n                        funs.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n            return this\n        }\n    }\n    const count = document.querySelector('#el'),\n        total1 = document.querySelector('#el2');\n    const event1 = new Event1()\n    const eventAwesome = new CustomEvent('priceChange', {\n        bubbles: true,\n        detail: { getprice: () => count.value }\n    });\n    event1.on('priceChange', function (e) {\n        var price = count.value || 0\n        total1.innerHTML = 5 * price\n    })\n    el.addEventListener('change', function (e) {\n        var val = e.target.value\n        event1.trigger('priceChange')\n    });\n    /*************  *************/\n    // document.addEventListener('priceChange', function (e) {\n    //     var price = e.detail.getprice() || 0\n    //     total1.innerHTML=5 * price\n    //   })\n    // el.addEventListener('change', function (e) {\n    //   var val = e.target.value\n    //   e.target.dispatchEvent(eventAwesome)\n    // });\n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>"},{"_content":"function registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}\n// \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n}\nwindow.onload = function () {\n    var myImage = document.querySelector('#root img'),\n        src = './asset/sw.jpg';\n    myImage.src = src;\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    if (!('PushManager' in window)) {\n        return;\n    }\n    //   \n    // registerServiceWorker()\n    // \n    getPermission()\n}","source":"pwa/index.js","raw":"function registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}\n// \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n}\nwindow.onload = function () {\n    var myImage = document.querySelector('#root img'),\n        src = './asset/sw.jpg';\n    myImage.src = src;\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    if (!('PushManager' in window)) {\n        return;\n    }\n    //   \n    // registerServiceWorker()\n    // \n    getPermission()\n}","date":"2018-08-24T07:48:19.000Z","updated":"2018-08-24T07:48:19.000Z","path":"pwa/index.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt1e000dgw92q1gqznev","content":"function registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}\n// \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n}\nwindow.onload = function () {\n    var myImage = document.querySelector('#root img'),\n        src = './asset/sw.jpg';\n    myImage.src = src;\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    if (!('PushManager' in window)) {\n        return;\n    }\n    //   \n    // registerServiceWorker()\n    // \n    getPermission()\n}","site":{"data":{}},"excerpt":"","more":"function registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}\n// \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n}\nwindow.onload = function () {\n    var myImage = document.querySelector('#root img'),\n        src = './asset/sw.jpg';\n    myImage.src = src;\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    if (!('PushManager' in window)) {\n        return;\n    }\n    //   \n    // registerServiceWorker()\n    // \n    getPermission()\n}"},{"_content":"{\n  \"name\": \"PWA\",\n  \"short_name\": \"PWA\",\n  \"description\": \"demo\",\n  \"icons\": [{\n      \"src\": \"https://h5.sinaimg.cn/upload/696/2017/08/23/weibologo.png\",\n      \"sizes\": \"606x606\",\n      \"type\": \"image/png\"\n    }],\n  \"start_url\": \"/pwa/demo.html\",\n  \"scope\": \"/\",\n  \"display\": \"standalone\",\n  \"orientation\": \"portrait\",\n  \"background_color\": \"#F3F3F3\",\n  \"theme_color\": \"#F3F3F3\",\n  \"related_applications\": [],\n  \"prefer_related_applications\": false\n}\n","source":"pwa/mainfest.json","raw":"{\n  \"name\": \"PWA\",\n  \"short_name\": \"PWA\",\n  \"description\": \"demo\",\n  \"icons\": [{\n      \"src\": \"https://h5.sinaimg.cn/upload/696/2017/08/23/weibologo.png\",\n      \"sizes\": \"606x606\",\n      \"type\": \"image/png\"\n    }],\n  \"start_url\": \"/pwa/demo.html\",\n  \"scope\": \"/\",\n  \"display\": \"standalone\",\n  \"orientation\": \"portrait\",\n  \"background_color\": \"#F3F3F3\",\n  \"theme_color\": \"#F3F3F3\",\n  \"related_applications\": [],\n  \"prefer_related_applications\": false\n}\n","date":"2018-08-24T07:48:19.000Z","updated":"2018-08-24T07:48:19.000Z","path":"pwa/mainfest.json","layout":"false","title":"","comments":1,"_id":"ck4tbvt1i000ggw92mm3fov47","content":"{\"name\":\"PWA\",\"short_name\":\"PWA\",\"description\":\"demo\",\"icons\":[{\"src\":\"https://h5.sinaimg.cn/upload/696/2017/08/23/weibologo.png\",\"sizes\":\"606x606\",\"type\":\"image/png\"}],\"start_url\":\"/pwa/demo.html\",\"scope\":\"/\",\"display\":\"standalone\",\"orientation\":\"portrait\",\"background_color\":\"#F3F3F3\",\"theme_color\":\"#F3F3F3\",\"related_applications\":[],\"prefer_related_applications\":false}","site":{"data":{}},"excerpt":"","more":"{\"name\":\"PWA\",\"short_name\":\"PWA\",\"description\":\"demo\",\"icons\":[{\"src\":\"https://h5.sinaimg.cn/upload/696/2017/08/23/weibologo.png\",\"sizes\":\"606x606\",\"type\":\"image/png\"}],\"start_url\":\"/pwa/demo.html\",\"scope\":\"/\",\"display\":\"standalone\",\"orientation\":\"portrait\",\"background_color\":\"#F3F3F3\",\"theme_color\":\"#F3F3F3\",\"related_applications\":[],\"prefer_related_applications\":false}"},{"_content":"const PRECACHE = 'precache_test_1'\nconst RUNTIME = 'runtime';\nconst PRECACHE_URLS = [\n    '/',\n    'pwa/asset/sw.jpg',\n    'pwa/index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n        caches.open(PRECACHE).then(cache=>{\n            cache.addAll(PRECACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})\nself.addEventListener('activate', e => {\n      \n    e.waitUntil(\n        caches.keys().then(cacheNames=>{\n          return Promise.all(\n            cacheNames.map(function(cacheName) {\n              if (cacheName !== PRECACHE) {\n                return caches.delete(cacheName);\n              }\n            })\n      )}).then(() => self.clients.claim())\n   )\n  })\n  \n  \n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          return response\n        }\n        return fetch(e.request.url)\n      })\n    )\n  });","source":"pwa/sw1.js","raw":"const PRECACHE = 'precache_test_1'\nconst RUNTIME = 'runtime';\nconst PRECACHE_URLS = [\n    '/',\n    'pwa/asset/sw.jpg',\n    'pwa/index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n        caches.open(PRECACHE).then(cache=>{\n            cache.addAll(PRECACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})\nself.addEventListener('activate', e => {\n      \n    e.waitUntil(\n        caches.keys().then(cacheNames=>{\n          return Promise.all(\n            cacheNames.map(function(cacheName) {\n              if (cacheName !== PRECACHE) {\n                return caches.delete(cacheName);\n              }\n            })\n      )}).then(() => self.clients.claim())\n   )\n  })\n  \n  \n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          return response\n        }\n        return fetch(e.request.url)\n      })\n    )\n  });","date":"2018-08-24T07:48:19.000Z","updated":"2018-08-24T07:48:19.000Z","path":"pwa/sw1.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt1j000igw92gb5zz0vk","content":"const PRECACHE = 'precache_test_1'\nconst RUNTIME = 'runtime';\nconst PRECACHE_URLS = [\n    '/',\n    'pwa/asset/sw.jpg',\n    'pwa/index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n        caches.open(PRECACHE).then(cache=>{\n            cache.addAll(PRECACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})\nself.addEventListener('activate', e => {\n      \n    e.waitUntil(\n        caches.keys().then(cacheNames=>{\n          return Promise.all(\n            cacheNames.map(function(cacheName) {\n              if (cacheName !== PRECACHE) {\n                return caches.delete(cacheName);\n              }\n            })\n      )}).then(() => self.clients.claim())\n   )\n  })\n  \n  \n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          return response\n        }\n        return fetch(e.request.url)\n      })\n    )\n  });","site":{"data":{}},"excerpt":"","more":"const PRECACHE = 'precache_test_1'\nconst RUNTIME = 'runtime';\nconst PRECACHE_URLS = [\n    '/',\n    'pwa/asset/sw.jpg',\n    'pwa/index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n        caches.open(PRECACHE).then(cache=>{\n            cache.addAll(PRECACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})\nself.addEventListener('activate', e => {\n      \n    e.waitUntil(\n        caches.keys().then(cacheNames=>{\n          return Promise.all(\n            cacheNames.map(function(cacheName) {\n              if (cacheName !== PRECACHE) {\n                return caches.delete(cacheName);\n              }\n            })\n      )}).then(() => self.clients.claim())\n   )\n  })\n  \n  \n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          return response\n        }\n        return fetch(e.request.url)\n      })\n    )\n  });"},{"_content":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>service worker</title>\n    <link rel=\"manifest\" href=\"./mainfest.json\">\n</head>\n<body>\n<div id='root'>\n<div>simple PWA demo</div>    \n\n<img alt=\"\" style=\"width:200px;height:200px\"/>\n</div>\n\n<script src=\"./index.js\"></script>\n</body>\n</html>","source":"pwa/demo.html","raw":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>service worker</title>\n    <link rel=\"manifest\" href=\"./mainfest.json\">\n</head>\n<body>\n<div id='root'>\n<div>simple PWA demo</div>    \n\n<img alt=\"\" style=\"width:200px;height:200px\"/>\n</div>\n\n<script src=\"./index.js\"></script>\n</body>\n</html>","date":"2018-08-24T07:48:19.000Z","updated":"2018-08-24T07:48:19.000Z","path":"pwa/demo.html","title":"","comments":1,"layout":"page","_id":"ck4tbvt6u0013gw92k4p6whrn","content":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>service worker</title>\n    <link rel=\"manifest\" href=\"./mainfest.json\">\n</head>\n<body>\n<div id=\"root\">\n<div>simple PWA demo</div>    \n\n<img alt=\"\" style=\"width:200px;height:200px\">\n</div>\n\n<script src=\"./index.js\"></script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>service worker</title>\n    <link rel=\"manifest\" href=\"./mainfest.json\">\n</head>\n<body>\n<div id=\"root\">\n<div>simple PWA demo</div>    \n\n<img alt=\"\" style=\"width:200px;height:200px\">\n</div>\n\n<script src=\"./index.js\"></script>\n</body>\n</html>"},{"_content":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, minimal-ui\" />\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"format-detection\" content=\"email=no\" />\n    <title></title>\n</head>\n\n<body>\n    sdsddsd\n    <div id=\"root\"></div>\n</body>\n<script type=\"text/javascript\" src=\"./index.js\"></script>\n</html>","source":"sourcemap/index.html","raw":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, minimal-ui\" />\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"format-detection\" content=\"email=no\" />\n    <title></title>\n</head>\n\n<body>\n    sdsddsd\n    <div id=\"root\"></div>\n</body>\n<script type=\"text/javascript\" src=\"./index.js\"></script>\n</html>","date":"2019-09-16T06:24:20.349Z","updated":"2019-09-16T06:24:20.348Z","path":"sourcemap/index.html","title":"","comments":1,"layout":"page","_id":"ck4tbvt6u0014gw92tvokjlju","content":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"description\" content=\"\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, minimal-ui\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"format-detection\" content=\"email=no\">\n    <title></title>\n</head>\n\n<body>\n    sdsddsd\n    <div id=\"root\"></div>\n</body>\n<script type=\"text/javascript\" src=\"./index.js\"></script>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"description\" content=\"\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, minimal-ui\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"format-detection\" content=\"email=no\">\n    <title></title>\n</head>\n\n<body>\n    sdsddsd\n    <div id=\"root\"></div>\n</body>\n<script type=\"text/javascript\" src=\"./index.js\"></script>\n</html>"},{"_content":"import { isNumber } from \"util\";\n\n// \n/** \n *   [1,null,2,3]\n * 1,2,3\n*/\n\n/** \n * \n * ,root\n*/\n// \nfunction inorderTraversal(root,arr){\n    // \n    if(root){\n        inorderTraversal(root.left,arr)\n        array.push(root.val)\n        inorderTraversal(root.right,arr)\n\n    }\n    return array;   \n}\nvar \n// \n/**\n * \n * \n * \n * 1\n * 2\n * 312\n*/\nfunction inorderTraversal(root) {\n    // \n    var arr = [],\n        // \n        stack = [],\n        item = root\n        \n    //  \n    while(item || stack.length){\n        // ,\n        // ,\n        if(item){\n            stack.push(item)\n            item = item.left\n        }\n        // \n        item = stack.pop()\n        // \n        arr.push(item.val)\n        // \n        item = item.right\n    }    \n    return array;\n}\n// \n// \nfunction firstTravel(){\n    // \n    var result = [],\n        // \n        stack = [],\n        node = root\n    //     \n    while(node || stack.length ){  \n        // \n        while(node.left){\n            stack.push(node)\n            // \n            result.push(node.value)\n            node = node.left \n        } \n        // \n        node = stack.pop()\n        // \n        node = node.right\n    }  \n\n}\n// \n// \n// \nfunction lastTravel() {\n    // \n    var result = [],\n        // \n        stack = [],\n        // \n        last = null,\n        node = root\n    //     \n    while (node || stack.length) {\n        // \n        while (node.left) {\n            stack.push(node)\n            node = node.left\n        }\n        //  \n        var traget = stack[stack.length-1]\n        // \n        if (traget.right && last !== traget.right){\n            // \n            node = node.right    \n        }else{\n            // \n            node = stack.pop()\n            // \n            result.push(node.value)\n            // \n            last = node\n            // \n            node= null\n        }\n    }\n}\n\n\n/** \n * 1+2+3+...+nforwhileifelseswitchcaseA?B:C\n * if else  && \n * 1n0 \n * 2 n(n+1)/2 = (n+n)/2  n+n  \n*/\nfunction Sum_Solution(n){\n    return n && (n+Sum_Solution(n-1))\n}\nfunction Sum_Solution(n){\n    //bba2b\n    return (Math.pow(n,2)+n) >> 1\n}\n\n\n/**\n * +-*/\n *   +\n * \n * (1^1=0 0^1=1 0^0=0)\n *  1&1=1 1&0=0 0&0=0\n * \n*/\n\nfunction add(num1,num2){\n    if(num2 == 0){\n        return num1\n    }\n    // \n    return add(num1 ^ num2, (num1 & num2) << 1)\n}\n// \nfunction add(num1,num2){\n    while(num2!=0){\n        // \n        var res = num1 ^ num2;\n        num2 = (num1 & num2)>>1;\n        num1 = res\n    }\n    return res\n}\n\n\n// \nfunction isOdd(num){\n    if (Number(num)){\n        return num % 2 == 0\n    } \n}\n// \nfunction isOdd(num) {\n    if (Number(num)) {\n        return num&1 != 0\n    }\n}\n\n// 2\n// 48\n//  1 10010001  0110111  0 \nfunction check(num){\n    return num & (num-1) == 0\n}\n// \n// 2/2 = 1 2%2 = 0  0 \n// \nfunction check(num) {\n    if (num != 1) {\n        while (num != 1) {\n            if (num % 2 == 0) {\n                num = num / 2;\n            } else {\n                return false;\n            }\n\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// 1\nfunction get1(num){\n    if(Number(num)){\n        var res = [],\n            count = 0\n            res1 = num,\n            res2 = 0\n        while (res1 > 0){\n            // \n            res2 = res1 % 2\n            // \n            res1 = parseInt(res1/2) \n            \n            res.push(res2)\n            if(res2 == 1){\n                count++\n            }\n        }\n        console.log('>>>',res.reverse().toString())\n        console.log('1>>', count)\n    }\n}\n\n// 1  \n// 0\nfunction get1(num){\n    var count = 0\n    while (num != 0) {\n        count += num & 1\n        // \n        num >>= 1\n    }\n    console.log(count)\n    return count\n}\n\n\n/**\n * \n * 1\n * 20\n */\n\n function get1Num(arr){\n    var counts = [] \n    arr.forEach(item => {\n        // \n        var index = counts.indexOf(item)\n        if (index<0){\n            counts.push(item)\n        }else{\n            // \n            // \n            // counts.slice(index,1)\n            // splice \n            counts.splice(index,1)\n        }\n    })\n    console.log(counts)\n    return counts[0]\n }\n\n//  \nfunction get1Num(arr) {\n    if(!arr instanceof Array){\n        return ''\n    }\n    var counts = 0\n    arr.forEach(item => {\n        counts = counts ^ item\n    })\n    console.log(counts)\n    return counts[0]\n}\n\n\n/**\n * \n *  \n * 1 \n * 2 \n * 11\n * \n * 1-1000,,,,\n *  \n *  23 1 \n * 2  1=2 \n * js \n * Math.ceil() ceil \n * Math.floor() floor\n * Math.round() round\n * parseInt() floor\n * parseInt(2.2) // 2\n * Math.floor(2.2) //2\n * Math.ceil(2.2) // 3\n * Math.round(2.2) // 2\n **/\n\nfunction getTwo(arr){\n    var val=0,\n    //  \n        position = 0,\n        // res1\n        result1 = 0,\n        result2 = 0\n   //      \n   arr.forEach(item => {\n            val = val ^ item\n        }) \n    // k1\n    while((val & 1 == 0 )&& val <64){\n        // \n        val = val >> 1\n        position++\n    }\n    arr.forEach(item => {\n        // k0 \n        if((item >> position & 1) == 1){\n            result1 ^= item\n        }else{\n            result2 ^= item\n        }\n    })\n    console.log('x,y>>',result1,result2)\n}\n\n\n\n/**\n * 235Ugly Number\n * 68147\n * 1N\n *  \n *  235n0 - n-1235\n * 0 - n-1235n-1\n * 0 - n\n * \n * \n * 0-n-1 \n * *2 *3* 5 n-1 \n * \n * *2 * 3 * 5 n-1 \n * \n */\n  \n function getUglyNumber(n){\n    //  \n    var i = j = k = 0,\n        // 1\n        arr = [1]\n    // 0     \n    if(n == 0){\n        return arr[0]\n    }\n    // \n    while(arr.length <= n){\n        // next \n        arr.push(Math.min(arr[i]*2,arr[j]*3,arr[k]*5))\n        var currentItem = arr[arr.length - 1]\n        //  n-1\n        while (arr[i] * 2 <= currentItem){\n            i++\n        }\n        while (arr[j] * 3 <= currentItem) {\n            j++\n        }\n        while (arr[k] * 5 <= currentItem) {\n            k++\n        }\n    }\n    console.log(arr[n])\n    return arr[n]\n }\n\n\n\n /**\n  * \n  * doublebaseintexponentbaseexponent\n  * \n  * \n  * exponent 0\n  * base0\n  * Math.abs absolute value \n  * */  \nfunction getPow(base, exponent){\n    if (exponent !== +exponent){\n        throw Error('')\n    }\n    if (exponent == 0){\n        return 1\n    }\n    if(exponent > 1){\n        var result = base\n        for(var i =1;i<exponent;i++){\n            result *= base\n        }\n        return result\n    }\n    var num = Math.abs(exponent)\n    for (var i = 1; i < exponent; i++) {\n        result *= base\n    }\n    return result?1/result:false\n} \n\n\n/**\n * 1~131,100~13001\n * 1~1311101112136,\n * ACMer,,11n1\n */\n/**\n * 11\n * 11 \n * 012\n * 0\n * 11314153+1 0\n * 222(2+1)+(0+1)*10 = 13\n * abcdec\n * c = 0 :  ab*100 \n * c = 1 :  ab*100 + de + 1 \n * c > 2 :  (ab+1) * 100 \n * \n * 210 \n * 1 21\n * 1 2*10+1\n * 1 (0+1)*100\n * */ \nfunction getTotalNum(n){\n    let count = 0;\n    let i = 1;\n    let high = low = current = level = 0;\n    let length = n.toString().length;\n    while (i <= length) {\n        level = Math.pow(10, i - 1); //i 1 10 100 ...\n        high = parseInt(n / (level * 10));\n        low = n % level;\n        current = parseInt(n / level) % 10;\n        if (current === 0) {\n            count += (high * level);\n        } else if (current === 1) {\n            count += (high * level + low + 1);\n        } else {\n            count += ((high + 1) * level);\n        }\n        i++;\n    }\n    return count;\n} \n\n\n// \nfunction getTotal(n) {\n    var current = heigh = low = level = 0\n    // \n    var i = 0\n    // \n    var len = n.toString().length\n    // \n    var total = 0\n    for (i; i < len; i++) {\n        level = Math.pow(10, i)\n        // value\n        heigh = Math.floor(n / (10 * level)) % 10\n        current = n % (10 * level)\n        low = n % (level)\n        if (current == 0) {\n            total += heigh * level\n        } else if (current == 1) {\n            total += heigh * level + low + 1\n        } else {\n            total += (heigh + 1) * level\n        }\n    }\n    return total\n}","source":"structure/data.js","raw":"import { isNumber } from \"util\";\n\n// \n/** \n *   [1,null,2,3]\n * 1,2,3\n*/\n\n/** \n * \n * ,root\n*/\n// \nfunction inorderTraversal(root,arr){\n    // \n    if(root){\n        inorderTraversal(root.left,arr)\n        array.push(root.val)\n        inorderTraversal(root.right,arr)\n\n    }\n    return array;   \n}\nvar \n// \n/**\n * \n * \n * \n * 1\n * 2\n * 312\n*/\nfunction inorderTraversal(root) {\n    // \n    var arr = [],\n        // \n        stack = [],\n        item = root\n        \n    //  \n    while(item || stack.length){\n        // ,\n        // ,\n        if(item){\n            stack.push(item)\n            item = item.left\n        }\n        // \n        item = stack.pop()\n        // \n        arr.push(item.val)\n        // \n        item = item.right\n    }    \n    return array;\n}\n// \n// \nfunction firstTravel(){\n    // \n    var result = [],\n        // \n        stack = [],\n        node = root\n    //     \n    while(node || stack.length ){  \n        // \n        while(node.left){\n            stack.push(node)\n            // \n            result.push(node.value)\n            node = node.left \n        } \n        // \n        node = stack.pop()\n        // \n        node = node.right\n    }  \n\n}\n// \n// \n// \nfunction lastTravel() {\n    // \n    var result = [],\n        // \n        stack = [],\n        // \n        last = null,\n        node = root\n    //     \n    while (node || stack.length) {\n        // \n        while (node.left) {\n            stack.push(node)\n            node = node.left\n        }\n        //  \n        var traget = stack[stack.length-1]\n        // \n        if (traget.right && last !== traget.right){\n            // \n            node = node.right    \n        }else{\n            // \n            node = stack.pop()\n            // \n            result.push(node.value)\n            // \n            last = node\n            // \n            node= null\n        }\n    }\n}\n\n\n/** \n * 1+2+3+...+nforwhileifelseswitchcaseA?B:C\n * if else  && \n * 1n0 \n * 2 n(n+1)/2 = (n+n)/2  n+n  \n*/\nfunction Sum_Solution(n){\n    return n && (n+Sum_Solution(n-1))\n}\nfunction Sum_Solution(n){\n    //bba2b\n    return (Math.pow(n,2)+n) >> 1\n}\n\n\n/**\n * +-*/\n *   +\n * \n * (1^1=0 0^1=1 0^0=0)\n *  1&1=1 1&0=0 0&0=0\n * \n*/\n\nfunction add(num1,num2){\n    if(num2 == 0){\n        return num1\n    }\n    // \n    return add(num1 ^ num2, (num1 & num2) << 1)\n}\n// \nfunction add(num1,num2){\n    while(num2!=0){\n        // \n        var res = num1 ^ num2;\n        num2 = (num1 & num2)>>1;\n        num1 = res\n    }\n    return res\n}\n\n\n// \nfunction isOdd(num){\n    if (Number(num)){\n        return num % 2 == 0\n    } \n}\n// \nfunction isOdd(num) {\n    if (Number(num)) {\n        return num&1 != 0\n    }\n}\n\n// 2\n// 48\n//  1 10010001  0110111  0 \nfunction check(num){\n    return num & (num-1) == 0\n}\n// \n// 2/2 = 1 2%2 = 0  0 \n// \nfunction check(num) {\n    if (num != 1) {\n        while (num != 1) {\n            if (num % 2 == 0) {\n                num = num / 2;\n            } else {\n                return false;\n            }\n\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// 1\nfunction get1(num){\n    if(Number(num)){\n        var res = [],\n            count = 0\n            res1 = num,\n            res2 = 0\n        while (res1 > 0){\n            // \n            res2 = res1 % 2\n            // \n            res1 = parseInt(res1/2) \n            \n            res.push(res2)\n            if(res2 == 1){\n                count++\n            }\n        }\n        console.log('>>>',res.reverse().toString())\n        console.log('1>>', count)\n    }\n}\n\n// 1  \n// 0\nfunction get1(num){\n    var count = 0\n    while (num != 0) {\n        count += num & 1\n        // \n        num >>= 1\n    }\n    console.log(count)\n    return count\n}\n\n\n/**\n * \n * 1\n * 20\n */\n\n function get1Num(arr){\n    var counts = [] \n    arr.forEach(item => {\n        // \n        var index = counts.indexOf(item)\n        if (index<0){\n            counts.push(item)\n        }else{\n            // \n            // \n            // counts.slice(index,1)\n            // splice \n            counts.splice(index,1)\n        }\n    })\n    console.log(counts)\n    return counts[0]\n }\n\n//  \nfunction get1Num(arr) {\n    if(!arr instanceof Array){\n        return ''\n    }\n    var counts = 0\n    arr.forEach(item => {\n        counts = counts ^ item\n    })\n    console.log(counts)\n    return counts[0]\n}\n\n\n/**\n * \n *  \n * 1 \n * 2 \n * 11\n * \n * 1-1000,,,,\n *  \n *  23 1 \n * 2  1=2 \n * js \n * Math.ceil() ceil \n * Math.floor() floor\n * Math.round() round\n * parseInt() floor\n * parseInt(2.2) // 2\n * Math.floor(2.2) //2\n * Math.ceil(2.2) // 3\n * Math.round(2.2) // 2\n **/\n\nfunction getTwo(arr){\n    var val=0,\n    //  \n        position = 0,\n        // res1\n        result1 = 0,\n        result2 = 0\n   //      \n   arr.forEach(item => {\n            val = val ^ item\n        }) \n    // k1\n    while((val & 1 == 0 )&& val <64){\n        // \n        val = val >> 1\n        position++\n    }\n    arr.forEach(item => {\n        // k0 \n        if((item >> position & 1) == 1){\n            result1 ^= item\n        }else{\n            result2 ^= item\n        }\n    })\n    console.log('x,y>>',result1,result2)\n}\n\n\n\n/**\n * 235Ugly Number\n * 68147\n * 1N\n *  \n *  235n0 - n-1235\n * 0 - n-1235n-1\n * 0 - n\n * \n * \n * 0-n-1 \n * *2 *3* 5 n-1 \n * \n * *2 * 3 * 5 n-1 \n * \n */\n  \n function getUglyNumber(n){\n    //  \n    var i = j = k = 0,\n        // 1\n        arr = [1]\n    // 0     \n    if(n == 0){\n        return arr[0]\n    }\n    // \n    while(arr.length <= n){\n        // next \n        arr.push(Math.min(arr[i]*2,arr[j]*3,arr[k]*5))\n        var currentItem = arr[arr.length - 1]\n        //  n-1\n        while (arr[i] * 2 <= currentItem){\n            i++\n        }\n        while (arr[j] * 3 <= currentItem) {\n            j++\n        }\n        while (arr[k] * 5 <= currentItem) {\n            k++\n        }\n    }\n    console.log(arr[n])\n    return arr[n]\n }\n\n\n\n /**\n  * \n  * doublebaseintexponentbaseexponent\n  * \n  * \n  * exponent 0\n  * base0\n  * Math.abs absolute value \n  * */  \nfunction getPow(base, exponent){\n    if (exponent !== +exponent){\n        throw Error('')\n    }\n    if (exponent == 0){\n        return 1\n    }\n    if(exponent > 1){\n        var result = base\n        for(var i =1;i<exponent;i++){\n            result *= base\n        }\n        return result\n    }\n    var num = Math.abs(exponent)\n    for (var i = 1; i < exponent; i++) {\n        result *= base\n    }\n    return result?1/result:false\n} \n\n\n/**\n * 1~131,100~13001\n * 1~1311101112136,\n * ACMer,,11n1\n */\n/**\n * 11\n * 11 \n * 012\n * 0\n * 11314153+1 0\n * 222(2+1)+(0+1)*10 = 13\n * abcdec\n * c = 0 :  ab*100 \n * c = 1 :  ab*100 + de + 1 \n * c > 2 :  (ab+1) * 100 \n * \n * 210 \n * 1 21\n * 1 2*10+1\n * 1 (0+1)*100\n * */ \nfunction getTotalNum(n){\n    let count = 0;\n    let i = 1;\n    let high = low = current = level = 0;\n    let length = n.toString().length;\n    while (i <= length) {\n        level = Math.pow(10, i - 1); //i 1 10 100 ...\n        high = parseInt(n / (level * 10));\n        low = n % level;\n        current = parseInt(n / level) % 10;\n        if (current === 0) {\n            count += (high * level);\n        } else if (current === 1) {\n            count += (high * level + low + 1);\n        } else {\n            count += ((high + 1) * level);\n        }\n        i++;\n    }\n    return count;\n} \n\n\n// \nfunction getTotal(n) {\n    var current = heigh = low = level = 0\n    // \n    var i = 0\n    // \n    var len = n.toString().length\n    // \n    var total = 0\n    for (i; i < len; i++) {\n        level = Math.pow(10, i)\n        // value\n        heigh = Math.floor(n / (10 * level)) % 10\n        current = n % (10 * level)\n        low = n % (level)\n        if (current == 0) {\n            total += heigh * level\n        } else if (current == 1) {\n            total += heigh * level + low + 1\n        } else {\n            total += (heigh + 1) * level\n        }\n    }\n    return total\n}","date":"2019-12-16T09:09:34.647Z","updated":"2019-12-16T09:09:34.647Z","path":"structure/data.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt6x0015gw923xqe46ot","content":"import { isNumber } from \"util\";\n\n// \n/** \n *   [1,null,2,3]\n * 1,2,3\n*/\n\n/** \n * \n * ,root\n*/\n// \nfunction inorderTraversal(root,arr){\n    // \n    if(root){\n        inorderTraversal(root.left,arr)\n        array.push(root.val)\n        inorderTraversal(root.right,arr)\n\n    }\n    return array;   \n}\nvar \n// \n/**\n * \n * \n * \n * 1\n * 2\n * 312\n*/\nfunction inorderTraversal(root) {\n    // \n    var arr = [],\n        // \n        stack = [],\n        item = root\n        \n    //  \n    while(item || stack.length){\n        // ,\n        // ,\n        if(item){\n            stack.push(item)\n            item = item.left\n        }\n        // \n        item = stack.pop()\n        // \n        arr.push(item.val)\n        // \n        item = item.right\n    }    \n    return array;\n}\n// \n// \nfunction firstTravel(){\n    // \n    var result = [],\n        // \n        stack = [],\n        node = root\n    //     \n    while(node || stack.length ){  \n        // \n        while(node.left){\n            stack.push(node)\n            // \n            result.push(node.value)\n            node = node.left \n        } \n        // \n        node = stack.pop()\n        // \n        node = node.right\n    }  \n\n}\n// \n// \n// \nfunction lastTravel() {\n    // \n    var result = [],\n        // \n        stack = [],\n        // \n        last = null,\n        node = root\n    //     \n    while (node || stack.length) {\n        // \n        while (node.left) {\n            stack.push(node)\n            node = node.left\n        }\n        //  \n        var traget = stack[stack.length-1]\n        // \n        if (traget.right && last !== traget.right){\n            // \n            node = node.right    \n        }else{\n            // \n            node = stack.pop()\n            // \n            result.push(node.value)\n            // \n            last = node\n            // \n            node= null\n        }\n    }\n}\n\n\n/** \n * 1+2+3+...+nforwhileifelseswitchcaseA?B:C\n * if else  && \n * 1n0 \n * 2 n(n+1)/2 = (n+n)/2  n+n  \n*/\nfunction Sum_Solution(n){\n    return n && (n+Sum_Solution(n-1))\n}\nfunction Sum_Solution(n){\n    //bba2b\n    return (Math.pow(n,2)+n) >> 1\n}\n\n\n/**\n * +-*/\n *   +\n * \n * (1^1=0 0^1=1 0^0=0)\n *  1&1=1 1&0=0 0&0=0\n * \n*/\n\nfunction add(num1,num2){\n    if(num2 == 0){\n        return num1\n    }\n    // \n    return add(num1 ^ num2, (num1 & num2) << 1)\n}\n// \nfunction add(num1,num2){\n    while(num2!=0){\n        // \n        var res = num1 ^ num2;\n        num2 = (num1 & num2)>>1;\n        num1 = res\n    }\n    return res\n}\n\n\n// \nfunction isOdd(num){\n    if (Number(num)){\n        return num % 2 == 0\n    } \n}\n// \nfunction isOdd(num) {\n    if (Number(num)) {\n        return num&1 != 0\n    }\n}\n\n// 2\n// 48\n//  1 10010001  0110111  0 \nfunction check(num){\n    return num & (num-1) == 0\n}\n// \n// 2/2 = 1 2%2 = 0  0 \n// \nfunction check(num) {\n    if (num != 1) {\n        while (num != 1) {\n            if (num % 2 == 0) {\n                num = num / 2;\n            } else {\n                return false;\n            }\n\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// 1\nfunction get1(num){\n    if(Number(num)){\n        var res = [],\n            count = 0\n            res1 = num,\n            res2 = 0\n        while (res1 > 0){\n            // \n            res2 = res1 % 2\n            // \n            res1 = parseInt(res1/2) \n            \n            res.push(res2)\n            if(res2 == 1){\n                count++\n            }\n        }\n        console.log('>>>',res.reverse().toString())\n        console.log('1>>', count)\n    }\n}\n\n// 1  \n// 0\nfunction get1(num){\n    var count = 0\n    while (num != 0) {\n        count += num & 1\n        // \n        num >>= 1\n    }\n    console.log(count)\n    return count\n}\n\n\n/**\n * \n * 1\n * 20\n */\n\n function get1Num(arr){\n    var counts = [] \n    arr.forEach(item => {\n        // \n        var index = counts.indexOf(item)\n        if (index<0){ counts.push(item)=\"\" }else{=\"\" =\"\" =\"\" counts.slice(index,1)=\"\" splice=\"\" =\"\" counts.splice(index,1)=\"\" }=\"\" })=\"\" console.log(counts)=\"\" return=\"\" counts[0]=\"\" =\"\" function=\"\" get1num(arr)=\"\" {=\"\" if(!arr=\"\" instanceof=\"\" array){=\"\" ''=\"\" var=\"\" counts=\"0\" arr.foreach(item=\"\"> {\n        counts = counts ^ item\n    })\n    console.log(counts)\n    return counts[0]\n}\n\n\n/**\n * \n *  \n * 1 \n * 2 \n * 11\n * \n * 1-1000,,,,\n *  \n *  23 1 \n * 2  1=2 \n * js \n * Math.ceil() ceil \n * Math.floor() floor\n * Math.round() round\n * parseInt() floor\n * parseInt(2.2) // 2\n * Math.floor(2.2) //2\n * Math.ceil(2.2) // 3\n * Math.round(2.2) // 2\n **/\n\nfunction getTwo(arr){\n    var val=0,\n    //  \n        position = 0,\n        // res1\n        result1 = 0,\n        result2 = 0\n   //      \n   arr.forEach(item => {\n            val = val ^ item\n        }) \n    // k1\n    while((val & 1 == 0 )&& val <64){ =\"\" val=\"val\">> 1\n        position++\n    }\n    arr.forEach(item => {\n        // k0 \n        if((item >> position & 1) == 1){\n            result1 ^= item\n        }else{\n            result2 ^= item\n        }\n    })\n    console.log('x,y>>',result1,result2)\n}\n\n\n\n/**\n * 235Ugly Number\n * 68147\n * 1N\n *  \n *  235n0 - n-1235\n * 0 - n-1235n-1\n * 0 - n\n * \n * \n * 0-n-1 \n * *2 *3* 5 n-1 \n * \n * *2 * 3 * 5 n-1 \n * \n */\n  \n function getUglyNumber(n){\n    //  \n    var i = j = k = 0,\n        // 1\n        arr = [1]\n    // 0     \n    if(n == 0){\n        return arr[0]\n    }\n    // \n    while(arr.length <= 1=\"\" 2=\"\" 3=\"\" 5=\"\" n){=\"\" next=\"\" =\"\" arr.push(math.min(arr[i]*2,arr[j]*3,arr[k]*5))=\"\" var=\"\" currentitem=\"arr[arr.length\" -=\"\" 1]=\"\" =\"\" n-1=\"\" while=\"\" (arr[i]=\"\" *=\"\" <=\"currentItem){\" i++=\"\" }=\"\" (arr[j]=\"\" {=\"\" j++=\"\" (arr[k]=\"\" k++=\"\" console.log(arr[n])=\"\" return=\"\" arr[n]=\"\" **=\"\" =\"\" doublebaseintexponentbaseexponent=\"\" =\"\" =\"\" exponent=\"\" 0=\"\" base0=\"\" math.abs=\"\" absolute=\"\" value=\"\" =\"\" function=\"\" getpow(base,=\"\" exponent){=\"\" if=\"\" (exponent=\"\" !=\"=\" +exponent){=\"\" throw=\"\" error('')=\"\" 0){=\"\" if(exponent=\"\"> 1){\n        var result = base\n        for(var i =1;i<exponent;i++){ 1=\"\" result=\"\" *=\"base\" }=\"\" return=\"\" var=\"\" num=\"Math.abs(exponent)\" for=\"\" (var=\"\" i=\"1;\" <=\"\" exponent;=\"\" i++)=\"\" {=\"\" result?1=\"\" result:false=\"\" **=\"\" 1~131,100~13001=\"\" 1~1311101112136,=\"\" acmer,,11n1=\"\" 11=\"\" 11=\"\" =\"\" 012=\"\" 0=\"\" 11314153+1=\"\" 0=\"\" 222(2+1)+(0+1)*10=\"13\" abcdec=\"\" c=\"0\" :=\"\" =\"\" ab*100=\"\" =\"\" +=\"\" de=\"\"> 2 :  (ab+1) * 100 \n * \n * 210 \n * 1 21\n * 1 2*10+1\n * 1 (0+1)*100\n * */ \nfunction getTotalNum(n){\n    let count = 0;\n    let i = 1;\n    let high = low = current = level = 0;\n    let length = n.toString().length;\n    while (i </exponent;i++){></=></64){></0){>","site":{"data":{}},"excerpt":"","more":"import { isNumber } from \"util\";\n\n// \n/** \n *   [1,null,2,3]\n * 1,2,3\n*/\n\n/** \n * \n * ,root\n*/\n// \nfunction inorderTraversal(root,arr){\n    // \n    if(root){\n        inorderTraversal(root.left,arr)\n        array.push(root.val)\n        inorderTraversal(root.right,arr)\n\n    }\n    return array;   \n}\nvar \n// \n/**\n * \n * \n * \n * 1\n * 2\n * 312\n*/\nfunction inorderTraversal(root) {\n    // \n    var arr = [],\n        // \n        stack = [],\n        item = root\n        \n    //  \n    while(item || stack.length){\n        // ,\n        // ,\n        if(item){\n            stack.push(item)\n            item = item.left\n        }\n        // \n        item = stack.pop()\n        // \n        arr.push(item.val)\n        // \n        item = item.right\n    }    \n    return array;\n}\n// \n// \nfunction firstTravel(){\n    // \n    var result = [],\n        // \n        stack = [],\n        node = root\n    //     \n    while(node || stack.length ){  \n        // \n        while(node.left){\n            stack.push(node)\n            // \n            result.push(node.value)\n            node = node.left \n        } \n        // \n        node = stack.pop()\n        // \n        node = node.right\n    }  \n\n}\n// \n// \n// \nfunction lastTravel() {\n    // \n    var result = [],\n        // \n        stack = [],\n        // \n        last = null,\n        node = root\n    //     \n    while (node || stack.length) {\n        // \n        while (node.left) {\n            stack.push(node)\n            node = node.left\n        }\n        //  \n        var traget = stack[stack.length-1]\n        // \n        if (traget.right && last !== traget.right){\n            // \n            node = node.right    \n        }else{\n            // \n            node = stack.pop()\n            // \n            result.push(node.value)\n            // \n            last = node\n            // \n            node= null\n        }\n    }\n}\n\n\n/** \n * 1+2+3+...+nforwhileifelseswitchcaseA?B:C\n * if else  && \n * 1n0 \n * 2 n(n+1)/2 = (n+n)/2  n+n  \n*/\nfunction Sum_Solution(n){\n    return n && (n+Sum_Solution(n-1))\n}\nfunction Sum_Solution(n){\n    //bba2b\n    return (Math.pow(n,2)+n) >> 1\n}\n\n\n/**\n * +-*/\n *   +\n * \n * (1^1=0 0^1=1 0^0=0)\n *  1&1=1 1&0=0 0&0=0\n * \n*/\n\nfunction add(num1,num2){\n    if(num2 == 0){\n        return num1\n    }\n    // \n    return add(num1 ^ num2, (num1 & num2) << 1)\n}\n// \nfunction add(num1,num2){\n    while(num2!=0){\n        // \n        var res = num1 ^ num2;\n        num2 = (num1 & num2)>>1;\n        num1 = res\n    }\n    return res\n}\n\n\n// \nfunction isOdd(num){\n    if (Number(num)){\n        return num % 2 == 0\n    } \n}\n// \nfunction isOdd(num) {\n    if (Number(num)) {\n        return num&1 != 0\n    }\n}\n\n// 2\n// 48\n//  1 10010001  0110111  0 \nfunction check(num){\n    return num & (num-1) == 0\n}\n// \n// 2/2 = 1 2%2 = 0  0 \n// \nfunction check(num) {\n    if (num != 1) {\n        while (num != 1) {\n            if (num % 2 == 0) {\n                num = num / 2;\n            } else {\n                return false;\n            }\n\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// 1\nfunction get1(num){\n    if(Number(num)){\n        var res = [],\n            count = 0\n            res1 = num,\n            res2 = 0\n        while (res1 > 0){\n            // \n            res2 = res1 % 2\n            // \n            res1 = parseInt(res1/2) \n            \n            res.push(res2)\n            if(res2 == 1){\n                count++\n            }\n        }\n        console.log('>>>',res.reverse().toString())\n        console.log('1>>', count)\n    }\n}\n\n// 1  \n// 0\nfunction get1(num){\n    var count = 0\n    while (num != 0) {\n        count += num & 1\n        // \n        num >>= 1\n    }\n    console.log(count)\n    return count\n}\n\n\n/**\n * \n * 1\n * 20\n */\n\n function get1Num(arr){\n    var counts = [] \n    arr.forEach(item => {\n        // \n        var index = counts.indexOf(item)\n        if (index<0){ counts.push(item)=\"\" }else{=\"\" =\"\" =\"\" counts.slice(index,1)=\"\" splice=\"\" =\"\" counts.splice(index,1)=\"\" }=\"\" })=\"\" console.log(counts)=\"\" return=\"\" counts[0]=\"\" =\"\" function=\"\" get1num(arr)=\"\" {=\"\" if(!arr=\"\" instanceof=\"\" array){=\"\" ''=\"\" var=\"\" counts=\"0\" arr.foreach(item=\"\"> {\n        counts = counts ^ item\n    })\n    console.log(counts)\n    return counts[0]\n}\n\n\n/**\n * \n *  \n * 1 \n * 2 \n * 11\n * \n * 1-1000,,,,\n *  \n *  23 1 \n * 2  1=2 \n * js \n * Math.ceil() ceil \n * Math.floor() floor\n * Math.round() round\n * parseInt() floor\n * parseInt(2.2) // 2\n * Math.floor(2.2) //2\n * Math.ceil(2.2) // 3\n * Math.round(2.2) // 2\n **/\n\nfunction getTwo(arr){\n    var val=0,\n    //  \n        position = 0,\n        // res1\n        result1 = 0,\n        result2 = 0\n   //      \n   arr.forEach(item => {\n            val = val ^ item\n        }) \n    // k1\n    while((val & 1 == 0 )&& val <64){ =\"\" val=\"val\">> 1\n        position++\n    }\n    arr.forEach(item => {\n        // k0 \n        if((item >> position & 1) == 1){\n            result1 ^= item\n        }else{\n            result2 ^= item\n        }\n    })\n    console.log('x,y>>',result1,result2)\n}\n\n\n\n/**\n * 235Ugly Number\n * 68147\n * 1N\n *  \n *  235n0 - n-1235\n * 0 - n-1235n-1\n * 0 - n\n * \n * \n * 0-n-1 \n * *2 *3* 5 n-1 \n * \n * *2 * 3 * 5 n-1 \n * \n */\n  \n function getUglyNumber(n){\n    //  \n    var i = j = k = 0,\n        // 1\n        arr = [1]\n    // 0     \n    if(n == 0){\n        return arr[0]\n    }\n    // \n    while(arr.length <= 1=\"\" 2=\"\" 3=\"\" 5=\"\" n){=\"\" next=\"\" =\"\" arr.push(math.min(arr[i]*2,arr[j]*3,arr[k]*5))=\"\" var=\"\" currentitem=\"arr[arr.length\" -=\"\" 1]=\"\" =\"\" n-1=\"\" while=\"\" (arr[i]=\"\" *=\"\" <=\"currentItem){\" i++=\"\" }=\"\" (arr[j]=\"\" {=\"\" j++=\"\" (arr[k]=\"\" k++=\"\" console.log(arr[n])=\"\" return=\"\" arr[n]=\"\" **=\"\" =\"\" doublebaseintexponentbaseexponent=\"\" =\"\" =\"\" exponent=\"\" 0=\"\" base0=\"\" math.abs=\"\" absolute=\"\" value=\"\" =\"\" function=\"\" getpow(base,=\"\" exponent){=\"\" if=\"\" (exponent=\"\" !=\"=\" +exponent){=\"\" throw=\"\" error('')=\"\" 0){=\"\" if(exponent=\"\"> 1){\n        var result = base\n        for(var i =1;i<exponent;i++){ 1=\"\" result=\"\" *=\"base\" }=\"\" return=\"\" var=\"\" num=\"Math.abs(exponent)\" for=\"\" (var=\"\" i=\"1;\" <=\"\" exponent;=\"\" i++)=\"\" {=\"\" result?1=\"\" result:false=\"\" **=\"\" 1~131,100~13001=\"\" 1~1311101112136,=\"\" acmer,,11n1=\"\" 11=\"\" 11=\"\" =\"\" 012=\"\" 0=\"\" 11314153+1=\"\" 0=\"\" 222(2+1)+(0+1)*10=\"13\" abcdec=\"\" c=\"0\" :=\"\" =\"\" ab*100=\"\" =\"\" +=\"\" de=\"\"> 2 :  (ab+1) * 100 \n * \n * 210 \n * 1 21\n * 1 2*10+1\n * 1 (0+1)*100\n * */ \nfunction getTotalNum(n){\n    let count = 0;\n    let i = 1;\n    let high = low = current = level = 0;\n    let length = n.toString().length;\n    while (i </exponent;i++){></=></64){></0){>"},{"_content":"// node\nfunction node(val){\n    this.val = val\n    this.next = null\n}\nfunction LinkList(){\n    this.head = new Node('head');     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n}\n\n// \n// nextnull\nfunction printVlas(){   \n    const arr = []\n    // \n    let head = LinkList.find(0)\n    while(head){\n        let {val,next} = head\n        arr.push(val)\n        head = next\n    }\n}\n\n//  \n/** \n * \n * \n * \n */\nfunction remove(head,node){\n    // \n    if (node.next) {\n        // ,next\n        node.val = node.next.val;\n        node.next = node.next.next;\n    } else if (head.value = node.value) {\n        // nullnull,null\n        node = null;\n        head = null;\n    }else{\n        // nextnull\n        // \n        node = head;\n        // next\n        while (node.next.next) {\n            node = node.next;\n        }\n        // next\n        node.next = null;\n        node = null;\n    }\n}","source":"structure/linklist.js","raw":"// node\nfunction node(val){\n    this.val = val\n    this.next = null\n}\nfunction LinkList(){\n    this.head = new Node('head');     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n}\n\n// \n// nextnull\nfunction printVlas(){   \n    const arr = []\n    // \n    let head = LinkList.find(0)\n    while(head){\n        let {val,next} = head\n        arr.push(val)\n        head = next\n    }\n}\n\n//  \n/** \n * \n * \n * \n */\nfunction remove(head,node){\n    // \n    if (node.next) {\n        // ,next\n        node.val = node.next.val;\n        node.next = node.next.next;\n    } else if (head.value = node.value) {\n        // nullnull,null\n        node = null;\n        head = null;\n    }else{\n        // nextnull\n        // \n        node = head;\n        // next\n        while (node.next.next) {\n            node = node.next;\n        }\n        // next\n        node.next = null;\n        node = null;\n    }\n}","date":"2019-12-16T08:32:55.377Z","updated":"2019-12-16T08:32:55.377Z","path":"structure/linklist.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt6x0016gw92xkp0igxm","content":"// node\nfunction node(val){\n    this.val = val\n    this.next = null\n}\nfunction LinkList(){\n    this.head = new Node('head');     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n}\n\n// \n// nextnull\nfunction printVlas(){   \n    const arr = []\n    // \n    let head = LinkList.find(0)\n    while(head){\n        let {val,next} = head\n        arr.push(val)\n        head = next\n    }\n}\n\n//  \n/** \n * \n * \n * \n */\nfunction remove(head,node){\n    // \n    if (node.next) {\n        // ,next\n        node.val = node.next.val;\n        node.next = node.next.next;\n    } else if (head.value = node.value) {\n        // nullnull,null\n        node = null;\n        head = null;\n    }else{\n        // nextnull\n        // \n        node = head;\n        // next\n        while (node.next.next) {\n            node = node.next;\n        }\n        // next\n        node.next = null;\n        node = null;\n    }\n}","site":{"data":{}},"excerpt":"","more":"// node\nfunction node(val){\n    this.val = val\n    this.next = null\n}\nfunction LinkList(){\n    this.head = new Node('head');     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n}\n\n// \n// nextnull\nfunction printVlas(){   \n    const arr = []\n    // \n    let head = LinkList.find(0)\n    while(head){\n        let {val,next} = head\n        arr.push(val)\n        head = next\n    }\n}\n\n//  \n/** \n * \n * \n * \n */\nfunction remove(head,node){\n    // \n    if (node.next) {\n        // ,next\n        node.val = node.next.val;\n        node.next = node.next.next;\n    } else if (head.value = node.value) {\n        // nullnull,null\n        node = null;\n        head = null;\n    }else{\n        // nextnull\n        // \n        node = head;\n        // next\n        while (node.next.next) {\n            node = node.next;\n        }\n        // next\n        node.next = null;\n        node = null;\n    }\n}"},{"_content":"function sayHello(name){if(name.length>2){name=name.substr(0,1)+\"...\"}console.log(\"hello,\",name)}sayHello(\"\");sayHello(\"\");\n//# sourceMappingURL=/index.js.map","source":"sourcemap/index.js","raw":"function sayHello(name){if(name.length>2){name=name.substr(0,1)+\"...\"}console.log(\"hello,\",name)}sayHello(\"\");sayHello(\"\");\n//# sourceMappingURL=/index.js.map","date":"2019-09-16T06:24:20.350Z","updated":"2019-09-16T06:24:20.349Z","path":"sourcemap/index.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt6y0017gw92tdzt1rnk","content":"function sayHello(name){if(name.length>2){name=name.substr(0,1)+\"...\"}console.log(\"hello,\",name)}sayHello(\"\");sayHello(\"\");\n//# sourceMappingURL=/index.js.map","site":{"data":{}},"excerpt":"","more":"function sayHello(name){if(name.length>2){name=name.substr(0,1)+\"...\"}console.log(\"hello,\",name)}sayHello(\"\");sayHello(\"\");\n//# sourceMappingURL=/index.js.map"},{"_content":"\n// \nfunction execMethod(fn) {\n    // \n    arr = [55, 11, 64, 73, 77, 201, 38, 51, 57, 97]\n    console.log('origin-arr>>>', arr)\n    return fn()\n}\n// \nfunction swapItem(arr, i, j) {\n    let temp = arr[i]\n    arr[i] = arr[j]\n    arr[j] = temp\n} \n// \n/**\n *  ,\n *  \n *  \n *  \n * */ \nfunction bubbleSort(){\n    let len = arr.length\n    // i  \n    for(i=0;i<len;i++){\n        //  n\n        for(let j = 0;j<len-i-1;j++){\n            if (arr[j+1] < arr[j]){\n                swapItem(arr,j,j+1)\n            }\n        }\n        console.log\n    } \n    return arr   \n} \n\n// \nexecMethod(bubbleSort)\n\n\n\n/**\n * \n * \n * \n * */ \n\nfunction selectSort(){\n    let len = arr.length;\n    for(var i = 1;i<len;i++){\n        let minIndex = i\n        for(var j = 0;j<i;j++){\n            if (arr[minIndex]>arr[j] ) {\n                minIndex = j\n            }\n        }\n        // \n        i !== minIndex && swapItem(minIndex,i)\n    }\n    return arr\n}\n   \n// run\nexecMethod(selectSort)\n\n// \n/** \n * \n * \n * n\n * */ \nfunction insertionSort(){\n    var len = arr.length;\n    // \n    for(var i = 1;i<len;i++){\n        var item = arr[i];\n            target = i\n        // itemitem\n        for(var j = i-1;j>-1;j--){\n            // ,\n            if(arr[j]>item){\n                target = j\n                arr[j+1] = arr[j]\n                // \n            }\n            \n        }\n        // ,\n        arr[target] = item\n    }\n    return arr\n}\nexecMethod(insertionSort)\n\n/** \n *  \n * \n * \n * */ \nfunction mergeSort(arrs= arr){\n    // \n    if(arrs.length < 2){\n        return arrs\n    }\n    let mid = Math.floor(arrs.length/2),\n        left = arrs.slice(0,mid),\n        right = arrs.slice(mid)\n    return merge(mergeSort(left),mergeSort(right))\n}\nfunction merge(left,right){\n    var temp = []\n    // 2left\n    // \n    while(left.length && right.length){\n        if(left[0] < right[0]){\n            temp.push(left.shift())\n        }else{\n            temp.push(right.shift())\n        }\n    }\n    // leftright\n    // \n    while(left.length){\n        temp.push(left.shift())\n    }\n    while (right.length) {\n        temp.push(right.shift())\n    }\n    return temp\n}\nexecMethod(mergeSort)\n\n\n\n/** \n * \n * \n * leftright\n * \n *\n*/\nfunction quickSort(arr,start,end){\n    var left = start,\n        right = end\n    //     \n    if (end - start < 1) {\n        return;\n    }\n    // \n    var target = arr[start]\n    while (left< right){\n        // target,\n        // \n        while(left < right && arr[right]>=target){\n            right--;\n        }\n        // arr[right] target\n        // ,targetleft\n        arr[left] = arr[right]\n        // target\n        while(left<right && arr[left]<target){\n            left++;   \n        }\n        // leftright\n        // target rightok\n        arr[right] = arr[left]\n    }    \n    // left\n    arr[left] = target\n    console.log('arr>>>', arr)\n    quickSort(arr, start, left - 1);\n    quickSort(arr, left + 1, end);\n    return arr;\n}\nquickSort(arr,0,9)\n\n\n\n/**\n *  \n * */ \n\nfunction binarySearch(item){\n    var arr = [1,2,3,4,11,34,55,77,88,99,100]\n    console.log('>>',arr)\n    var len = arr.length,\n        left=0,\n        right = len-1,\n        midIndex \n    //  \n    while(left<=right){\n        // \n        midIndex = Math.floor((left+right) / 2)\n        var midItem = arr[midIndex]\n        if (midItem == item){\n            console.log('', midItem)\n            return minIndex\n        }\n        // \n        if(midItem > item){\n            // \n            right = midIndex -1    \n        }\n        if(midItem<item){\n            left = left+1\n        }\n        console.log('', midItem)\n    }\n    console.log('', -1)   \n    return -1  \n} \n\n\n\n\nfunction getTotal(n){\n    var current = heigh = low = level = 0\n    // \n    var i = 0\n    // \n    var len = n.toString().length\n    // \n    var total = 0\n    for(i;i<len;i++){\n        level = Math.pow(10,i)\n        // value\n        heigh = Math.floor(n/(10*level))%10\n        current = n % (10 * level)\n        low = n % (level)\n        if(current == 0){\n            total += heigh*level\n        }else if(current == 1){\n            total += heigh*level + low+1\n        }else{\n            total += (heigh+1)*level\n        }\n    }\n    return total\n}","source":"structure/sort.js","raw":"\n// \nfunction execMethod(fn) {\n    // \n    arr = [55, 11, 64, 73, 77, 201, 38, 51, 57, 97]\n    console.log('origin-arr>>>', arr)\n    return fn()\n}\n// \nfunction swapItem(arr, i, j) {\n    let temp = arr[i]\n    arr[i] = arr[j]\n    arr[j] = temp\n} \n// \n/**\n *  ,\n *  \n *  \n *  \n * */ \nfunction bubbleSort(){\n    let len = arr.length\n    // i  \n    for(i=0;i<len;i++){\n        //  n\n        for(let j = 0;j<len-i-1;j++){\n            if (arr[j+1] < arr[j]){\n                swapItem(arr,j,j+1)\n            }\n        }\n        console.log\n    } \n    return arr   \n} \n\n// \nexecMethod(bubbleSort)\n\n\n\n/**\n * \n * \n * \n * */ \n\nfunction selectSort(){\n    let len = arr.length;\n    for(var i = 1;i<len;i++){\n        let minIndex = i\n        for(var j = 0;j<i;j++){\n            if (arr[minIndex]>arr[j] ) {\n                minIndex = j\n            }\n        }\n        // \n        i !== minIndex && swapItem(minIndex,i)\n    }\n    return arr\n}\n   \n// run\nexecMethod(selectSort)\n\n// \n/** \n * \n * \n * n\n * */ \nfunction insertionSort(){\n    var len = arr.length;\n    // \n    for(var i = 1;i<len;i++){\n        var item = arr[i];\n            target = i\n        // itemitem\n        for(var j = i-1;j>-1;j--){\n            // ,\n            if(arr[j]>item){\n                target = j\n                arr[j+1] = arr[j]\n                // \n            }\n            \n        }\n        // ,\n        arr[target] = item\n    }\n    return arr\n}\nexecMethod(insertionSort)\n\n/** \n *  \n * \n * \n * */ \nfunction mergeSort(arrs= arr){\n    // \n    if(arrs.length < 2){\n        return arrs\n    }\n    let mid = Math.floor(arrs.length/2),\n        left = arrs.slice(0,mid),\n        right = arrs.slice(mid)\n    return merge(mergeSort(left),mergeSort(right))\n}\nfunction merge(left,right){\n    var temp = []\n    // 2left\n    // \n    while(left.length && right.length){\n        if(left[0] < right[0]){\n            temp.push(left.shift())\n        }else{\n            temp.push(right.shift())\n        }\n    }\n    // leftright\n    // \n    while(left.length){\n        temp.push(left.shift())\n    }\n    while (right.length) {\n        temp.push(right.shift())\n    }\n    return temp\n}\nexecMethod(mergeSort)\n\n\n\n/** \n * \n * \n * leftright\n * \n *\n*/\nfunction quickSort(arr,start,end){\n    var left = start,\n        right = end\n    //     \n    if (end - start < 1) {\n        return;\n    }\n    // \n    var target = arr[start]\n    while (left< right){\n        // target,\n        // \n        while(left < right && arr[right]>=target){\n            right--;\n        }\n        // arr[right] target\n        // ,targetleft\n        arr[left] = arr[right]\n        // target\n        while(left<right && arr[left]<target){\n            left++;   \n        }\n        // leftright\n        // target rightok\n        arr[right] = arr[left]\n    }    \n    // left\n    arr[left] = target\n    console.log('arr>>>', arr)\n    quickSort(arr, start, left - 1);\n    quickSort(arr, left + 1, end);\n    return arr;\n}\nquickSort(arr,0,9)\n\n\n\n/**\n *  \n * */ \n\nfunction binarySearch(item){\n    var arr = [1,2,3,4,11,34,55,77,88,99,100]\n    console.log('>>',arr)\n    var len = arr.length,\n        left=0,\n        right = len-1,\n        midIndex \n    //  \n    while(left<=right){\n        // \n        midIndex = Math.floor((left+right) / 2)\n        var midItem = arr[midIndex]\n        if (midItem == item){\n            console.log('', midItem)\n            return minIndex\n        }\n        // \n        if(midItem > item){\n            // \n            right = midIndex -1    \n        }\n        if(midItem<item){\n            left = left+1\n        }\n        console.log('', midItem)\n    }\n    console.log('', -1)   \n    return -1  \n} \n\n\n\n\nfunction getTotal(n){\n    var current = heigh = low = level = 0\n    // \n    var i = 0\n    // \n    var len = n.toString().length\n    // \n    var total = 0\n    for(i;i<len;i++){\n        level = Math.pow(10,i)\n        // value\n        heigh = Math.floor(n/(10*level))%10\n        current = n % (10 * level)\n        low = n % (level)\n        if(current == 0){\n            total += heigh*level\n        }else if(current == 1){\n            total += heigh*level + low+1\n        }else{\n            total += (heigh+1)*level\n        }\n    }\n    return total\n}","date":"2019-12-16T09:08:40.407Z","updated":"2019-12-16T09:08:40.407Z","path":"structure/sort.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt6y0018gw92745avaoo","content":"\n// \nfunction execMethod(fn) {\n    // \n    arr = [55, 11, 64, 73, 77, 201, 38, 51, 57, 97]\n    console.log('origin-arr>>>', arr)\n    return fn()\n}\n// \nfunction swapItem(arr, i, j) {\n    let temp = arr[i]\n    arr[i] = arr[j]\n    arr[j] = temp\n} \n// \n/**\n *  ,\n *  \n *  \n *  \n * */ \nfunction bubbleSort(){\n    let len = arr.length\n    // i  \n    for(i=0;i<len;i++){ =\"\" n=\"\" for(let=\"\" j=\"0;j<len-i-1;j++){\" if=\"\" (arr[j+1]=\"\" <=\"\" arr[j]){=\"\" swapitem(arr,j,j+1)=\"\" }=\"\" console.log=\"\" return=\"\" arr=\"\" =\"\" execmethod(bubblesort)=\"\" **=\"\" *=\"\" =\"\" =\"\" =\"\" function=\"\" selectsort(){=\"\" let=\"\" len=\"arr.length;\" for(var=\"\" i=\"1;i<len;i++){\" minindex=\"i\" (arr[minindex]=\"\">arr[j] ) {\n                minIndex = j\n            }\n        }\n        // \n        i !== minIndex && swapItem(minIndex,i)\n    }\n    return arr\n}\n   \n// run\nexecMethod(selectSort)\n\n// \n/** \n * \n * \n * n\n * */ \nfunction insertionSort(){\n    var len = arr.length;\n    // \n    for(var i = 1;i<len;i++){ var=\"\" item=\"arr[i];\" target=\"i\" itemitem=\"\" for(var=\"\" j=\"i-1;j\">-1;j--){\n            // ,\n            if(arr[j]>item){\n                target = j\n                arr[j+1] = arr[j]\n                // \n            }\n            \n        }\n        // ,\n        arr[target] = item\n    }\n    return arr\n}\nexecMethod(insertionSort)\n\n/** \n *  \n * \n * \n * */ \nfunction mergeSort(arrs= arr){\n    // \n    if(arrs.length < 2){\n        return arrs\n    }\n    let mid = Math.floor(arrs.length/2),\n        left = arrs.slice(0,mid),\n        right = arrs.slice(mid)\n    return merge(mergeSort(left),mergeSort(right))\n}\nfunction merge(left,right){\n    var temp = []\n    // 2left\n    // \n    while(left.length && right.length){\n        if(left[0] < right[0]){\n            temp.push(left.shift())\n        }else{\n            temp.push(right.shift())\n        }\n    }\n    // leftright\n    // \n    while(left.length){\n        temp.push(left.shift())\n    }\n    while (right.length) {\n        temp.push(right.shift())\n    }\n    return temp\n}\nexecMethod(mergeSort)\n\n\n\n/** \n * \n * \n * leftright\n * \n *\n*/\nfunction quickSort(arr,start,end){\n    var left = start,\n        right = end\n    //     \n    if (end - start < 1) {\n        return;\n    }\n    // \n    var target = arr[start]\n    while (left< right){\n        // target,\n        // \n        while(left < right && arr[right]>=target){\n            right--;\n        }\n        // arr[right] target\n        // ,targetleft\n        arr[left] = arr[right]\n        // target\n        while(left<right &&=\"\" arr[left]<target){=\"\" left++;=\"\" }=\"\" leftright=\"\" target=\"\" rightok=\"\" arr[right]=\"arr[left]\" left=\"\" arr[left]=\"target\" console.log('arr=\"\">>>', arr)\n    quickSort(arr, start, left - 1);\n    quickSort(arr, left + 1, end);\n    return arr;\n}\nquickSort(arr,0,9)\n\n\n\n/**\n *  \n * */ \n\nfunction binarySearch(item){\n    var arr = [1,2,3,4,11,34,55,77,88,99,100]\n    console.log('>>',arr)\n    var len = arr.length,\n        left=0,\n        right = len-1,\n        midIndex \n    //  \n    while(left<=right){ =\"\" midindex=\"Math.floor((left+right)\" 2)=\"\" var=\"\" miditem=\"arr[midIndex]\" if=\"\" (miditem=\"=\" item){=\"\" console.log('',=\"\" miditem)=\"\" return=\"\" minindex=\"\" }=\"\" =\"\" if(miditem=\"\"> item){\n            // \n            right = midIndex -1    \n        }\n        if(midItem</=right){></right></len;i++){></len;i++){>","site":{"data":{}},"excerpt":"","more":"\n// \nfunction execMethod(fn) {\n    // \n    arr = [55, 11, 64, 73, 77, 201, 38, 51, 57, 97]\n    console.log('origin-arr>>>', arr)\n    return fn()\n}\n// \nfunction swapItem(arr, i, j) {\n    let temp = arr[i]\n    arr[i] = arr[j]\n    arr[j] = temp\n} \n// \n/**\n *  ,\n *  \n *  \n *  \n * */ \nfunction bubbleSort(){\n    let len = arr.length\n    // i  \n    for(i=0;i<len;i++){ =\"\" n=\"\" for(let=\"\" j=\"0;j<len-i-1;j++){\" if=\"\" (arr[j+1]=\"\" <=\"\" arr[j]){=\"\" swapitem(arr,j,j+1)=\"\" }=\"\" console.log=\"\" return=\"\" arr=\"\" =\"\" execmethod(bubblesort)=\"\" **=\"\" *=\"\" =\"\" =\"\" =\"\" function=\"\" selectsort(){=\"\" let=\"\" len=\"arr.length;\" for(var=\"\" i=\"1;i<len;i++){\" minindex=\"i\" (arr[minindex]=\"\">arr[j] ) {\n                minIndex = j\n            }\n        }\n        // \n        i !== minIndex && swapItem(minIndex,i)\n    }\n    return arr\n}\n   \n// run\nexecMethod(selectSort)\n\n// \n/** \n * \n * \n * n\n * */ \nfunction insertionSort(){\n    var len = arr.length;\n    // \n    for(var i = 1;i<len;i++){ var=\"\" item=\"arr[i];\" target=\"i\" itemitem=\"\" for(var=\"\" j=\"i-1;j\">-1;j--){\n            // ,\n            if(arr[j]>item){\n                target = j\n                arr[j+1] = arr[j]\n                // \n            }\n            \n        }\n        // ,\n        arr[target] = item\n    }\n    return arr\n}\nexecMethod(insertionSort)\n\n/** \n *  \n * \n * \n * */ \nfunction mergeSort(arrs= arr){\n    // \n    if(arrs.length < 2){\n        return arrs\n    }\n    let mid = Math.floor(arrs.length/2),\n        left = arrs.slice(0,mid),\n        right = arrs.slice(mid)\n    return merge(mergeSort(left),mergeSort(right))\n}\nfunction merge(left,right){\n    var temp = []\n    // 2left\n    // \n    while(left.length && right.length){\n        if(left[0] < right[0]){\n            temp.push(left.shift())\n        }else{\n            temp.push(right.shift())\n        }\n    }\n    // leftright\n    // \n    while(left.length){\n        temp.push(left.shift())\n    }\n    while (right.length) {\n        temp.push(right.shift())\n    }\n    return temp\n}\nexecMethod(mergeSort)\n\n\n\n/** \n * \n * \n * leftright\n * \n *\n*/\nfunction quickSort(arr,start,end){\n    var left = start,\n        right = end\n    //     \n    if (end - start < 1) {\n        return;\n    }\n    // \n    var target = arr[start]\n    while (left< right){\n        // target,\n        // \n        while(left < right && arr[right]>=target){\n            right--;\n        }\n        // arr[right] target\n        // ,targetleft\n        arr[left] = arr[right]\n        // target\n        while(left<right &&=\"\" arr[left]<target){=\"\" left++;=\"\" }=\"\" leftright=\"\" target=\"\" rightok=\"\" arr[right]=\"arr[left]\" left=\"\" arr[left]=\"target\" console.log('arr=\"\">>>', arr)\n    quickSort(arr, start, left - 1);\n    quickSort(arr, left + 1, end);\n    return arr;\n}\nquickSort(arr,0,9)\n\n\n\n/**\n *  \n * */ \n\nfunction binarySearch(item){\n    var arr = [1,2,3,4,11,34,55,77,88,99,100]\n    console.log('>>',arr)\n    var len = arr.length,\n        left=0,\n        right = len-1,\n        midIndex \n    //  \n    while(left<=right){ =\"\" midindex=\"Math.floor((left+right)\" 2)=\"\" var=\"\" miditem=\"arr[midIndex]\" if=\"\" (miditem=\"=\" item){=\"\" console.log('',=\"\" miditem)=\"\" return=\"\" minindex=\"\" }=\"\" =\"\" if(miditem=\"\"> item){\n            // \n            right = midIndex -1    \n        }\n        if(midItem</=right){></right></len;i++){></len;i++){>"},{"_content":"export default class Team {\n    constructor(){\n        this.name =''\n    }\n}","source":"ioc/v1/team.js","raw":"export default class Team {\n    constructor(){\n        this.name =''\n    }\n}","date":"2018-10-24T12:01:12.000Z","updated":"2018-10-24T12:01:12.000Z","path":"ioc/v1/team.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt7u001agw9204udcv06","content":"export default class Team {\n    constructor(){\n        this.name =''\n    }\n}","site":{"data":{}},"excerpt":"","more":"export default class Team {\n    constructor(){\n        this.name =''\n    }\n}"},{"_content":"import team from './team'\nexport default class Player{\n    constructor(){\n        this.team = team\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}","source":"ioc/v1/player.js","raw":"import team from './team'\nexport default class Player{\n    constructor(){\n        this.team = team\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}","date":"2018-10-24T12:01:52.000Z","updated":"2018-10-24T12:01:52.000Z","path":"ioc/v1/player.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt7v001cgw92efp8tupw","content":"import team from './team'\nexport default class Player{\n    constructor(){\n        this.team = team\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}","site":{"data":{}},"excerpt":"","more":"import team from './team'\nexport default class Player{\n    constructor(){\n        this.team = team\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}"},{"_content":"sayHello('')\nsayHello('')","source":"sourcemap/src/main.js","raw":"sayHello('')\nsayHello('')","date":"2019-09-16T06:24:20.353Z","updated":"2019-09-16T06:24:20.353Z","path":"sourcemap/src/main.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt9r001lgw92khah6a79","content":"sayHello('')\nsayHello('')","site":{"data":{}},"excerpt":"","more":"sayHello('')\nsayHello('')"},{"_content":"function sayHello(name) {\n    if (name.length > 2) {\n        name = name.substr(0, 1) + '...'\n    }\n    console.log('hello,', name)\n}","source":"sourcemap/src/log.js","raw":"function sayHello(name) {\n    if (name.length > 2) {\n        name = name.substr(0, 1) + '...'\n    }\n    console.log('hello,', name)\n}","date":"2019-09-16T06:24:20.352Z","updated":"2019-09-16T06:24:20.352Z","path":"sourcemap/src/log.js","layout":"false","title":"","comments":1,"_id":"ck4tbvt9r001mgw928z5ai8wu","content":"function sayHello(name) {\n    if (name.length > 2) {\n        name = name.substr(0, 1) + '...'\n    }\n    console.log('hello,', name)\n}","site":{"data":{}},"excerpt":"","more":"function sayHello(name) {\n    if (name.length > 2) {\n        name = name.substr(0, 1) + '...'\n    }\n    console.log('hello,', name)\n}"},{"_content":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <button id='j_click'></button>\n    <div></div>\n</body>\n<script>\n    var btn = document.querySelecter('#js_click'),\n        dataMap = ['green','blue'],\n        index=0,\n        root = document.querySelector('body')\n    function count(){\n        if(index>2){\n            index++\n        }else{\n            index = 0\n        }\n    }    \n    function handleTheme(){\n        count()\n        var clolr_Theme = dataMap[index]\n        \n    }\n    btn.addEventListener('click',()=>{\n        handleTheme()\n    })\n    \n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","source":"theme/part1/index.html","raw":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <button id='j_click'></button>\n    <div></div>\n</body>\n<script>\n    var btn = document.querySelecter('#js_click'),\n        dataMap = ['green','blue'],\n        index=0,\n        root = document.querySelector('body')\n    function count(){\n        if(index>2){\n            index++\n        }else{\n            index = 0\n        }\n    }    \n    function handleTheme(){\n        count()\n        var clolr_Theme = dataMap[index]\n        \n    }\n    btn.addEventListener('click',()=>{\n        handleTheme()\n    })\n    \n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","date":"2019-09-20T03:51:22.789Z","updated":"2019-09-20T03:51:22.789Z","path":"theme/part1/index.html","title":"","comments":1,"layout":"page","_id":"ck4tbvt9s001ngw92qcv20jf8","content":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <button id=\"j_click\"></button>\n    <div></div>\n</body>\n<script>\n    var btn = document.querySelecter('#js_click'),\n        dataMap = ['green','blue'],\n        index=0,\n        root = document.querySelector('body')\n    function count(){\n        if(index>2){\n            index++\n        }else{\n            index = 0\n        }\n    }    \n    function handleTheme(){\n        count()\n        var clolr_Theme = dataMap[index]\n        \n    }\n    btn.addEventListener('click',()=>{\n        handleTheme()\n    })\n    \n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n    <title>\n        \n    </title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"keywords\" content=\"react.js, react, component, components, ui, framework\">\n</head>\n\n<body>\n    <button id=\"j_click\"></button>\n    <div></div>\n</body>\n<script>\n    var btn = document.querySelecter('#js_click'),\n        dataMap = ['green','blue'],\n        index=0,\n        root = document.querySelector('body')\n    function count(){\n        if(index>2){\n            index++\n        }else{\n            index = 0\n        }\n    }    \n    function handleTheme(){\n        count()\n        var clolr_Theme = dataMap[index]\n        \n    }\n    btn.addEventListener('click',()=>{\n        handleTheme()\n    })\n    \n</script>\n<script>\n    // \n    // let data = {\n    //     price: 5,\n    //     count: 2\n    // },\n    //     callb = null\n\n    // class Events {\n    //     constructor() {\n    //         this._events = []\n    //     }\n    //     on() {\n    //         if (callb && !this._events.includes(callb)) {\n    //             this._events.push(callb)\n    //         }\n    //     }\n    //     triger() {\n    //         this._events.forEach((callb) => {\n    //             callb && callb()\n    //         })\n    //     }\n    // }\n\n    // Object.keys(data).forEach((key) => {\n    //     let initVlue = data[key]\n    //     const e1 = new Events()\n    //     Object.defineProperty(data, key, {\n    //         get() {\n    //             //\n    //             e1.on()\n    //             // \n    //             callb = null\n    //             // get\n    //             return initVlue\n    //         },\n    //         set(newVal) {\n    //             initVlue = newVal\n    //             // set\n    //             e1.triger()\n    //         }\n    //     })\n    // })\n    // function watcher(func) {\n    //     // callbackget\n    //     callb = func\n    //     // get\n    //     callb()\n    //     // \n    //     callb = null\n    // }\n    // // \n    // watcher(() => {\n    //     data.total = data.price * data.count\n    // })\n</script>\n\n</html>"}],"Post":[{"title":"(AOP)","date":"2018-10-25T16:00:00.000Z","_content":"  \n##   \n(OOP)-****  \nOOP  \nOOPAOP   \n<!-- more -->\n## AOP  \naop   \n \n**aspect-oriented programmingAOP  \n**  \n\n.  \n.\n  \n\n#### tip\n:  \n  \n* **() **  \n       \n* ****.\n    AOP OOPOOP   \n* ****  \n    AOP   \n\n**AOP().**  \n()  \n()   \n\n\n\n## \n  \n\nlogger  \n\n```js\nconst logger = console.log\n//\nlogger('')\n```\n   \n```js\nconst doSomething = ()=>{\n    console.log('doSomething')\n} \nlet clickHandler = ()=>{\n   logger('doSomething')\n   // n \n   doSomething() \n   logger('doSomething')\n   //n \n}\n```\n  \n30()  \n30  \ngg  \n    \nAOPAOP   \n  \n### \n \n  \n\n|  |  |\n| --- | --- |\n| (doSomething) |  logger |\n\nAOPlogger   \n    \n   \n   \n### \njs  \n  \n  \n  \n  \ncallapply  \n \n\n#### beforeafter   \n\n  \n\n```js\n// action logger\nFunction.prototype.after = function (action) {\n    //thisclickHandler\n    var func = this;\n    // return \n    // Function.prototype\n    // after,\n    return function () {\n        // \n        var result = func.apply(this, arguments);\n        // \n        action.apply(this,arguments);\n        // \n        return result;\n    };\n};\n// before \nFunction.prototype.before = function (action) {\n    var func = this;\n    return function () {\n        action.apply(this,arguments);\n        return func.apply(this, arguments);\n    };\n};\n```\nAOP:\n```js\nconst doSomething = ()=>{\n    console.log('doSomething')\n} \nlet clickHandler = ()=>{\n   // n \n   doSomething() \n   //n \n}\nclickHandler = clickHandler.before(()=>{\n     logger('doSomething')\n}).after(()=>{\n     logger('doSomething')\n})\nclickHandler() // \n```\n\n\n## \nAOPjs\nreactHOCes7HOF[](https://github.com/xiaoxiangdaiyu/blog)\n####   \n[AllyTeam - AOPjavascript](http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/)   \n[ Javascript Decorators  AOP ](https://juejin.im/entry/5a12443951882512a860e93c) \n\n\n","source":"_posts/AOP.md","raw":"---\ntitle: (AOP)\ndate: 2018-10-26\n---\n  \n##   \n(OOP)-****  \nOOP  \nOOPAOP   \n<!-- more -->\n## AOP  \naop   \n \n**aspect-oriented programmingAOP  \n**  \n\n.  \n.\n  \n\n#### tip\n:  \n  \n* **() **  \n       \n* ****.\n    AOP OOPOOP   \n* ****  \n    AOP   \n\n**AOP().**  \n()  \n()   \n\n\n\n## \n  \n\nlogger  \n\n```js\nconst logger = console.log\n//\nlogger('')\n```\n   \n```js\nconst doSomething = ()=>{\n    console.log('doSomething')\n} \nlet clickHandler = ()=>{\n   logger('doSomething')\n   // n \n   doSomething() \n   logger('doSomething')\n   //n \n}\n```\n  \n30()  \n30  \ngg  \n    \nAOPAOP   \n  \n### \n \n  \n\n|  |  |\n| --- | --- |\n| (doSomething) |  logger |\n\nAOPlogger   \n    \n   \n   \n### \njs  \n  \n  \n  \n  \ncallapply  \n \n\n#### beforeafter   \n\n  \n\n```js\n// action logger\nFunction.prototype.after = function (action) {\n    //thisclickHandler\n    var func = this;\n    // return \n    // Function.prototype\n    // after,\n    return function () {\n        // \n        var result = func.apply(this, arguments);\n        // \n        action.apply(this,arguments);\n        // \n        return result;\n    };\n};\n// before \nFunction.prototype.before = function (action) {\n    var func = this;\n    return function () {\n        action.apply(this,arguments);\n        return func.apply(this, arguments);\n    };\n};\n```\nAOP:\n```js\nconst doSomething = ()=>{\n    console.log('doSomething')\n} \nlet clickHandler = ()=>{\n   // n \n   doSomething() \n   //n \n}\nclickHandler = clickHandler.before(()=>{\n     logger('doSomething')\n}).after(()=>{\n     logger('doSomething')\n})\nclickHandler() // \n```\n\n\n## \nAOPjs\nreactHOCes7HOF[](https://github.com/xiaoxiangdaiyu/blog)\n####   \n[AllyTeam - AOPjavascript](http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/)   \n[ Javascript Decorators  AOP ](https://juejin.im/entry/5a12443951882512a860e93c) \n\n\n","slug":"AOP","published":1,"updated":"2018-10-26T11:49:49.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt0y0000gw92x9nefv59","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(OOP)-<strong></strong><br>OOP<br>OOPAOP<br><a id=\"more\"></a></p>\n<h2 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h2><p>aop   </p>\n<p><strong>aspect-oriented programmingAOP<br></strong>  </p>\n<p>.<br>.<br>  </p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>:  </p>\n<ul>\n<li><strong>() </strong><br>     </li>\n<li><strong></strong>.<br>  AOP OOPOOP   </li>\n<li><strong></strong><br>  AOP   </li>\n</ul>\n<p><strong>AOP().</strong><br>()<br>()   </p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>logger  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> logger = <span class=\"built_in\">console</span>.log</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">logger(<span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> doSomething = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">let</span> clickHandler = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">   logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">   <span class=\"comment\">// n </span></span><br><span class=\"line\">   doSomething() </span><br><span class=\"line\">   logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">   <span class=\"comment\">//n </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br>30()<br>30<br>gg<br><br>AOPAOP   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>(doSomething)</td>\n<td> logger</td>\n</tr>\n</tbody>\n</table>\n<p>AOPlogger<br><br>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>js<br>  </p>\n<p><br><br>callapply<br> </p>\n<h4 id=\"beforeafter\"><a href=\"#beforeafter\" class=\"headerlink\" title=\"beforeafter\"></a>beforeafter</h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// action logger</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.after = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//thisclickHandler</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// return </span></span><br><span class=\"line\">    <span class=\"comment\">// Function.prototype</span></span><br><span class=\"line\">    <span class=\"comment\">// after,</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> result = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        action.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// before </span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.before = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        action.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>AOP:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> doSomething = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">let</span> clickHandler = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// n </span></span><br><span class=\"line\">   doSomething() </span><br><span class=\"line\">   <span class=\"comment\">//n </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">clickHandler = clickHandler.before(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">     logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125;).after(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">     logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">clickHandler() <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AOPjs<br>reactHOCes7HOF<a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/\" target=\"_blank\" rel=\"noopener\">AllyTeam - AOPjavascript</a><br><a href=\"https://juejin.im/entry/5a12443951882512a860e93c\" target=\"_blank\" rel=\"noopener\"> Javascript Decorators  AOP </a> </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(OOP)-<strong></strong><br>OOP<br>OOPAOP<br>","more":"</p>\n<h2 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h2><p>aop   </p>\n<p><strong>aspect-oriented programmingAOP<br></strong>  </p>\n<p>.<br>.<br>  </p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>:  </p>\n<ul>\n<li><strong>() </strong><br>     </li>\n<li><strong></strong>.<br>  AOP OOPOOP   </li>\n<li><strong></strong><br>  AOP   </li>\n</ul>\n<p><strong>AOP().</strong><br>()<br>()   </p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>logger  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> logger = <span class=\"built_in\">console</span>.log</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">logger(<span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> doSomething = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">let</span> clickHandler = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">   logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">   <span class=\"comment\">// n </span></span><br><span class=\"line\">   doSomething() </span><br><span class=\"line\">   logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">   <span class=\"comment\">//n </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br>30()<br>30<br>gg<br><br>AOPAOP   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>(doSomething)</td>\n<td> logger</td>\n</tr>\n</tbody>\n</table>\n<p>AOPlogger<br><br>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>js<br>  </p>\n<p><br><br>callapply<br> </p>\n<h4 id=\"beforeafter\"><a href=\"#beforeafter\" class=\"headerlink\" title=\"beforeafter\"></a>beforeafter</h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// action logger</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.after = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//thisclickHandler</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// return </span></span><br><span class=\"line\">    <span class=\"comment\">// Function.prototype</span></span><br><span class=\"line\">    <span class=\"comment\">// after,</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> result = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        action.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// before </span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.before = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        action.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>AOP:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> doSomething = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">let</span> clickHandler = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// n </span></span><br><span class=\"line\">   doSomething() </span><br><span class=\"line\">   <span class=\"comment\">//n </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">clickHandler = clickHandler.before(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">     logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125;).after(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">     logger(<span class=\"string\">'doSomething'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">clickHandler() <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AOPjs<br>reactHOCes7HOF<a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/\" target=\"_blank\" rel=\"noopener\">AllyTeam - AOPjavascript</a><br><a href=\"https://juejin.im/entry/5a12443951882512a860e93c\" target=\"_blank\" rel=\"noopener\"> Javascript Decorators  AOP </a> </p>"},{"title":"CORS ","date":"2019-07-01T16:00:00.000Z","_content":"  \n## \nw3cCORSjsonpCORSpostCORS[](http://www.ruanyifeng.com/blog/2016/04/cors.html),CORS\n<!-- more -->\n## \n### \nCORSsimple requestnot-so-simple request)\n#### \n\n\n1. \nHEADGETPOST\n2. HTTP\nAccept\nAccept-Language\nContent-Language\nLast-Event-ID\nContent-Typeapplication/x-www-formmultipart/form-datatext/plain\n#### \n()optionsHTTPmethodputdelete  \n\n:\n\n```js\nvar url = 'http://api.alice.com/cors';\nvar xhr = new XMLHttpRequest();\n// PUT method\nxhr.open('PUT', url, true);\nxhr.setRequestHeader('X-Custom-Header', 'value');\nxhr.send();\n```  \notpios\n\n```js\nOPTIONS /cors HTTP/1.1\n// \nOrigin: http://api.bob.com\n// corsmethod\nAccess-Control-Request-Method: PUT\n// \nAccess-Control-Request-Headers: X-Custom-Header\nHost: api.alice.com\nAccept-Language: en-US\nConnection: keep-alive\nUser-Agent: Mozilla/5.0...\n```\n\n\n\n1originAccess-Control-Request-MethodAccess-Control-Request-Headers \n\n```js\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2.0.61 (Unix)\n//  \nAccess-Control-Allow-Origin: http://api.bob.com\n// \nAccess-Control-Allow-Methods: GET, POST, PUT\n// header\nAccess-Control-Allow-Headers: X-Custom-Header\nContent-Type: text/html; charset=utf-8\nContent-Encoding: gzip\nContent-Length: 0\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n```\n\nCORS\n\n```js\n// \nXMLHttpRequest cannot load http://api.alice.com.\nOrigin http://api.bob.com is not allowed by Access-Control-Allow-Origin.\n```\n\noptions  code \n### options code 200  204\n\noptionscode 200\ncode204\n\n#### \n\n1CORSoptions200\n\n```java\n// java \nif (req.getMethod().equals(\"OPTIONS\")) {\n     res.setStatus(200);\n }\n```\n\n2CORSnginx204.\n\n```shell\nif ($request_method = 'OPTIONS') { \n    add_header Access-Control-Allow-Origin *; \n    add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;\n    #****...\n    return 204; \n}\n```\n#### \n204200 MDN\n**200**\nhttp method \n* GET: \n* POST: \n\n**204**\n\nhaul204\n\n204\n\n#### options\noptionsoptiosncode  \n**fecth**\n[Fetch ](https://fetch.spec.whatwg.org/) CORSstatus200-209  \n\n```json\nIf a CORS check for request and response returns success \nand responses status is an ok status, \nrun these substeps.\n```\nresponseokstatus\n\n```json\nAn ok status is any status in the range 200 to 299, inclusive.\n```\n\nfetch  \n  \n**HTTP 1.1**\nhttp/1.1 code[22-XXcode](https://tools.ietf.org/html/rfc7231#section-6.3),\n\n* **200**\nhttp method \n* GET: \n* POST: \n* OPTIONS:  communications options\noptions\n1\n2 Access-Control-Allow-Methods  Access-Control-Allow-Headers\n200http204\n\n**204**\n\n204\n\n#### \n200204  \n\n  \n\n###  cookie\ncookieCORScookie\n\n```js\nA cross-origin request by default does not bring any credentials (cookies or HTTP authentication)\n```\ncookie  \n\n####  request cookie\n\nrequestcookiecredentialswithCredentials\n\n1. **Fetch credentials**\n    Fetchcredentials  \n    \n    credentials RequestcookiesXHRwithCredentials   \n    \n* omit: cookies.\n* same-origin: URL cookies HTTP Basic authentication .(,safari 11omitsafari 12)\n* include: , cookies HTTP Basic authentication .\n\nCORS  \n\n```js\nfetch('http://another.com', {\n  credentials: \"include\"\n});\n```\n2.   **XHR withCredentials**\n\nXMLHttpRequestwithCredentialscookie  \nbooleantrue/falsefalse  \n  \n\n\n```js\nvar xhr = new XMLHttpRequest();\nxhr.open('GET', 'http://example.com/', true);\nxhr.withCredentials = true;\nxhr.send(null);\n```\n\njqueryajaxaxios\n\n####  Access-Control-Allow-Credentials  \n\ncookie\n\n```js\nAccess-Control-Allow-Credentials:true\n```\nMDN   \n \n```js\n\nThe Access-Control-Allow-Credentials response header tells browsers whether to expose the response to frontend JavaScript code when the request's credentials mode (Request.credentials) is \"include\".  \n```\n\n credentialsincludejscodefalsejs\nAccess-Control-Allow-Credentialstrue\n()credentials  \n   \n  \nXMLHttpRequest.withCredentialsFetch credentials    \n\n\n#### \nCookieAccess-Control-Allow-Origin  \nCookieCookieCookie  \ndocument.cookieCookie   \n\ncookiepath  \n\n### \n\n  \n\n#### 1Access-Control-Allow-Origin*  \ncookie  \n#### 2\nAccess-Control-Allow-Origin\n\n  \n\n### \n#### \n[http://www.ruanyifeng.com/blog/2016/04/cors.html](http://www.ruanyifeng.com/blog/2016/04/cors.html)   \n[https://fetch.spec.whatwg.org/#cors-protocol-and-credentials](https://fetch.spec.whatwg.org/#cors-protocol-and-credentials)   \n[http://www.yunweipai.com/archives/9381.html](http://www.yunweipai.com/archives/9381.html)   \n\n\n\n","source":"_posts/CORS.md","raw":"---\ntitle: CORS \ndate: 2019-07-02\n---\n  \n## \nw3cCORSjsonpCORSpostCORS[](http://www.ruanyifeng.com/blog/2016/04/cors.html),CORS\n<!-- more -->\n## \n### \nCORSsimple requestnot-so-simple request)\n#### \n\n\n1. \nHEADGETPOST\n2. HTTP\nAccept\nAccept-Language\nContent-Language\nLast-Event-ID\nContent-Typeapplication/x-www-formmultipart/form-datatext/plain\n#### \n()optionsHTTPmethodputdelete  \n\n:\n\n```js\nvar url = 'http://api.alice.com/cors';\nvar xhr = new XMLHttpRequest();\n// PUT method\nxhr.open('PUT', url, true);\nxhr.setRequestHeader('X-Custom-Header', 'value');\nxhr.send();\n```  \notpios\n\n```js\nOPTIONS /cors HTTP/1.1\n// \nOrigin: http://api.bob.com\n// corsmethod\nAccess-Control-Request-Method: PUT\n// \nAccess-Control-Request-Headers: X-Custom-Header\nHost: api.alice.com\nAccept-Language: en-US\nConnection: keep-alive\nUser-Agent: Mozilla/5.0...\n```\n\n\n\n1originAccess-Control-Request-MethodAccess-Control-Request-Headers \n\n```js\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2.0.61 (Unix)\n//  \nAccess-Control-Allow-Origin: http://api.bob.com\n// \nAccess-Control-Allow-Methods: GET, POST, PUT\n// header\nAccess-Control-Allow-Headers: X-Custom-Header\nContent-Type: text/html; charset=utf-8\nContent-Encoding: gzip\nContent-Length: 0\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n```\n\nCORS\n\n```js\n// \nXMLHttpRequest cannot load http://api.alice.com.\nOrigin http://api.bob.com is not allowed by Access-Control-Allow-Origin.\n```\n\noptions  code \n### options code 200  204\n\noptionscode 200\ncode204\n\n#### \n\n1CORSoptions200\n\n```java\n// java \nif (req.getMethod().equals(\"OPTIONS\")) {\n     res.setStatus(200);\n }\n```\n\n2CORSnginx204.\n\n```shell\nif ($request_method = 'OPTIONS') { \n    add_header Access-Control-Allow-Origin *; \n    add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;\n    #****...\n    return 204; \n}\n```\n#### \n204200 MDN\n**200**\nhttp method \n* GET: \n* POST: \n\n**204**\n\nhaul204\n\n204\n\n#### options\noptionsoptiosncode  \n**fecth**\n[Fetch ](https://fetch.spec.whatwg.org/) CORSstatus200-209  \n\n```json\nIf a CORS check for request and response returns success \nand responses status is an ok status, \nrun these substeps.\n```\nresponseokstatus\n\n```json\nAn ok status is any status in the range 200 to 299, inclusive.\n```\n\nfetch  \n  \n**HTTP 1.1**\nhttp/1.1 code[22-XXcode](https://tools.ietf.org/html/rfc7231#section-6.3),\n\n* **200**\nhttp method \n* GET: \n* POST: \n* OPTIONS:  communications options\noptions\n1\n2 Access-Control-Allow-Methods  Access-Control-Allow-Headers\n200http204\n\n**204**\n\n204\n\n#### \n200204  \n\n  \n\n###  cookie\ncookieCORScookie\n\n```js\nA cross-origin request by default does not bring any credentials (cookies or HTTP authentication)\n```\ncookie  \n\n####  request cookie\n\nrequestcookiecredentialswithCredentials\n\n1. **Fetch credentials**\n    Fetchcredentials  \n    \n    credentials RequestcookiesXHRwithCredentials   \n    \n* omit: cookies.\n* same-origin: URL cookies HTTP Basic authentication .(,safari 11omitsafari 12)\n* include: , cookies HTTP Basic authentication .\n\nCORS  \n\n```js\nfetch('http://another.com', {\n  credentials: \"include\"\n});\n```\n2.   **XHR withCredentials**\n\nXMLHttpRequestwithCredentialscookie  \nbooleantrue/falsefalse  \n  \n\n\n```js\nvar xhr = new XMLHttpRequest();\nxhr.open('GET', 'http://example.com/', true);\nxhr.withCredentials = true;\nxhr.send(null);\n```\n\njqueryajaxaxios\n\n####  Access-Control-Allow-Credentials  \n\ncookie\n\n```js\nAccess-Control-Allow-Credentials:true\n```\nMDN   \n \n```js\n\nThe Access-Control-Allow-Credentials response header tells browsers whether to expose the response to frontend JavaScript code when the request's credentials mode (Request.credentials) is \"include\".  \n```\n\n credentialsincludejscodefalsejs\nAccess-Control-Allow-Credentialstrue\n()credentials  \n   \n  \nXMLHttpRequest.withCredentialsFetch credentials    \n\n\n#### \nCookieAccess-Control-Allow-Origin  \nCookieCookieCookie  \ndocument.cookieCookie   \n\ncookiepath  \n\n### \n\n  \n\n#### 1Access-Control-Allow-Origin*  \ncookie  \n#### 2\nAccess-Control-Allow-Origin\n\n  \n\n### \n#### \n[http://www.ruanyifeng.com/blog/2016/04/cors.html](http://www.ruanyifeng.com/blog/2016/04/cors.html)   \n[https://fetch.spec.whatwg.org/#cors-protocol-and-credentials](https://fetch.spec.whatwg.org/#cors-protocol-and-credentials)   \n[http://www.yunweipai.com/archives/9381.html](http://www.yunweipai.com/archives/9381.html)   \n\n\n\n","slug":"CORS","published":1,"updated":"2019-07-02T01:45:22.392Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt130002gw928nuvrdy7","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>w3cCORSjsonpCORSpostCORS<a href=\"http://www.ruanyifeng.com/blog/2016/04/cors.html\" target=\"_blank\" rel=\"noopener\"></a>,CORS<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>CORSsimple requestnot-so-simple request)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ol>\n<li><br>HEADGETPOST</li>\n<li>HTTP<br>Accept<br>Accept-Language<br>Content-Language<br>Last-Event-ID<br>Content-Typeapplication/x-www-formmultipart/form-datatext/plain<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>()optionsHTTPmethodputdelete  </li>\n</ol>\n<p>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"string\">'http://api.alice.com/cors'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\"><span class=\"comment\">// PUT method</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">'PUT'</span>, url, <span class=\"literal\">true</span>);</span><br><span class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Custom-Header'</span>, <span class=\"string\">'value'</span>);</span><br><span class=\"line\">xhr.send();</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">otpios</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">OPTIONS /cors HTTP/<span class=\"number\">1.1</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Origin: http:<span class=\"comment\">//api.bob.com</span></span><br><span class=\"line\"><span class=\"comment\">// corsmethod</span></span><br><span class=\"line\">Access-Control-Request-Method: PUT</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Access-Control-Request-Headers: X-Custom-Header</span><br><span class=\"line\">Host: api.alice.com</span><br><span class=\"line\">Accept-Language: en-US</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">User-Agent: Mozilla/<span class=\"number\">5.0</span>...</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>1originAccess-Control-Request-MethodAccess-Control-Request-Headers </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/<span class=\"number\">1.1</span> <span class=\"number\">200</span> OK</span><br><span class=\"line\"><span class=\"built_in\">Date</span>: Mon, <span class=\"number\">01</span> Dec <span class=\"number\">2008</span> <span class=\"number\">01</span>:<span class=\"number\">15</span>:<span class=\"number\">39</span> GMT</span><br><span class=\"line\">Server: Apache/<span class=\"number\">2.0</span><span class=\"number\">.61</span> (Unix)</span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Access-Control-Allow-Origin: http:<span class=\"comment\">//api.bob.com</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Access-Control-Allow-Methods: GET, POST, PUT</span><br><span class=\"line\"><span class=\"comment\">// header</span></span><br><span class=\"line\">Access-Control-Allow-Headers: X-Custom-Header</span><br><span class=\"line\">Content-Type: text/html; charset=utf<span class=\"number\">-8</span></span><br><span class=\"line\">Content-Encoding: gzip</span><br><span class=\"line\">Content-Length: <span class=\"number\">0</span></span><br><span class=\"line\">Keep-Alive: timeout=<span class=\"number\">2</span>, max=<span class=\"number\">100</span></span><br><span class=\"line\">Connection: Keep-Alive</span><br><span class=\"line\">Content-Type: text/plain</span><br></pre></td></tr></table></figure>\n<p>CORS</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">XMLHttpRequest cannot load http:<span class=\"comment\">//api.alice.com.</span></span><br><span class=\"line\">Origin http:<span class=\"comment\">//api.bob.com is not allowed by Access-Control-Allow-Origin.</span></span><br></pre></td></tr></table></figure>\n<p>options  code </p>\n<h3 id=\"options-code-200--204\"><a href=\"#options-code-200--204\" class=\"headerlink\" title=\"options code 200  204\"></a>options code 200  204</h3><p>optionscode 200<br>code204</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1CORSoptions200</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (req.getMethod().equals(<span class=\"string\">\"OPTIONS\"</span>)) &#123;</span><br><span class=\"line\">     res.setStatus(<span class=\"number\">200</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>2CORSnginx204.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if ($request_method = 'OPTIONS') &#123; </span><br><span class=\"line\">    add_header Access-Control-Allow-Origin *; </span><br><span class=\"line\">    add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;</span><br><span class=\"line\">    #****...</span><br><span class=\"line\">    return 204; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>204200 MDN<br><strong>200</strong><br>http method </p>\n<ul>\n<li>GET: </li>\n<li>POST: </li>\n</ul>\n<p><strong>204</strong><br><br>haul204</p>\n<p>204</p>\n<h4 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options\"></a>options</h4><p>optionsoptiosncode<br><strong>fecth</strong><br><a href=\"https://fetch.spec.whatwg.org/\" target=\"_blank\" rel=\"noopener\">Fetch </a> CORSstatus200-209  </p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">If a CORS check for request and response returns success </span><br><span class=\"line\">and responses status is an ok status, </span><br><span class=\"line\">run these substeps.</span><br></pre></td></tr></table></figure>\n<p>responseokstatus</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">An ok status is any status in the range 200 to 299, inclusive.</span><br></pre></td></tr></table></figure>\n<p><br>fetch  </p>\n<p><strong>HTTP 1.1</strong><br>http/1.1 code<a href=\"https://tools.ietf.org/html/rfc7231#section-6.3\" target=\"_blank\" rel=\"noopener\">22-XXcode</a>,</p>\n<ul>\n<li><strong>200</strong><br>http method </li>\n<li>GET: </li>\n<li>POST: </li>\n<li>OPTIONS:  communications options<br>options<br>1<br>2 Access-Control-Allow-Methods  Access-Control-Allow-Headers<br>200http204</li>\n</ul>\n<p><strong>204</strong><br><br>204</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>200204<br></p>\n<h3 id=\"-cookie\"><a href=\"#-cookie\" class=\"headerlink\" title=\" cookie\"></a> cookie</h3><p>cookieCORScookie</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A cross-origin request by <span class=\"keyword\">default</span> does not bring any credentials (cookies or HTTP authentication)</span><br></pre></td></tr></table></figure>\n<p>cookie  </p>\n<h4 id=\"-request-cookie\"><a href=\"#-request-cookie\" class=\"headerlink\" title=\" request cookie\"></a> request cookie</h4><p>requestcookiecredentialswithCredentials</p>\n<ol>\n<li><p><strong>Fetch credentials</strong><br> Fetchcredentials  </p>\n<p> credentials RequestcookiesXHRwithCredentials   </p>\n</li>\n</ol>\n<ul>\n<li>omit: cookies.</li>\n<li>same-origin: URL cookies HTTP Basic authentication .(,safari 11omitsafari 12)</li>\n<li>include: , cookies HTTP Basic authentication .</li>\n</ul>\n<p>CORS  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">'http://another.com'</span>, &#123;</span><br><span class=\"line\">  credentials: <span class=\"string\">\"include\"</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><strong>XHR withCredentials</strong></li>\n</ol>\n<p>XMLHttpRequestwithCredentialscookie<br>booleantrue/falsefalse<br><br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'http://example.com/'</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">xhr.withCredentials = <span class=\"literal\">true</span>;</span><br><span class=\"line\">xhr.send(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n<p>jqueryajaxaxios</p>\n<h4 id=\"-Access-Control-Allow-Credentials\"><a href=\"#-Access-Control-Allow-Credentials\" class=\"headerlink\" title=\" Access-Control-Allow-Credentials\"></a> Access-Control-Allow-Credentials</h4><p>cookie</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Access-Control-Allow-Credentials:<span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>MDN   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">The Access-Control-Allow-Credentials response header tells browsers whether to expose the response to frontend JavaScript code when the request<span class=\"string\">'s credentials mode (Request.credentials) is \"include\".</span></span><br></pre></td></tr></table></figure>\n<p> credentialsincludejscodefalsejs<br>Access-Control-Allow-Credentialstrue<br>()credentials  </p>\n<p><br>XMLHttpRequest.withCredentialsFetch credentials    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>CookieAccess-Control-Allow-Origin<br>CookieCookieCookie<br>document.cookieCookie   </p>\n<p>cookiepath  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<h4 id=\"1Access-Control-Allow-Origin\"><a href=\"#1Access-Control-Allow-Origin\" class=\"headerlink\" title=\"1Access-Control-Allow-Origin*\"></a>1Access-Control-Allow-Origin*</h4><p>cookie  </p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>Access-Control-Allow-Origin</p>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.ruanyifeng.com/blog/2016/04/cors.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2016/04/cors.html</a><br><a href=\"https://fetch.spec.whatwg.org/#cors-protocol-and-credentials\" target=\"_blank\" rel=\"noopener\">https://fetch.spec.whatwg.org/#cors-protocol-and-credentials</a><br><a href=\"http://www.yunweipai.com/archives/9381.html\" target=\"_blank\" rel=\"noopener\">http://www.yunweipai.com/archives/9381.html</a><br></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>w3cCORSjsonpCORSpostCORS<a href=\"http://www.ruanyifeng.com/blog/2016/04/cors.html\" target=\"_blank\" rel=\"noopener\"></a>,CORS<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>CORSsimple requestnot-so-simple request)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ol>\n<li><br>HEADGETPOST</li>\n<li>HTTP<br>Accept<br>Accept-Language<br>Content-Language<br>Last-Event-ID<br>Content-Typeapplication/x-www-formmultipart/form-datatext/plain<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>()optionsHTTPmethodputdelete  </li>\n</ol>\n<p>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"string\">'http://api.alice.com/cors'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\"><span class=\"comment\">// PUT method</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">'PUT'</span>, url, <span class=\"literal\">true</span>);</span><br><span class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Custom-Header'</span>, <span class=\"string\">'value'</span>);</span><br><span class=\"line\">xhr.send();</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">otpios</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">OPTIONS /cors HTTP/<span class=\"number\">1.1</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Origin: http:<span class=\"comment\">//api.bob.com</span></span><br><span class=\"line\"><span class=\"comment\">// corsmethod</span></span><br><span class=\"line\">Access-Control-Request-Method: PUT</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Access-Control-Request-Headers: X-Custom-Header</span><br><span class=\"line\">Host: api.alice.com</span><br><span class=\"line\">Accept-Language: en-US</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">User-Agent: Mozilla/<span class=\"number\">5.0</span>...</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>1originAccess-Control-Request-MethodAccess-Control-Request-Headers </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/<span class=\"number\">1.1</span> <span class=\"number\">200</span> OK</span><br><span class=\"line\"><span class=\"built_in\">Date</span>: Mon, <span class=\"number\">01</span> Dec <span class=\"number\">2008</span> <span class=\"number\">01</span>:<span class=\"number\">15</span>:<span class=\"number\">39</span> GMT</span><br><span class=\"line\">Server: Apache/<span class=\"number\">2.0</span><span class=\"number\">.61</span> (Unix)</span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Access-Control-Allow-Origin: http:<span class=\"comment\">//api.bob.com</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Access-Control-Allow-Methods: GET, POST, PUT</span><br><span class=\"line\"><span class=\"comment\">// header</span></span><br><span class=\"line\">Access-Control-Allow-Headers: X-Custom-Header</span><br><span class=\"line\">Content-Type: text/html; charset=utf<span class=\"number\">-8</span></span><br><span class=\"line\">Content-Encoding: gzip</span><br><span class=\"line\">Content-Length: <span class=\"number\">0</span></span><br><span class=\"line\">Keep-Alive: timeout=<span class=\"number\">2</span>, max=<span class=\"number\">100</span></span><br><span class=\"line\">Connection: Keep-Alive</span><br><span class=\"line\">Content-Type: text/plain</span><br></pre></td></tr></table></figure>\n<p>CORS</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">XMLHttpRequest cannot load http:<span class=\"comment\">//api.alice.com.</span></span><br><span class=\"line\">Origin http:<span class=\"comment\">//api.bob.com is not allowed by Access-Control-Allow-Origin.</span></span><br></pre></td></tr></table></figure>\n<p>options  code </p>\n<h3 id=\"options-code-200--204\"><a href=\"#options-code-200--204\" class=\"headerlink\" title=\"options code 200  204\"></a>options code 200  204</h3><p>optionscode 200<br>code204</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1CORSoptions200</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (req.getMethod().equals(<span class=\"string\">\"OPTIONS\"</span>)) &#123;</span><br><span class=\"line\">     res.setStatus(<span class=\"number\">200</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>2CORSnginx204.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if ($request_method = 'OPTIONS') &#123; </span><br><span class=\"line\">    add_header Access-Control-Allow-Origin *; </span><br><span class=\"line\">    add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;</span><br><span class=\"line\">    #****...</span><br><span class=\"line\">    return 204; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>204200 MDN<br><strong>200</strong><br>http method </p>\n<ul>\n<li>GET: </li>\n<li>POST: </li>\n</ul>\n<p><strong>204</strong><br><br>haul204</p>\n<p>204</p>\n<h4 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options\"></a>options</h4><p>optionsoptiosncode<br><strong>fecth</strong><br><a href=\"https://fetch.spec.whatwg.org/\" target=\"_blank\" rel=\"noopener\">Fetch </a> CORSstatus200-209  </p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">If a CORS check for request and response returns success </span><br><span class=\"line\">and responses status is an ok status, </span><br><span class=\"line\">run these substeps.</span><br></pre></td></tr></table></figure>\n<p>responseokstatus</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">An ok status is any status in the range 200 to 299, inclusive.</span><br></pre></td></tr></table></figure>\n<p><br>fetch  </p>\n<p><strong>HTTP 1.1</strong><br>http/1.1 code<a href=\"https://tools.ietf.org/html/rfc7231#section-6.3\" target=\"_blank\" rel=\"noopener\">22-XXcode</a>,</p>\n<ul>\n<li><strong>200</strong><br>http method </li>\n<li>GET: </li>\n<li>POST: </li>\n<li>OPTIONS:  communications options<br>options<br>1<br>2 Access-Control-Allow-Methods  Access-Control-Allow-Headers<br>200http204</li>\n</ul>\n<p><strong>204</strong><br><br>204</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>200204<br></p>\n<h3 id=\"-cookie\"><a href=\"#-cookie\" class=\"headerlink\" title=\" cookie\"></a> cookie</h3><p>cookieCORScookie</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A cross-origin request by <span class=\"keyword\">default</span> does not bring any credentials (cookies or HTTP authentication)</span><br></pre></td></tr></table></figure>\n<p>cookie  </p>\n<h4 id=\"-request-cookie\"><a href=\"#-request-cookie\" class=\"headerlink\" title=\" request cookie\"></a> request cookie</h4><p>requestcookiecredentialswithCredentials</p>\n<ol>\n<li><p><strong>Fetch credentials</strong><br> Fetchcredentials  </p>\n<p> credentials RequestcookiesXHRwithCredentials   </p>\n</li>\n</ol>\n<ul>\n<li>omit: cookies.</li>\n<li>same-origin: URL cookies HTTP Basic authentication .(,safari 11omitsafari 12)</li>\n<li>include: , cookies HTTP Basic authentication .</li>\n</ul>\n<p>CORS  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">'http://another.com'</span>, &#123;</span><br><span class=\"line\">  credentials: <span class=\"string\">\"include\"</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><strong>XHR withCredentials</strong></li>\n</ol>\n<p>XMLHttpRequestwithCredentialscookie<br>booleantrue/falsefalse<br><br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'http://example.com/'</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">xhr.withCredentials = <span class=\"literal\">true</span>;</span><br><span class=\"line\">xhr.send(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n<p>jqueryajaxaxios</p>\n<h4 id=\"-Access-Control-Allow-Credentials\"><a href=\"#-Access-Control-Allow-Credentials\" class=\"headerlink\" title=\" Access-Control-Allow-Credentials\"></a> Access-Control-Allow-Credentials</h4><p>cookie</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Access-Control-Allow-Credentials:<span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>MDN   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">The Access-Control-Allow-Credentials response header tells browsers whether to expose the response to frontend JavaScript code when the request<span class=\"string\">'s credentials mode (Request.credentials) is \"include\".</span></span><br></pre></td></tr></table></figure>\n<p> credentialsincludejscodefalsejs<br>Access-Control-Allow-Credentialstrue<br>()credentials  </p>\n<p><br>XMLHttpRequest.withCredentialsFetch credentials    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>CookieAccess-Control-Allow-Origin<br>CookieCookieCookie<br>document.cookieCookie   </p>\n<p>cookiepath  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<h4 id=\"1Access-Control-Allow-Origin\"><a href=\"#1Access-Control-Allow-Origin\" class=\"headerlink\" title=\"1Access-Control-Allow-Origin*\"></a>1Access-Control-Allow-Origin*</h4><p>cookie  </p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>Access-Control-Allow-Origin</p>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.ruanyifeng.com/blog/2016/04/cors.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2016/04/cors.html</a><br><a href=\"https://fetch.spec.whatwg.org/#cors-protocol-and-credentials\" target=\"_blank\" rel=\"noopener\">https://fetch.spec.whatwg.org/#cors-protocol-and-credentials</a><br><a href=\"http://www.yunweipai.com/archives/9381.html\" target=\"_blank\" rel=\"noopener\">http://www.yunweipai.com/archives/9381.html</a><br></p>"},{"title":"babel","date":"2018-06-01T00:00:29.000Z","_content":"##  \nbabeles6jsxbabelbabel[babel](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-asts)\n<!-- more -->\n## AST\n\nBabel  ESTree  AST[](https://github. com/babel/babel/blob/master/doc/ast/spec. md)\n  \n\n```js \nfunction square(n) {\n  return n * n;\n}\n```\nAST(babel)\n```js\n{\n  //\n  type: \"FunctionDeclaration\",\n  //\n  id: {\n    type: \"Identifier\",\n    //\n    name: \"square\"\n  },\n  //\n  params: [{\n    type: \"Identifier\",\n    name: \"n\"\n  }],\n  //\n  body: {\n     //\n    type: \"BlockStatement\",\n    body: [{\n       //return \n      type: \"ReturnStatement\",\n      argument: {\n        //\n        type: \"BinaryExpression\",\n        //\n        operator: \"*\",\n        left: {\n          type: \"Identifier\",\n          name: \"n\"\n        },\n        right: {\n          type: \"Identifier\",\n          name: \"n\"\n        }\n      }\n    }]\n  }\n}\n```\nNode),ASTjsbabeltypestartendloctypetype  \n  \njsASTbabel[AST Explorer ](http://astexplorer.net/#/Z1exs6BWMq)[ AST node types](https://github.com/babel/babylon/blob/master/ast/spec.md#variabledeclarator)   \n\n## Babel \nBabel  parsetransformgenerate,  \nbabel  \n\n AST source maps\n\n AST\n\n##  \n### Visitor\nbabelVisitorVisitor\n```js\nconst MyVisitor = {\n  //nodetypetypeIdentifier\n  Identifier() {\n    console.log(\"Called!\");\n  }\n};\n// \nfunction square(n) {\n  return n * n;\n} \n//\n//square\n// n\n//nIdentifier\npath.traverse(MyVisitor); \n//  \nCalled!\nCalled!\nCalled!\nCalled!\n```\n  \n\n```js   \nconst MyVisitor = {\n  Identifier: {\n    enter() {\n      console.log(\"Entered!\");\n    },\n    exit() {\n      console.log(\"Exited!\");\n    }\n  }\n}; \n```\n  \n\n|type\n```js\nconst MyVisitor = {\n  \"ExportNamedDeclaration|Flow\"(path) {}\n};\n```\n(babel-types)\nFunctionFunctionDeclarationFunctionExpressionArrowFunctionExpressionObjectMethodObjectMethod,type  \n\n```js  \nconst MyVisitor = {\n  Function(path) {}\n};\n```\n### Paths\nAST  PathsPath   \n\n```js  \n\n{\n  type: \"FunctionDeclaration\",\n  id: {\n    type: \"Identifier\",\n    name: \"square\"\n  },\n  ...\n}\n\n\n```\n\n Identifier Path  \n\n```js\n{\n  \"parent\": {\n    \"type\": \"FunctionDeclaration\",\n    \"id\": {...},\n    ....\n  },\n  \"node\": {\n    \"type\": \"Identifier\",\n    \"name\": \"square\"\n  }\n}\n```\n Identifier()    \n\n## \n\n\n   \n \n1. AST\n2. \n3. Visitor   \n   3.1   \n   3.2     \n   \n33.13.212AST\n    \n\n```js \nvar func = ()=>{\n    console.log(this.b)\n}; \n```\n():  \n\n```js  \nvar _this = this;\nvar func = function () {\n    console.log(_this.b);\n};\n```\n\n###    \n \n[AST Explorer ](http://astexplorer.net/#/Z1exs6BWMq)  \n\n```js\n        \"init\": {\n              \"type\": \"ArrowFunctionExpression\",\n              /*.......*/\n              \"id\": null,\n              //\n              \"params\": [],\n              \"body\": {\n                //,this\n                \"arguments\": [\n                        {\n                          \"type\": \"MemberExpression\",\n                          \"object\": {\n                             //this \n                            \"type\": \"ThisExpression\",\n                          },\n                          \"property\": {\n                             //b\n                            \"type\": \"Identifier\",\n                            \"name\": \"b\"\n                          }\n                        }\n                      ]\n             }\n        }\n```\nArrowFunctionExpressionthisThisExpression  \nvisitorArrowFunctionExpressionThisExpression  \n  \n```js  \n//visitorkeynode  type\nconst visitor = {\n    //this  \n    ThisExpression(path){\n        //this_this\n    },\n    //\n    ArrowFunctionExpression(path){\n       //FunctionExpression\n    }\n}   \n```\n###    \n  \n  \n  \n \n```js\n    //body\n    \"body\": [\n      //var _this = this;\n      {\n        \"type\": \"VariableDeclaration\",\n        \"kind\": \"var\",\n        \"declarations\": [\n          {\n            \"type\": \"VariableDeclarator\",\n            //left_this\n            \"id\": {\n              \"type\": \"Identifier\",\n              \"name\": \"_this\"\n            },\n            //rightthis\n            \"init\": {\n              \"type\": \"ThisExpression\"\n              /*****/\n            }\n      },   \n      // var func = function (b) {\n      //      console.log(_this.b);\n      //  }; \n      {\n        \"type\": \"VariableDeclaration\",\n        \"kind\": \"var\",\n        \"declarations\": [\n          {\n            /************/\n            \"arguments\": [\n                        {\n                          \"type\": \"MemberExpression\",\n                          //_this.b\n                          \"object\": {\n                            \"type\": \"Identifier\",\n                            \"name\": \"_this\"\n                          },\n                          \"property\": {\n                            \"type\": \"Identifier\",\n                            \"name\": \"b\"\n                          }\n                          ]\n          }\n      }\n    ]\n```\nArrowFunctionExpressionFunctionExpressionthisthis \npathapi  \n   \n* replaceWith(targetObj)   \n* findParent()   \n* insertBefore    \n\n  \n###    \n \ntoFunctionExpressionapi[FunctionExpression](https://github.com/babel/babylon/blob/master/ast/spec.md#functiondeclaration)babel    \n\n```js\n//@src  /babel/packages/babel-types/src/definitions/core.js\ndefineType(\"FunctionExpression\", {\n  inherits: \"FunctionDeclaration\",\n  //....\n}\n// FunctionDeclaration\ndefineType(\"FunctionDeclaration\", {\n  //: id,params,body..\n  builder: [\"id\", \"params\", \"body\", \"generator\", \"async\"],\n  visitor: [\"id\", \"params\", \"body\", \"returnType\", \"typeParameters\"]\n  //....  \n}\n\n```\n\n### [](https://babeljs.io/docs/core-packages/babel-types/)  \n   \n### Visitor\n \n```js  \nconst Visitor = {\n    //this\n    ThisExpression(path){\n        //var _this = this\n        let node = t.VariableDeclaration(\n            'var',\n            [\n                t.VariableDeclarator(\n                    t.Identifier('_this'),\n                    t.Identifier('this')\n                )\n            ]\n        ),\n        // _this\n        str = t.Identifier('_this'),\n        //\n        //\n        parentPath = path.findParent((path) => path.isVariableDeclaration())\n        //\n        if(parentPath){\n            //\n            parentPath.insertBefore(node)\n            path.replaceWith(\n                str\n            )\n        }else{\n            return\n        }\n    },\n    //\n    ArrowFunctionExpression(path){\n        var node = path.node\n        //t.FunctionExpressionpath\n        path.replaceWith(t.FunctionExpression(\n            node.id,\n            node.params,\n            node.body\n          ))\n    }\n}     \n```    \n\nvisitor   \n \n```js   \n//babelbabel-types \nexport default function({ types: t }) {\n  return {\n    visitor:Visitor\n  }\n```  \nbabel-corebabel-types  \n\n```js\nvar babel = require('babel-core');\nvar t = require('babel-types');\nvar code = `var func = ()=>{\n    console.log(this.b)\n  };`\nconst result = babel.transform(code, {\n\tplugins: [{\n\t  //Visitor\n\t\tvisitor: Visitor\n\t}]\n});  \n//code\n/**\n * var _this = this;\n * var func = function () {\n * console.log(_this.b);\n * }; \n */\nconsole.log(result.code);  \n```     \n\n### \nt.VariableDeclarationbabel-template\n\n```js\nconst buildRequire = template(`\n  var IMPORT_NAME = require(SOURCE);\n`);\n\nconst ast = buildRequire({\n  IMPORT_NAME: t.identifier(\"myModule\"),\n  SOURCE: t.stringLiteral(\"my-module\"),\n});\n```\n replaceWithSourceString\n\n```js\nFunctionDeclaration(path) {\n  path.replaceWithSourceString(`function add(a, b) {\n    return a + b;\n  }`);\n}\n```\n\n##   \n###    \n[Babel ](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-replacing-a-node)   \n[Babel for ES6? And Beyond!](https://www.h5jun.com/post/babel-for-es6-and-beyond.html)   \n\nbabeldemoapi[](https://github.com/xiaoxiangdaiyu/blog)\n\n\n\n\n","source":"_posts/babelplugin.md","raw":"---\ntitle: babel\ndate: 2018-06-1 08:00:29\ntags:\n---\n##  \nbabeles6jsxbabelbabel[babel](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-asts)\n<!-- more -->\n## AST\n\nBabel  ESTree  AST[](https://github. com/babel/babel/blob/master/doc/ast/spec. md)\n  \n\n```js \nfunction square(n) {\n  return n * n;\n}\n```\nAST(babel)\n```js\n{\n  //\n  type: \"FunctionDeclaration\",\n  //\n  id: {\n    type: \"Identifier\",\n    //\n    name: \"square\"\n  },\n  //\n  params: [{\n    type: \"Identifier\",\n    name: \"n\"\n  }],\n  //\n  body: {\n     //\n    type: \"BlockStatement\",\n    body: [{\n       //return \n      type: \"ReturnStatement\",\n      argument: {\n        //\n        type: \"BinaryExpression\",\n        //\n        operator: \"*\",\n        left: {\n          type: \"Identifier\",\n          name: \"n\"\n        },\n        right: {\n          type: \"Identifier\",\n          name: \"n\"\n        }\n      }\n    }]\n  }\n}\n```\nNode),ASTjsbabeltypestartendloctypetype  \n  \njsASTbabel[AST Explorer ](http://astexplorer.net/#/Z1exs6BWMq)[ AST node types](https://github.com/babel/babylon/blob/master/ast/spec.md#variabledeclarator)   \n\n## Babel \nBabel  parsetransformgenerate,  \nbabel  \n\n AST source maps\n\n AST\n\n##  \n### Visitor\nbabelVisitorVisitor\n```js\nconst MyVisitor = {\n  //nodetypetypeIdentifier\n  Identifier() {\n    console.log(\"Called!\");\n  }\n};\n// \nfunction square(n) {\n  return n * n;\n} \n//\n//square\n// n\n//nIdentifier\npath.traverse(MyVisitor); \n//  \nCalled!\nCalled!\nCalled!\nCalled!\n```\n  \n\n```js   \nconst MyVisitor = {\n  Identifier: {\n    enter() {\n      console.log(\"Entered!\");\n    },\n    exit() {\n      console.log(\"Exited!\");\n    }\n  }\n}; \n```\n  \n\n|type\n```js\nconst MyVisitor = {\n  \"ExportNamedDeclaration|Flow\"(path) {}\n};\n```\n(babel-types)\nFunctionFunctionDeclarationFunctionExpressionArrowFunctionExpressionObjectMethodObjectMethod,type  \n\n```js  \nconst MyVisitor = {\n  Function(path) {}\n};\n```\n### Paths\nAST  PathsPath   \n\n```js  \n\n{\n  type: \"FunctionDeclaration\",\n  id: {\n    type: \"Identifier\",\n    name: \"square\"\n  },\n  ...\n}\n\n\n```\n\n Identifier Path  \n\n```js\n{\n  \"parent\": {\n    \"type\": \"FunctionDeclaration\",\n    \"id\": {...},\n    ....\n  },\n  \"node\": {\n    \"type\": \"Identifier\",\n    \"name\": \"square\"\n  }\n}\n```\n Identifier()    \n\n## \n\n\n   \n \n1. AST\n2. \n3. Visitor   \n   3.1   \n   3.2     \n   \n33.13.212AST\n    \n\n```js \nvar func = ()=>{\n    console.log(this.b)\n}; \n```\n():  \n\n```js  \nvar _this = this;\nvar func = function () {\n    console.log(_this.b);\n};\n```\n\n###    \n \n[AST Explorer ](http://astexplorer.net/#/Z1exs6BWMq)  \n\n```js\n        \"init\": {\n              \"type\": \"ArrowFunctionExpression\",\n              /*.......*/\n              \"id\": null,\n              //\n              \"params\": [],\n              \"body\": {\n                //,this\n                \"arguments\": [\n                        {\n                          \"type\": \"MemberExpression\",\n                          \"object\": {\n                             //this \n                            \"type\": \"ThisExpression\",\n                          },\n                          \"property\": {\n                             //b\n                            \"type\": \"Identifier\",\n                            \"name\": \"b\"\n                          }\n                        }\n                      ]\n             }\n        }\n```\nArrowFunctionExpressionthisThisExpression  \nvisitorArrowFunctionExpressionThisExpression  \n  \n```js  \n//visitorkeynode  type\nconst visitor = {\n    //this  \n    ThisExpression(path){\n        //this_this\n    },\n    //\n    ArrowFunctionExpression(path){\n       //FunctionExpression\n    }\n}   \n```\n###    \n  \n  \n  \n \n```js\n    //body\n    \"body\": [\n      //var _this = this;\n      {\n        \"type\": \"VariableDeclaration\",\n        \"kind\": \"var\",\n        \"declarations\": [\n          {\n            \"type\": \"VariableDeclarator\",\n            //left_this\n            \"id\": {\n              \"type\": \"Identifier\",\n              \"name\": \"_this\"\n            },\n            //rightthis\n            \"init\": {\n              \"type\": \"ThisExpression\"\n              /*****/\n            }\n      },   \n      // var func = function (b) {\n      //      console.log(_this.b);\n      //  }; \n      {\n        \"type\": \"VariableDeclaration\",\n        \"kind\": \"var\",\n        \"declarations\": [\n          {\n            /************/\n            \"arguments\": [\n                        {\n                          \"type\": \"MemberExpression\",\n                          //_this.b\n                          \"object\": {\n                            \"type\": \"Identifier\",\n                            \"name\": \"_this\"\n                          },\n                          \"property\": {\n                            \"type\": \"Identifier\",\n                            \"name\": \"b\"\n                          }\n                          ]\n          }\n      }\n    ]\n```\nArrowFunctionExpressionFunctionExpressionthisthis \npathapi  \n   \n* replaceWith(targetObj)   \n* findParent()   \n* insertBefore    \n\n  \n###    \n \ntoFunctionExpressionapi[FunctionExpression](https://github.com/babel/babylon/blob/master/ast/spec.md#functiondeclaration)babel    \n\n```js\n//@src  /babel/packages/babel-types/src/definitions/core.js\ndefineType(\"FunctionExpression\", {\n  inherits: \"FunctionDeclaration\",\n  //....\n}\n// FunctionDeclaration\ndefineType(\"FunctionDeclaration\", {\n  //: id,params,body..\n  builder: [\"id\", \"params\", \"body\", \"generator\", \"async\"],\n  visitor: [\"id\", \"params\", \"body\", \"returnType\", \"typeParameters\"]\n  //....  \n}\n\n```\n\n### [](https://babeljs.io/docs/core-packages/babel-types/)  \n   \n### Visitor\n \n```js  \nconst Visitor = {\n    //this\n    ThisExpression(path){\n        //var _this = this\n        let node = t.VariableDeclaration(\n            'var',\n            [\n                t.VariableDeclarator(\n                    t.Identifier('_this'),\n                    t.Identifier('this')\n                )\n            ]\n        ),\n        // _this\n        str = t.Identifier('_this'),\n        //\n        //\n        parentPath = path.findParent((path) => path.isVariableDeclaration())\n        //\n        if(parentPath){\n            //\n            parentPath.insertBefore(node)\n            path.replaceWith(\n                str\n            )\n        }else{\n            return\n        }\n    },\n    //\n    ArrowFunctionExpression(path){\n        var node = path.node\n        //t.FunctionExpressionpath\n        path.replaceWith(t.FunctionExpression(\n            node.id,\n            node.params,\n            node.body\n          ))\n    }\n}     \n```    \n\nvisitor   \n \n```js   \n//babelbabel-types \nexport default function({ types: t }) {\n  return {\n    visitor:Visitor\n  }\n```  \nbabel-corebabel-types  \n\n```js\nvar babel = require('babel-core');\nvar t = require('babel-types');\nvar code = `var func = ()=>{\n    console.log(this.b)\n  };`\nconst result = babel.transform(code, {\n\tplugins: [{\n\t  //Visitor\n\t\tvisitor: Visitor\n\t}]\n});  \n//code\n/**\n * var _this = this;\n * var func = function () {\n * console.log(_this.b);\n * }; \n */\nconsole.log(result.code);  \n```     \n\n### \nt.VariableDeclarationbabel-template\n\n```js\nconst buildRequire = template(`\n  var IMPORT_NAME = require(SOURCE);\n`);\n\nconst ast = buildRequire({\n  IMPORT_NAME: t.identifier(\"myModule\"),\n  SOURCE: t.stringLiteral(\"my-module\"),\n});\n```\n replaceWithSourceString\n\n```js\nFunctionDeclaration(path) {\n  path.replaceWithSourceString(`function add(a, b) {\n    return a + b;\n  }`);\n}\n```\n\n##   \n###    \n[Babel ](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-replacing-a-node)   \n[Babel for ES6? And Beyond!](https://www.h5jun.com/post/babel-for-es6-and-beyond.html)   \n\nbabeldemoapi[](https://github.com/xiaoxiangdaiyu/blog)\n\n\n\n\n","slug":"babelplugin","published":1,"updated":"2019-09-23T09:08:25.446Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt160004gw929794145r","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>babeles6jsxbabelbabel<a href=\"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-asts\" target=\"_blank\" rel=\"noopener\">babel</a><br><a id=\"more\"></a></p>\n<h2 id=\"AST\"><a href=\"#AST\" class=\"headerlink\" title=\"AST\"></a>AST</h2><p>Babel  ESTree  AST<a href=\"https://github. com/babel/babel/blob/master/doc/ast/spec. md\" target=\"_blank\" rel=\"noopener\"></a><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">square</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n * n;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AST(babel)<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  type: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  id: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    name: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  params: [&#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">  &#125;],</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  body: &#123;</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br><span class=\"line\">    type: <span class=\"string\">\"BlockStatement\"</span>,</span><br><span class=\"line\">    body: [&#123;</span><br><span class=\"line\">       <span class=\"comment\">//return </span></span><br><span class=\"line\">      type: <span class=\"string\">\"ReturnStatement\"</span>,</span><br><span class=\"line\">      argument: &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        type: <span class=\"string\">\"BinaryExpression\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        operator: <span class=\"string\">\"*\"</span>,</span><br><span class=\"line\">        left: &#123;</span><br><span class=\"line\">          type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        right: &#123;</span><br><span class=\"line\">          type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Node),ASTjsbabeltypestartendloctypetype  </p>\n<p>jsASTbabel<a href=\"http://astexplorer.net/#/Z1exs6BWMq\" target=\"_blank\" rel=\"noopener\">AST Explorer </a><a href=\"https://github.com/babel/babylon/blob/master/ast/spec.md#variabledeclarator\" target=\"_blank\" rel=\"noopener\"> AST node types</a>   </p>\n<h2 id=\"Babel-\"><a href=\"#Babel-\" class=\"headerlink\" title=\"Babel \"></a>Babel </h2><p>Babel  parsetransformgenerate,<br>babel  </p>\n<p> AST source maps</p>\n<p> AST</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Visitor\"><a href=\"#Visitor\" class=\"headerlink\" title=\"Visitor\"></a>Visitor</h3><p>babelVisitorVisitor<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"comment\">//nodetypetypeIdentifier</span></span><br><span class=\"line\">  Identifier() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Called!\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">square</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n * n;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//square</span></span><br><span class=\"line\"><span class=\"comment\">// n</span></span><br><span class=\"line\"><span class=\"comment\">//nIdentifier</span></span><br><span class=\"line\">path.traverse(MyVisitor); </span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br></pre></td></tr></table></figure></p>\n<p><br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  Identifier: &#123;</span><br><span class=\"line\">    enter() &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Entered!\"</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    exit() &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Exited!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>  </p>\n<p>|type<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"string\">\"ExportNamedDeclaration|Flow\"</span>(path) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>(babel-types)<br>FunctionFunctionDeclarationFunctionExpressionArrowFunctionExpressionObjectMethodObjectMethod,type  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">Function</span>(path) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Paths\"><a href=\"#Paths\" class=\"headerlink\" title=\"Paths\"></a>Paths</h3><p>AST  PathsPath   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  type: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  id: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    name: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Identifier Path  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"parent\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"id\"</span>: &#123;...&#125;,</span><br><span class=\"line\">    ....</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"node\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Identifier()    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>   </p>\n<ol>\n<li>AST</li>\n<li></li>\n<li>Visitor<br>3.1 <br>3.2     </li>\n</ol>\n<p>33.13.212AST<br>    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.b)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>():  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(_this.b);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://astexplorer.net/#/Z1exs6BWMq\" target=\"_blank\" rel=\"noopener\">AST Explorer </a>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"init\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ArrowFunctionExpression\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">/*.......*/</span></span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"string\">\"params\"</span>: [],</span><br><span class=\"line\">      <span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">//,this</span></span><br><span class=\"line\">        <span class=\"string\">\"arguments\"</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                  <span class=\"string\">\"type\"</span>: <span class=\"string\">\"MemberExpression\"</span>,</span><br><span class=\"line\">                  <span class=\"string\">\"object\"</span>: &#123;</span><br><span class=\"line\">                     <span class=\"comment\">//this </span></span><br><span class=\"line\">                    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ThisExpression\"</span>,</span><br><span class=\"line\">                  &#125;,</span><br><span class=\"line\">                  <span class=\"string\">\"property\"</span>: &#123;</span><br><span class=\"line\">                     <span class=\"comment\">//b</span></span><br><span class=\"line\">                    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"b\"</span></span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              ]</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ArrowFunctionExpressionthisThisExpression<br>visitorArrowFunctionExpressionThisExpression  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//visitorkeynode  type</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> visitor = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//this  </span></span><br><span class=\"line\">    ThisExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//this_this</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    ArrowFunctionExpression(path)&#123;</span><br><span class=\"line\">       <span class=\"comment\">//FunctionExpression</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//body</span></span><br><span class=\"line\"><span class=\"string\">\"body\"</span>: [</span><br><span class=\"line\">  <span class=\"comment\">//var _this = this;</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"kind\"</span>: <span class=\"string\">\"var\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"declarations\"</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclarator\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">//left_this</span></span><br><span class=\"line\">        <span class=\"string\">\"id\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"name\"</span>: <span class=\"string\">\"_this\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">//rightthis</span></span><br><span class=\"line\">        <span class=\"string\">\"init\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ThisExpression\"</span></span><br><span class=\"line\">          <span class=\"comment\">/*****/</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">  &#125;,   </span><br><span class=\"line\">  <span class=\"comment\">// var func = function (b) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      console.log(_this.b);</span></span><br><span class=\"line\">  <span class=\"comment\">//  &#125;; </span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"kind\"</span>: <span class=\"string\">\"var\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"declarations\"</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">/************/</span></span><br><span class=\"line\">        <span class=\"string\">\"arguments\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"MemberExpression\"</span>,</span><br><span class=\"line\">                      <span class=\"comment\">//_this.b</span></span><br><span class=\"line\">                      <span class=\"string\">\"object\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"_this\"</span></span><br><span class=\"line\">                      &#125;,</span><br><span class=\"line\">                      <span class=\"string\">\"property\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"b\"</span></span><br><span class=\"line\">                      &#125;</span><br><span class=\"line\">                      ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>ArrowFunctionExpressionFunctionExpressionthisthis<br>pathapi  </p>\n<ul>\n<li>replaceWith(targetObj)   </li>\n<li>findParent()   </li>\n<li>insertBefore <br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>toFunctionExpressionapi<a href=\"https://github.com/babel/babylon/blob/master/ast/spec.md#functiondeclaration\" target=\"_blank\" rel=\"noopener\">FunctionExpression</a>babel    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//@src  /babel/packages/babel-types/src/definitions/core.js</span></span><br><span class=\"line\">defineType(<span class=\"string\">\"FunctionExpression\"</span>, &#123;</span><br><span class=\"line\">  inherits: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">//....</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// FunctionDeclaration</span></span><br><span class=\"line\">defineType(<span class=\"string\">\"FunctionDeclaration\"</span>, &#123;</span><br><span class=\"line\">  <span class=\"comment\">//: id,params,body..</span></span><br><span class=\"line\">  builder: [<span class=\"string\">\"id\"</span>, <span class=\"string\">\"params\"</span>, <span class=\"string\">\"body\"</span>, <span class=\"string\">\"generator\"</span>, <span class=\"string\">\"async\"</span>],</span><br><span class=\"line\">  visitor: [<span class=\"string\">\"id\"</span>, <span class=\"string\">\"params\"</span>, <span class=\"string\">\"body\"</span>, <span class=\"string\">\"returnType\"</span>, <span class=\"string\">\"typeParameters\"</span>]</span><br><span class=\"line\">  <span class=\"comment\">//....  </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://babeljs.io/docs/core-packages/babel-types/\" target=\"_blank\" rel=\"noopener\"></a></h3><h3 id=\"Visitor\"><a href=\"#Visitor\" class=\"headerlink\" title=\"Visitor\"></a>Visitor</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Visitor = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//this</span></span><br><span class=\"line\">    ThisExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//var _this = this</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> node = t.VariableDeclaration(</span><br><span class=\"line\">            <span class=\"string\">'var'</span>,</span><br><span class=\"line\">            [</span><br><span class=\"line\">                t.VariableDeclarator(</span><br><span class=\"line\">                    t.Identifier(<span class=\"string\">'_this'</span>),</span><br><span class=\"line\">                    t.Identifier(<span class=\"string\">'this'</span>)</span><br><span class=\"line\">                )</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        <span class=\"comment\">// _this</span></span><br><span class=\"line\">        str = t.Identifier(<span class=\"string\">'_this'</span>),</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        parentPath = path.findParent(<span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> path.isVariableDeclaration())</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(parentPath)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//</span></span><br><span class=\"line\">            parentPath.insertBefore(node)</span><br><span class=\"line\">            path.replaceWith(</span><br><span class=\"line\">                str</span><br><span class=\"line\">            )</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    ArrowFunctionExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> node = path.node</span><br><span class=\"line\">        <span class=\"comment\">//t.FunctionExpressionpath</span></span><br><span class=\"line\">        path.replaceWith(t.FunctionExpression(</span><br><span class=\"line\">            node.id,</span><br><span class=\"line\">            node.params,</span><br><span class=\"line\">            node.body</span><br><span class=\"line\">          ))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;     </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">visitor   </span></span><br><span class=\"line\"><span class=\"string\"> </span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js   </span><br><span class=\"line\"><span class=\"comment\">//babelbabel-types </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">&#123; types: t &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    visitor:Visitor</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">babel-corebabel-types  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">'babel-core'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> t = <span class=\"built_in\">require</span>(<span class=\"string\">'babel-types'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> code = <span class=\"string\">`var func = ()=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"string\">    console.log(this.b)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;;`</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> result = babel.transform(code, &#123;</span><br><span class=\"line\">\tplugins: [&#123;</span><br><span class=\"line\">\t  <span class=\"comment\">//Visitor</span></span><br><span class=\"line\">\t\tvisitor: Visitor</span><br><span class=\"line\">\t&#125;]</span><br><span class=\"line\">&#125;);  </span><br><span class=\"line\"><span class=\"comment\">//code</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * var _this = this;</span></span><br><span class=\"line\"><span class=\"comment\"> * var func = function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> * console.log(_this.b);</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;; </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(result.code);  </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`     </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">### </span></span><br><span class=\"line\"><span class=\"string\">t.VariableDeclarationbabel-template</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> buildRequire = template(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  var IMPORT_NAME = require(SOURCE);</span></span><br><span class=\"line\"><span class=\"string\">`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ast = buildRequire(&#123;</span><br><span class=\"line\">  IMPORT_NAME: t.identifier(<span class=\"string\">\"myModule\"</span>),</span><br><span class=\"line\">  SOURCE: t.stringLiteral(<span class=\"string\">\"my-module\"</span>),</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p> replaceWithSourceString</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FunctionDeclaration(path) &#123;</span><br><span class=\"line\">  path.replaceWithSourceString(<span class=\"string\">`function add(a, b) &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return a + b;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-replacing-a-node\" target=\"_blank\" rel=\"noopener\">Babel </a><br><a href=\"https://www.h5jun.com/post/babel-for-es6-and-beyond.html\" target=\"_blank\" rel=\"noopener\">Babel for ES6? And Beyond!</a>   </p>\n<p>babeldemoapi<a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>babeles6jsxbabelbabel<a href=\"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-asts\" target=\"_blank\" rel=\"noopener\">babel</a><br>","more":"</p>\n<h2 id=\"AST\"><a href=\"#AST\" class=\"headerlink\" title=\"AST\"></a>AST</h2><p>Babel  ESTree  AST<a href=\"https://github. com/babel/babel/blob/master/doc/ast/spec. md\" target=\"_blank\" rel=\"noopener\"></a><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">square</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n * n;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AST(babel)<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  type: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  id: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    name: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  params: [&#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">  &#125;],</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  body: &#123;</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br><span class=\"line\">    type: <span class=\"string\">\"BlockStatement\"</span>,</span><br><span class=\"line\">    body: [&#123;</span><br><span class=\"line\">       <span class=\"comment\">//return </span></span><br><span class=\"line\">      type: <span class=\"string\">\"ReturnStatement\"</span>,</span><br><span class=\"line\">      argument: &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        type: <span class=\"string\">\"BinaryExpression\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        operator: <span class=\"string\">\"*\"</span>,</span><br><span class=\"line\">        left: &#123;</span><br><span class=\"line\">          type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        right: &#123;</span><br><span class=\"line\">          type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"n\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Node),ASTjsbabeltypestartendloctypetype  </p>\n<p>jsASTbabel<a href=\"http://astexplorer.net/#/Z1exs6BWMq\" target=\"_blank\" rel=\"noopener\">AST Explorer </a><a href=\"https://github.com/babel/babylon/blob/master/ast/spec.md#variabledeclarator\" target=\"_blank\" rel=\"noopener\"> AST node types</a>   </p>\n<h2 id=\"Babel-\"><a href=\"#Babel-\" class=\"headerlink\" title=\"Babel \"></a>Babel </h2><p>Babel  parsetransformgenerate,<br>babel  </p>\n<p> AST source maps</p>\n<p> AST</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Visitor\"><a href=\"#Visitor\" class=\"headerlink\" title=\"Visitor\"></a>Visitor</h3><p>babelVisitorVisitor<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"comment\">//nodetypetypeIdentifier</span></span><br><span class=\"line\">  Identifier() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Called!\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">square</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n * n;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//square</span></span><br><span class=\"line\"><span class=\"comment\">// n</span></span><br><span class=\"line\"><span class=\"comment\">//nIdentifier</span></span><br><span class=\"line\">path.traverse(MyVisitor); </span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br><span class=\"line\">Called!</span><br></pre></td></tr></table></figure></p>\n<p><br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  Identifier: &#123;</span><br><span class=\"line\">    enter() &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Entered!\"</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    exit() &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Exited!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>  </p>\n<p>|type<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"string\">\"ExportNamedDeclaration|Flow\"</span>(path) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>(babel-types)<br>FunctionFunctionDeclarationFunctionExpressionArrowFunctionExpressionObjectMethodObjectMethod,type  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> MyVisitor = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">Function</span>(path) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Paths\"><a href=\"#Paths\" class=\"headerlink\" title=\"Paths\"></a>Paths</h3><p>AST  PathsPath   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  type: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  id: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    name: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Identifier Path  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"parent\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"id\"</span>: &#123;...&#125;,</span><br><span class=\"line\">    ....</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"node\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"square\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Identifier()    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>   </p>\n<ol>\n<li>AST</li>\n<li></li>\n<li>Visitor<br>3.1 <br>3.2     </li>\n</ol>\n<p>33.13.212AST<br>    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.b)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>():  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(_this.b);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://astexplorer.net/#/Z1exs6BWMq\" target=\"_blank\" rel=\"noopener\">AST Explorer </a>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"init\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ArrowFunctionExpression\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">/*.......*/</span></span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"string\">\"params\"</span>: [],</span><br><span class=\"line\">      <span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">//,this</span></span><br><span class=\"line\">        <span class=\"string\">\"arguments\"</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                  <span class=\"string\">\"type\"</span>: <span class=\"string\">\"MemberExpression\"</span>,</span><br><span class=\"line\">                  <span class=\"string\">\"object\"</span>: &#123;</span><br><span class=\"line\">                     <span class=\"comment\">//this </span></span><br><span class=\"line\">                    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ThisExpression\"</span>,</span><br><span class=\"line\">                  &#125;,</span><br><span class=\"line\">                  <span class=\"string\">\"property\"</span>: &#123;</span><br><span class=\"line\">                     <span class=\"comment\">//b</span></span><br><span class=\"line\">                    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"b\"</span></span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              ]</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ArrowFunctionExpressionthisThisExpression<br>visitorArrowFunctionExpressionThisExpression  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//visitorkeynode  type</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> visitor = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//this  </span></span><br><span class=\"line\">    ThisExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//this_this</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    ArrowFunctionExpression(path)&#123;</span><br><span class=\"line\">       <span class=\"comment\">//FunctionExpression</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//body</span></span><br><span class=\"line\"><span class=\"string\">\"body\"</span>: [</span><br><span class=\"line\">  <span class=\"comment\">//var _this = this;</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"kind\"</span>: <span class=\"string\">\"var\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"declarations\"</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclarator\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">//left_this</span></span><br><span class=\"line\">        <span class=\"string\">\"id\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"name\"</span>: <span class=\"string\">\"_this\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">//rightthis</span></span><br><span class=\"line\">        <span class=\"string\">\"init\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"type\"</span>: <span class=\"string\">\"ThisExpression\"</span></span><br><span class=\"line\">          <span class=\"comment\">/*****/</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">  &#125;,   </span><br><span class=\"line\">  <span class=\"comment\">// var func = function (b) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      console.log(_this.b);</span></span><br><span class=\"line\">  <span class=\"comment\">//  &#125;; </span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"type\"</span>: <span class=\"string\">\"VariableDeclaration\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"kind\"</span>: <span class=\"string\">\"var\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"declarations\"</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">/************/</span></span><br><span class=\"line\">        <span class=\"string\">\"arguments\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"MemberExpression\"</span>,</span><br><span class=\"line\">                      <span class=\"comment\">//_this.b</span></span><br><span class=\"line\">                      <span class=\"string\">\"object\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"_this\"</span></span><br><span class=\"line\">                      &#125;,</span><br><span class=\"line\">                      <span class=\"string\">\"property\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"Identifier\"</span>,</span><br><span class=\"line\">                        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"b\"</span></span><br><span class=\"line\">                      &#125;</span><br><span class=\"line\">                      ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>ArrowFunctionExpressionFunctionExpressionthisthis<br>pathapi  </p>\n<ul>\n<li>replaceWith(targetObj)   </li>\n<li>findParent()   </li>\n<li>insertBefore <br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>toFunctionExpressionapi<a href=\"https://github.com/babel/babylon/blob/master/ast/spec.md#functiondeclaration\" target=\"_blank\" rel=\"noopener\">FunctionExpression</a>babel    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//@src  /babel/packages/babel-types/src/definitions/core.js</span></span><br><span class=\"line\">defineType(<span class=\"string\">\"FunctionExpression\"</span>, &#123;</span><br><span class=\"line\">  inherits: <span class=\"string\">\"FunctionDeclaration\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">//....</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// FunctionDeclaration</span></span><br><span class=\"line\">defineType(<span class=\"string\">\"FunctionDeclaration\"</span>, &#123;</span><br><span class=\"line\">  <span class=\"comment\">//: id,params,body..</span></span><br><span class=\"line\">  builder: [<span class=\"string\">\"id\"</span>, <span class=\"string\">\"params\"</span>, <span class=\"string\">\"body\"</span>, <span class=\"string\">\"generator\"</span>, <span class=\"string\">\"async\"</span>],</span><br><span class=\"line\">  visitor: [<span class=\"string\">\"id\"</span>, <span class=\"string\">\"params\"</span>, <span class=\"string\">\"body\"</span>, <span class=\"string\">\"returnType\"</span>, <span class=\"string\">\"typeParameters\"</span>]</span><br><span class=\"line\">  <span class=\"comment\">//....  </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://babeljs.io/docs/core-packages/babel-types/\" target=\"_blank\" rel=\"noopener\"></a></h3><h3 id=\"Visitor\"><a href=\"#Visitor\" class=\"headerlink\" title=\"Visitor\"></a>Visitor</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Visitor = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//this</span></span><br><span class=\"line\">    ThisExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//var _this = this</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> node = t.VariableDeclaration(</span><br><span class=\"line\">            <span class=\"string\">'var'</span>,</span><br><span class=\"line\">            [</span><br><span class=\"line\">                t.VariableDeclarator(</span><br><span class=\"line\">                    t.Identifier(<span class=\"string\">'_this'</span>),</span><br><span class=\"line\">                    t.Identifier(<span class=\"string\">'this'</span>)</span><br><span class=\"line\">                )</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        ),</span><br><span class=\"line\">        <span class=\"comment\">// _this</span></span><br><span class=\"line\">        str = t.Identifier(<span class=\"string\">'_this'</span>),</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        parentPath = path.findParent(<span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> path.isVariableDeclaration())</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(parentPath)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//</span></span><br><span class=\"line\">            parentPath.insertBefore(node)</span><br><span class=\"line\">            path.replaceWith(</span><br><span class=\"line\">                str</span><br><span class=\"line\">            )</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    ArrowFunctionExpression(path)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> node = path.node</span><br><span class=\"line\">        <span class=\"comment\">//t.FunctionExpressionpath</span></span><br><span class=\"line\">        path.replaceWith(t.FunctionExpression(</span><br><span class=\"line\">            node.id,</span><br><span class=\"line\">            node.params,</span><br><span class=\"line\">            node.body</span><br><span class=\"line\">          ))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;     </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">visitor   </span></span><br><span class=\"line\"><span class=\"string\"> </span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js   </span><br><span class=\"line\"><span class=\"comment\">//babelbabel-types </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">&#123; types: t &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    visitor:Visitor</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">babel-corebabel-types  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">'babel-core'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> t = <span class=\"built_in\">require</span>(<span class=\"string\">'babel-types'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> code = <span class=\"string\">`var func = ()=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"string\">    console.log(this.b)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;;`</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> result = babel.transform(code, &#123;</span><br><span class=\"line\">\tplugins: [&#123;</span><br><span class=\"line\">\t  <span class=\"comment\">//Visitor</span></span><br><span class=\"line\">\t\tvisitor: Visitor</span><br><span class=\"line\">\t&#125;]</span><br><span class=\"line\">&#125;);  </span><br><span class=\"line\"><span class=\"comment\">//code</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * var _this = this;</span></span><br><span class=\"line\"><span class=\"comment\"> * var func = function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> * console.log(_this.b);</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;; </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(result.code);  </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`     </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">### </span></span><br><span class=\"line\"><span class=\"string\">t.VariableDeclarationbabel-template</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> buildRequire = template(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  var IMPORT_NAME = require(SOURCE);</span></span><br><span class=\"line\"><span class=\"string\">`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ast = buildRequire(&#123;</span><br><span class=\"line\">  IMPORT_NAME: t.identifier(<span class=\"string\">\"myModule\"</span>),</span><br><span class=\"line\">  SOURCE: t.stringLiteral(<span class=\"string\">\"my-module\"</span>),</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p> replaceWithSourceString</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FunctionDeclaration(path) &#123;</span><br><span class=\"line\">  path.replaceWithSourceString(<span class=\"string\">`function add(a, b) &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return a + b;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-replacing-a-node\" target=\"_blank\" rel=\"noopener\">Babel </a><br><a href=\"https://www.h5jun.com/post/babel-for-es6-and-beyond.html\" target=\"_blank\" rel=\"noopener\">Babel for ES6? And Beyond!</a>   </p>\n<p>babeldemoapi<a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>"},{"title":"-javascript","date":"2018-10-24T16:00:00.000Z","_content":"  \n## \n[](https://juejin.im/post/5bd07377e51d457a58075974)-[Dependency injection in JavaScript](http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript)\n<!-- more -->\njavascript  \n\n## \najax\n\n```js\nvar service = function() {\n    return { name: 'Service' };\n}\nvar router = function() {\n    return { name: 'Router' };\n}\n```\n\n\n\n```js\nvar doSomething = function(other) {\n    var s = service();\n    var r = router();\n};\n```\n\n\nServiceXMLServiceJSONmock  \n\n```js\nvar doSomething = function(service, router, other) {\n    var s = service();\n    var r = router();\n};\n```\n\ndosomethingdoSomething\n  \ndoSomething\n\n```js\n//a.js\nvar a = doSomething(service,router,1)\n//b.js \nvar b = doSomething(service,router,2)\n// doSomething\n// \nvar doSomething = function(service, router, third,thother) {\n    var s = service();\n    var r = router();\n    //***\n};\n\n```\n\n\n\n*  \n* \n* \n* \n* \n\n\n\n### requirejs/AMD\n\nrequirejs\n\n```js\ndefine(['service', 'router'], function(service, router) {       \n    // ...\n});\n```\n\ninjector  \n\n```js\nvar doSomething = injector.resolve(['service', 'router'], function(service, router, other) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\ndoSomethingexpect.js[TDD](https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91)\n\ninjector\n  \n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function(deps, func, scope) {\n\n    }\n}\n```\n\ndepsdependencies.apply\n\n```js\n //func\nresolve: function(deps, func, scope) {\n    var args = [];\n    //\n    for(var i=0; i<deps.length, d=deps[i]; i++) {\n        if(this.dependencies[d]) {\n            args.push(this.dependencies[d]);\n        } else {\n            throw new Error('Can\\'t resolve ' + d);\n        }\n    }\n    //\n    return function() {\n        func.apply(scope || {}, args.concat(Array.prototype.slice.call(arguments, 0)));\n    }        \n}\n```\n\nscopeArray.prototype.slice.call(arguments, 0)arguments()  \n   \n  \n### \n\njsdoSomethingdoSomething.toString() \n\n```js\n\"function (service, router, other) {\n    var s = service();\n    var r = router();\n}\"\n```\n\nnameAngularAngulararguments\n\n```js\n/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m\n```\n\nresolve\n#### tip\n  \n\n```js\nvar doSomething = injector.resolve(function(service, other, router) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\n\n\n```js\nresolve: function() {\n    // agrs func\n    var func, deps, scope, args = [], self = this;\n    // func\n    func = arguments[0];\n    // \n    deps = func.toString().match(/^functions*[^(]*(s*([^)]*))/m)[1].replace(/ /g, '').split(',');\n    //\n    scope = arguments[1] || {};\n    return function() {\n        // arguments\n        // doSomething(\"Other\");   \n        // Othera\n        var a = Array.prototype.slice.call(arguments, 0);\n        //\n        for(var i=0; i<deps.length; i++) {\n            var d = deps[i];\n            // push\n            // apush(shift)\n            args.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n        }\n        //\n        func.apply(scope || {}, args);\n    }        \n}\n```\n\n\n\n```js\n[\"function (service, router, other)\", \"service, router, other\"]\n```\n\n\n\n```js\nvar a = Array.prototype.slice.call(arguments, 0);\n...\nargs.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n```\n \nargumentsshiftundefined\n\n```js\n//\nvar doSomething = injector.resolve(function(service, other, router) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\nAngular  \n\n\n```js\n// key\nvar doSomething=function(e,t,n){var r=e();var i=t()}\n```\n\nAngular\n\n```js\nvar doSomething = injector.resolve(['service', 'router', function(service, router) {\n\n}]);\n```\n\nrequire.js\n\n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function() {\n        var func, deps, scope, args = [], self = this;\n        // \n        if(typeof arguments[0] === 'string') {\n            func = arguments[1];\n            deps = arguments[0].replace(/ /g, '').split(',');\n            scope = arguments[2] || {};\n        } else {\n            // \n            func = arguments[0];\n            deps = func.toString().match(/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m)[1].replace(/ /g, '').split(',');\n            scope = arguments[1] || {};\n        }\n        return function() {\n            var a = Array.prototype.slice.call(arguments, 0);\n            for(var i=0; i<deps.length; i++) {\n                var d = deps[i];\n                args.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n            }\n            func.apply(scope || {}, args);\n        }        \n    }\n}\n```\n\nresolvedeps()  \n\n```js\n// other\nvar doSomething = injector.resolve('router,,service', function(a, b, c) {\n    expect(a().name).to.be('Router');\n    expect(b).to.be('Other');\n    expect(c().name).to.be('Service');\n});\n// Other\ndoSomething(\"Other\");\n```\n\nargumets[0]\n  \n###    \n\n(this)  \n\n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function(deps, func, scope) {\n        var args = [];\n        scope = scope || {};\n        for(var i=0; i<deps.length, d=deps[i]; i++) {\n            if(this.dependencies[d]) {\n                //scope\n                //\n                scope[d] = this.dependencies[d];\n            } else {\n                throw new Error('Can\\'t resolve ' + d);\n            }\n        }\n        return function() {\n            func.apply(scope || {}, Array.prototype.slice.call(arguments, 0));\n        }        \n    }\n}\n```\n\n  \n\n```js\nvar doSomething = injector.resolve(['service', 'router'], function(other) {\n    expect(this.service().name).to.be('Service');\n    expect(this.router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\n###    \n\n   \n  \n[](http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript)","source":"_posts/Di.md","raw":"---\ntitle: -javascript\ndate: 2018-10-25\n---\n  \n## \n[](https://juejin.im/post/5bd07377e51d457a58075974)-[Dependency injection in JavaScript](http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript)\n<!-- more -->\njavascript  \n\n## \najax\n\n```js\nvar service = function() {\n    return { name: 'Service' };\n}\nvar router = function() {\n    return { name: 'Router' };\n}\n```\n\n\n\n```js\nvar doSomething = function(other) {\n    var s = service();\n    var r = router();\n};\n```\n\n\nServiceXMLServiceJSONmock  \n\n```js\nvar doSomething = function(service, router, other) {\n    var s = service();\n    var r = router();\n};\n```\n\ndosomethingdoSomething\n  \ndoSomething\n\n```js\n//a.js\nvar a = doSomething(service,router,1)\n//b.js \nvar b = doSomething(service,router,2)\n// doSomething\n// \nvar doSomething = function(service, router, third,thother) {\n    var s = service();\n    var r = router();\n    //***\n};\n\n```\n\n\n\n*  \n* \n* \n* \n* \n\n\n\n### requirejs/AMD\n\nrequirejs\n\n```js\ndefine(['service', 'router'], function(service, router) {       \n    // ...\n});\n```\n\ninjector  \n\n```js\nvar doSomething = injector.resolve(['service', 'router'], function(service, router, other) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\ndoSomethingexpect.js[TDD](https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91)\n\ninjector\n  \n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function(deps, func, scope) {\n\n    }\n}\n```\n\ndepsdependencies.apply\n\n```js\n //func\nresolve: function(deps, func, scope) {\n    var args = [];\n    //\n    for(var i=0; i<deps.length, d=deps[i]; i++) {\n        if(this.dependencies[d]) {\n            args.push(this.dependencies[d]);\n        } else {\n            throw new Error('Can\\'t resolve ' + d);\n        }\n    }\n    //\n    return function() {\n        func.apply(scope || {}, args.concat(Array.prototype.slice.call(arguments, 0)));\n    }        \n}\n```\n\nscopeArray.prototype.slice.call(arguments, 0)arguments()  \n   \n  \n### \n\njsdoSomethingdoSomething.toString() \n\n```js\n\"function (service, router, other) {\n    var s = service();\n    var r = router();\n}\"\n```\n\nnameAngularAngulararguments\n\n```js\n/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m\n```\n\nresolve\n#### tip\n  \n\n```js\nvar doSomething = injector.resolve(function(service, other, router) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\n\n\n```js\nresolve: function() {\n    // agrs func\n    var func, deps, scope, args = [], self = this;\n    // func\n    func = arguments[0];\n    // \n    deps = func.toString().match(/^functions*[^(]*(s*([^)]*))/m)[1].replace(/ /g, '').split(',');\n    //\n    scope = arguments[1] || {};\n    return function() {\n        // arguments\n        // doSomething(\"Other\");   \n        // Othera\n        var a = Array.prototype.slice.call(arguments, 0);\n        //\n        for(var i=0; i<deps.length; i++) {\n            var d = deps[i];\n            // push\n            // apush(shift)\n            args.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n        }\n        //\n        func.apply(scope || {}, args);\n    }        \n}\n```\n\n\n\n```js\n[\"function (service, router, other)\", \"service, router, other\"]\n```\n\n\n\n```js\nvar a = Array.prototype.slice.call(arguments, 0);\n...\nargs.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n```\n \nargumentsshiftundefined\n\n```js\n//\nvar doSomething = injector.resolve(function(service, other, router) {\n    expect(service().name).to.be('Service');\n    expect(router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\nAngular  \n\n\n```js\n// key\nvar doSomething=function(e,t,n){var r=e();var i=t()}\n```\n\nAngular\n\n```js\nvar doSomething = injector.resolve(['service', 'router', function(service, router) {\n\n}]);\n```\n\nrequire.js\n\n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function() {\n        var func, deps, scope, args = [], self = this;\n        // \n        if(typeof arguments[0] === 'string') {\n            func = arguments[1];\n            deps = arguments[0].replace(/ /g, '').split(',');\n            scope = arguments[2] || {};\n        } else {\n            // \n            func = arguments[0];\n            deps = func.toString().match(/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m)[1].replace(/ /g, '').split(',');\n            scope = arguments[1] || {};\n        }\n        return function() {\n            var a = Array.prototype.slice.call(arguments, 0);\n            for(var i=0; i<deps.length; i++) {\n                var d = deps[i];\n                args.push(self.dependencies[d] && d != '' ? self.dependencies[d] : a.shift());\n            }\n            func.apply(scope || {}, args);\n        }        \n    }\n}\n```\n\nresolvedeps()  \n\n```js\n// other\nvar doSomething = injector.resolve('router,,service', function(a, b, c) {\n    expect(a().name).to.be('Router');\n    expect(b).to.be('Other');\n    expect(c().name).to.be('Service');\n});\n// Other\ndoSomething(\"Other\");\n```\n\nargumets[0]\n  \n###    \n\n(this)  \n\n```js\nvar injector = {\n    dependencies: {},\n    register: function(key, value) {\n        this.dependencies[key] = value;\n    },\n    resolve: function(deps, func, scope) {\n        var args = [];\n        scope = scope || {};\n        for(var i=0; i<deps.length, d=deps[i]; i++) {\n            if(this.dependencies[d]) {\n                //scope\n                //\n                scope[d] = this.dependencies[d];\n            } else {\n                throw new Error('Can\\'t resolve ' + d);\n            }\n        }\n        return function() {\n            func.apply(scope || {}, Array.prototype.slice.call(arguments, 0));\n        }        \n    }\n}\n```\n\n  \n\n```js\nvar doSomething = injector.resolve(['service', 'router'], function(other) {\n    expect(this.service().name).to.be('Service');\n    expect(this.router().name).to.be('Router');\n    expect(other).to.be('Other');\n});\ndoSomething(\"Other\");\n```\n\n###    \n\n   \n  \n[](http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript)","slug":"Di","published":1,"updated":"2018-10-25T08:22:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt170006gw92tkl4utjm","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://juejin.im/post/5bd07377e51d457a58075974\" target=\"_blank\" rel=\"noopener\"></a>-<a href=\"http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript\" target=\"_blank\" rel=\"noopener\">Dependency injection in JavaScript</a><br><a id=\"more\"></a><br>javascript<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ajax</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> service = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Service'</span> &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Router'</span> &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">other</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><br>ServiceXMLServiceJSONmock  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, other</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>dosomethingdoSomething<br><br>doSomething</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = doSomething(service,router,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">//b.js </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = doSomething(service,router,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\">// doSomething</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, third,thother</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">    <span class=\"comment\">//***</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<h3 id=\"requirejs-AMD\"><a href=\"#requirejs-AMD\" class=\"headerlink\" title=\"requirejs/AMD\"></a>requirejs/AMD</h3><p>requirejs</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router</span>) </span>&#123;       </span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>injector  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, other</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>doSomethingexpect.js<a href=\"https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91\" target=\"_blank\" rel=\"noopener\">TDD</a></p>\n<p>injector</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>depsdependencies.apply</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//func</span></span><br><span class=\"line\">resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = [];</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length, d=deps[i]; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dependencies[d]) &#123;</span><br><span class=\"line\">            args.push(<span class=\"keyword\">this</span>.dependencies[d]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Can\\'t resolve '</span> + d);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        func.apply(scope || &#123;&#125;, args.concat(<span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>)));</span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>scopeArray.prototype.slice.call(arguments, 0)arguments()<br>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>jsdoSomethingdoSomething.toString() </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"function (service, router, other) &#123;</span></span><br><span class=\"line\"><span class=\"string\">    var s = service();</span></span><br><span class=\"line\"><span class=\"string\">    var r = router();</span></span><br><span class=\"line\"><span class=\"string\">&#125;\"</span></span><br></pre></td></tr></table></figure>\n<p>nameAngularAngulararguments</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m</span><br></pre></td></tr></table></figure>\n<p>resolve</p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, other, router</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// agrs func</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func, deps, scope, args = [], self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// func</span></span><br><span class=\"line\">    func = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    deps = func.toString().match(<span class=\"regexp\">/^functions*[^(]*(s*([^)]*))/m</span>)[<span class=\"number\">1</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>] || &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// arguments</span></span><br><span class=\"line\">        <span class=\"comment\">// doSomething(\"Other\");   </span></span><br><span class=\"line\">        <span class=\"comment\">// Othera</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> d = deps[i];</span><br><span class=\"line\">            <span class=\"comment\">// push</span></span><br><span class=\"line\">            <span class=\"comment\">// apush(shift)</span></span><br><span class=\"line\">            args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        func.apply(scope || &#123;&#125;, args);</span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">\"function (service, router, other)\"</span>, <span class=\"string\">\"service, router, other\"</span>]</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br></pre></td></tr></table></figure>\n<p>argumentsshiftundefined</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, other, router</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>Angular<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e,t,n</span>)</span>&#123;<span class=\"keyword\">var</span> r=e();<span class=\"keyword\">var</span> i=t()&#125;</span><br></pre></td></tr></table></figure>\n<p>Angular</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;]);</span><br></pre></td></tr></table></figure>\n<p>require.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> func, deps, scope, args = [], self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>] === <span class=\"string\">'string'</span>) &#123;</span><br><span class=\"line\">            func = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">            deps = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">            scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">2</span>] || &#123;&#125;;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            func = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">            deps = func.toString().match(<span class=\"regexp\">/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m</span>)[<span class=\"number\">1</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">            scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>] || &#123;&#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> d = deps[i];</span><br><span class=\"line\">                args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            func.apply(scope || &#123;&#125;, args);</span><br><span class=\"line\">        &#125;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>resolvedeps()  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// other</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"string\">'router,,service'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, c</span>) </span>&#123;</span><br><span class=\"line\">    expect(a().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(b).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">    expect(c().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// Other</span></span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>argumets[0]</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(this)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> args = [];</span><br><span class=\"line\">        scope = scope || &#123;&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length, d=deps[i]; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dependencies[d]) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//scope</span></span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                scope[d] = <span class=\"keyword\">this</span>.dependencies[d];</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Can\\'t resolve '</span> + d);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            func.apply(scope || &#123;&#125;, <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">        &#125;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">other</span>) </span>&#123;</span><br><span class=\"line\">    expect(<span class=\"keyword\">this</span>.service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(<span class=\"keyword\">this</span>.router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br><a href=\"http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://juejin.im/post/5bd07377e51d457a58075974\" target=\"_blank\" rel=\"noopener\"></a>-<a href=\"http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript\" target=\"_blank\" rel=\"noopener\">Dependency injection in JavaScript</a><br>","more":"<br>javascript<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ajax</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> service = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Service'</span> &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Router'</span> &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">other</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><br>ServiceXMLServiceJSONmock  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, other</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>dosomethingdoSomething<br><br>doSomething</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = doSomething(service,router,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">//b.js </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = doSomething(service,router,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\">// doSomething</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, third,thother</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = service();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> r = router();</span><br><span class=\"line\">    <span class=\"comment\">//***</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<h3 id=\"requirejs-AMD\"><a href=\"#requirejs-AMD\" class=\"headerlink\" title=\"requirejs/AMD\"></a>requirejs/AMD</h3><p>requirejs</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router</span>) </span>&#123;       </span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>injector  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router, other</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>doSomethingexpect.js<a href=\"https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91\" target=\"_blank\" rel=\"noopener\">TDD</a></p>\n<p>injector</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>depsdependencies.apply</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//func</span></span><br><span class=\"line\">resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = [];</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length, d=deps[i]; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dependencies[d]) &#123;</span><br><span class=\"line\">            args.push(<span class=\"keyword\">this</span>.dependencies[d]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Can\\'t resolve '</span> + d);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        func.apply(scope || &#123;&#125;, args.concat(<span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>)));</span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>scopeArray.prototype.slice.call(arguments, 0)arguments()<br>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>jsdoSomethingdoSomething.toString() </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"function (service, router, other) &#123;</span></span><br><span class=\"line\"><span class=\"string\">    var s = service();</span></span><br><span class=\"line\"><span class=\"string\">    var r = router();</span></span><br><span class=\"line\"><span class=\"string\">&#125;\"</span></span><br></pre></td></tr></table></figure>\n<p>nameAngularAngulararguments</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m</span><br></pre></td></tr></table></figure>\n<p>resolve</p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, other, router</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// agrs func</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func, deps, scope, args = [], self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// func</span></span><br><span class=\"line\">    func = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    deps = func.toString().match(<span class=\"regexp\">/^functions*[^(]*(s*([^)]*))/m</span>)[<span class=\"number\">1</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>] || &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// arguments</span></span><br><span class=\"line\">        <span class=\"comment\">// doSomething(\"Other\");   </span></span><br><span class=\"line\">        <span class=\"comment\">// Othera</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> d = deps[i];</span><br><span class=\"line\">            <span class=\"comment\">// push</span></span><br><span class=\"line\">            <span class=\"comment\">// apush(shift)</span></span><br><span class=\"line\">            args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        func.apply(scope || &#123;&#125;, args);</span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">\"function (service, router, other)\"</span>, <span class=\"string\">\"service, router, other\"</span>]</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br></pre></td></tr></table></figure>\n<p>argumentsshiftundefined</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, other, router</span>) </span>&#123;</span><br><span class=\"line\">    expect(service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>Angular<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e,t,n</span>)</span>&#123;<span class=\"keyword\">var</span> r=e();<span class=\"keyword\">var</span> i=t()&#125;</span><br></pre></td></tr></table></figure>\n<p>Angular</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">service, router</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;]);</span><br></pre></td></tr></table></figure>\n<p>require.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> func, deps, scope, args = [], self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>] === <span class=\"string\">'string'</span>) &#123;</span><br><span class=\"line\">            func = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">            deps = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">            scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">2</span>] || &#123;&#125;;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            func = <span class=\"built_in\">arguments</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">            deps = func.toString().match(<span class=\"regexp\">/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m</span>)[<span class=\"number\">1</span>].replace(<span class=\"regexp\">/ /g</span>, <span class=\"string\">''</span>).split(<span class=\"string\">','</span>);</span><br><span class=\"line\">            scope = <span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>] || &#123;&#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> a = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> d = deps[i];</span><br><span class=\"line\">                args.push(self.dependencies[d] &amp;&amp; d != <span class=\"string\">''</span> ? self.dependencies[d] : a.shift());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            func.apply(scope || &#123;&#125;, args);</span><br><span class=\"line\">        &#125;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>resolvedeps()  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// other</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve(<span class=\"string\">'router,,service'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, c</span>) </span>&#123;</span><br><span class=\"line\">    expect(a().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(b).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">    expect(c().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// Other</span></span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<p>argumets[0]</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(this)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> injector = &#123;</span><br><span class=\"line\">    dependencies: &#123;&#125;,</span><br><span class=\"line\">    register: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dependencies[key] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    resolve: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">deps, func, scope</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> args = [];</span><br><span class=\"line\">        scope = scope || &#123;&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;deps.length, d=deps[i]; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dependencies[d]) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//scope</span></span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                scope[d] = <span class=\"keyword\">this</span>.dependencies[d];</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Can\\'t resolve '</span> + d);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            func.apply(scope || &#123;&#125;, <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">        &#125;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> doSomething = injector.resolve([<span class=\"string\">'service'</span>, <span class=\"string\">'router'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">other</span>) </span>&#123;</span><br><span class=\"line\">    expect(<span class=\"keyword\">this</span>.service().name).to.be(<span class=\"string\">'Service'</span>);</span><br><span class=\"line\">    expect(<span class=\"keyword\">this</span>.router().name).to.be(<span class=\"string\">'Router'</span>);</span><br><span class=\"line\">    expect(other).to.be(<span class=\"string\">'Other'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">doSomething(<span class=\"string\">\"Other\"</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br><a href=\"http://krasimirtsonev.com/blog/article/Dependency-injection-in-JavaScript\" target=\"_blank\" rel=\"noopener\"></a></p>"},{"title":"floatBFC","date":"2018-05-14T16:00:00.000Z","_content":"  \n## \n  \n  \n<!-- more -->\n\n```css  \n.warper{\n    width: 200px;\n    border:1px solid  #ff6633;\n}\n.float-1{\n    float: left;\n    background: blue;\n    height: 100px;\n    width: 100px;\n}\n.float-2{\n    float: left;\n    background: #ff0;\n    height: 50px;\n    width: 100px;\n}\n//html  \n<div class='warper'>\n    <div class=\"float-1\"></div>\n    <div class=\"float-2\"></div>\n</div>\n```  \n<img src='/img/bfc/1.png'/>\n0,  \n\n###    \n\n:  \n\n    1. afterbr clear\n    2. \n    3. overflowhiddenauto \n    4. displaytable       \n\n1clearBFC\n   \n\n#### clear    \n\nclear     \n\n()  \n\n```css  \n//div<br/>  \n.warper:after {\n    content: '';\n    height: 0;\n    display: block;\n    clear: both;\n} \n```     \n\nafterclearboth\n<img src='/img/bfc/2.png'/>  \n\n  \n<img src='/img/bfc/3.png'/>  \n\nfloatdisplayblock   \nBFC  \n\n### BFC    \n\n#### BFC(block formatting contexts)    \n\nBFCBlock-level box Block-level BoxBFCmargin  \n\n  \n\nIn a block formatting context, each boxs left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxs line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats)   \nBFCBFC     \n \n#### BFC     \n\n1. \n2. \n3.      \n\n BFCBFCBFC  \n\nBFCBFCBFCBFCBFC \n\n#### BFC  \n    \nCSS3flow root  \n\n```js\nfloat none \n \noverflow visible hiddenautoscroll  \n \ndisplay (table-celltable-captioninline-block) \n \npositionabsolutefixed \n \nfieldset\n```   \n\nBFC  \n    \n\n```CSS  \n.warper{\n    width: 200px;\n    border:1px solid  #ff6633;\n    // \n    overflow: hidden;\n    overflow: auto;\n    float: left;\n    display:inline-block;\n    position: fixed;\n}\n```      \n \n<img src='/img/bfc/4.png'/>  \n\n###    \n####   \n[CSSBFC](http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/)   \n[CSSBFC](https://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html)\nfloatfloat,[]()\n\n\n\n\n\n","source":"_posts/bfc.md","raw":"---\ntitle: floatBFC\ndate: 2018-05-15\n---\n  \n## \n  \n  \n<!-- more -->\n\n```css  \n.warper{\n    width: 200px;\n    border:1px solid  #ff6633;\n}\n.float-1{\n    float: left;\n    background: blue;\n    height: 100px;\n    width: 100px;\n}\n.float-2{\n    float: left;\n    background: #ff0;\n    height: 50px;\n    width: 100px;\n}\n//html  \n<div class='warper'>\n    <div class=\"float-1\"></div>\n    <div class=\"float-2\"></div>\n</div>\n```  \n<img src='/img/bfc/1.png'/>\n0,  \n\n###    \n\n:  \n\n    1. afterbr clear\n    2. \n    3. overflowhiddenauto \n    4. displaytable       \n\n1clearBFC\n   \n\n#### clear    \n\nclear     \n\n()  \n\n```css  \n//div<br/>  \n.warper:after {\n    content: '';\n    height: 0;\n    display: block;\n    clear: both;\n} \n```     \n\nafterclearboth\n<img src='/img/bfc/2.png'/>  \n\n  \n<img src='/img/bfc/3.png'/>  \n\nfloatdisplayblock   \nBFC  \n\n### BFC    \n\n#### BFC(block formatting contexts)    \n\nBFCBlock-level box Block-level BoxBFCmargin  \n\n  \n\nIn a block formatting context, each boxs left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxs line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats)   \nBFCBFC     \n \n#### BFC     \n\n1. \n2. \n3.      \n\n BFCBFCBFC  \n\nBFCBFCBFCBFCBFC \n\n#### BFC  \n    \nCSS3flow root  \n\n```js\nfloat none \n \noverflow visible hiddenautoscroll  \n \ndisplay (table-celltable-captioninline-block) \n \npositionabsolutefixed \n \nfieldset\n```   \n\nBFC  \n    \n\n```CSS  \n.warper{\n    width: 200px;\n    border:1px solid  #ff6633;\n    // \n    overflow: hidden;\n    overflow: auto;\n    float: left;\n    display:inline-block;\n    position: fixed;\n}\n```      \n \n<img src='/img/bfc/4.png'/>  \n\n###    \n####   \n[CSSBFC](http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/)   \n[CSSBFC](https://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html)\nfloatfloat,[]()\n\n\n\n\n\n","slug":"bfc","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt190008gw92lqlusj7u","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br><a id=\"more\"></a></p>\n<pre><code class=\"css\"><span class=\"selector-class\">.warper</span>{\n    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;\n    <span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid  <span class=\"number\">#ff6633</span>;\n}\n<span class=\"selector-class\">.float-1</span>{\n    <span class=\"attribute\">float</span>: left;\n    <span class=\"attribute\">background</span>: blue;\n    <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;\n    <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;\n}\n<span class=\"selector-class\">.float-2</span>{\n    <span class=\"attribute\">float</span>: left;\n    <span class=\"attribute\">background</span>: <span class=\"number\">#ff0</span>;\n    <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;\n    <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;\n}\n//html  \n&lt;div class='warper'&gt;\n    &lt;div class=\"float-1\"&gt;&lt;/div&gt;\n    &lt;div class=\"float-2\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p><img src=\"/img/bfc/1.png\"><br>0,  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>:  </p>\n<pre><code>1. afterbr clear\n2. \n3. overflowhiddenauto \n4. displaytable       \n</code></pre><p>1clearBFC<br>   </p>\n<h4 id=\"clear\"><a href=\"#clear\" class=\"headerlink\" title=\"clear\"></a>clear</h4><p>clear <br><br>()  </p>\n<pre><code class=\"css\">//div&lt;br/&gt;  \n<span class=\"selector-class\">.warper</span><span class=\"selector-pseudo\">:after</span> {\n    <span class=\"attribute\">content</span>: <span class=\"string\">''</span>;\n    <span class=\"attribute\">height</span>: <span class=\"number\">0</span>;\n    <span class=\"attribute\">display</span>: block;\n    <span class=\"attribute\">clear</span>: both;\n} \n</code></pre>\n<p>afterclearboth<br><img src=\"/img/bfc/2.png\">  </p>\n<p><br><img src=\"/img/bfc/3.png\">  </p>\n<p>floatdisplayblock<br>BFC  </p>\n<h3 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h3><h4 id=\"BFC-block-formatting-contexts\"><a href=\"#BFC-block-formatting-contexts\" class=\"headerlink\" title=\"BFC(block formatting contexts)\"></a>BFC(block formatting contexts)</h4><p>BFCBlock-level box Block-level BoxBFCmargin  </p>\n<p>  </p>\n<p>In a block formatting context, each boxs left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxs line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats)<br>BFCBFC     </p>\n<h4 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h4><ol>\n<li></li>\n<li></li>\n<li>     </li>\n</ol>\n<p> BFCBFCBFC  </p>\n<p>BFCBFCBFCBFCBFC </p>\n<h4 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h4><p>CSS3flow root  </p>\n<pre><code class=\"js\">float none \n\noverflow visible hiddenautoscroll  \n\ndisplay (table-celltable-captioninline-block) \n\npositionabsolutefixed \n\nfieldset\n</code></pre>\n<p>BFC<br>    </p>\n<pre><code class=\"CSS\"><span class=\"selector-class\">.warper</span>{\n    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;\n    <span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid  <span class=\"number\">#ff6633</span>;\n    // \n    <span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">hidden</span>;\n    <span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">auto</span>;\n    <span class=\"selector-tag\">float</span>: <span class=\"selector-tag\">left</span>;\n    <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:inline-block</span>;\n    <span class=\"selector-tag\">position</span>: <span class=\"selector-tag\">fixed</span>;\n}\n</code></pre>\n<p><img src=\"/img/bfc/4.png\">  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/\" target=\"_blank\" rel=\"noopener\">CSSBFC</a><br><a href=\"https://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html\" target=\"_blank\" rel=\"noopener\">CSSBFC</a><br>floatfloat,<a href=\"\"></a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br>","more":"</p>\n<pre><code class=\"css\"><span class=\"selector-class\">.warper</span>{\n    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;\n    <span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid  <span class=\"number\">#ff6633</span>;\n}\n<span class=\"selector-class\">.float-1</span>{\n    <span class=\"attribute\">float</span>: left;\n    <span class=\"attribute\">background</span>: blue;\n    <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;\n    <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;\n}\n<span class=\"selector-class\">.float-2</span>{\n    <span class=\"attribute\">float</span>: left;\n    <span class=\"attribute\">background</span>: <span class=\"number\">#ff0</span>;\n    <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;\n    <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;\n}\n//html  \n&lt;div class='warper'&gt;\n    &lt;div class=\"float-1\"&gt;&lt;/div&gt;\n    &lt;div class=\"float-2\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p><img src=\"/img/bfc/1.png\"><br>0,  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>:  </p>\n<pre><code>1. afterbr clear\n2. \n3. overflowhiddenauto \n4. displaytable       \n</code></pre><p>1clearBFC<br>   </p>\n<h4 id=\"clear\"><a href=\"#clear\" class=\"headerlink\" title=\"clear\"></a>clear</h4><p>clear <br><br>()  </p>\n<pre><code class=\"css\">//div&lt;br/&gt;  \n<span class=\"selector-class\">.warper</span><span class=\"selector-pseudo\">:after</span> {\n    <span class=\"attribute\">content</span>: <span class=\"string\">''</span>;\n    <span class=\"attribute\">height</span>: <span class=\"number\">0</span>;\n    <span class=\"attribute\">display</span>: block;\n    <span class=\"attribute\">clear</span>: both;\n} \n</code></pre>\n<p>afterclearboth<br><img src=\"/img/bfc/2.png\">  </p>\n<p><br><img src=\"/img/bfc/3.png\">  </p>\n<p>floatdisplayblock<br>BFC  </p>\n<h3 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h3><h4 id=\"BFC-block-formatting-contexts\"><a href=\"#BFC-block-formatting-contexts\" class=\"headerlink\" title=\"BFC(block formatting contexts)\"></a>BFC(block formatting contexts)</h4><p>BFCBlock-level box Block-level BoxBFCmargin  </p>\n<p>  </p>\n<p>In a block formatting context, each boxs left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxs line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats)<br>BFCBFC     </p>\n<h4 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h4><ol>\n<li></li>\n<li></li>\n<li>     </li>\n</ol>\n<p> BFCBFCBFC  </p>\n<p>BFCBFCBFCBFCBFC </p>\n<h4 id=\"BFC\"><a href=\"#BFC\" class=\"headerlink\" title=\"BFC\"></a>BFC</h4><p>CSS3flow root  </p>\n<pre><code class=\"js\">float none \n\noverflow visible hiddenautoscroll  \n\ndisplay (table-celltable-captioninline-block) \n\npositionabsolutefixed \n\nfieldset\n</code></pre>\n<p>BFC<br>    </p>\n<pre><code class=\"CSS\"><span class=\"selector-class\">.warper</span>{\n    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;\n    <span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid  <span class=\"number\">#ff6633</span>;\n    // \n    <span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">hidden</span>;\n    <span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">auto</span>;\n    <span class=\"selector-tag\">float</span>: <span class=\"selector-tag\">left</span>;\n    <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:inline-block</span>;\n    <span class=\"selector-tag\">position</span>: <span class=\"selector-tag\">fixed</span>;\n}\n</code></pre>\n<p><img src=\"/img/bfc/4.png\">  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/\" target=\"_blank\" rel=\"noopener\">CSSBFC</a><br><a href=\"https://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html\" target=\"_blank\" rel=\"noopener\">CSSBFC</a><br>floatfloat,<a href=\"\"></a></p>"},{"title":"","date":"2019-12-23T00:00:29.000Z","_content":"##  \ncoding","source":"_posts/debug.md","raw":"---\ntitle: \ndate: 2019-12-23 08:00:29\ntags:  \n---\n##  \ncoding","slug":"debug","published":1,"updated":"2019-12-30T07:06:06.339Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1b000agw92t3h9kmjg","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>coding</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>coding</p>\n"},{"title":"http Content-Type ","date":"2019-04-14T16:00:00.000Z","_content":"  \n## \ncontent-typegoogleContent-Type: multipart/mixedContent-Type: application/httpContent-TypeContent-Type\n<!-- more -->\n## Content-Type\nContent-Type:MIME ContentTypetext/html\n\n (POST  PUT)\n\nContent-TypeMIME;  X-Content-Type-Options  nosniff\n\nMIME  \n\n\n\n```bash\nContent-Type: text/html; charset=utf-8\nContent-Type: multipart/form-data; boundary=something\n```\nmedia-typecharsetboundary\nmedia-type\n\n### media-type\nMIME type( Multipurpose Internet Mail Extensions)Internet  \n   \nMIME  \nMIME  \n\n#### \n\nMIME \n'/'\n\n\n```js\ntype/subtype;parameter=value\n```\n\n\n* typetext/video\n* subtypetextplain()html(html)calendar.ics\n* parametercharsetbundaary\n\n### Types\nMultipart\n#### \n\n\n\n* text\n  text/plain, text/csv, text/html.\n* application\n  application/octet-stream,application/pdf,application/pkcs8,application/zip.  \n* audio\n  audio/mpeg, audio/vorbis\n* video\n  video/mp4\n* image\n  image/gif, image/png, image/jpeg, image/bmp, image/webp, image/x-icon\n  \n#### Multipart\nMultipartMIME  \nMultipartmessagemultipart\n\n* message\n  chunkmessage/rfc822message/partial\n* multipart  \n  MIME multipart/form-data(FormData API) \n  \n\n  \n### \n#### \ntextimagevideo\n#### application\n* **application/json**  \n\n  jsonjsonhttp  \n  \n* **application/x-www-form-urlencoded**\n  \n   '&' -,  '=' .  percent-encoding:  ( multipart/form-data ).   \n   (formdataview source)   \n<img src='https://user-gold-cdn.xitu.io/2019/4/14/16a1c6f743d8b587?w=1600&h=468&f=jpeg&s=128274'/>  \n\n* **multipart/form-data**\n    \n  post  \n  \n  ```json\n  Content-Type: multipart/form-data; boundary=aBoundaryString\n  ```  \n  boundary(multipart)  \n  \n  \n```html\n  <form action=\"http://localhost:8000/\" method=\"post\" enctype=\"multipart/form-data\">\n  <input type=\"text\" name=\"myTextField\">\n  <input type=\"checkbox\" name=\"myCheckBox\">Check</input>\n  <input type=\"file\" name=\"myFile\">\n  <button>Send the file</button>\n</form>\n```   \n\n  \n\n```js\nPOST / HTTP/1.1\nHost: localhost:8000\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:50.0) Gecko/20100101 Firefox/50.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nUpgrade-Insecure-Requests: 1\n//  ---------------------------8721656041911415653955004498 \nContent-Type: multipart/form-data; boundary=---------------------------8721656041911415653955004498\nContent-Length: 465\n\n-----------------------------8721656041911415653955004498\n//  \nContent-Disposition: form-data; name=\"myTextField\"\n// value\nTest\n-----------------------------8721656041911415653955004498\n// checkbox\nContent-Disposition: form-data; name=\"myCheckBox\"\n\non\n-----------------------------8721656041911415653955004498\n// \nContent-Disposition: form-data; name=\"myFile\"; filename=\"test.txt\"\nContent-Type: text/plain\n\nSimple file.\n-----------------------------8721656041911415653955004498--\n```\n\n* **application/javascript application/x-javascript text/javascript**   \n  jsMIMEtext/javascript  \n  jsMIMEtext/javascript\"application/x-javascript\"x text/javascriptRFC4329text/javascriptjsapplication/javascriptapplication/x-javascript   \n  \n* **application/zip application/gzip**   \n   zip zipgzipGNUgzipGNU zip\n\n* **application/http**  \n   http[](https://www.iana.org/assignments/media-types/application/http)  \n   httpbinaryContent-Transfer-Encoding   \n     \n\n```js\n--batch_0123456789\nContent-Type: application/http\nContent-ID: \n//  \nContent-Transfer-Encoding: binary\n\nPOST https://www.googleapis.com/analytics/v3/management/accounts/XXXXXX/webproperties/UA-XXXXXX-1/customDimensions\nContent-Type: application/json\nContent-Length: 68\n\n{\n \"name\": \"Campaign Group\",\n \"scope\": \"SESSION\",\n \"active\": true\n} \n```    \n    \n#### multipart\nmultipart\n:\n\n```js\nContent-Type: multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p\n```  \n\nboundary'-'\n\n```js\n--gc0p4Jq0M2Yt08jU534c0p\n```\n\n\n  \n\n* **multipart/form-data**\n  application  \n  \n* **multipart/mixed**    \n  (text)mixed  \n  \n  \n\n\n```js\nPOST /batch/farm/v1 HTTP/1.1\nAuthorization: Bearer your_auth_token\nHost: www.googleapis.com\nContent-Type: multipart/mixed; boundary=batch_foobarbaz\nContent-Length: total_content_length\n\n--batch_foobarbaz\n// http boundary\nContent-Type: application/http\nContent-ID: <item1:12930812@barnyard.example.com>\n\nGET /farm/v1/animals/pony\n\n--batch_foobarbaz\nContent-Type: application/http\nContent-ID: <item2:12930812@barnyard.example.com>\n\nPUT /farm/v1/animals/sheep\nContent-Type: application/json\nContent-Length: part_content_length\nIf-Match: \"etag/sheep\"\n\n{\n  \"animalName\": \"sheep\",\n  \"animalAge\": \"5\"\n  \"peltColor\": \"green\",\n}\n\n--batch_foobarbaz\nContent-Type: application/http\nContent-ID: <item3:12930812@barnyard.example.com>\n\nGET /farm/v1/animals\nIf-None-Match: \"etag/animals\"\n\n--batch_foobarbaz--\n```\nhttpgoogle\n   \n* **multipart/alternative**   \n  mixed  \n  \n\n```js \nFrom:  Nathaniel Borenstein <nsb@bellcore.com> \nTo: Ned Freed <ned@innosoft.com> \nSubject: Formatted text mail \nMIME-Version: 1.0 \nContent-Type: multipart/alternative; boundary=boundary42 \n\n\n--boundary42 \nContent-Type: text/plain; charset=us-ascii \n\n...plain text version of message goes here.... \n\n--boundary42 \nContent-Type: text/richtext \n\n.... richtext version of same message goes here ... \n--boundary42 \nContent-Type: text/x-whatever \n\n.... fanciest formatted version of same  message  goes  here \n... \n--boundary42-- \n```   \n text/x-whatever    \n  \n## \n### \n[https://developers.google.com/drive/api/v3/batch?hl=zh-cn](https://developers.google.com/drive/api/v3/batch?hl=zh-cn)   \n[https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)  \n[https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html](https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)  \n  \ncontent-type","source":"_posts/content-type.md","raw":"---\ntitle: http Content-Type \ndate: 2019-04-15\n---\n  \n## \ncontent-typegoogleContent-Type: multipart/mixedContent-Type: application/httpContent-TypeContent-Type\n<!-- more -->\n## Content-Type\nContent-Type:MIME ContentTypetext/html\n\n (POST  PUT)\n\nContent-TypeMIME;  X-Content-Type-Options  nosniff\n\nMIME  \n\n\n\n```bash\nContent-Type: text/html; charset=utf-8\nContent-Type: multipart/form-data; boundary=something\n```\nmedia-typecharsetboundary\nmedia-type\n\n### media-type\nMIME type( Multipurpose Internet Mail Extensions)Internet  \n   \nMIME  \nMIME  \n\n#### \n\nMIME \n'/'\n\n\n```js\ntype/subtype;parameter=value\n```\n\n\n* typetext/video\n* subtypetextplain()html(html)calendar.ics\n* parametercharsetbundaary\n\n### Types\nMultipart\n#### \n\n\n\n* text\n  text/plain, text/csv, text/html.\n* application\n  application/octet-stream,application/pdf,application/pkcs8,application/zip.  \n* audio\n  audio/mpeg, audio/vorbis\n* video\n  video/mp4\n* image\n  image/gif, image/png, image/jpeg, image/bmp, image/webp, image/x-icon\n  \n#### Multipart\nMultipartMIME  \nMultipartmessagemultipart\n\n* message\n  chunkmessage/rfc822message/partial\n* multipart  \n  MIME multipart/form-data(FormData API) \n  \n\n  \n### \n#### \ntextimagevideo\n#### application\n* **application/json**  \n\n  jsonjsonhttp  \n  \n* **application/x-www-form-urlencoded**\n  \n   '&' -,  '=' .  percent-encoding:  ( multipart/form-data ).   \n   (formdataview source)   \n<img src='https://user-gold-cdn.xitu.io/2019/4/14/16a1c6f743d8b587?w=1600&h=468&f=jpeg&s=128274'/>  \n\n* **multipart/form-data**\n    \n  post  \n  \n  ```json\n  Content-Type: multipart/form-data; boundary=aBoundaryString\n  ```  \n  boundary(multipart)  \n  \n  \n```html\n  <form action=\"http://localhost:8000/\" method=\"post\" enctype=\"multipart/form-data\">\n  <input type=\"text\" name=\"myTextField\">\n  <input type=\"checkbox\" name=\"myCheckBox\">Check</input>\n  <input type=\"file\" name=\"myFile\">\n  <button>Send the file</button>\n</form>\n```   \n\n  \n\n```js\nPOST / HTTP/1.1\nHost: localhost:8000\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:50.0) Gecko/20100101 Firefox/50.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nUpgrade-Insecure-Requests: 1\n//  ---------------------------8721656041911415653955004498 \nContent-Type: multipart/form-data; boundary=---------------------------8721656041911415653955004498\nContent-Length: 465\n\n-----------------------------8721656041911415653955004498\n//  \nContent-Disposition: form-data; name=\"myTextField\"\n// value\nTest\n-----------------------------8721656041911415653955004498\n// checkbox\nContent-Disposition: form-data; name=\"myCheckBox\"\n\non\n-----------------------------8721656041911415653955004498\n// \nContent-Disposition: form-data; name=\"myFile\"; filename=\"test.txt\"\nContent-Type: text/plain\n\nSimple file.\n-----------------------------8721656041911415653955004498--\n```\n\n* **application/javascript application/x-javascript text/javascript**   \n  jsMIMEtext/javascript  \n  jsMIMEtext/javascript\"application/x-javascript\"x text/javascriptRFC4329text/javascriptjsapplication/javascriptapplication/x-javascript   \n  \n* **application/zip application/gzip**   \n   zip zipgzipGNUgzipGNU zip\n\n* **application/http**  \n   http[](https://www.iana.org/assignments/media-types/application/http)  \n   httpbinaryContent-Transfer-Encoding   \n     \n\n```js\n--batch_0123456789\nContent-Type: application/http\nContent-ID: \n//  \nContent-Transfer-Encoding: binary\n\nPOST https://www.googleapis.com/analytics/v3/management/accounts/XXXXXX/webproperties/UA-XXXXXX-1/customDimensions\nContent-Type: application/json\nContent-Length: 68\n\n{\n \"name\": \"Campaign Group\",\n \"scope\": \"SESSION\",\n \"active\": true\n} \n```    \n    \n#### multipart\nmultipart\n:\n\n```js\nContent-Type: multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p\n```  \n\nboundary'-'\n\n```js\n--gc0p4Jq0M2Yt08jU534c0p\n```\n\n\n  \n\n* **multipart/form-data**\n  application  \n  \n* **multipart/mixed**    \n  (text)mixed  \n  \n  \n\n\n```js\nPOST /batch/farm/v1 HTTP/1.1\nAuthorization: Bearer your_auth_token\nHost: www.googleapis.com\nContent-Type: multipart/mixed; boundary=batch_foobarbaz\nContent-Length: total_content_length\n\n--batch_foobarbaz\n// http boundary\nContent-Type: application/http\nContent-ID: <item1:12930812@barnyard.example.com>\n\nGET /farm/v1/animals/pony\n\n--batch_foobarbaz\nContent-Type: application/http\nContent-ID: <item2:12930812@barnyard.example.com>\n\nPUT /farm/v1/animals/sheep\nContent-Type: application/json\nContent-Length: part_content_length\nIf-Match: \"etag/sheep\"\n\n{\n  \"animalName\": \"sheep\",\n  \"animalAge\": \"5\"\n  \"peltColor\": \"green\",\n}\n\n--batch_foobarbaz\nContent-Type: application/http\nContent-ID: <item3:12930812@barnyard.example.com>\n\nGET /farm/v1/animals\nIf-None-Match: \"etag/animals\"\n\n--batch_foobarbaz--\n```\nhttpgoogle\n   \n* **multipart/alternative**   \n  mixed  \n  \n\n```js \nFrom:  Nathaniel Borenstein <nsb@bellcore.com> \nTo: Ned Freed <ned@innosoft.com> \nSubject: Formatted text mail \nMIME-Version: 1.0 \nContent-Type: multipart/alternative; boundary=boundary42 \n\n\n--boundary42 \nContent-Type: text/plain; charset=us-ascii \n\n...plain text version of message goes here.... \n\n--boundary42 \nContent-Type: text/richtext \n\n.... richtext version of same message goes here ... \n--boundary42 \nContent-Type: text/x-whatever \n\n.... fanciest formatted version of same  message  goes  here \n... \n--boundary42-- \n```   \n text/x-whatever    \n  \n## \n### \n[https://developers.google.com/drive/api/v3/batch?hl=zh-cn](https://developers.google.com/drive/api/v3/batch?hl=zh-cn)   \n[https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)  \n[https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html](https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)  \n  \ncontent-type","slug":"content-type","published":1,"updated":"2019-04-16T03:47:48.777Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1d000cgw927zzw6i1t","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>content-typegoogleContent-Type: multipart/mixedContent-Type: application/httpContent-TypeContent-Type<br><a id=\"more\"></a></p>\n<h2 id=\"Content-Type\"><a href=\"#Content-Type\" class=\"headerlink\" title=\"Content-Type\"></a>Content-Type</h2><p>Content-Type:MIME ContentTypetext/html<br><br> (POST  PUT)</p>\n<p>Content-TypeMIME;  X-Content-Type-Options  nosniff</p>\n<p>MIME  </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Content-Type: text/html; charset=utf-8</span><br><span class=\"line\">Content-Type: multipart/form-data; boundary=something</span><br></pre></td></tr></table></figure>\n<p>media-typecharsetboundary<br>media-type</p>\n<h3 id=\"media-type\"><a href=\"#media-type\" class=\"headerlink\" title=\"media-type\"></a>media-type</h3><p>MIME type( Multipurpose Internet Mail Extensions)Internet<br><br>MIME<br>MIME  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MIME <br>/<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">type/subtype;parameter=value</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>typetext/video</li>\n<li>subtypetextplain()html(html)calendar.ics</li>\n<li>parametercharsetbundaary</li>\n</ul>\n<h3 id=\"Types\"><a href=\"#Types\" class=\"headerlink\" title=\"Types\"></a>Types</h3><p>Multipart</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br></p>\n<ul>\n<li>text<br>text/plain, text/csv, text/html.</li>\n<li>application<br>application/octet-stream,application/pdf,application/pkcs8,application/zip.  </li>\n<li>audio<br>audio/mpeg, audio/vorbis</li>\n<li>video<br>video/mp4</li>\n<li>image<br>image/gif, image/png, image/jpeg, image/bmp, image/webp, image/x-icon</li>\n</ul>\n<h4 id=\"Multipart\"><a href=\"#Multipart\" class=\"headerlink\" title=\"Multipart\"></a>Multipart</h4><p>MultipartMIME<br>Multipartmessagemultipart</p>\n<ul>\n<li>message<br>chunkmessage/rfc822message/partial</li>\n<li>multipart<br>MIME multipart/form-data(FormData API) </li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>textimagevideo</p>\n<h4 id=\"application\"><a href=\"#application\" class=\"headerlink\" title=\"application\"></a>application</h4><ul>\n<li><p><strong>application/json</strong>  </p>\n<p>jsonjsonhttp  </p>\n</li>\n<li><p><strong>application/x-www-form-urlencoded</strong><br><br> &amp; -,  = .  percent-encoding:  ( multipart/form-data ).<br> (formdataview source)<br><img src=\"https://user-gold-cdn.xitu.io/2019/4/14/16a1c6f743d8b587?w=1600&h=468&f=jpeg&s=128274\">  </p>\n</li>\n<li><p><strong>multipart/form-data</strong><br><br>post  </p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Content-Type: multipart/form-data; boundary=aBoundaryString</span><br><span class=\"line\">  ```  </span><br><span class=\"line\">  boundary(multipart)  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">```html</span><br><span class=\"line\">  &lt;form action=\"http://localhost:8000/\" method=\"post\" enctype=\"multipart/form-data\"&gt;</span><br><span class=\"line\">  &lt;input type=\"text\" name=\"myTextField\"&gt;</span><br><span class=\"line\">  &lt;input type=\"checkbox\" name=\"myCheckBox\"&gt;Check&lt;/input&gt;</span><br><span class=\"line\">  &lt;input type=\"file\" name=\"myFile\"&gt;</span><br><span class=\"line\">  &lt;button&gt;Send the file&lt;/button&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">```   </span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br><span class=\"line\">```js</span><br><span class=\"line\">POST / HTTP/1.1</span><br><span class=\"line\">Host: localhost:8000</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:50.0) Gecko/20100101 Firefox/50.0</span><br><span class=\"line\">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class=\"line\">Accept-Language: en-US,en;q=0.5</span><br><span class=\"line\">Accept-Encoding: gzip, deflate</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">Upgrade-Insecure-Requests: 1</span><br><span class=\"line\">//  ---------------------------8721656041911415653955004498 </span><br><span class=\"line\">Content-Type: multipart/form-data; boundary=---------------------------8721656041911415653955004498</span><br><span class=\"line\">Content-Length: 465</span><br><span class=\"line\"></span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">//  </span><br><span class=\"line\">Content-Disposition: form-data; name=\"myTextField\"</span><br><span class=\"line\">// value</span><br><span class=\"line\">Test</span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">// checkbox</span><br><span class=\"line\">Content-Disposition: form-data; name=\"myCheckBox\"</span><br><span class=\"line\"></span><br><span class=\"line\">on</span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">// </span><br><span class=\"line\">Content-Disposition: form-data; name=\"myFile\"; filename=\"test.txt\"</span><br><span class=\"line\">Content-Type: text/plain</span><br><span class=\"line\"></span><br><span class=\"line\">Simple file.</span><br><span class=\"line\">-----------------------------8721656041911415653955004498--</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>application/javascript application/x-javascript text/javascript</strong><br>jsMIMEtext/javascript<br>jsMIMEtext/javascriptapplication/x-javascriptx text/javascriptRFC4329text/javascriptjsapplication/javascriptapplication/x-javascript   </p>\n</li>\n<li><p><strong>application/zip application/gzip</strong><br> zip zipgzipGNUgzipGNU zip</p>\n</li>\n<li><p><strong>application/http</strong><br> http<a href=\"https://www.iana.org/assignments/media-types/application/http\" target=\"_blank\" rel=\"noopener\"></a><br> httpbinaryContent-Transfer-Encoding<br>   </p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--batch_0123456789</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: </span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Content-Transfer-Encoding: binary</span><br><span class=\"line\"></span><br><span class=\"line\">POST https:<span class=\"comment\">//www.googleapis.com/analytics/v3/management/accounts/XXXXXX/webproperties/UA-XXXXXX-1/customDimensions</span></span><br><span class=\"line\">Content-Type: application/json</span><br><span class=\"line\">Content-Length: <span class=\"number\">68</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Campaign Group\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"scope\"</span>: <span class=\"string\">\"SESSION\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"active\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">#### multipart</span></span><br><span class=\"line\"><span class=\"string\">multipart</span></span><br><span class=\"line\"><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">Content-Type: multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">boundary'-'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">--gc0p4Jq0M2Yt08jU534c0p</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><p><strong>multipart/form-data</strong><br>application  </p>\n</li>\n<li><p><strong>multipart/mixed</strong><br>(text)mixed<br>  </p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST /batch/farm/v1 HTTP/<span class=\"number\">1.1</span></span><br><span class=\"line\">Authorization: Bearer your_auth_token</span><br><span class=\"line\">Host: www.googleapis.com</span><br><span class=\"line\">Content-Type: multipart/mixed; boundary=batch_foobarbaz</span><br><span class=\"line\">Content-Length: total_content_length</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\"><span class=\"comment\">// http boundary</span></span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item1:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">GET /farm/v1/animals/pony</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item2:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">PUT /farm/v1/animals/sheep</span><br><span class=\"line\">Content-Type: application/json</span><br><span class=\"line\">Content-Length: part_content_length</span><br><span class=\"line\">If-Match: \"etag/sheep\"</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  \"animalName\": \"sheep\",</span><br><span class=\"line\">  \"animalAge\": \"5\"</span><br><span class=\"line\">  \"peltColor\": \"green\",</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item3:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">GET /farm/v1/animals</span><br><span class=\"line\">If-None-Match: \"etag/animals\"</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz--</span><br></pre></td></tr></table></figure>\n<p>httpgoogle</p>\n<ul>\n<li><strong>multipart/alternative</strong><br>mixed<br>  </li>\n</ul>\n<pre><code class=\"js\">From:  Nathaniel Borenstein &lt;nsb@bellcore.com&gt; \nTo: Ned Freed &lt;ned@innosoft.com&gt; \nSubject: Formatted text mail \nMIME-Version: <span class=\"number\">1.0</span> \nContent-Type: multipart/alternative; boundary=boundary42 \n\n\n--boundary42 \nContent-Type: text/plain; charset=us-ascii \n\n...plain text version <span class=\"keyword\">of</span> message goes here.... \n\n--boundary42 \nContent-Type: text/richtext \n\n.... richtext version <span class=\"keyword\">of</span> same message goes here ... \n--boundary42 \nContent-Type: text/x-whatever \n\n.... fanciest formatted version <span class=\"keyword\">of</span> same  message  goes  here \n... \n--boundary42-- \n</code></pre>\n<p> text/x-whatever    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://developers.google.com/drive/api/v3/batch?hl=zh-cn\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/drive/api/v3/batch?hl=zh-cn</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</a><br><a href=\"https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html</a>  </p>\n<p>content-type</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>content-typegoogleContent-Type: multipart/mixedContent-Type: application/httpContent-TypeContent-Type<br>","more":"</p>\n<h2 id=\"Content-Type\"><a href=\"#Content-Type\" class=\"headerlink\" title=\"Content-Type\"></a>Content-Type</h2><p>Content-Type:MIME ContentTypetext/html<br><br> (POST  PUT)</p>\n<p>Content-TypeMIME;  X-Content-Type-Options  nosniff</p>\n<p>MIME  </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Content-Type: text/html; charset=utf-8</span><br><span class=\"line\">Content-Type: multipart/form-data; boundary=something</span><br></pre></td></tr></table></figure>\n<p>media-typecharsetboundary<br>media-type</p>\n<h3 id=\"media-type\"><a href=\"#media-type\" class=\"headerlink\" title=\"media-type\"></a>media-type</h3><p>MIME type( Multipurpose Internet Mail Extensions)Internet<br><br>MIME<br>MIME  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MIME <br>/<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">type/subtype;parameter=value</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>typetext/video</li>\n<li>subtypetextplain()html(html)calendar.ics</li>\n<li>parametercharsetbundaary</li>\n</ul>\n<h3 id=\"Types\"><a href=\"#Types\" class=\"headerlink\" title=\"Types\"></a>Types</h3><p>Multipart</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br></p>\n<ul>\n<li>text<br>text/plain, text/csv, text/html.</li>\n<li>application<br>application/octet-stream,application/pdf,application/pkcs8,application/zip.  </li>\n<li>audio<br>audio/mpeg, audio/vorbis</li>\n<li>video<br>video/mp4</li>\n<li>image<br>image/gif, image/png, image/jpeg, image/bmp, image/webp, image/x-icon</li>\n</ul>\n<h4 id=\"Multipart\"><a href=\"#Multipart\" class=\"headerlink\" title=\"Multipart\"></a>Multipart</h4><p>MultipartMIME<br>Multipartmessagemultipart</p>\n<ul>\n<li>message<br>chunkmessage/rfc822message/partial</li>\n<li>multipart<br>MIME multipart/form-data(FormData API) </li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>textimagevideo</p>\n<h4 id=\"application\"><a href=\"#application\" class=\"headerlink\" title=\"application\"></a>application</h4><ul>\n<li><p><strong>application/json</strong>  </p>\n<p>jsonjsonhttp  </p>\n</li>\n<li><p><strong>application/x-www-form-urlencoded</strong><br><br> &amp; -,  = .  percent-encoding:  ( multipart/form-data ).<br> (formdataview source)<br><img src=\"https://user-gold-cdn.xitu.io/2019/4/14/16a1c6f743d8b587?w=1600&h=468&f=jpeg&s=128274\">  </p>\n</li>\n<li><p><strong>multipart/form-data</strong><br><br>post  </p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Content-Type: multipart/form-data; boundary=aBoundaryString</span><br><span class=\"line\">  ```  </span><br><span class=\"line\">  boundary(multipart)  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">```html</span><br><span class=\"line\">  &lt;form action=\"http://localhost:8000/\" method=\"post\" enctype=\"multipart/form-data\"&gt;</span><br><span class=\"line\">  &lt;input type=\"text\" name=\"myTextField\"&gt;</span><br><span class=\"line\">  &lt;input type=\"checkbox\" name=\"myCheckBox\"&gt;Check&lt;/input&gt;</span><br><span class=\"line\">  &lt;input type=\"file\" name=\"myFile\"&gt;</span><br><span class=\"line\">  &lt;button&gt;Send the file&lt;/button&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">```   </span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br><span class=\"line\">```js</span><br><span class=\"line\">POST / HTTP/1.1</span><br><span class=\"line\">Host: localhost:8000</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:50.0) Gecko/20100101 Firefox/50.0</span><br><span class=\"line\">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class=\"line\">Accept-Language: en-US,en;q=0.5</span><br><span class=\"line\">Accept-Encoding: gzip, deflate</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">Upgrade-Insecure-Requests: 1</span><br><span class=\"line\">//  ---------------------------8721656041911415653955004498 </span><br><span class=\"line\">Content-Type: multipart/form-data; boundary=---------------------------8721656041911415653955004498</span><br><span class=\"line\">Content-Length: 465</span><br><span class=\"line\"></span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">//  </span><br><span class=\"line\">Content-Disposition: form-data; name=\"myTextField\"</span><br><span class=\"line\">// value</span><br><span class=\"line\">Test</span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">// checkbox</span><br><span class=\"line\">Content-Disposition: form-data; name=\"myCheckBox\"</span><br><span class=\"line\"></span><br><span class=\"line\">on</span><br><span class=\"line\">-----------------------------8721656041911415653955004498</span><br><span class=\"line\">// </span><br><span class=\"line\">Content-Disposition: form-data; name=\"myFile\"; filename=\"test.txt\"</span><br><span class=\"line\">Content-Type: text/plain</span><br><span class=\"line\"></span><br><span class=\"line\">Simple file.</span><br><span class=\"line\">-----------------------------8721656041911415653955004498--</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>application/javascript application/x-javascript text/javascript</strong><br>jsMIMEtext/javascript<br>jsMIMEtext/javascriptapplication/x-javascriptx text/javascriptRFC4329text/javascriptjsapplication/javascriptapplication/x-javascript   </p>\n</li>\n<li><p><strong>application/zip application/gzip</strong><br> zip zipgzipGNUgzipGNU zip</p>\n</li>\n<li><p><strong>application/http</strong><br> http<a href=\"https://www.iana.org/assignments/media-types/application/http\" target=\"_blank\" rel=\"noopener\"></a><br> httpbinaryContent-Transfer-Encoding<br>   </p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--batch_0123456789</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: </span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">Content-Transfer-Encoding: binary</span><br><span class=\"line\"></span><br><span class=\"line\">POST https:<span class=\"comment\">//www.googleapis.com/analytics/v3/management/accounts/XXXXXX/webproperties/UA-XXXXXX-1/customDimensions</span></span><br><span class=\"line\">Content-Type: application/json</span><br><span class=\"line\">Content-Length: <span class=\"number\">68</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Campaign Group\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"scope\"</span>: <span class=\"string\">\"SESSION\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"active\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">#### multipart</span></span><br><span class=\"line\"><span class=\"string\">multipart</span></span><br><span class=\"line\"><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">Content-Type: multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">boundary'-'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">--gc0p4Jq0M2Yt08jU534c0p</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><p><strong>multipart/form-data</strong><br>application  </p>\n</li>\n<li><p><strong>multipart/mixed</strong><br>(text)mixed<br>  </p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST /batch/farm/v1 HTTP/<span class=\"number\">1.1</span></span><br><span class=\"line\">Authorization: Bearer your_auth_token</span><br><span class=\"line\">Host: www.googleapis.com</span><br><span class=\"line\">Content-Type: multipart/mixed; boundary=batch_foobarbaz</span><br><span class=\"line\">Content-Length: total_content_length</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\"><span class=\"comment\">// http boundary</span></span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item1:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">GET /farm/v1/animals/pony</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item2:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">PUT /farm/v1/animals/sheep</span><br><span class=\"line\">Content-Type: application/json</span><br><span class=\"line\">Content-Length: part_content_length</span><br><span class=\"line\">If-Match: \"etag/sheep\"</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  \"animalName\": \"sheep\",</span><br><span class=\"line\">  \"animalAge\": \"5\"</span><br><span class=\"line\">  \"peltColor\": \"green\",</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz</span><br><span class=\"line\">Content-Type: application/http</span><br><span class=\"line\">Content-ID: &lt;item3:12930812@barnyard.example.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">GET /farm/v1/animals</span><br><span class=\"line\">If-None-Match: \"etag/animals\"</span><br><span class=\"line\"></span><br><span class=\"line\">--batch_foobarbaz--</span><br></pre></td></tr></table></figure>\n<p>httpgoogle</p>\n<ul>\n<li><strong>multipart/alternative</strong><br>mixed<br>  </li>\n</ul>\n<pre><code class=\"js\">From:  Nathaniel Borenstein &lt;nsb@bellcore.com&gt; \nTo: Ned Freed &lt;ned@innosoft.com&gt; \nSubject: Formatted text mail \nMIME-Version: <span class=\"number\">1.0</span> \nContent-Type: multipart/alternative; boundary=boundary42 \n\n\n--boundary42 \nContent-Type: text/plain; charset=us-ascii \n\n...plain text version <span class=\"keyword\">of</span> message goes here.... \n\n--boundary42 \nContent-Type: text/richtext \n\n.... richtext version <span class=\"keyword\">of</span> same message goes here ... \n--boundary42 \nContent-Type: text/x-whatever \n\n.... fanciest formatted version <span class=\"keyword\">of</span> same  message  goes  here \n... \n--boundary42-- \n</code></pre>\n<p> text/x-whatever    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://developers.google.com/drive/api/v3/batch?hl=zh-cn\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/drive/api/v3/batch?hl=zh-cn</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</a><br><a href=\"https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html</a>  </p>\n<p>content-type</p>"},{"title":"","date":"2019-11-14T16:00:00.000Z","_content":"\n##  \n  \n\n<!-- more -->\n\n##   \n\n### \n    \n  \n  \n    \n    *  \n    *   \n\nReact16 Fiber NodeFiber Tree,   \n\n\nvaluelink \n\n\n1\n2\n3\n4\n\n#### \n\n```js\n// \nfunction Node(element) {\n    this.element = element;   //\n    this.next = null;         //\n}\n\n// \nfunction LList () {\n    this.head = new Node( 'head' );     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n} \n```\n\n\n#### \n\n\n\n\n","source":"_posts/data-structure.md","raw":"---\ntitle: \ndate: 2019-11-15\n---\n\n##  \n  \n\n<!-- more -->\n\n##   \n\n### \n    \n  \n  \n    \n    *  \n    *   \n\nReact16 Fiber NodeFiber Tree,   \n\n\nvaluelink \n\n\n1\n2\n3\n4\n\n#### \n\n```js\n// \nfunction Node(element) {\n    this.element = element;   //\n    this.next = null;         //\n}\n\n// \nfunction LList () {\n    this.head = new Node( 'head' );     //\n    this.find = find;                   //\n    this.insert = insert;               //\n    this.remove = remove;               //\n    this.findPrev = findPrev;           //\n    this.display = display;             //\n} \n```\n\n\n#### \n\n\n\n\n","slug":"data-structure","published":1,"updated":"2019-11-05T11:39:11.749Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1h000fgw92x656xgzi","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <br><br>  </p>\n<pre><code>*  \n*   \n</code></pre><p>React16 Fiber NodeFiber Tree,   </p>\n<p><br>valuelink </p>\n<p><br>1<br>2<br>3<br>4</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Node</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.element = element;   <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LList</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node( <span class=\"string\">'head'</span> );     <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.find = find;                   <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.insert = insert;               <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.remove = remove;               <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.findPrev = findPrev;           <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.display = display;             <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <br><br>  </p>\n<pre><code>*  \n*   \n</code></pre><p>React16 Fiber NodeFiber Tree,   </p>\n<p><br>valuelink </p>\n<p><br>1<br>2<br>3<br>4</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Node</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.element = element;   <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LList</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node( <span class=\"string\">'head'</span> );     <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.find = find;                   <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.insert = insert;               <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.remove = remove;               <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.findPrev = findPrev;           <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.display = display;             <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>"},{"title":"","date":"2019-12-30T00:00:29.000Z","_content":"# \n\n## \nmultirepomonorepo\n\n## -multirepo\n\n\n### \n\n\n### \n#### 1.\n\n\n#### 2.\n  \n\n\n\n### \n  \n\n#### 1. \n\n\n#### 2. \nIDE  \nnpm link\n\n#### 3. \n\n\n\n\n## monorepo\nmonorepo \n\nBabelpackages\n### \nmultirepo\n  \nmonorepo\n###  \n\n#### 1. \nG\n\n\n* \n  babel130MG![Jietu20191231-094925-HD](media/15771585486438/Jietu20191231-094925-HD.gif)\n\n* \n  \n\n  \n#### 2. \n  \ncodereview\n \n### \n\n \n#### 1. \n  \n[lerna](https://github.com/lerna/lerna):  \nA tool for managing JavaScript projects with multiple packages\n\n\n#### 2. git \n\ngit\nGit1.7Checkout(sparse checkout)\n \n \n\npull\nbabel babel-cli \n\n```bash\n// \nmkdir demo && cd demo\n// git \ngit init\ngit remote add origin https://github.com/babel/babel.git\n//   \ngit config core.sparsecheckout true\n// \necho \"packages/babel-cli/\" >> .git/info/sparse-checkout\n// \ngit pull origin master\n```  \nls\n\n```bash\npackages/babel-cli\n```\n\n.git/info/sparse-checkoutcheckout \n \n```bash\necho \"packages/babel-cli/\" >> .git/info/sparse-checkout\ngit checkout master\n```\n\n\n#### -\n\n\n\n```js\ngit clone --depth 2 https://github.com/babel/babel.git\n```\n\n\n\n* \n* \n* \n* \n* \n\n\n## \n[](http://xxdy.tech/)\n\n### \n* [https://www.kloia.com/blog/monorepo-or-multirepo](https://www.kloia.com/blog/monorepo-or-multirepo)\n* [https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html](https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html)  \n* [https://zhuanlan.zhihu.com/p/31289463](https://zhuanlan.zhihu.com/p/31289463)\n\n\n\n","source":"_posts/gitcheckout.md","raw":"---\ntitle: \ndate: 2019-12-30 08:00:29\ntags:  \n---\n# \n\n## \nmultirepomonorepo\n\n## -multirepo\n\n\n### \n\n\n### \n#### 1.\n\n\n#### 2.\n  \n\n\n\n### \n  \n\n#### 1. \n\n\n#### 2. \nIDE  \nnpm link\n\n#### 3. \n\n\n\n\n## monorepo\nmonorepo \n\nBabelpackages\n### \nmultirepo\n  \nmonorepo\n###  \n\n#### 1. \nG\n\n\n* \n  babel130MG![Jietu20191231-094925-HD](media/15771585486438/Jietu20191231-094925-HD.gif)\n\n* \n  \n\n  \n#### 2. \n  \ncodereview\n \n### \n\n \n#### 1. \n  \n[lerna](https://github.com/lerna/lerna):  \nA tool for managing JavaScript projects with multiple packages\n\n\n#### 2. git \n\ngit\nGit1.7Checkout(sparse checkout)\n \n \n\npull\nbabel babel-cli \n\n```bash\n// \nmkdir demo && cd demo\n// git \ngit init\ngit remote add origin https://github.com/babel/babel.git\n//   \ngit config core.sparsecheckout true\n// \necho \"packages/babel-cli/\" >> .git/info/sparse-checkout\n// \ngit pull origin master\n```  \nls\n\n```bash\npackages/babel-cli\n```\n\n.git/info/sparse-checkoutcheckout \n \n```bash\necho \"packages/babel-cli/\" >> .git/info/sparse-checkout\ngit checkout master\n```\n\n\n#### -\n\n\n\n```js\ngit clone --depth 2 https://github.com/babel/babel.git\n```\n\n\n\n* \n* \n* \n* \n* \n\n\n## \n[](http://xxdy.tech/)\n\n### \n* [https://www.kloia.com/blog/monorepo-or-multirepo](https://www.kloia.com/blog/monorepo-or-multirepo)\n* [https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html](https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html)  \n* [https://zhuanlan.zhihu.com/p/31289463](https://zhuanlan.zhihu.com/p/31289463)\n\n\n\n","slug":"gitcheckout","published":1,"updated":"2019-12-31T03:44:40.728Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1j000hgw923edlvxr9","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>multirepomonorepo</p>\n<h2 id=\"-multirepo\"><a href=\"#-multirepo\" class=\"headerlink\" title=\"-multirepo\"></a>-multirepo</h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h4><p><br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p>IDE<br>npm link</p>\n<h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p></p>\n<p></p>\n<h2 id=\"monorepo\"><a href=\"#monorepo\" class=\"headerlink\" title=\"monorepo\"></a>monorepo</h2><p>monorepo <br><br>Babelpackages</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>multirepo<br><br>monorepo</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p>G<br></p>\n<ul>\n<li><p><br>babel130MG<img src=\"media/15771585486438/Jietu20191231-094925-HD.gif\" alt=\"Jietu20191231-094925-HD\"></p>\n</li>\n<li><p><br></p>\n</li>\n</ul>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p><br>codereview</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p><br><a href=\"https://github.com/lerna/lerna\" target=\"_blank\" rel=\"noopener\">lerna</a>:<br>A tool for managing JavaScript projects with multiple packages<br></p>\n<h4 id=\"2-git\"><a href=\"#2-git\" class=\"headerlink\" title=\"2. git\"></a>2. git</h4><p>git<br>Git1.7Checkout(sparse checkout)</p>\n<p> </p>\n<p>pull<br>babel babel-cli </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// </span><br><span class=\"line\">mkdir demo &amp;&amp; <span class=\"built_in\">cd</span> demo</span><br><span class=\"line\">// git </span><br><span class=\"line\">git init</span><br><span class=\"line\">git remote add origin https://github.com/babel/babel.git</span><br><span class=\"line\">//   </span><br><span class=\"line\">git config core.sparsecheckout <span class=\"literal\">true</span></span><br><span class=\"line\">// </span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"packages/babel-cli/\"</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class=\"line\">// </span><br><span class=\"line\">git pull origin master</span><br><span class=\"line\">```  </span><br><span class=\"line\">ls</span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">packages/babel-cli</span><br></pre></td></tr></table></figure>\n<p>.git/info/sparse-checkoutcheckout </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"packages/babel-cli/\"</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class=\"line\">git checkout master</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h4><p><br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone --depth <span class=\"number\">2</span> https:<span class=\"comment\">//github.com/babel/babel.git</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://xxdy.tech/\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"https://www.kloia.com/blog/monorepo-or-multirepo\" target=\"_blank\" rel=\"noopener\">https://www.kloia.com/blog/monorepo-or-multirepo</a></li>\n<li><a href=\"https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html\" target=\"_blank\" rel=\"noopener\">https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html</a>  </li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/31289463\" target=\"_blank\" rel=\"noopener\">https://zhuanlan.zhihu.com/p/31289463</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>multirepomonorepo</p>\n<h2 id=\"-multirepo\"><a href=\"#-multirepo\" class=\"headerlink\" title=\"-multirepo\"></a>-multirepo</h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h4><p><br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p>IDE<br>npm link</p>\n<h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p></p>\n<p></p>\n<h2 id=\"monorepo\"><a href=\"#monorepo\" class=\"headerlink\" title=\"monorepo\"></a>monorepo</h2><p>monorepo <br><br>Babelpackages</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>multirepo<br><br>monorepo</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p>G<br></p>\n<ul>\n<li><p><br>babel130MG<img src=\"media/15771585486438/Jietu20191231-094925-HD.gif\" alt=\"Jietu20191231-094925-HD\"></p>\n</li>\n<li><p><br></p>\n</li>\n</ul>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p><br>codereview</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4><p><br><a href=\"https://github.com/lerna/lerna\" target=\"_blank\" rel=\"noopener\">lerna</a>:<br>A tool for managing JavaScript projects with multiple packages<br></p>\n<h4 id=\"2-git\"><a href=\"#2-git\" class=\"headerlink\" title=\"2. git\"></a>2. git</h4><p>git<br>Git1.7Checkout(sparse checkout)</p>\n<p> </p>\n<p>pull<br>babel babel-cli </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// </span><br><span class=\"line\">mkdir demo &amp;&amp; <span class=\"built_in\">cd</span> demo</span><br><span class=\"line\">// git </span><br><span class=\"line\">git init</span><br><span class=\"line\">git remote add origin https://github.com/babel/babel.git</span><br><span class=\"line\">//   </span><br><span class=\"line\">git config core.sparsecheckout <span class=\"literal\">true</span></span><br><span class=\"line\">// </span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"packages/babel-cli/\"</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class=\"line\">// </span><br><span class=\"line\">git pull origin master</span><br><span class=\"line\">```  </span><br><span class=\"line\">ls</span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">packages/babel-cli</span><br></pre></td></tr></table></figure>\n<p>.git/info/sparse-checkoutcheckout </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"packages/babel-cli/\"</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class=\"line\">git checkout master</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h4><p><br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone --depth <span class=\"number\">2</span> https:<span class=\"comment\">//github.com/babel/babel.git</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://xxdy.tech/\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"https://www.kloia.com/blog/monorepo-or-multirepo\" target=\"_blank\" rel=\"noopener\">https://www.kloia.com/blog/monorepo-or-multirepo</a></li>\n<li><a href=\"https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html\" target=\"_blank\" rel=\"noopener\">https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html</a>  </li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/31289463\" target=\"_blank\" rel=\"noopener\">https://zhuanlan.zhihu.com/p/31289463</a></li>\n</ul>\n"},{"title":"vue","date":"2018-08-25T00:00:29.000Z","_content":"\n##   \nvue\n<!-- more -->\n## \n###   \nclicktouch\n\n\n```js\n//test\nvar event = new Event('test')\n//\nvar event = new CustomEvent('test', { 'detail': elem.dataset.time });\n```\nnew Event/CustomEvent IE\n<img src='https://user-gold-cdn.xitu.io/2018/8/25/16571803c3080b60?w=2554&h=1016&f=png&s=135371'/>\nIE\n\n```js\nvar event = document.createEvent('Event');\n//\nevent.initEvent('test', true, true);\n```\n\n\n```html\n<form>\n  <textarea></textarea>\n</form>\n```\nmdn\n\n```js\nconst form = document.querySelector('form');\nconst textarea = document.querySelector('textarea');\n\n\n//details\nconst eventAwesome = new CustomEvent('awesome', {\n  bubbles: true,\n  detail: { text: () => textarea.value }\n});\n\n  //formawesometext\n  // text\nform.addEventListener('awesome', e => console.log(e.detail.text()));\n  //  \n  // textareaawesome\ntextarea.addEventListener('input', e => e.target.dispatchEvent(eventAwesome));\n```\n   \n### \n### js\njszeptotaptouchtap()\n\n```js\n//eventmap\n// ontouchstartdowntouchstartuptouchend\neventMap = (__eventMap && ('down' in __eventMap)) ? __eventMap :\n      ('ontouchstart' in document ?\n      { 'down': 'touchstart', 'up': 'touchend',\n        'move': 'touchmove', 'cancel': 'touchcancel' } :\n      'onpointerdown' in document ?\n      { 'down': 'pointerdown', 'up': 'pointerup',\n        'move': 'pointermove', 'cancel': 'pointercancel' } :\n       'onmspointerdown' in document ?\n      { 'down': 'MSPointerDown', 'up': 'MSPointerUp',\n        'move': 'MSPointerMove', 'cancel': 'MSPointerCancel' } : false)\n //\n     $(document).on(eventMap.up, up)\n      .on(eventMap.down, down)\n      .on(eventMap.move, move)       \n //uptouchendtap    \n var up = function (e) {\n      /*  */\n       tapTimeout = setTimeout(function () {\n           var event = $.Event('tap')\n            event.cancelTouch = cancelAll\n            if (touch.el) touch.el.trigger(event); \n          },0\n        }\n     //   \n```\n### \n  \ndiv\nhtml\n\n```js\n<div ><input type='text' id='el' value=10 /></div>\n<div >5<span id='el2'>50</span></div>\n```\ninput[demo](http://xxdy.tech/event/index.html) \n<img src='https://user-gold-cdn.xitu.io/2018/8/25/165718064234986c?w=600&h=185&f=gif&s=7690486'/>\n\n\n1priceChangeprice\n2 priceChangetotal\n3input valuepriceChange\n\n\n```js\n  const count = document.querySelector('#el'),\n      total1 = document.querySelector('#el2');\n  const eventAwesome = new CustomEvent('priceChange', {\n      bubbles: true,\n      detail: { getprice: () => count.value }\n    });\n  document.addEventListener('priceChange', function (e) {\n      var price = e.detail.getprice() || 0\n      total1.innerHTML=5 * price\n    })\n  el.addEventListener('change', function (e) {\n    var val = e.target.value\n    e.target.dispatchEvent(eventAwesome)\n  });\n```\nvue  \nvuereactvue  \n## \nontriggeroff\n1. ,\n\n```js\nclass Event1{\n    constructor(){\n      // \n      this._events = {}\n    }\n    // typecall\n    on(type,call){\n      let funs = this._events[type]\n      // \n      // push\n      if(funs){\n        funs.push(call)\n      }else{\n        this._events.type=[]\n        this._events.type.push(call)\n      }\n    }\n}\n```\n2. trigger\n\n```js\n// \n    trigger(type){\n      let funs = this._events.type,\n        [first,...other] = Array.from(arguments)\n      //  \n      if(funs){\n        let i = 0,\n            j = funs.length;\n        for (i=0; i < j; i++) {\n          let cb = funs[i];\n          cb.apply(this, other);\n        }\n      }\n    }\n```\n3. \n\n```js\n// \n    off(type,func){\n      let funs = this._events.type\n      if(funs){\n        let i = 0,\n          j = funs.length;\n        for (i = 0; i < j; i++) {\n          let cb = funs[i];\n           if (cb === func) {\n            funs.splice(i, 1);\n            return;\n          }\n        }\n      }\n      return this\n    }\n  }\n```\n  \nhtml\n\n```js\n //  event1Event\n  const event1 = new Event1()    \n  \n  //  priceChange \n  event1.on('priceChange', function (e) {\n      // \n      var price = count.value || 0\n      total1.innerHTML = 5 * price\n    })  \n  el.addEventListener('change', function (e) {\n    var val = e.target.value\n    // \n    event1.trigger('priceChange')\n  });\n```\nvue\n### vue  \nvue  \n### \n\n<img src='https://user-gold-cdn.xitu.io/2018/8/25/165718027cb03c89?w=800&h=500&f=png&s=64811'/>\n  \nObject.defineProperty()\n  \n\n```js\nlet a = {\n   b:'1' \n}\nObject.defineProperty(a,'b',{\n        get(){\n            console.log('get>>>',1)\n            return 1\n        },\n        set(newVal){\n            console.log('set>>>11','')\n            return 1\n        }\n    })\na.b //'get>>>1'\na.b = 11    //set>>>11 \n```\nget/setlog   \ngetset  \n\n    \n```js\n//\nlet data = {\n    price: 5,\n    count: 2\n  },\ncallb = null  \n```\n,  \ntype  \n  \n\n```js\nclass Events {\n    constructor() {\n      this._events = []\n    }\n    on() {\n      //tyep\n      if (callb && !this._events.includes(callb)) {\n        this._events.push(callb)\n      }\n    }\n    triger() {\n      this._events.forEach((callb) => {\n        callb && callb()\n      })\n    }\n  }\n```\nvueData\n\n```js\nObject.keys(data).forEach((key) => {\n    let initVlue = data[key]\n    const e1 = new Events()\n    Object.defineProperty(data, key, {\n      get() {\n         //\n        e1.on()\n        // \n        callb = null\n        // get\n        return initVlue\n      },\n      set(newVal) {\n        initVlue = newVal\n        // set\n        e1.triger()\n      }\n    })\n  })\n```\ncallbacknullwatcher\n\n```js\nfunction watcher(func) {\n    // callbackget\n    callb = func\n    // get\n    callb()\n    // \n    callb = null\n  }\n  // \n  watcher(() => {\n    data.total = data.price * data.count\n  })\n```\n   \ndom\nconsole   \n\n```js\nlet data = {\n    price: 5,\n    count: 2\n  },\n    callb = null\n\n  class Events {\n    constructor() {\n      this._events = []\n    }\n    on() {\n      if (callb && !this._events.includes(callb)) {\n        this._events.push(callb)\n      }\n    }\n    triger() {\n      this._events.forEach((callb) => {\n        callb && callb()\n      })\n    }\n  }\n \n  Object.keys(data).forEach((key) => {\n    let initVlue = data[key]\n    const e1 = new Events()\n    Object.defineProperty(data, key, {\n      get() {\n         //\n        e1.on()\n        // \n        callb = null\n        // get\n        return initVlue\n      },\n      set(newVal) {\n        initVlue = newVal\n        // set\n        e1.triger()\n      }\n    })\n  })\n  function watcher(func) {\n    // callbackget\n    callb = func\n    // get\n    callb()\n    // \n    callb = null\n  }\n  // \n  watcher(() => {\n    data.total = data.price * data.count\n  })\n```\n### \n#### \n[vue](https://medium.com/vue-mastery/the-best-explanation-of-javascript-reactivity-fea6112dd80d)  \n[Creating and triggering events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events)  \n[](https://github.com/xiaoxiangdaiyu/blog)  \n[demo](http://xxdy.tech/event/index.html)  \n[](https://github.com/xiaoxiangdaiyu/blog/blob/master/source/event/index.html)","source":"_posts/event.md","raw":"---\ntitle: vue\ndate: 2018-08-25 08:00:29\ntags:\n---\n\n##   \nvue\n<!-- more -->\n## \n###   \nclicktouch\n\n\n```js\n//test\nvar event = new Event('test')\n//\nvar event = new CustomEvent('test', { 'detail': elem.dataset.time });\n```\nnew Event/CustomEvent IE\n<img src='https://user-gold-cdn.xitu.io/2018/8/25/16571803c3080b60?w=2554&h=1016&f=png&s=135371'/>\nIE\n\n```js\nvar event = document.createEvent('Event');\n//\nevent.initEvent('test', true, true);\n```\n\n\n```html\n<form>\n  <textarea></textarea>\n</form>\n```\nmdn\n\n```js\nconst form = document.querySelector('form');\nconst textarea = document.querySelector('textarea');\n\n\n//details\nconst eventAwesome = new CustomEvent('awesome', {\n  bubbles: true,\n  detail: { text: () => textarea.value }\n});\n\n  //formawesometext\n  // text\nform.addEventListener('awesome', e => console.log(e.detail.text()));\n  //  \n  // textareaawesome\ntextarea.addEventListener('input', e => e.target.dispatchEvent(eventAwesome));\n```\n   \n### \n### js\njszeptotaptouchtap()\n\n```js\n//eventmap\n// ontouchstartdowntouchstartuptouchend\neventMap = (__eventMap && ('down' in __eventMap)) ? __eventMap :\n      ('ontouchstart' in document ?\n      { 'down': 'touchstart', 'up': 'touchend',\n        'move': 'touchmove', 'cancel': 'touchcancel' } :\n      'onpointerdown' in document ?\n      { 'down': 'pointerdown', 'up': 'pointerup',\n        'move': 'pointermove', 'cancel': 'pointercancel' } :\n       'onmspointerdown' in document ?\n      { 'down': 'MSPointerDown', 'up': 'MSPointerUp',\n        'move': 'MSPointerMove', 'cancel': 'MSPointerCancel' } : false)\n //\n     $(document).on(eventMap.up, up)\n      .on(eventMap.down, down)\n      .on(eventMap.move, move)       \n //uptouchendtap    \n var up = function (e) {\n      /*  */\n       tapTimeout = setTimeout(function () {\n           var event = $.Event('tap')\n            event.cancelTouch = cancelAll\n            if (touch.el) touch.el.trigger(event); \n          },0\n        }\n     //   \n```\n### \n  \ndiv\nhtml\n\n```js\n<div ><input type='text' id='el' value=10 /></div>\n<div >5<span id='el2'>50</span></div>\n```\ninput[demo](http://xxdy.tech/event/index.html) \n<img src='https://user-gold-cdn.xitu.io/2018/8/25/165718064234986c?w=600&h=185&f=gif&s=7690486'/>\n\n\n1priceChangeprice\n2 priceChangetotal\n3input valuepriceChange\n\n\n```js\n  const count = document.querySelector('#el'),\n      total1 = document.querySelector('#el2');\n  const eventAwesome = new CustomEvent('priceChange', {\n      bubbles: true,\n      detail: { getprice: () => count.value }\n    });\n  document.addEventListener('priceChange', function (e) {\n      var price = e.detail.getprice() || 0\n      total1.innerHTML=5 * price\n    })\n  el.addEventListener('change', function (e) {\n    var val = e.target.value\n    e.target.dispatchEvent(eventAwesome)\n  });\n```\nvue  \nvuereactvue  \n## \nontriggeroff\n1. ,\n\n```js\nclass Event1{\n    constructor(){\n      // \n      this._events = {}\n    }\n    // typecall\n    on(type,call){\n      let funs = this._events[type]\n      // \n      // push\n      if(funs){\n        funs.push(call)\n      }else{\n        this._events.type=[]\n        this._events.type.push(call)\n      }\n    }\n}\n```\n2. trigger\n\n```js\n// \n    trigger(type){\n      let funs = this._events.type,\n        [first,...other] = Array.from(arguments)\n      //  \n      if(funs){\n        let i = 0,\n            j = funs.length;\n        for (i=0; i < j; i++) {\n          let cb = funs[i];\n          cb.apply(this, other);\n        }\n      }\n    }\n```\n3. \n\n```js\n// \n    off(type,func){\n      let funs = this._events.type\n      if(funs){\n        let i = 0,\n          j = funs.length;\n        for (i = 0; i < j; i++) {\n          let cb = funs[i];\n           if (cb === func) {\n            funs.splice(i, 1);\n            return;\n          }\n        }\n      }\n      return this\n    }\n  }\n```\n  \nhtml\n\n```js\n //  event1Event\n  const event1 = new Event1()    \n  \n  //  priceChange \n  event1.on('priceChange', function (e) {\n      // \n      var price = count.value || 0\n      total1.innerHTML = 5 * price\n    })  \n  el.addEventListener('change', function (e) {\n    var val = e.target.value\n    // \n    event1.trigger('priceChange')\n  });\n```\nvue\n### vue  \nvue  \n### \n\n<img src='https://user-gold-cdn.xitu.io/2018/8/25/165718027cb03c89?w=800&h=500&f=png&s=64811'/>\n  \nObject.defineProperty()\n  \n\n```js\nlet a = {\n   b:'1' \n}\nObject.defineProperty(a,'b',{\n        get(){\n            console.log('get>>>',1)\n            return 1\n        },\n        set(newVal){\n            console.log('set>>>11','')\n            return 1\n        }\n    })\na.b //'get>>>1'\na.b = 11    //set>>>11 \n```\nget/setlog   \ngetset  \n\n    \n```js\n//\nlet data = {\n    price: 5,\n    count: 2\n  },\ncallb = null  \n```\n,  \ntype  \n  \n\n```js\nclass Events {\n    constructor() {\n      this._events = []\n    }\n    on() {\n      //tyep\n      if (callb && !this._events.includes(callb)) {\n        this._events.push(callb)\n      }\n    }\n    triger() {\n      this._events.forEach((callb) => {\n        callb && callb()\n      })\n    }\n  }\n```\nvueData\n\n```js\nObject.keys(data).forEach((key) => {\n    let initVlue = data[key]\n    const e1 = new Events()\n    Object.defineProperty(data, key, {\n      get() {\n         //\n        e1.on()\n        // \n        callb = null\n        // get\n        return initVlue\n      },\n      set(newVal) {\n        initVlue = newVal\n        // set\n        e1.triger()\n      }\n    })\n  })\n```\ncallbacknullwatcher\n\n```js\nfunction watcher(func) {\n    // callbackget\n    callb = func\n    // get\n    callb()\n    // \n    callb = null\n  }\n  // \n  watcher(() => {\n    data.total = data.price * data.count\n  })\n```\n   \ndom\nconsole   \n\n```js\nlet data = {\n    price: 5,\n    count: 2\n  },\n    callb = null\n\n  class Events {\n    constructor() {\n      this._events = []\n    }\n    on() {\n      if (callb && !this._events.includes(callb)) {\n        this._events.push(callb)\n      }\n    }\n    triger() {\n      this._events.forEach((callb) => {\n        callb && callb()\n      })\n    }\n  }\n \n  Object.keys(data).forEach((key) => {\n    let initVlue = data[key]\n    const e1 = new Events()\n    Object.defineProperty(data, key, {\n      get() {\n         //\n        e1.on()\n        // \n        callb = null\n        // get\n        return initVlue\n      },\n      set(newVal) {\n        initVlue = newVal\n        // set\n        e1.triger()\n      }\n    })\n  })\n  function watcher(func) {\n    // callbackget\n    callb = func\n    // get\n    callb()\n    // \n    callb = null\n  }\n  // \n  watcher(() => {\n    data.total = data.price * data.count\n  })\n```\n### \n#### \n[vue](https://medium.com/vue-mastery/the-best-explanation-of-javascript-reactivity-fea6112dd80d)  \n[Creating and triggering events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events)  \n[](https://github.com/xiaoxiangdaiyu/blog)  \n[demo](http://xxdy.tech/event/index.html)  \n[](https://github.com/xiaoxiangdaiyu/blog/blob/master/source/event/index.html)","slug":"event","published":1,"updated":"2018-08-26T01:31:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1l000jgw92itdkokxi","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>vue<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>clicktouch<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//test</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> Event(<span class=\"string\">'test'</span>)</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'test'</span>, &#123; <span class=\"string\">'detail'</span>: elem.dataset.time &#125;);</span><br></pre></td></tr></table></figure>\n<p>new Event/CustomEvent IE<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/16571803c3080b60?w=2554&h=1016&f=png&s=135371\"><br>IE</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'Event'</span>);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">event.initEvent(<span class=\"string\">'test'</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">textarea</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>mdn</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> form = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'form'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> textarea = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'textarea'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//details</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> eventAwesome = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'awesome'</span>, &#123;</span><br><span class=\"line\">  bubbles: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  detail: &#123; <span class=\"attr\">text</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> textarea.value &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//formawesometext</span></span><br><span class=\"line\">  <span class=\"comment\">// text</span></span><br><span class=\"line\">form.addEventListener(<span class=\"string\">'awesome'</span>, e =&gt; <span class=\"built_in\">console</span>.log(e.detail.text()));</span><br><span class=\"line\">  <span class=\"comment\">//  </span></span><br><span class=\"line\">  <span class=\"comment\">// textareaawesome</span></span><br><span class=\"line\">textarea.addEventListener(<span class=\"string\">'input'</span>, e =&gt; e.target.dispatchEvent(eventAwesome));</span><br></pre></td></tr></table></figure>\n<p>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h3><p>jszeptotaptouchtap()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//eventmap</span></span><br><span class=\"line\"><span class=\"comment\">// ontouchstartdowntouchstartuptouchend</span></span><br><span class=\"line\">eventMap = (__eventMap &amp;&amp; (<span class=\"string\">'down'</span> <span class=\"keyword\">in</span> __eventMap)) ? __eventMap :</span><br><span class=\"line\">      (<span class=\"string\">'ontouchstart'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'touchstart'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'touchend'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'touchmove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'touchcancel'</span> &#125; :</span><br><span class=\"line\">      <span class=\"string\">'onpointerdown'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'pointerdown'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'pointerup'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'pointermove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'pointercancel'</span> &#125; :</span><br><span class=\"line\">       <span class=\"string\">'onmspointerdown'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'MSPointerDown'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'MSPointerUp'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'MSPointerMove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'MSPointerCancel'</span> &#125; : <span class=\"literal\">false</span>)</span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\">     $(<span class=\"built_in\">document</span>).on(eventMap.up, up)</span><br><span class=\"line\">      .on(eventMap.down, down)</span><br><span class=\"line\">      .on(eventMap.move, move)       </span><br><span class=\"line\"> <span class=\"comment\">//uptouchendtap    </span></span><br><span class=\"line\"> <span class=\"keyword\">var</span> up = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">/*  */</span></span><br><span class=\"line\">       tapTimeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> event = $.Event(<span class=\"string\">'tap'</span>)</span><br><span class=\"line\">            event.cancelTouch = cancelAll</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (touch.el) touch.el.trigger(event); </span><br><span class=\"line\">          &#125;,<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>div<br>html</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div &gt;&lt;input type=<span class=\"string\">'text'</span> id=<span class=\"string\">'el'</span> value=<span class=\"number\">10</span> /&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;div &gt;<span class=\"number\">5</span>&lt;span id=<span class=\"string\">'el2'</span>&gt;<span class=\"number\">50</span>&lt;<span class=\"regexp\">/span&gt;&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>\n<p>input<a href=\"http://xxdy.tech/event/index.html\">demo</a> <br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/165718064234986c?w=600&h=185&f=gif&s=7690486\"></p>\n<p><br>1priceChangeprice<br>2 priceChangetotal<br>3input valuepriceChange<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> count = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#el'</span>),</span><br><span class=\"line\">    total1 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#el2'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> eventAwesome = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'priceChange'</span>, &#123;</span><br><span class=\"line\">    bubbles: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    detail: &#123; <span class=\"attr\">getprice</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> count.value &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'priceChange'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> price = e.detail.getprice() || <span class=\"number\">0</span></span><br><span class=\"line\">    total1.innerHTML=<span class=\"number\">5</span> * price</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">el.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> val = e.target.value</span><br><span class=\"line\">  e.target.dispatchEvent(eventAwesome)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>vue<br>vuereactvue  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ontriggeroff</p>\n<ol>\n<li>,</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Event1</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// typecall</span></span><br><span class=\"line\">    on(type,call)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events[type]</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"comment\">// push</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        funs.push(call)</span><br><span class=\"line\">      &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.type=[]</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.type.push(call)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>trigger</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    trigger(type)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events.type,</span><br><span class=\"line\">        [first,...other] = <span class=\"built_in\">Array</span>.from(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>,</span><br><span class=\"line\">            j = funs.length;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> cb = funs[i];</span><br><span class=\"line\">          cb.apply(<span class=\"keyword\">this</span>, other);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    off(type,func)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events.type</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>,</span><br><span class=\"line\">          j = funs.length;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> cb = funs[i];</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (cb === func) &#123;</span><br><span class=\"line\">            funs.splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><br>html</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  event1Event</span></span><br><span class=\"line\"> <span class=\"keyword\">const</span> event1 = <span class=\"keyword\">new</span> Event1()    </span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//  priceChange </span></span><br><span class=\"line\"> event1.on(<span class=\"string\">'priceChange'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// </span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> price = count.value || <span class=\"number\">0</span></span><br><span class=\"line\">     total1.innerHTML = <span class=\"number\">5</span> * price</span><br><span class=\"line\">   &#125;)  </span><br><span class=\"line\"> el.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> val = e.target.value</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   event1.trigger(<span class=\"string\">'priceChange'</span>)</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure>\n<p>vue</p>\n<h3 id=\"vue\"><a href=\"#vue\" class=\"headerlink\" title=\"vue\"></a>vue</h3><p>vue  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/165718027cb03c89?w=800&h=500&f=png&s=64811\"><br><br>Object.defineProperty()<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = &#123;</span><br><span class=\"line\">   b:<span class=\"string\">'1'</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(a,<span class=\"string\">'b'</span>,&#123;</span><br><span class=\"line\">        get()&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'get&gt;&gt;&gt;'</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        set(newVal)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'set&gt;&gt;&gt;11'</span>,<span class=\"string\">''</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">a.b <span class=\"comment\">//'get&gt;&gt;&gt;1'</span></span><br><span class=\"line\">a.b = <span class=\"number\">11</span>    <span class=\"comment\">//set&gt;&gt;&gt;11 </span></span><br></pre></td></tr></table></figure>\n<p>get/setlog<br>getset<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    price: <span class=\"number\">5</span>,</span><br><span class=\"line\">    count: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">callb = <span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n<p>,<br>type<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Events</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    on() &#123;</span><br><span class=\"line\">      <span class=\"comment\">//tyep</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (callb &amp;&amp; !<span class=\"keyword\">this</span>._events.includes(callb)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.push(callb)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    triger() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events.forEach(<span class=\"function\">(<span class=\"params\">callb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        callb &amp;&amp; callb()</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>vueData</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> initVlue = data[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> e1 = <span class=\"keyword\">new</span> Events()</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">         <span class=\"comment\">//</span></span><br><span class=\"line\">        e1.on()</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        callb = <span class=\"literal\">null</span></span><br><span class=\"line\">        <span class=\"comment\">// get</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> initVlue</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      set(newVal) &#123;</span><br><span class=\"line\">        initVlue = newVal</span><br><span class=\"line\">        <span class=\"comment\">// set</span></span><br><span class=\"line\">        e1.triger()</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>callbacknullwatcher</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">watcher</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// callbackget</span></span><br><span class=\"line\">    callb = func</span><br><span class=\"line\">    <span class=\"comment\">// get</span></span><br><span class=\"line\">    callb()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  watcher(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    data.total = data.price * data.count</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p><br>dom<br>console   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    price: <span class=\"number\">5</span>,</span><br><span class=\"line\">    count: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Events</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    on() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (callb &amp;&amp; !<span class=\"keyword\">this</span>._events.includes(callb)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.push(callb)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    triger() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events.forEach(<span class=\"function\">(<span class=\"params\">callb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        callb &amp;&amp; callb()</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> initVlue = data[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> e1 = <span class=\"keyword\">new</span> Events()</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">         <span class=\"comment\">//</span></span><br><span class=\"line\">        e1.on()</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        callb = <span class=\"literal\">null</span></span><br><span class=\"line\">        <span class=\"comment\">// get</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> initVlue</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      set(newVal) &#123;</span><br><span class=\"line\">        initVlue = newVal</span><br><span class=\"line\">        <span class=\"comment\">// set</span></span><br><span class=\"line\">        e1.triger()</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">watcher</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// callbackget</span></span><br><span class=\"line\">    callb = func</span><br><span class=\"line\">    <span class=\"comment\">// get</span></span><br><span class=\"line\">    callb()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  watcher(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    data.total = data.price * data.count</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://medium.com/vue-mastery/the-best-explanation-of-javascript-reactivity-fea6112dd80d\" target=\"_blank\" rel=\"noopener\">vue</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\" target=\"_blank\" rel=\"noopener\">Creating and triggering events</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a><br><a href=\"http://xxdy.tech/event/index.html\">demo</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog/blob/master/source/event/index.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>vue<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>clicktouch<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//test</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> Event(<span class=\"string\">'test'</span>)</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'test'</span>, &#123; <span class=\"string\">'detail'</span>: elem.dataset.time &#125;);</span><br></pre></td></tr></table></figure>\n<p>new Event/CustomEvent IE<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/16571803c3080b60?w=2554&h=1016&f=png&s=135371\"><br>IE</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'Event'</span>);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">event.initEvent(<span class=\"string\">'test'</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">textarea</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>mdn</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> form = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'form'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> textarea = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'textarea'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//details</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> eventAwesome = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'awesome'</span>, &#123;</span><br><span class=\"line\">  bubbles: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  detail: &#123; <span class=\"attr\">text</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> textarea.value &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//formawesometext</span></span><br><span class=\"line\">  <span class=\"comment\">// text</span></span><br><span class=\"line\">form.addEventListener(<span class=\"string\">'awesome'</span>, e =&gt; <span class=\"built_in\">console</span>.log(e.detail.text()));</span><br><span class=\"line\">  <span class=\"comment\">//  </span></span><br><span class=\"line\">  <span class=\"comment\">// textareaawesome</span></span><br><span class=\"line\">textarea.addEventListener(<span class=\"string\">'input'</span>, e =&gt; e.target.dispatchEvent(eventAwesome));</span><br></pre></td></tr></table></figure>\n<p>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h3><p>jszeptotaptouchtap()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//eventmap</span></span><br><span class=\"line\"><span class=\"comment\">// ontouchstartdowntouchstartuptouchend</span></span><br><span class=\"line\">eventMap = (__eventMap &amp;&amp; (<span class=\"string\">'down'</span> <span class=\"keyword\">in</span> __eventMap)) ? __eventMap :</span><br><span class=\"line\">      (<span class=\"string\">'ontouchstart'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'touchstart'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'touchend'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'touchmove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'touchcancel'</span> &#125; :</span><br><span class=\"line\">      <span class=\"string\">'onpointerdown'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'pointerdown'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'pointerup'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'pointermove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'pointercancel'</span> &#125; :</span><br><span class=\"line\">       <span class=\"string\">'onmspointerdown'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span> ?</span><br><span class=\"line\">      &#123; <span class=\"string\">'down'</span>: <span class=\"string\">'MSPointerDown'</span>, <span class=\"string\">'up'</span>: <span class=\"string\">'MSPointerUp'</span>,</span><br><span class=\"line\">        <span class=\"string\">'move'</span>: <span class=\"string\">'MSPointerMove'</span>, <span class=\"string\">'cancel'</span>: <span class=\"string\">'MSPointerCancel'</span> &#125; : <span class=\"literal\">false</span>)</span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\">     $(<span class=\"built_in\">document</span>).on(eventMap.up, up)</span><br><span class=\"line\">      .on(eventMap.down, down)</span><br><span class=\"line\">      .on(eventMap.move, move)       </span><br><span class=\"line\"> <span class=\"comment\">//uptouchendtap    </span></span><br><span class=\"line\"> <span class=\"keyword\">var</span> up = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">/*  */</span></span><br><span class=\"line\">       tapTimeout = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> event = $.Event(<span class=\"string\">'tap'</span>)</span><br><span class=\"line\">            event.cancelTouch = cancelAll</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (touch.el) touch.el.trigger(event); </span><br><span class=\"line\">          &#125;,<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>div<br>html</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div &gt;&lt;input type=<span class=\"string\">'text'</span> id=<span class=\"string\">'el'</span> value=<span class=\"number\">10</span> /&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;div &gt;<span class=\"number\">5</span>&lt;span id=<span class=\"string\">'el2'</span>&gt;<span class=\"number\">50</span>&lt;<span class=\"regexp\">/span&gt;&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>\n<p>input<a href=\"http://xxdy.tech/event/index.html\">demo</a> <br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/165718064234986c?w=600&h=185&f=gif&s=7690486\"></p>\n<p><br>1priceChangeprice<br>2 priceChangetotal<br>3input valuepriceChange<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> count = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#el'</span>),</span><br><span class=\"line\">    total1 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#el2'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> eventAwesome = <span class=\"keyword\">new</span> CustomEvent(<span class=\"string\">'priceChange'</span>, &#123;</span><br><span class=\"line\">    bubbles: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    detail: &#123; <span class=\"attr\">getprice</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> count.value &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'priceChange'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> price = e.detail.getprice() || <span class=\"number\">0</span></span><br><span class=\"line\">    total1.innerHTML=<span class=\"number\">5</span> * price</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">el.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> val = e.target.value</span><br><span class=\"line\">  e.target.dispatchEvent(eventAwesome)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>vue<br>vuereactvue  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ontriggeroff</p>\n<ol>\n<li>,</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Event1</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// typecall</span></span><br><span class=\"line\">    on(type,call)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events[type]</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"comment\">// push</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        funs.push(call)</span><br><span class=\"line\">      &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.type=[]</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.type.push(call)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>trigger</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    trigger(type)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events.type,</span><br><span class=\"line\">        [first,...other] = <span class=\"built_in\">Array</span>.from(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>,</span><br><span class=\"line\">            j = funs.length;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> cb = funs[i];</span><br><span class=\"line\">          cb.apply(<span class=\"keyword\">this</span>, other);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    off(type,func)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> funs = <span class=\"keyword\">this</span>._events.type</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(funs)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>,</span><br><span class=\"line\">          j = funs.length;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> cb = funs[i];</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (cb === func) &#123;</span><br><span class=\"line\">            funs.splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><br>html</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  event1Event</span></span><br><span class=\"line\"> <span class=\"keyword\">const</span> event1 = <span class=\"keyword\">new</span> Event1()    </span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//  priceChange </span></span><br><span class=\"line\"> event1.on(<span class=\"string\">'priceChange'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// </span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> price = count.value || <span class=\"number\">0</span></span><br><span class=\"line\">     total1.innerHTML = <span class=\"number\">5</span> * price</span><br><span class=\"line\">   &#125;)  </span><br><span class=\"line\"> el.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> val = e.target.value</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   event1.trigger(<span class=\"string\">'priceChange'</span>)</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure>\n<p>vue</p>\n<h3 id=\"vue\"><a href=\"#vue\" class=\"headerlink\" title=\"vue\"></a>vue</h3><p>vue  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/8/25/165718027cb03c89?w=800&h=500&f=png&s=64811\"><br><br>Object.defineProperty()<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = &#123;</span><br><span class=\"line\">   b:<span class=\"string\">'1'</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(a,<span class=\"string\">'b'</span>,&#123;</span><br><span class=\"line\">        get()&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'get&gt;&gt;&gt;'</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        set(newVal)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'set&gt;&gt;&gt;11'</span>,<span class=\"string\">''</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">a.b <span class=\"comment\">//'get&gt;&gt;&gt;1'</span></span><br><span class=\"line\">a.b = <span class=\"number\">11</span>    <span class=\"comment\">//set&gt;&gt;&gt;11 </span></span><br></pre></td></tr></table></figure>\n<p>get/setlog<br>getset<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    price: <span class=\"number\">5</span>,</span><br><span class=\"line\">    count: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">callb = <span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n<p>,<br>type<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Events</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    on() &#123;</span><br><span class=\"line\">      <span class=\"comment\">//tyep</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (callb &amp;&amp; !<span class=\"keyword\">this</span>._events.includes(callb)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.push(callb)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    triger() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events.forEach(<span class=\"function\">(<span class=\"params\">callb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        callb &amp;&amp; callb()</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>vueData</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> initVlue = data[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> e1 = <span class=\"keyword\">new</span> Events()</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">         <span class=\"comment\">//</span></span><br><span class=\"line\">        e1.on()</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        callb = <span class=\"literal\">null</span></span><br><span class=\"line\">        <span class=\"comment\">// get</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> initVlue</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      set(newVal) &#123;</span><br><span class=\"line\">        initVlue = newVal</span><br><span class=\"line\">        <span class=\"comment\">// set</span></span><br><span class=\"line\">        e1.triger()</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p>callbacknullwatcher</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">watcher</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// callbackget</span></span><br><span class=\"line\">    callb = func</span><br><span class=\"line\">    <span class=\"comment\">// get</span></span><br><span class=\"line\">    callb()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  watcher(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    data.total = data.price * data.count</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<p><br>dom<br>console   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    price: <span class=\"number\">5</span>,</span><br><span class=\"line\">    count: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Events</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events = []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    on() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (callb &amp;&amp; !<span class=\"keyword\">this</span>._events.includes(callb)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>._events.push(callb)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    triger() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>._events.forEach(<span class=\"function\">(<span class=\"params\">callb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        callb &amp;&amp; callb()</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> initVlue = data[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> e1 = <span class=\"keyword\">new</span> Events()</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">         <span class=\"comment\">//</span></span><br><span class=\"line\">        e1.on()</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        callb = <span class=\"literal\">null</span></span><br><span class=\"line\">        <span class=\"comment\">// get</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> initVlue</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      set(newVal) &#123;</span><br><span class=\"line\">        initVlue = newVal</span><br><span class=\"line\">        <span class=\"comment\">// set</span></span><br><span class=\"line\">        e1.triger()</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">watcher</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// callbackget</span></span><br><span class=\"line\">    callb = func</span><br><span class=\"line\">    <span class=\"comment\">// get</span></span><br><span class=\"line\">    callb()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    callb = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  watcher(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    data.total = data.price * data.count</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://medium.com/vue-mastery/the-best-explanation-of-javascript-reactivity-fea6112dd80d\" target=\"_blank\" rel=\"noopener\">vue</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\" target=\"_blank\" rel=\"noopener\">Creating and triggering events</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a><br><a href=\"http://xxdy.tech/event/index.html\">demo</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog/blob/master/source/event/index.html\" target=\"_blank\" rel=\"noopener\"></a></p>"},{"title":"","date":"2017-09-13T16:00:00.000Z","_content":"[](http://www.cnblogs.com/pqjwyn/)[](https://juejin.im/user/584e46a2ac502e006c749486)()PWAjsgitpages\n<!-- more -->\n## [](http://www.cnblogs.com/pqjwyn/p/) \n","source":"_posts/index.md","raw":"---\ntitle: \ndate: 2017-09-14\n---\n[](http://www.cnblogs.com/pqjwyn/)[](https://juejin.im/user/584e46a2ac502e006c749486)()PWAjsgitpages\n<!-- more -->\n## [](http://www.cnblogs.com/pqjwyn/p/) \n","slug":"index","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1n000mgw92jf6l4l0z","content":"<p><a href=\"http://www.cnblogs.com/pqjwyn/\" target=\"_blank\" rel=\"noopener\"></a><a href=\"https://juejin.im/user/584e46a2ac502e006c749486\" target=\"_blank\" rel=\"noopener\"></a>()PWAjsgitpages<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://www.cnblogs.com/pqjwyn/p/\" target=\"_blank\" rel=\"noopener\"></a></h2>","site":{"data":{}},"excerpt":"<p><a href=\"http://www.cnblogs.com/pqjwyn/\" target=\"_blank\" rel=\"noopener\"></a><a href=\"https://juejin.im/user/584e46a2ac502e006c749486\" target=\"_blank\" rel=\"noopener\"></a>()PWAjsgitpages<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://www.cnblogs.com/pqjwyn/p/\" target=\"_blank\" rel=\"noopener\"></a></h2>"},{"title":"f5","date":"2018-11-17T16:00:00.000Z","_content":"## \nhttp  \n  \n  \n  \nf5 \n<!-- more -->\n## \n\n  \nCache-ControlExpiresETagIf-MatchIf-None-MatchLast-Modified  \n  \n \n\n### \n\n, , .  \nChrome 200 OK (from disk cache)  200 OK (from memory cache).\n\n###  \n\n304  \n\n, ,  \n, :\n\n* ETag_value, request headerIf-None-Match.  \n, If-None-MatchETag, \n, , 304.\n* Last-Modified_value, request headerIf-Modified-Since. , If-Modified-SinceLast-Modified, , , 304.\n\nETaghttp/1.1Last-Modified  \n  \nLast-Modified\n  \n=>=>  \n  \ncommand+rshift+command+r[http://xxdy.tech/](http://xxdy.tech/) \n\n### ()\n\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047c0ba4bc?w=2792&h=804&f=jpeg&s=257017'/>\n200304\n\n1. maxage=0 \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e0479ca2b8c?w=2436&h=1417&f=jpeg&s=314035'/>\n\n\n\n\n\n2. status200from memory cache disk cache  200  \n\ncss\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047750f409?w=2322&h=754&f=jpeg&s=172566'/>\n\njsmemory\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047b391817?w=2240&h=528&f=jpeg&s=126209'/>\n\n  \nCache-Control:max-age=600 \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e04799f47b4?w=1640&h=788&f=jpeg&s=182548'/>\n\n\n()\n\n* (from memory cache)\n      \n    \n    \n* (from disk cache)I/O  \n\n    \njs  \n(from memory cache)  \ncss(from disk cache)\n\n3.     \n\nstatus304\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047ca6b703?w=2052&h=1064&f=jpeg&s=225389'/>\n\n \n  \nCache-Control: max-age=0   \netag  \n\n\n\n#### \n\n  \n### f5(mac command + r)\nf5\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384'/>  \n\n\n\n#### \nf5  \nf5soft refresh reload page  \n\n\n### (command+shift+r)\n\n,304from cacheload \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384'/>   \n\n  \nrequest\nCache-Control: no-cache  \n  \nrequestresponseETagIf-None-Match  \n    \n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e96a0246?w=2118&h=984&f=jpeg&s=195526'/>\n\n#### \n\nhard refresh  \nCache-Control:no-cachecache-control  \n    \nheaderIf-None-Match    \n\n#### tip\n,image\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05fdde9b86?w=1854&h=1086&f=jpeg&s=241473'/>\n\n\n  \n### \n\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e060babe54f?w=846&h=370&f=jpeg&s=40828'/>\n\n\n   \n### \n  \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e07244920a8?w=791&h=443&f=png&s=24777'/>\n\n\n###   \n[](https://github.com/xiaoxiangdaiyu/blog)  \n   \n[https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button](https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button)  \n[https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate](https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate)\n\n\n\n","source":"_posts/f5.md","raw":"---\ntitle: f5\ndate: 2018-11-18\n---\n## \nhttp  \n  \n  \n  \nf5 \n<!-- more -->\n## \n\n  \nCache-ControlExpiresETagIf-MatchIf-None-MatchLast-Modified  \n  \n \n\n### \n\n, , .  \nChrome 200 OK (from disk cache)  200 OK (from memory cache).\n\n###  \n\n304  \n\n, ,  \n, :\n\n* ETag_value, request headerIf-None-Match.  \n, If-None-MatchETag, \n, , 304.\n* Last-Modified_value, request headerIf-Modified-Since. , If-Modified-SinceLast-Modified, , , 304.\n\nETaghttp/1.1Last-Modified  \n  \nLast-Modified\n  \n=>=>  \n  \ncommand+rshift+command+r[http://xxdy.tech/](http://xxdy.tech/) \n\n### ()\n\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047c0ba4bc?w=2792&h=804&f=jpeg&s=257017'/>\n200304\n\n1. maxage=0 \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e0479ca2b8c?w=2436&h=1417&f=jpeg&s=314035'/>\n\n\n\n\n\n2. status200from memory cache disk cache  200  \n\ncss\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047750f409?w=2322&h=754&f=jpeg&s=172566'/>\n\njsmemory\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047b391817?w=2240&h=528&f=jpeg&s=126209'/>\n\n  \nCache-Control:max-age=600 \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e04799f47b4?w=1640&h=788&f=jpeg&s=182548'/>\n\n\n()\n\n* (from memory cache)\n      \n    \n    \n* (from disk cache)I/O  \n\n    \njs  \n(from memory cache)  \ncss(from disk cache)\n\n3.     \n\nstatus304\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e047ca6b703?w=2052&h=1064&f=jpeg&s=225389'/>\n\n \n  \nCache-Control: max-age=0   \netag  \n\n\n\n#### \n\n  \n### f5(mac command + r)\nf5\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384'/>  \n\n\n\n#### \nf5  \nf5soft refresh reload page  \n\n\n### (command+shift+r)\n\n,304from cacheload \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384'/>   \n\n  \nrequest\nCache-Control: no-cache  \n  \nrequestresponseETagIf-None-Match  \n    \n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05e96a0246?w=2118&h=984&f=jpeg&s=195526'/>\n\n#### \n\nhard refresh  \nCache-Control:no-cachecache-control  \n    \nheaderIf-None-Match    \n\n#### tip\n,image\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e05fdde9b86?w=1854&h=1086&f=jpeg&s=241473'/>\n\n\n  \n### \n\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e060babe54f?w=846&h=370&f=jpeg&s=40828'/>\n\n\n   \n### \n  \n<img src='https://user-gold-cdn.xitu.io/2018/11/27/16753e07244920a8?w=791&h=443&f=png&s=24777'/>\n\n\n###   \n[](https://github.com/xiaoxiangdaiyu/blog)  \n   \n[https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button](https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button)  \n[https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate](https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate)\n\n\n\n","slug":"f5","published":1,"updated":"2018-11-30T03:20:07.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1o000ngw92v7x5eimx","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>http<br><br><br><br>f5<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>Cache-ControlExpiresETagIf-MatchIf-None-MatchLast-Modified<br><br> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>, , .<br>Chrome 200 OK (from disk cache)  200 OK (from memory cache).</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>304  </p>\n<p>, ,<br>, :</p>\n<ul>\n<li>ETag_value, request headerIf-None-Match.<br>, If-None-MatchETag,<br>, , 304.</li>\n<li>Last-Modified_value, request headerIf-Modified-Since. , If-Modified-SinceLast-Modified, , , 304.</li>\n</ul>\n<p>ETaghttp/1.1Last-Modified<br><br>Last-Modified</p>\n<p>=&gt;=&gt;<br><br>command+rshift+command+r<a href=\"http://xxdy.tech/\">http://xxdy.tech/</a> </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047c0ba4bc?w=2792&h=804&f=jpeg&s=257017\"><br>200304</p>\n<ol>\n<li>maxage=0<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e0479ca2b8c?w=2436&h=1417&f=jpeg&s=314035\"></li>\n</ol>\n<p></p>\n<ol start=\"2\">\n<li>status200from memory cache disk cache  200  </li>\n</ol>\n<p>css</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047750f409?w=2322&h=754&f=jpeg&s=172566\"></p>\n<p>jsmemory<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047b391817?w=2240&h=528&f=jpeg&s=126209\"></p>\n<p><br>Cache-Control:max-age=600 <br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e04799f47b4?w=1640&h=788&f=jpeg&s=182548\"></p>\n<p><br>()</p>\n<ul>\n<li><p>(from memory cache)<br>  <br>  </p>\n</li>\n<li><p>(from disk cache)I/O  </p>\n</li>\n</ul>\n<p>js<br>(from memory cache)<br>css(from disk cache)</p>\n<ol start=\"3\">\n<li>    </li>\n</ol>\n<p>status304<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047ca6b703?w=2052&h=1064&f=jpeg&s=225389\"></p>\n<p>Cache-Control: max-age=0 <br>etag  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h3 id=\"f5-mac-command-r\"><a href=\"#f5-mac-command-r\" class=\"headerlink\" title=\"f5(mac command + r)\"></a>f5(mac command + r)</h3><p>f5<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384\">  </p>\n<p></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>f5<br>f5soft refresh reload page<br></p>\n<h3 id=\"-command-shift-r\"><a href=\"#-command-shift-r\" class=\"headerlink\" title=\"(command+shift+r)\"></a>(command+shift+r)</h3><p>,304from cacheload<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384\">   </p>\n<p><br>request<br>Cache-Control: no-cache<br><br>requestresponseETagIf-None-Match<br>    </p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e96a0246?w=2118&h=984&f=jpeg&s=195526\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hard refresh<br>Cache-Control:no-cachecache-control<br><br>headerIf-None-Match    </p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>,image<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05fdde9b86?w=1854&h=1086&f=jpeg&s=241473\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e060babe54f?w=846&h=370&f=jpeg&s=40828\"></p>\n<p>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e07244920a8?w=791&h=443&f=png&s=24777\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a><br><br><a href=\"https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button</a><br><a href=\"https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>http<br><br><br><br>f5<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>Cache-ControlExpiresETagIf-MatchIf-None-MatchLast-Modified<br><br> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>, , .<br>Chrome 200 OK (from disk cache)  200 OK (from memory cache).</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>304  </p>\n<p>, ,<br>, :</p>\n<ul>\n<li>ETag_value, request headerIf-None-Match.<br>, If-None-MatchETag,<br>, , 304.</li>\n<li>Last-Modified_value, request headerIf-Modified-Since. , If-Modified-SinceLast-Modified, , , 304.</li>\n</ul>\n<p>ETaghttp/1.1Last-Modified<br><br>Last-Modified</p>\n<p>=&gt;=&gt;<br><br>command+rshift+command+r<a href=\"http://xxdy.tech/\">http://xxdy.tech/</a> </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047c0ba4bc?w=2792&h=804&f=jpeg&s=257017\"><br>200304</p>\n<ol>\n<li>maxage=0<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e0479ca2b8c?w=2436&h=1417&f=jpeg&s=314035\"></li>\n</ol>\n<p></p>\n<ol start=\"2\">\n<li>status200from memory cache disk cache  200  </li>\n</ol>\n<p>css</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047750f409?w=2322&h=754&f=jpeg&s=172566\"></p>\n<p>jsmemory<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047b391817?w=2240&h=528&f=jpeg&s=126209\"></p>\n<p><br>Cache-Control:max-age=600 <br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e04799f47b4?w=1640&h=788&f=jpeg&s=182548\"></p>\n<p><br>()</p>\n<ul>\n<li><p>(from memory cache)<br>  <br>  </p>\n</li>\n<li><p>(from disk cache)I/O  </p>\n</li>\n</ul>\n<p>js<br>(from memory cache)<br>css(from disk cache)</p>\n<ol start=\"3\">\n<li>    </li>\n</ol>\n<p>status304<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e047ca6b703?w=2052&h=1064&f=jpeg&s=225389\"></p>\n<p>Cache-Control: max-age=0 <br>etag  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h3 id=\"f5-mac-command-r\"><a href=\"#f5-mac-command-r\" class=\"headerlink\" title=\"f5(mac command + r)\"></a>f5(mac command + r)</h3><p>f5<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384\">  </p>\n<p></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>f5<br>f5soft refresh reload page<br></p>\n<h3 id=\"-command-shift-r\"><a href=\"#-command-shift-r\" class=\"headerlink\" title=\"(command+shift+r)\"></a>(command+shift+r)</h3><p>,304from cacheload<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e17eef09?w=2872&h=922&f=jpeg&s=312384\">   </p>\n<p><br>request<br>Cache-Control: no-cache<br><br>requestresponseETagIf-None-Match<br>    </p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05e96a0246?w=2118&h=984&f=jpeg&s=195526\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hard refresh<br>Cache-Control:no-cachecache-control<br><br>headerIf-None-Match    </p>\n<h4 id=\"tip\"><a href=\"#tip\" class=\"headerlink\" title=\"tip\"></a>tip</h4><p>,image<br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e05fdde9b86?w=1854&h=1086&f=jpeg&s=241473\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e060babe54f?w=846&h=370&f=jpeg&s=40828\"></p>\n<p>   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/27/16753e07244920a8?w=791&h=443&f=png&s=24777\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a><br><br><a href=\"https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/8589760/difference-between-f5-ctrl-f5-and-click-or-refresh-button</a><br><a href=\"https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate</a></p>"},{"title":"DOMContentLoadedreadystatechangeloadready","date":"2017-12-16T16:00:00.000Z","_content":"loade,unload,DOMContentLoadedDOMContentLoaded  \n<!-- more -->\n## \n([MDN](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded))  \n### DOMContentLoaded   \nhtmlframeloadDOMContentLoadedload\ntips:  DOM readyzepto\n### load\n\n### readystatechange\ndocumentreadyStatedocumentloadingreadyStatereadystatechange.  \n\n* loading  \n\n      \n* interactive  \n\n\n  frame  \n* complete    \n\n  \n  load  \n\ndom  \n readyState \n### beforeunload\nbeforeunload.  \nEventreturnValue\ntip:2011525html5window.alert(), window.confirm(), and window.prompt()\n### unload\nbeforeunload pagehide  \n  \n\n*  (, iframe .)\n* \n*  (window.open, alert, confirm .)\n*   \n\n\n##   \n  \n  \n  \n1. \n2. documentcss\n\n   readyState'interactive'documentload readystatechangeDOMContentLoaded()defer  \n      \n3.  cssimg  \n\n    window.load  \n4.  beforeunloadunload  \n\n  \n\n```html\n<!DOCTYPE html>\n<html>\n\n<head>\n    <title></title>\n    <script>\n            document.addEventListener(\"DOMContentLoaded\", function (event) {\n                console.log(\"DOM \");\n            });\n            window.addEventListener(\"load\", function (event) {\n                console.log(\"window \");\n            });\n    \n            document.onreadystatechange = function () {\n                console.log(document.readyState)\n                if (document.readyState === \"complete\") {\n                    console.log('DOM,')\n                }\n            }\n            window.addEventListener(\"beforeunload\", function (event) {\n                console.log('')\n                event.returnValue = \"\\o/\";\n            });\n            window.addEventListener('unload', function (event) {\n                console.log('1');\n            });\n        </script>\n    <link rel=\"stylesheet\" href=\"./test.css\">\n</head>\n\n<body>\n    <div id=\"root\">dom</div>\n    <script src=\"./index.js\"></script>\n</body>\n\n</html>\n```  \n   \n:  \n    \n```js\n    interactive //(index):15\n    DOM  //(index):8\n    complet//(index):15 \n    DOM,//(index):17 \n    window //(index):11 \n    //\n    \n    2  \n```    \n### ready  \njqueryzeptodocumentreadydomdomapi  \n  \n  \n1. readydom\n\n   completeinteractive DOMContentLoadeddomload \n2.   \n\n   \nzepto   \n \n```js \n//interactive\nreadyRE = /complete|loaded|interactive/\n\nready: function(callback){\n      // need to check if document.body exists for IE as that browser reports\n      // document ready when it hasn't yet created the body element\n      if (readyRE.test(document.readyState) && document.body) callback($)\n      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\n      return this\n    } \n```  \n\n    \n\n\n\n\n\n","source":"_posts/domevent.md","raw":"---\ntitle: DOMContentLoadedreadystatechangeloadready\ndate: 2017-12-17\n---\nloade,unload,DOMContentLoadedDOMContentLoaded  \n<!-- more -->\n## \n([MDN](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded))  \n### DOMContentLoaded   \nhtmlframeloadDOMContentLoadedload\ntips:  DOM readyzepto\n### load\n\n### readystatechange\ndocumentreadyStatedocumentloadingreadyStatereadystatechange.  \n\n* loading  \n\n      \n* interactive  \n\n\n  frame  \n* complete    \n\n  \n  load  \n\ndom  \n readyState \n### beforeunload\nbeforeunload.  \nEventreturnValue\ntip:2011525html5window.alert(), window.confirm(), and window.prompt()\n### unload\nbeforeunload pagehide  \n  \n\n*  (, iframe .)\n* \n*  (window.open, alert, confirm .)\n*   \n\n\n##   \n  \n  \n  \n1. \n2. documentcss\n\n   readyState'interactive'documentload readystatechangeDOMContentLoaded()defer  \n      \n3.  cssimg  \n\n    window.load  \n4.  beforeunloadunload  \n\n  \n\n```html\n<!DOCTYPE html>\n<html>\n\n<head>\n    <title></title>\n    <script>\n            document.addEventListener(\"DOMContentLoaded\", function (event) {\n                console.log(\"DOM \");\n            });\n            window.addEventListener(\"load\", function (event) {\n                console.log(\"window \");\n            });\n    \n            document.onreadystatechange = function () {\n                console.log(document.readyState)\n                if (document.readyState === \"complete\") {\n                    console.log('DOM,')\n                }\n            }\n            window.addEventListener(\"beforeunload\", function (event) {\n                console.log('')\n                event.returnValue = \"\\o/\";\n            });\n            window.addEventListener('unload', function (event) {\n                console.log('1');\n            });\n        </script>\n    <link rel=\"stylesheet\" href=\"./test.css\">\n</head>\n\n<body>\n    <div id=\"root\">dom</div>\n    <script src=\"./index.js\"></script>\n</body>\n\n</html>\n```  \n   \n:  \n    \n```js\n    interactive //(index):15\n    DOM  //(index):8\n    complet//(index):15 \n    DOM,//(index):17 \n    window //(index):11 \n    //\n    \n    2  \n```    \n### ready  \njqueryzeptodocumentreadydomdomapi  \n  \n  \n1. readydom\n\n   completeinteractive DOMContentLoadeddomload \n2.   \n\n   \nzepto   \n \n```js \n//interactive\nreadyRE = /complete|loaded|interactive/\n\nready: function(callback){\n      // need to check if document.body exists for IE as that browser reports\n      // document ready when it hasn't yet created the body element\n      if (readyRE.test(document.readyState) && document.body) callback($)\n      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\n      return this\n    } \n```  \n\n    \n\n\n\n\n\n","slug":"domevent","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1p000ogw92qowl7tcq","content":"<p>loade,unload,DOMContentLoadedDOMContentLoaded<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(<a href=\"https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded\" target=\"_blank\" rel=\"noopener\">MDN</a>)  </p>\n<h3 id=\"DOMContentLoaded\"><a href=\"#DOMContentLoaded\" class=\"headerlink\" title=\"DOMContentLoaded\"></a>DOMContentLoaded</h3><p>htmlframeloadDOMContentLoadedload<br>tips:  DOM readyzepto</p>\n<h3 id=\"load\"><a href=\"#load\" class=\"headerlink\" title=\"load\"></a>load</h3><p></p>\n<h3 id=\"readystatechange\"><a href=\"#readystatechange\" class=\"headerlink\" title=\"readystatechange\"></a>readystatechange</h3><p>documentreadyStatedocumentloadingreadyStatereadystatechange.  </p>\n<ul>\n<li><p>loading  </p>\n<p>    </p>\n</li>\n<li>interactive  </li>\n</ul>\n<p>  frame  </p>\n<ul>\n<li>complete    </li>\n</ul>\n<p>  load  </p>\n<p>dom<br> readyState </p>\n<h3 id=\"beforeunload\"><a href=\"#beforeunload\" class=\"headerlink\" title=\"beforeunload\"></a>beforeunload</h3><p>beforeunload.<br>EventreturnValue<br>tip:2011525html5window.alert(), window.confirm(), and window.prompt()</p>\n<h3 id=\"unload\"><a href=\"#unload\" class=\"headerlink\" title=\"unload\"></a>unload</h3><p>beforeunload pagehide<br>  </p>\n<ul>\n<li> (, iframe .)</li>\n<li></li>\n<li> (window.open, alert, confirm .)</li>\n<li>  </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ol>\n<li></li>\n<li><p>documentcss</p>\n<p>readyStateinteractivedocumentload readystatechangeDOMContentLoaded()defer  </p>\n</li>\n<li><p>cssimg  </p>\n<p>window.load  </p>\n</li>\n<li>beforeunloadunload  </li>\n</ol>\n<p>  </p>\n<pre><code class=\"html\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span>\n\n<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span>\n<span class=\"javascript\">            <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">\"DOMContentLoaded\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">\"DOM \"</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"load\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">\"window \"</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"undefined\"></span>\n<span class=\"javascript\">            <span class=\"built_in\">document</span>.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.readyState)</span>\n<span class=\"javascript\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.readyState === <span class=\"string\">\"complete\"</span>) {</span>\n<span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(<span class=\"string\">'DOM,'</span>)</span>\n<span class=\"undefined\">                }</span>\n<span class=\"undefined\">            }</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"beforeunload\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span>\n<span class=\"javascript\">                event.returnValue = <span class=\"string\">\"\\o/\"</span>;</span>\n<span class=\"undefined\">            });</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'unload'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./test.css\"</span>&gt;</span>\n<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span>\n\n<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span>dom<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./index.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>\n<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span>\n\n<span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>\n</code></pre>\n<p>:  </p>\n<pre><code class=\"js\">interactive <span class=\"comment\">//(index):15</span>\nDOM  <span class=\"comment\">//(index):8</span>\ncomplet<span class=\"comment\">//(index):15 </span>\nDOM,<span class=\"comment\">//(index):17 </span>\n<span class=\"built_in\">window</span> <span class=\"comment\">//(index):11 </span>\n<span class=\"comment\">//</span>\n\n<span class=\"number\">2</span>  \n</code></pre>\n<h3 id=\"ready\"><a href=\"#ready\" class=\"headerlink\" title=\"ready\"></a>ready</h3><p>jqueryzeptodocumentreadydomdomapi<br>  </p>\n<ol>\n<li><p>readydom</p>\n<p>completeinteractive DOMContentLoadeddomload </p>\n</li>\n<li>  </li>\n</ol>\n<p>zepto   </p>\n<pre><code class=\"js\"><span class=\"comment\">//interactive</span>\nreadyRE = <span class=\"regexp\">/complete|loaded|interactive/</span>\n\nready: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">callback</span>)</span>{\n      <span class=\"comment\">// need to check if document.body exists for IE as that browser reports</span>\n      <span class=\"comment\">// document ready when it hasn't yet created the body element</span>\n      <span class=\"keyword\">if</span> (readyRE.test(<span class=\"built_in\">document</span>.readyState) &amp;&amp; <span class=\"built_in\">document</span>.body) callback($)\n      <span class=\"keyword\">else</span> <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>{ callback($) }, <span class=\"literal\">false</span>)\n      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>\n    } \n</code></pre>\n<p>    </p>\n","site":{"data":{}},"excerpt":"<p>loade,unload,DOMContentLoadedDOMContentLoaded<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(<a href=\"https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded\" target=\"_blank\" rel=\"noopener\">MDN</a>)  </p>\n<h3 id=\"DOMContentLoaded\"><a href=\"#DOMContentLoaded\" class=\"headerlink\" title=\"DOMContentLoaded\"></a>DOMContentLoaded</h3><p>htmlframeloadDOMContentLoadedload<br>tips:  DOM readyzepto</p>\n<h3 id=\"load\"><a href=\"#load\" class=\"headerlink\" title=\"load\"></a>load</h3><p></p>\n<h3 id=\"readystatechange\"><a href=\"#readystatechange\" class=\"headerlink\" title=\"readystatechange\"></a>readystatechange</h3><p>documentreadyStatedocumentloadingreadyStatereadystatechange.  </p>\n<ul>\n<li><p>loading  </p>\n<p>    </p>\n</li>\n<li>interactive  </li>\n</ul>\n<p>  frame  </p>\n<ul>\n<li>complete    </li>\n</ul>\n<p>  load  </p>\n<p>dom<br> readyState </p>\n<h3 id=\"beforeunload\"><a href=\"#beforeunload\" class=\"headerlink\" title=\"beforeunload\"></a>beforeunload</h3><p>beforeunload.<br>EventreturnValue<br>tip:2011525html5window.alert(), window.confirm(), and window.prompt()</p>\n<h3 id=\"unload\"><a href=\"#unload\" class=\"headerlink\" title=\"unload\"></a>unload</h3><p>beforeunload pagehide<br>  </p>\n<ul>\n<li> (, iframe .)</li>\n<li></li>\n<li> (window.open, alert, confirm .)</li>\n<li>  </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ol>\n<li></li>\n<li><p>documentcss</p>\n<p>readyStateinteractivedocumentload readystatechangeDOMContentLoaded()defer  </p>\n</li>\n<li><p>cssimg  </p>\n<p>window.load  </p>\n</li>\n<li>beforeunloadunload  </li>\n</ol>\n<p>  </p>\n<pre><code class=\"html\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span>\n\n<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span>\n<span class=\"javascript\">            <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">\"DOMContentLoaded\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">\"DOM \"</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"load\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">\"window \"</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"undefined\"></span>\n<span class=\"javascript\">            <span class=\"built_in\">document</span>.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.readyState)</span>\n<span class=\"javascript\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.readyState === <span class=\"string\">\"complete\"</span>) {</span>\n<span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(<span class=\"string\">'DOM,'</span>)</span>\n<span class=\"undefined\">                }</span>\n<span class=\"undefined\">            }</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"beforeunload\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span>\n<span class=\"javascript\">                event.returnValue = <span class=\"string\">\"\\o/\"</span>;</span>\n<span class=\"undefined\">            });</span>\n<span class=\"javascript\">            <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'unload'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{</span>\n<span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</span>\n<span class=\"undefined\">            });</span>\n<span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./test.css\"</span>&gt;</span>\n<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span>\n\n<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span>dom<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>\n    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./index.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>\n<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span>\n\n<span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>\n</code></pre>\n<p>:  </p>\n<pre><code class=\"js\">interactive <span class=\"comment\">//(index):15</span>\nDOM  <span class=\"comment\">//(index):8</span>\ncomplet<span class=\"comment\">//(index):15 </span>\nDOM,<span class=\"comment\">//(index):17 </span>\n<span class=\"built_in\">window</span> <span class=\"comment\">//(index):11 </span>\n<span class=\"comment\">//</span>\n\n<span class=\"number\">2</span>  \n</code></pre>\n<h3 id=\"ready\"><a href=\"#ready\" class=\"headerlink\" title=\"ready\"></a>ready</h3><p>jqueryzeptodocumentreadydomdomapi<br>  </p>\n<ol>\n<li><p>readydom</p>\n<p>completeinteractive DOMContentLoadeddomload </p>\n</li>\n<li>  </li>\n</ol>\n<p>zepto   </p>\n<pre><code class=\"js\"><span class=\"comment\">//interactive</span>\nreadyRE = <span class=\"regexp\">/complete|loaded|interactive/</span>\n\nready: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">callback</span>)</span>{\n      <span class=\"comment\">// need to check if document.body exists for IE as that browser reports</span>\n      <span class=\"comment\">// document ready when it hasn't yet created the body element</span>\n      <span class=\"keyword\">if</span> (readyRE.test(<span class=\"built_in\">document</span>.readyState) &amp;&amp; <span class=\"built_in\">document</span>.body) callback($)\n      <span class=\"keyword\">else</span> <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>{ callback($) }, <span class=\"literal\">false</span>)\n      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>\n    } \n</code></pre>\n<p>    </p>"},{"title":"provisional headers are shown  ","date":"2018-11-30T00:00:29.000Z","_content":"\n##  \nprovisional headers are shown()   \n  \n  \n[](https://juejin.im/post/5bfcd79e6fb9a04a08215cf3),  \n\n<!-- more -->\n## \n\nhttpheader  \nfrom disk cachefrom memory cacheheader\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251cabb19a3f?w=2826&h=1670&f=jpeg&s=411272'/>\n\n  \n\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251ca86991f9?w=1910&h=1374&f=jpeg&s=410863'/>\nprovisional headers are shown  \nblock  \n  \n## \n\n[()](https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger)  \n\n  \n\n*The resource could be being blocked by an extension (AdBlock in my case).\nThe message is there because the request to retrieve that resource was never made, so the headers being shown are not the real thing. As explained in the issue you referenced, the real headers are updated when the server responds, but there is no response if the request was blocked.*\n \n   \n\n  \n  \n*I believe it happens when the actual request is not sent. Usually happens when you are loading a cached resource.*\n\n\n\n  \nheaders  \nheader  \n   \n\n\n###   \n\nhtml  \nCORS   \nblock  \n\n\n\n###    \n\n \n \n###   \n\nchrome  \n chrome://net-internals \n  \nhttp://xxdy.tech/css/main.css?v=5.1.4\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251ca84e838b?w=2546&h=1068&f=jpeg&s=250219' />\nblocktimeoutDISK_CACHE  \n  \n\n### \n\n  \n[](https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/)  \n  \n\n\n\n####   \n\n\n\n####  \n\nprovisional headers are shown  \n\n1. \n2. \n3. \n4. from disk cachefrom memory cache \n\n## \n  \nprovisional headers are shown   \n\n###   \n[https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger](https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger)  \n[https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/](https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/)   \n[http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/](http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/)\n\n\n","source":"_posts/header.md","raw":"---\ntitle: provisional headers are shown  \ndate: 2018-11-30 08:00:29\ntags:\n---\n\n##  \nprovisional headers are shown()   \n  \n  \n[](https://juejin.im/post/5bfcd79e6fb9a04a08215cf3),  \n\n<!-- more -->\n## \n\nhttpheader  \nfrom disk cachefrom memory cacheheader\n\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251cabb19a3f?w=2826&h=1670&f=jpeg&s=411272'/>\n\n  \n\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251ca86991f9?w=1910&h=1374&f=jpeg&s=410863'/>\nprovisional headers are shown  \nblock  \n  \n## \n\n[()](https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger)  \n\n  \n\n*The resource could be being blocked by an extension (AdBlock in my case).\nThe message is there because the request to retrieve that resource was never made, so the headers being shown are not the real thing. As explained in the issue you referenced, the real headers are updated when the server responds, but there is no response if the request was blocked.*\n \n   \n\n  \n  \n*I believe it happens when the actual request is not sent. Usually happens when you are loading a cached resource.*\n\n\n\n  \nheaders  \nheader  \n   \n\n\n###   \n\nhtml  \nCORS   \nblock  \n\n\n\n###    \n\n \n \n###   \n\nchrome  \n chrome://net-internals \n  \nhttp://xxdy.tech/css/main.css?v=5.1.4\n<img src='https://user-gold-cdn.xitu.io/2018/11/30/1676251ca84e838b?w=2546&h=1068&f=jpeg&s=250219' />\nblocktimeoutDISK_CACHE  \n  \n\n### \n\n  \n[](https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/)  \n  \n\n\n\n####   \n\n\n\n####  \n\nprovisional headers are shown  \n\n1. \n2. \n3. \n4. from disk cachefrom memory cache \n\n## \n  \nprovisional headers are shown   \n\n###   \n[https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger](https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger)  \n[https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/](https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/)   \n[http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/](http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/)\n\n\n","slug":"header","published":1,"updated":"2018-11-30T03:20:02.474Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1q000qgw925url9mpg","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>provisional headers are shown() <br><br><br><a href=\"https://juejin.im/post/5bfcd79e6fb9a04a08215cf3\" target=\"_blank\" rel=\"noopener\"></a>,<br><br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>httpheader<br>from disk cachefrom memory cacheheader</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251cabb19a3f?w=2826&h=1670&f=jpeg&s=411272\"></p>\n<p><br><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251ca86991f9?w=1910&h=1374&f=jpeg&s=410863\"><br>provisional headers are shown<br>block  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger\" target=\"_blank\" rel=\"noopener\">()</a>  </p>\n<p>  </p>\n<p><em>The resource could be being blocked by an extension (AdBlock in my case).<br>The message is there because the request to retrieve that resource was never made, so the headers being shown are not the real thing. As explained in the issue you referenced, the real headers are updated when the server responds, but there is no response if the request was blocked.</em></p>\n<p>   </p>\n<p>  </p>\n<p><em>I believe it happens when the actual request is not sent. Usually happens when you are loading a cached resource.</em></p>\n<p></p>\n<p><br>headers<br>header<br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>html<br>CORS<br>block<br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>chrome<br> chrome://net-internals <br><br><a href=\"http://xxdy.tech/css/main.css?v=5.1.4\">http://xxdy.tech/css/main.css?v=5.1.4</a><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251ca84e838b?w=2546&h=1068&f=jpeg&s=250219\"><br>blocktimeoutDISK_CACHE<br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><a href=\"https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/\" target=\"_blank\" rel=\"noopener\"></a><br><br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>provisional headers are shown  </p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li>from disk cachefrom memory cache </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>provisional headers are shown   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger</a><br><a href=\"https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/\" target=\"_blank\" rel=\"noopener\">https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/</a><br><a href=\"http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/\" target=\"_blank\" rel=\"noopener\">http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>provisional headers are shown() <br><br><br><a href=\"https://juejin.im/post/5bfcd79e6fb9a04a08215cf3\" target=\"_blank\" rel=\"noopener\"></a>,<br><br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>httpheader<br>from disk cachefrom memory cacheheader</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251cabb19a3f?w=2826&h=1670&f=jpeg&s=411272\"></p>\n<p><br><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251ca86991f9?w=1910&h=1374&f=jpeg&s=410863\"><br>provisional headers are shown<br>block  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger\" target=\"_blank\" rel=\"noopener\">()</a>  </p>\n<p>  </p>\n<p><em>The resource could be being blocked by an extension (AdBlock in my case).<br>The message is there because the request to retrieve that resource was never made, so the headers being shown are not the real thing. As explained in the issue you referenced, the real headers are updated when the server responds, but there is no response if the request was blocked.</em></p>\n<p>   </p>\n<p>  </p>\n<p><em>I believe it happens when the actual request is not sent. Usually happens when you are loading a cached resource.</em></p>\n<p></p>\n<p><br>headers<br>header<br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>html<br>CORS<br>block<br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>chrome<br> chrome://net-internals <br><br><a href=\"http://xxdy.tech/css/main.css?v=5.1.4\">http://xxdy.tech/css/main.css?v=5.1.4</a><br><img src=\"https://user-gold-cdn.xitu.io/2018/11/30/1676251ca84e838b?w=2546&h=1068&f=jpeg&s=250219\"><br>blocktimeoutDISK_CACHE<br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><a href=\"https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/\" target=\"_blank\" rel=\"noopener\"></a><br><br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>provisional headers are shown  </p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li>from disk cachefrom memory cache </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>provisional headers are shown   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger</a><br><a href=\"https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/\" target=\"_blank\" rel=\"noopener\">https://did2memo.net/2017/01/23/chrome-devtools-provisional-headers-are-shown/</a><br><a href=\"http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/\" target=\"_blank\" rel=\"noopener\">http://www.techfolks.net/provisional-headers-are-shown-in-google-chrome-browser-debugger/</a></p>"},{"title":"if elseswitch","date":"2019-01-09T16:00:00.000Z","_content":"\n## \n  \nif-elseifif\n<!-- more -->\n## if-else\n  \n,\n\n\n```js\nif (a == 1) {\n    console.log('a1')\n} else if (a == 2) {\n    console.log('b2')\n} else if (a == 3) {\n    console.log('c3')\n} else if (a == 4) {\n    console.log('d4')\n}\n/* n..... */\n```\n  \n\n\n## switch-case\n,\n\n```js\nswitch(a){\n    case 1:\n        console.log('a1');\n        break;\n    /*  */  \n    case 40:\n        console.log('a40');\n        break;\n}\n```\n## \n\n### object\nobject\n\n```js\nconst statusMap = {\n    1:()=>{\n        console.log('a1')\n    },\n    2:()=>{\n        console.log('b2')\n    }\n    /* n.... */\n}\n// \nlet a = 1 \nstatusMap[a || 1]()\n```\n\n\n\n### \n\n  \n\n```js\n// func\n// function\nconst statusArr = [function(){\n    console.log(1)\n},\n    function () {\n        console.log(2)\n    },]\n// \nlet a = 1\nstatusArr[a || 1]()\n```\nkey\n\n## keyvalue\n\n  \n\n1-39a40b\n\n```js\nfunction f1 (){\n    console.log(1)\n}\nfunction f2 (){\n    console.log(2)\n}\nconst statusMap={\n    1:f1,\n    2:f1,\n    3:f1,\n    4:f1,\n    //\n    40:f2\n}\nlet a = 2\nstatusMap[a]()\n```\n\nf1\n\nkeyvalue  \nobject\nkey'1,2,3,4,..,9'\n\n  \n  \n\n```js\n// key\nconst statusMap = {\n    '1,2,3,4,5': f1,\n    //\n    40: f2\n}\n// \nconst keys = Object.keys(statusMap),\n    len = keys.length\n//  \nconst getVal=(param='')=>{\n    // for\n    for (let i = 0; i < len; i++) {\n        const key = keys[i],\n            val = statusMap[key]\n        //     \n        if (key.includes(param)) {\n            return val\n        }\n    }\n}\nlet a = 2,\n    handle = getVal(a)\nhandle() // 1\n```\n\n\n\n### map\n\nes6MapMap\n\n```js\n/**\n * map\n * \n * map1.set([1,4,5],'')\n * map1.get([1,4,5])  //undefined\n * \n * map1.get([1,2,3,4,5]) //undefined\n */\nconst map1 = new Map()\nconst statusArr = [1,2,3,4,5]\nmap1.set(statusArr,f1)\n// \nlet handle = function(){}\nconst getVal = (param = '') => {\nfor (let value of map1.entries()) {\n    console.log(JSON.stringify(value))\n    if (value[0].includes(param)){\n        console.log(value)\n        //  \n        handle = value[1]\n    }\n}\n}\nconst a = 2\ngetVal(a)\nhandle()\n```\n\n  \n\n### \n\n   \n\n```js\n// value \nconst keyArr = ['1,2,3,4,5','40']\nconst valArr = [f1,f2]\nconst getVal = (param = '')=>{\n    // \n    let index = keyArr.findIndex((it)=>{\n        return it.includes(param)\n    })\n    // \n    return valArr[index]\n}\nlet a = 2,\n    handle = getVal(a)\nhandle()\n```\nkeyvalue  \n\n\n##   \n\nkeyvalueloadsh\n\n\n\n","source":"_posts/ifelse.md","raw":"---\ntitle: if elseswitch\ndate: 2019-01-10\n---\n\n## \n  \nif-elseifif\n<!-- more -->\n## if-else\n  \n,\n\n\n```js\nif (a == 1) {\n    console.log('a1')\n} else if (a == 2) {\n    console.log('b2')\n} else if (a == 3) {\n    console.log('c3')\n} else if (a == 4) {\n    console.log('d4')\n}\n/* n..... */\n```\n  \n\n\n## switch-case\n,\n\n```js\nswitch(a){\n    case 1:\n        console.log('a1');\n        break;\n    /*  */  \n    case 40:\n        console.log('a40');\n        break;\n}\n```\n## \n\n### object\nobject\n\n```js\nconst statusMap = {\n    1:()=>{\n        console.log('a1')\n    },\n    2:()=>{\n        console.log('b2')\n    }\n    /* n.... */\n}\n// \nlet a = 1 \nstatusMap[a || 1]()\n```\n\n\n\n### \n\n  \n\n```js\n// func\n// function\nconst statusArr = [function(){\n    console.log(1)\n},\n    function () {\n        console.log(2)\n    },]\n// \nlet a = 1\nstatusArr[a || 1]()\n```\nkey\n\n## keyvalue\n\n  \n\n1-39a40b\n\n```js\nfunction f1 (){\n    console.log(1)\n}\nfunction f2 (){\n    console.log(2)\n}\nconst statusMap={\n    1:f1,\n    2:f1,\n    3:f1,\n    4:f1,\n    //\n    40:f2\n}\nlet a = 2\nstatusMap[a]()\n```\n\nf1\n\nkeyvalue  \nobject\nkey'1,2,3,4,..,9'\n\n  \n  \n\n```js\n// key\nconst statusMap = {\n    '1,2,3,4,5': f1,\n    //\n    40: f2\n}\n// \nconst keys = Object.keys(statusMap),\n    len = keys.length\n//  \nconst getVal=(param='')=>{\n    // for\n    for (let i = 0; i < len; i++) {\n        const key = keys[i],\n            val = statusMap[key]\n        //     \n        if (key.includes(param)) {\n            return val\n        }\n    }\n}\nlet a = 2,\n    handle = getVal(a)\nhandle() // 1\n```\n\n\n\n### map\n\nes6MapMap\n\n```js\n/**\n * map\n * \n * map1.set([1,4,5],'')\n * map1.get([1,4,5])  //undefined\n * \n * map1.get([1,2,3,4,5]) //undefined\n */\nconst map1 = new Map()\nconst statusArr = [1,2,3,4,5]\nmap1.set(statusArr,f1)\n// \nlet handle = function(){}\nconst getVal = (param = '') => {\nfor (let value of map1.entries()) {\n    console.log(JSON.stringify(value))\n    if (value[0].includes(param)){\n        console.log(value)\n        //  \n        handle = value[1]\n    }\n}\n}\nconst a = 2\ngetVal(a)\nhandle()\n```\n\n  \n\n### \n\n   \n\n```js\n// value \nconst keyArr = ['1,2,3,4,5','40']\nconst valArr = [f1,f2]\nconst getVal = (param = '')=>{\n    // \n    let index = keyArr.findIndex((it)=>{\n        return it.includes(param)\n    })\n    // \n    return valArr[index]\n}\nlet a = 2,\n    handle = getVal(a)\nhandle()\n```\nkeyvalue  \n\n\n##   \n\nkeyvalueloadsh\n\n\n\n","slug":"ifelse","published":1,"updated":"2019-01-10T03:21:29.867Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1r000rgw920qzw487d","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>if-elseifif<br><a id=\"more\"></a></p>\n<h2 id=\"if-else\"><a href=\"#if-else\" class=\"headerlink\" title=\"if-else\"></a>if-else</h2><p>,<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (a == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'b2'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'c3'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'d4'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* n..... */</span></span><br></pre></td></tr></table></figure>\n<p><br><br></p>\n<h2 id=\"switch-case\"><a href=\"#switch-case\" class=\"headerlink\" title=\"switch-case\"></a>switch-case</h2><p>,</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">switch</span>(a)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span>  </span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">40</span>:</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a40'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"object\"><a href=\"#object\" class=\"headerlink\" title=\"object\"></a>object</h3><p>object</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> statusMap = &#123;</span><br><span class=\"line\">    <span class=\"number\">1</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"number\">2</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'b2'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/* n.... */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span> </span><br><span class=\"line\">statusMap[a || <span class=\"number\">1</span>]()</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// func</span></span><br><span class=\"line\"><span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statusArr = [<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">    &#125;,]</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span></span><br><span class=\"line\">statusArr[a || <span class=\"number\">1</span>]()</span><br></pre></td></tr></table></figure>\n<p>key</p>\n<h2 id=\"keyvalue\"><a href=\"#keyvalue\" class=\"headerlink\" title=\"keyvalue\"></a>keyvalue</h2><p><br><br>1-39a40b</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f2</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> statusMap=&#123;</span><br><span class=\"line\">    <span class=\"number\">1</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">2</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">3</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">4</span>:f1,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"number\">40</span>:f2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span></span><br><span class=\"line\">statusMap[a]()</span><br></pre></td></tr></table></figure>\n<p>f1</p>\n<p>keyvalue<br>object<br>key1,2,3,4,..,9</p>\n<p><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statusMap = &#123;</span><br><span class=\"line\">    <span class=\"string\">'1,2,3,4,5'</span>: f1,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"number\">40</span>: f2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> keys = <span class=\"built_in\">Object</span>.keys(statusMap),</span><br><span class=\"line\">    len = keys.length</span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal=<span class=\"function\">(<span class=\"params\">param=<span class=\"string\">''</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// for</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> key = keys[i],</span><br><span class=\"line\">            val = statusMap[key]</span><br><span class=\"line\">        <span class=\"comment\">//     </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.includes(param)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> val</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span>,</span><br><span class=\"line\">    handle = getVal(a)</span><br><span class=\"line\">handle() <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>es6MapMap</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * map</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * map1.set([1,4,5],'')</span></span><br><span class=\"line\"><span class=\"comment\"> * map1.get([1,4,5])  //undefined</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * map1.get([1,2,3,4,5]) //undefined</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> map1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> statusArr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]</span><br><span class=\"line\">map1.set(statusArr,f1)</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> handle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal = <span class=\"function\">(<span class=\"params\">param = <span class=\"string\">''</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> value <span class=\"keyword\">of</span> map1.entries()) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(value))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value[<span class=\"number\">0</span>].includes(param))&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(value)</span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">        handle = value[<span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"number\">2</span></span><br><span class=\"line\">getVal(a)</span><br><span class=\"line\">handle()</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// value </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> keyArr = [<span class=\"string\">'1,2,3,4,5'</span>,<span class=\"string\">'40'</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> valArr = [f1,f2]</span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal = <span class=\"function\">(<span class=\"params\">param = <span class=\"string\">''</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> index = keyArr.findIndex(<span class=\"function\">(<span class=\"params\">it</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> it.includes(param)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> valArr[index]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span>,</span><br><span class=\"line\">    handle = getVal(a)</span><br><span class=\"line\">handle()</span><br></pre></td></tr></table></figure>\n<p>keyvalue<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>keyvalueloadsh</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>if-elseifif<br>","more":"</p>\n<h2 id=\"if-else\"><a href=\"#if-else\" class=\"headerlink\" title=\"if-else\"></a>if-else</h2><p>,<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (a == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'b2'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'c3'</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (a == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'d4'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* n..... */</span></span><br></pre></td></tr></table></figure>\n<p><br><br></p>\n<h2 id=\"switch-case\"><a href=\"#switch-case\" class=\"headerlink\" title=\"switch-case\"></a>switch-case</h2><p>,</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">switch</span>(a)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span>  </span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">40</span>:</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a40'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"object\"><a href=\"#object\" class=\"headerlink\" title=\"object\"></a>object</h3><p>object</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> statusMap = &#123;</span><br><span class=\"line\">    <span class=\"number\">1</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'a1'</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"number\">2</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'b2'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/* n.... */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span> </span><br><span class=\"line\">statusMap[a || <span class=\"number\">1</span>]()</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// func</span></span><br><span class=\"line\"><span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statusArr = [<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">    &#125;,]</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span></span><br><span class=\"line\">statusArr[a || <span class=\"number\">1</span>]()</span><br></pre></td></tr></table></figure>\n<p>key</p>\n<h2 id=\"keyvalue\"><a href=\"#keyvalue\" class=\"headerlink\" title=\"keyvalue\"></a>keyvalue</h2><p><br><br>1-39a40b</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f2</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> statusMap=&#123;</span><br><span class=\"line\">    <span class=\"number\">1</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">2</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">3</span>:f1,</span><br><span class=\"line\">    <span class=\"number\">4</span>:f1,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"number\">40</span>:f2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span></span><br><span class=\"line\">statusMap[a]()</span><br></pre></td></tr></table></figure>\n<p>f1</p>\n<p>keyvalue<br>object<br>key1,2,3,4,..,9</p>\n<p><br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statusMap = &#123;</span><br><span class=\"line\">    <span class=\"string\">'1,2,3,4,5'</span>: f1,</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"number\">40</span>: f2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> keys = <span class=\"built_in\">Object</span>.keys(statusMap),</span><br><span class=\"line\">    len = keys.length</span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal=<span class=\"function\">(<span class=\"params\">param=<span class=\"string\">''</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// for</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> key = keys[i],</span><br><span class=\"line\">            val = statusMap[key]</span><br><span class=\"line\">        <span class=\"comment\">//     </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.includes(param)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> val</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span>,</span><br><span class=\"line\">    handle = getVal(a)</span><br><span class=\"line\">handle() <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>es6MapMap</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * map</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * map1.set([1,4,5],'')</span></span><br><span class=\"line\"><span class=\"comment\"> * map1.get([1,4,5])  //undefined</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * map1.get([1,2,3,4,5]) //undefined</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> map1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> statusArr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]</span><br><span class=\"line\">map1.set(statusArr,f1)</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> handle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal = <span class=\"function\">(<span class=\"params\">param = <span class=\"string\">''</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> value <span class=\"keyword\">of</span> map1.entries()) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(value))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value[<span class=\"number\">0</span>].includes(param))&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(value)</span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">        handle = value[<span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"number\">2</span></span><br><span class=\"line\">getVal(a)</span><br><span class=\"line\">handle()</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// value </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> keyArr = [<span class=\"string\">'1,2,3,4,5'</span>,<span class=\"string\">'40'</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> valArr = [f1,f2]</span><br><span class=\"line\"><span class=\"keyword\">const</span> getVal = <span class=\"function\">(<span class=\"params\">param = <span class=\"string\">''</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> index = keyArr.findIndex(<span class=\"function\">(<span class=\"params\">it</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> it.includes(param)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> valArr[index]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">2</span>,</span><br><span class=\"line\">    handle = getVal(a)</span><br><span class=\"line\">handle()</span><br></pre></td></tr></table></figure>\n<p>keyvalue<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>keyvalueloadsh</p>"},{"title":"js","date":"2018-05-23T00:00:29.000Z","_content":"##   \njs 2 =='2', 1+2 == 1+'2'falsejs   \n  <!--more  -->\n## js  \nJavaScript JavaScript     \n,stringarray:\n\n```js\nvar a = '1';   \ntypeof a;//string \n\na =parseInt(a); //number\ntypeof a  //number   \n\na == '1' //true\n```\n\n  \n## js   \n   \n \n1.     \n   Undefined Null String Number Boolean      \n2.   \n   object   \nes6Symbol   \n  \n| 0 | Number |\n| --: | --: |\n| '' | String |\n| false | Boolean |\n| null | Null |\n| undefined | Undefined |\n\n   \n##   \n[es5](http://yanhaijing.com/es5/#about)  \n   \n*   \n*   \n*     \n\n\n### ToPrimitive()   \n\nToPrimitive   ToPrimitive     \n<img src='http://xxdy.tech/img/jstype/1.png'> \n\n   \n   \nobjecttype  \nToPrimitive  \n\n```js\n/**\n* @obj \n* @type \n*/\nToPrimitive(obj,type)\n```\n\ntypenumberstring   \n**string:**   \n   \n1. objtoString   \n2. objvalueOf\n3. TypeError \n \n**number:**    \n\n1. objvalueOf   \n2. objtoString\n3. TypeError     \n\nstringtoString   \ntypetype    \n\n1.  DatetypeString  \n2.  typeNumber \n\nDatenumber\n  \n\nToPrimitivetypetypeDatestringnumbertype  \n\n### toNumber \n\nToNumbernumber \n\n<img src='http://xxdy.tech/img/jstype/2.png'>    \n\nstringNumber(str)  \nToPrimitivetypenumbertoStringstring\n\n### toString   \n\nToString   \n  \n<img src='http://xxdy.tech/img/jstype/3.png'> \n\n\n  \n  \n* Undefinednullboolean \n  'null' \n* number ,  \n   '1'   NaN'NaN'  \n  -+  '-2'     \n*    \n\n### valueOf  \n\n valueOf \n\n1. ToObjectO\n2.   \n3. (O)valueOf.\n\n\nvalueOf\n* String => \n* Number =>   \n* Date => ,\n* Boolean => Booleanthis\n* Object => this  \n\n    \n\n```js\nvar str = new String('123')\n//123\nconsole.log(str.valueOf())\nvar num = new Number(123)\n//123\nconsole.log(num.valueOf())\nvar date = new Date()\n//1526990889729\nconsole.log(date.valueOf())\nvar bool = new Boolean('123')\n//true\nconsole.log(bool.valueOf())\nvar obj = new Object({valueOf:()=>{\n    return 1\n}})\n//\nconsole.log(obj.valueOf())\n\n```\n\n\n##   \n   \n+  \n\n* +ToPrimitive()\n* StringToString\n* ToNumber\n* ToPrimitiveDatestringToPrimitive typeNumber\n   \n \n```js\n1+'2'+false\n```\n\n1. Number\n2. StringtoString  \n3. toString'1'\n4. temp'12'\n5. temp1\n6. tempstringstring'false'\n7.   '12false'\n\n\n\n```js\nvar obj1 = {\n    valueOf:function(){\n        return 1\n    }\n}\nvar obj2 = {\n    toString:function(){\n        return 'a'\n    }\n}\n//2\nconsole.log(1+obj1)\n//1a\nconsole.log('1'+ obj2)\n//1a\nconsole.log(obj1+obj2)\n```\n\n\n  \n\n* 1+obj1      \n  1. number\n  2. objtypenumber\n  3. valueOf() 1\n  4. number2  \n* 1+obj2  \n  1. number \n  2. typenumber\n  3. obj2.valueOf()\n  4. toString() return 'a'\n  5. stringstring\n  6. 1a\n* obj1+obj2  \n  1.  ToPrimitive typenumber\n  2. obj1.valueOf()1 \n  3. obj2.valueOf()\n  4. toString() return 'a'\n  5. stringstring\n  6. 1a \n\n+  \n\n### == \n\n\n* \n* \n,[](http://yanhaijing.com/es5/#104)+stringnumbernumber  \nx == y\n\n1. x,ynumber\n\n   ```js\n    \n    1 == 2 //false\n    ```\n\n2. ToPrimitive() typenumber\n\n    ```js\n    var obj1 = {\n        valueOf:function(){\n            return '1'\n        }\n    }\n    1 == obj2  //true\n    //obj1obj1.valueOf()\n    //'1'\n    //'1'toNumber 1  1 == 1\n    [] == ![] //true\n    //[]ToPrimitive ''  \n    //![]boolean0 \n    //'' == 0 \n    // 0==0 //true\n    ```\n\n3. booleanToNumberboolean10   \n     \n   ```js\n   //boolean number1  \n   //3 == 1 false\n   //0 == 0 true\n   3 == true // false\n   '0' == false //true \n   ```\n\n4. xstringynumberxnumber\n    \n    ```js\n    //'0' toNumber() 0  \n    //0 == 0 true\n    '0' == 0 //true \n    ```\n\n##    \n\n####   \n[ECMAScript5.1 + ECMAScript3 + ECMAScript](http://yanhaijing.com/es5/#101)  \n[js](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651227769&idx=1&sn=617160e64d2be13169b1b8f4506d8801&chksm=bd495ffd8a3ed6eb226d4ef193ff2ce3958d2d03d1f3047b635915f8215af40996c2f64d5c20&scene=21#wechat_redirect)  \n[](https://github.com/xiaoxiangdaiyu/blog)js\n\n\n","source":"_posts/jstype.md","raw":"---\ntitle: js\ndate: 2018-05-23 08:00:29\ntags:\n---\n##   \njs 2 =='2', 1+2 == 1+'2'falsejs   \n  <!--more  -->\n## js  \nJavaScript JavaScript     \n,stringarray:\n\n```js\nvar a = '1';   \ntypeof a;//string \n\na =parseInt(a); //number\ntypeof a  //number   \n\na == '1' //true\n```\n\n  \n## js   \n   \n \n1.     \n   Undefined Null String Number Boolean      \n2.   \n   object   \nes6Symbol   \n  \n| 0 | Number |\n| --: | --: |\n| '' | String |\n| false | Boolean |\n| null | Null |\n| undefined | Undefined |\n\n   \n##   \n[es5](http://yanhaijing.com/es5/#about)  \n   \n*   \n*   \n*     \n\n\n### ToPrimitive()   \n\nToPrimitive   ToPrimitive     \n<img src='http://xxdy.tech/img/jstype/1.png'> \n\n   \n   \nobjecttype  \nToPrimitive  \n\n```js\n/**\n* @obj \n* @type \n*/\nToPrimitive(obj,type)\n```\n\ntypenumberstring   \n**string:**   \n   \n1. objtoString   \n2. objvalueOf\n3. TypeError \n \n**number:**    \n\n1. objvalueOf   \n2. objtoString\n3. TypeError     \n\nstringtoString   \ntypetype    \n\n1.  DatetypeString  \n2.  typeNumber \n\nDatenumber\n  \n\nToPrimitivetypetypeDatestringnumbertype  \n\n### toNumber \n\nToNumbernumber \n\n<img src='http://xxdy.tech/img/jstype/2.png'>    \n\nstringNumber(str)  \nToPrimitivetypenumbertoStringstring\n\n### toString   \n\nToString   \n  \n<img src='http://xxdy.tech/img/jstype/3.png'> \n\n\n  \n  \n* Undefinednullboolean \n  'null' \n* number ,  \n   '1'   NaN'NaN'  \n  -+  '-2'     \n*    \n\n### valueOf  \n\n valueOf \n\n1. ToObjectO\n2.   \n3. (O)valueOf.\n\n\nvalueOf\n* String => \n* Number =>   \n* Date => ,\n* Boolean => Booleanthis\n* Object => this  \n\n    \n\n```js\nvar str = new String('123')\n//123\nconsole.log(str.valueOf())\nvar num = new Number(123)\n//123\nconsole.log(num.valueOf())\nvar date = new Date()\n//1526990889729\nconsole.log(date.valueOf())\nvar bool = new Boolean('123')\n//true\nconsole.log(bool.valueOf())\nvar obj = new Object({valueOf:()=>{\n    return 1\n}})\n//\nconsole.log(obj.valueOf())\n\n```\n\n\n##   \n   \n+  \n\n* +ToPrimitive()\n* StringToString\n* ToNumber\n* ToPrimitiveDatestringToPrimitive typeNumber\n   \n \n```js\n1+'2'+false\n```\n\n1. Number\n2. StringtoString  \n3. toString'1'\n4. temp'12'\n5. temp1\n6. tempstringstring'false'\n7.   '12false'\n\n\n\n```js\nvar obj1 = {\n    valueOf:function(){\n        return 1\n    }\n}\nvar obj2 = {\n    toString:function(){\n        return 'a'\n    }\n}\n//2\nconsole.log(1+obj1)\n//1a\nconsole.log('1'+ obj2)\n//1a\nconsole.log(obj1+obj2)\n```\n\n\n  \n\n* 1+obj1      \n  1. number\n  2. objtypenumber\n  3. valueOf() 1\n  4. number2  \n* 1+obj2  \n  1. number \n  2. typenumber\n  3. obj2.valueOf()\n  4. toString() return 'a'\n  5. stringstring\n  6. 1a\n* obj1+obj2  \n  1.  ToPrimitive typenumber\n  2. obj1.valueOf()1 \n  3. obj2.valueOf()\n  4. toString() return 'a'\n  5. stringstring\n  6. 1a \n\n+  \n\n### == \n\n\n* \n* \n,[](http://yanhaijing.com/es5/#104)+stringnumbernumber  \nx == y\n\n1. x,ynumber\n\n   ```js\n    \n    1 == 2 //false\n    ```\n\n2. ToPrimitive() typenumber\n\n    ```js\n    var obj1 = {\n        valueOf:function(){\n            return '1'\n        }\n    }\n    1 == obj2  //true\n    //obj1obj1.valueOf()\n    //'1'\n    //'1'toNumber 1  1 == 1\n    [] == ![] //true\n    //[]ToPrimitive ''  \n    //![]boolean0 \n    //'' == 0 \n    // 0==0 //true\n    ```\n\n3. booleanToNumberboolean10   \n     \n   ```js\n   //boolean number1  \n   //3 == 1 false\n   //0 == 0 true\n   3 == true // false\n   '0' == false //true \n   ```\n\n4. xstringynumberxnumber\n    \n    ```js\n    //'0' toNumber() 0  \n    //0 == 0 true\n    '0' == 0 //true \n    ```\n\n##    \n\n####   \n[ECMAScript5.1 + ECMAScript3 + ECMAScript](http://yanhaijing.com/es5/#101)  \n[js](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651227769&idx=1&sn=617160e64d2be13169b1b8f4506d8801&chksm=bd495ffd8a3ed6eb226d4ef193ff2ce3958d2d03d1f3047b635915f8215af40996c2f64d5c20&scene=21#wechat_redirect)  \n[](https://github.com/xiaoxiangdaiyu/blog)js\n\n\n","slug":"jstype","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1s000sgw92ukx5s0lc","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>js 2 ==2, 1+2 == 1+2falsejs<br>  <a id=\"more\"></a></p>\n<h2 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h2><p>JavaScript JavaScript <br>,stringarray:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'1'</span>;   </span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a;<span class=\"comment\">//string </span></span><br><span class=\"line\"></span><br><span class=\"line\">a =<span class=\"built_in\">parseInt</span>(a); <span class=\"comment\">//number</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a  <span class=\"comment\">//number   </span></span><br><span class=\"line\"></span><br><span class=\"line\">a == <span class=\"string\">'1'</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h2 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h2><p>   </p>\n<ol>\n<li><br>Undefined Null String Number Boolean      </li>\n<li><br>object<br>es6Symbol   </li>\n</ol>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">0</th>\n<th style=\"text-align:right\">Number</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\"></td>\n<td style=\"text-align:right\">String</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">false</td>\n<td style=\"text-align:right\">Boolean</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">null</td>\n<td style=\"text-align:right\">Null</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">undefined</td>\n<td style=\"text-align:right\">Undefined</td>\n</tr>\n</tbody>\n</table>\n<p>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://yanhaijing.com/es5/#about\" target=\"_blank\" rel=\"noopener\">es5</a>  </p>\n<ul>\n<li>  </li>\n<li>  </li>\n<li>    </li>\n</ul>\n<h3 id=\"ToPrimitive-\"><a href=\"#ToPrimitive-\" class=\"headerlink\" title=\"ToPrimitive()\"></a>ToPrimitive()</h3><p>ToPrimitive   ToPrimitive   <br><img src=\"http://xxdy.tech/img/jstype/1.png\"> </p>\n<p><br><br>objecttype<br>ToPrimitive  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* @obj </span></span><br><span class=\"line\"><span class=\"comment\">* @type </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">ToPrimitive(obj,type)</span><br></pre></td></tr></table></figure>\n<p>typenumberstring<br><strong>string:</strong>   </p>\n<ol>\n<li>objtoString   </li>\n<li>objvalueOf</li>\n<li>TypeError </li>\n</ol>\n<p><strong>number:</strong>    </p>\n<ol>\n<li>objvalueOf   </li>\n<li>objtoString</li>\n<li>TypeError     </li>\n</ol>\n<p>stringtoString<br>typetype    </p>\n<ol>\n<li>DatetypeString  </li>\n<li>typeNumber </li>\n</ol>\n<p>Datenumber<br>  </p>\n<p>ToPrimitivetypetypeDatestringnumbertype  </p>\n<h3 id=\"toNumber\"><a href=\"#toNumber\" class=\"headerlink\" title=\"toNumber\"></a>toNumber</h3><p>ToNumbernumber<br><br><img src=\"http://xxdy.tech/img/jstype/2.png\">    </p>\n<p>stringNumber(str)<br>ToPrimitivetypenumbertoStringstring</p>\n<h3 id=\"toString-NaN\"><a href=\"#toString-NaN\" class=\"headerlink\" title=\"toString\"></a>toString</h3><p>ToString <br><br><img src=\"http://xxdy.tech/img/jstype/3.png\"> </p>\n<p><br>  </p>\n<ul>\n<li>Undefinednullboolean<br>null </li>\n<li>number ,<br> 1   NaNNaN  <br>-+  -2     </li>\n<li>   </li>\n</ul>\n<h3 id=\"valueOf-NaN\"><a href=\"#valueOf-NaN\" class=\"headerlink\" title=\"valueOf\"></a>valueOf</h3><p> valueOf </p>\n<ol>\n<li>ToObjectO</li>\n<li>  </li>\n<li>(O)valueOf.</li>\n</ol>\n<p>valueOf</p>\n<ul>\n<li>String =&gt; </li>\n<li>Number =&gt;   </li>\n<li>Date =&gt; ,</li>\n<li>Boolean =&gt; Booleanthis</li>\n<li>Object =&gt; this  </li>\n</ul>\n<p>    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'123'</span>)</span><br><span class=\"line\"><span class=\"comment\">//123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">123</span>)</span><br><span class=\"line\"><span class=\"comment\">//123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"><span class=\"comment\">//1526990889729</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(date.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> bool = <span class=\"keyword\">new</span> <span class=\"built_in\">Boolean</span>(<span class=\"string\">'123'</span>)</span><br><span class=\"line\"><span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bool.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>(&#123;<span class=\"attr\">valueOf</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">&#125;&#125;)</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.valueOf())</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>+  </p>\n<ul>\n<li>+ToPrimitive()</li>\n<li>StringToString</li>\n<li>ToNumber</li>\n<li>ToPrimitiveDatestringToPrimitive typeNumber<br>   </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>+<span class=\"string\">'2'</span>+<span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>Number</li>\n<li>StringtoString  </li>\n<li>toString1</li>\n<li>temp12</li>\n<li>temp1</li>\n<li>tempstringstringfalse</li>\n<li>  12false</li>\n</ol>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    valueOf:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    toString:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'a'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>+obj1)</span><br><span class=\"line\"><span class=\"comment\">//1a</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>+ obj2)</span><br><span class=\"line\"><span class=\"comment\">//1a</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj1+obj2)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li>1+obj1      <ol>\n<li>number</li>\n<li>objtypenumber</li>\n<li>valueOf() 1</li>\n<li>number2  </li>\n</ol>\n</li>\n<li>1+obj2  <ol>\n<li>number </li>\n<li>typenumber</li>\n<li>obj2.valueOf()</li>\n<li>toString() return a</li>\n<li>stringstring</li>\n<li>1a</li>\n</ol>\n</li>\n<li>obj1+obj2  <ol>\n<li> ToPrimitive typenumber</li>\n<li>obj1.valueOf()1 </li>\n<li>obj2.valueOf()</li>\n<li>toString() return a</li>\n<li>stringstring</li>\n<li>1a </li>\n</ol>\n</li>\n</ul>\n<p>+  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"== \"></a>== </h3><p></p>\n<ul>\n<li></li>\n<li><br>,<a href=\"http://yanhaijing.com/es5/#104\" target=\"_blank\" rel=\"noopener\"></a>+stringnumbernumber<br>x == y</li>\n</ul>\n<ol>\n<li><p>x,ynumber</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span> == <span class=\"number\">2</span> <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ToPrimitive() typenumber</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    valueOf:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'1'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> == obj2  <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//obj1obj1.valueOf()</span></span><br><span class=\"line\"><span class=\"comment\">//'1'</span></span><br><span class=\"line\"><span class=\"comment\">//'1'toNumber 1  1 == 1</span></span><br><span class=\"line\">[] == ![] <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//[]ToPrimitive ''  </span></span><br><span class=\"line\"><span class=\"comment\">//![]boolean0 </span></span><br><span class=\"line\"><span class=\"comment\">//'' == 0 </span></span><br><span class=\"line\"><span class=\"comment\">// 0==0 //true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>booleanToNumberboolean10   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//boolean number1  </span></span><br><span class=\"line\"><span class=\"comment\">//3 == 1 false</span></span><br><span class=\"line\"><span class=\"comment\">//0 == 0 true</span></span><br><span class=\"line\"><span class=\"number\">3</span> == <span class=\"literal\">true</span> <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"string\">'0'</span> == <span class=\"literal\">false</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>xstringynumberxnumber</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//'0' toNumber() 0  </span></span><br><span class=\"line\"><span class=\"comment\">//0 == 0 true</span></span><br><span class=\"line\"><span class=\"string\">'0'</span> == <span class=\"number\">0</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://yanhaijing.com/es5/#101\" target=\"_blank\" rel=\"noopener\">ECMAScript5.1 + ECMAScript3 + ECMAScript</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&amp;mid=2651227769&amp;idx=1&amp;sn=617160e64d2be13169b1b8f4506d8801&amp;chksm=bd495ffd8a3ed6eb226d4ef193ff2ce3958d2d03d1f3047b635915f8215af40996c2f64d5c20&amp;scene=21#wechat_redirect\" target=\"_blank\" rel=\"noopener\">js</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a>js</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>js 2 ==2, 1+2 == 1+2falsejs<br>","more":"</p>\n<h2 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h2><p>JavaScript JavaScript <br>,stringarray:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'1'</span>;   </span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a;<span class=\"comment\">//string </span></span><br><span class=\"line\"></span><br><span class=\"line\">a =<span class=\"built_in\">parseInt</span>(a); <span class=\"comment\">//number</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a  <span class=\"comment\">//number   </span></span><br><span class=\"line\"></span><br><span class=\"line\">a == <span class=\"string\">'1'</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h2 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h2><p>   </p>\n<ol>\n<li><br>Undefined Null String Number Boolean      </li>\n<li><br>object<br>es6Symbol   </li>\n</ol>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">0</th>\n<th style=\"text-align:right\">Number</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\"></td>\n<td style=\"text-align:right\">String</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">false</td>\n<td style=\"text-align:right\">Boolean</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">null</td>\n<td style=\"text-align:right\">Null</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">undefined</td>\n<td style=\"text-align:right\">Undefined</td>\n</tr>\n</tbody>\n</table>\n<p>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://yanhaijing.com/es5/#about\" target=\"_blank\" rel=\"noopener\">es5</a>  </p>\n<ul>\n<li>  </li>\n<li>  </li>\n<li>    </li>\n</ul>\n<h3 id=\"ToPrimitive-\"><a href=\"#ToPrimitive-\" class=\"headerlink\" title=\"ToPrimitive()\"></a>ToPrimitive()</h3><p>ToPrimitive   ToPrimitive   <br><img src=\"http://xxdy.tech/img/jstype/1.png\"> </p>\n<p><br><br>objecttype<br>ToPrimitive  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* @obj </span></span><br><span class=\"line\"><span class=\"comment\">* @type </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">ToPrimitive(obj,type)</span><br></pre></td></tr></table></figure>\n<p>typenumberstring<br><strong>string:</strong>   </p>\n<ol>\n<li>objtoString   </li>\n<li>objvalueOf</li>\n<li>TypeError </li>\n</ol>\n<p><strong>number:</strong>    </p>\n<ol>\n<li>objvalueOf   </li>\n<li>objtoString</li>\n<li>TypeError     </li>\n</ol>\n<p>stringtoString<br>typetype    </p>\n<ol>\n<li>DatetypeString  </li>\n<li>typeNumber </li>\n</ol>\n<p>Datenumber<br>  </p>\n<p>ToPrimitivetypetypeDatestringnumbertype  </p>\n<h3 id=\"toNumber\"><a href=\"#toNumber\" class=\"headerlink\" title=\"toNumber\"></a>toNumber</h3><p>ToNumbernumber<br><br><img src=\"http://xxdy.tech/img/jstype/2.png\">    </p>\n<p>stringNumber(str)<br>ToPrimitivetypenumbertoStringstring</p>\n<h3 id=\"toString-NaN\"><a href=\"#toString-NaN\" class=\"headerlink\" title=\"toString\"></a>toString</h3><p>ToString <br><br><img src=\"http://xxdy.tech/img/jstype/3.png\"> </p>\n<p><br>  </p>\n<ul>\n<li>Undefinednullboolean<br>null </li>\n<li>number ,<br> 1   NaNNaN  <br>-+  -2     </li>\n<li>   </li>\n</ul>\n<h3 id=\"valueOf-NaN\"><a href=\"#valueOf-NaN\" class=\"headerlink\" title=\"valueOf\"></a>valueOf</h3><p> valueOf </p>\n<ol>\n<li>ToObjectO</li>\n<li>  </li>\n<li>(O)valueOf.</li>\n</ol>\n<p>valueOf</p>\n<ul>\n<li>String =&gt; </li>\n<li>Number =&gt;   </li>\n<li>Date =&gt; ,</li>\n<li>Boolean =&gt; Booleanthis</li>\n<li>Object =&gt; this  </li>\n</ul>\n<p>    </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'123'</span>)</span><br><span class=\"line\"><span class=\"comment\">//123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">123</span>)</span><br><span class=\"line\"><span class=\"comment\">//123</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"><span class=\"comment\">//1526990889729</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(date.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> bool = <span class=\"keyword\">new</span> <span class=\"built_in\">Boolean</span>(<span class=\"string\">'123'</span>)</span><br><span class=\"line\"><span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(bool.valueOf())</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>(&#123;<span class=\"attr\">valueOf</span>:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">&#125;&#125;)</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.valueOf())</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>+  </p>\n<ul>\n<li>+ToPrimitive()</li>\n<li>StringToString</li>\n<li>ToNumber</li>\n<li>ToPrimitiveDatestringToPrimitive typeNumber<br>   </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>+<span class=\"string\">'2'</span>+<span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>Number</li>\n<li>StringtoString  </li>\n<li>toString1</li>\n<li>temp12</li>\n<li>temp1</li>\n<li>tempstringstringfalse</li>\n<li>  12false</li>\n</ol>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    valueOf:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    toString:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'a'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>+obj1)</span><br><span class=\"line\"><span class=\"comment\">//1a</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>+ obj2)</span><br><span class=\"line\"><span class=\"comment\">//1a</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj1+obj2)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li>1+obj1      <ol>\n<li>number</li>\n<li>objtypenumber</li>\n<li>valueOf() 1</li>\n<li>number2  </li>\n</ol>\n</li>\n<li>1+obj2  <ol>\n<li>number </li>\n<li>typenumber</li>\n<li>obj2.valueOf()</li>\n<li>toString() return a</li>\n<li>stringstring</li>\n<li>1a</li>\n</ol>\n</li>\n<li>obj1+obj2  <ol>\n<li> ToPrimitive typenumber</li>\n<li>obj1.valueOf()1 </li>\n<li>obj2.valueOf()</li>\n<li>toString() return a</li>\n<li>stringstring</li>\n<li>1a </li>\n</ol>\n</li>\n</ul>\n<p>+  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"== \"></a>== </h3><p></p>\n<ul>\n<li></li>\n<li><br>,<a href=\"http://yanhaijing.com/es5/#104\" target=\"_blank\" rel=\"noopener\"></a>+stringnumbernumber<br>x == y</li>\n</ul>\n<ol>\n<li><p>x,ynumber</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span> == <span class=\"number\">2</span> <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ToPrimitive() typenumber</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    valueOf:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'1'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> == obj2  <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//obj1obj1.valueOf()</span></span><br><span class=\"line\"><span class=\"comment\">//'1'</span></span><br><span class=\"line\"><span class=\"comment\">//'1'toNumber 1  1 == 1</span></span><br><span class=\"line\">[] == ![] <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//[]ToPrimitive ''  </span></span><br><span class=\"line\"><span class=\"comment\">//![]boolean0 </span></span><br><span class=\"line\"><span class=\"comment\">//'' == 0 </span></span><br><span class=\"line\"><span class=\"comment\">// 0==0 //true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>booleanToNumberboolean10   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//boolean number1  </span></span><br><span class=\"line\"><span class=\"comment\">//3 == 1 false</span></span><br><span class=\"line\"><span class=\"comment\">//0 == 0 true</span></span><br><span class=\"line\"><span class=\"number\">3</span> == <span class=\"literal\">true</span> <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"string\">'0'</span> == <span class=\"literal\">false</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>xstringynumberxnumber</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//'0' toNumber() 0  </span></span><br><span class=\"line\"><span class=\"comment\">//0 == 0 true</span></span><br><span class=\"line\"><span class=\"string\">'0'</span> == <span class=\"number\">0</span> <span class=\"comment\">//true</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://yanhaijing.com/es5/#101\" target=\"_blank\" rel=\"noopener\">ECMAScript5.1 + ECMAScript3 + ECMAScript</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&amp;mid=2651227769&amp;idx=1&amp;sn=617160e64d2be13169b1b8f4506d8801&amp;chksm=bd495ffd8a3ed6eb226d4ef193ff2ce3958d2d03d1f3047b635915f8215af40996c2f64d5c20&amp;scene=21#wechat_redirect\" target=\"_blank\" rel=\"noopener\">js</a><br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a>js</p>"},{"title":"","date":"2019-02-17T16:00:00.000Z","_content":"  \n# \n## \n\nwebReactvue  \n<!-- more -->\n  \n\n## \n\n###   \n \n \n\n```js\n{\n    info: [\n        {\n            key:'a',\n            txt:'1',\n            value:0\n        },\n        {\n            key:'b',\n            txt:'2',\n            value:1\n        }\n    ]\n}\n```\n\ninfo  \nvalue   \n\n \n\n\n```js\n{\n    info: [\n        {\n            key:'a',\n            txt:'1'\n        },\n        {\n            key:'b',\n            txt:'2'\n        }\n    ],\n    values:{\n        a:0,\n        b:1\n    }\n}\n```\n\n    \n\n###     \n \n****  \n()\n  \n\n** 1NF**\n\n1NF  \n\n** 2NF**\n1NF1NF(key)  \n\n** 3NF**\n1NF2NF   \n   \n<img src='https://p1.meituan.net/dpnewvc/79de24890fe932435cb6ee08a1da03df503526.png'/>\n\n  \n\n\n\n  \n  \n### reduxstate\n\nreduxstate:    \n\n*  \n*   reducer   \n*   connect  UI  render UI  render  \n\n\n Redux Store \n  \n  \n*   state  \n*     ID  key value\n*   ID \n*  ID    \n\n\n### -Normalizr \n\n[Normalizr](https://github.com/paularmstrong/normalizr)Normalizes nested JSON according to a schemajson   \n  \n\n**:**  \n\n```js\n{\n  \"id\": \"123\",\n  \"author\": {\n    \"id\": \"1\",\n    \"name\": \"Paul\"\n  },\n  \"title\": \"My awesome blog post\",\n  \"comments\": [\n    {\n      \"id\": \"324\",\n      \"commenter\": {\n        \"id\": \"2\",\n        \"name\": \"Nicole\"\n      }\n    }\n  ]\n}\n```  \n****  \n\n```js\n{\n  result: \"123\",\n  entities: {\n    \"articles\": {\n      \"123\": {\n        id: \"123\",\n        author: \"1\",\n        title: \"My awesome blog post\",\n        comments: [ \"324\" ]\n      }\n    },\n    \"users\": {\n      \"1\": { \"id\": \"1\", \"name\": \"Paul\" },\n      \"2\": { \"id\": \"2\", \"name\": \"Nicole\" }\n    },\n    \"comments\": {\n      \"324\": { id: \"324\", \"commenter\": \"2\" }\n    }\n  }\n}\n```\nredux\n  \n##   \njs  \n\n\n### :  \n[https://blog.csdn.net/qq_35401191/article/details/82760301](https://blog.csdn.net/qq_35401191/article/details/82760301)   \n[https://zhuanlan.zhihu.com/p/36487766](https://zhuanlan.zhihu.com/p/36487766)   \n[http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html](http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html)\n\n\n\n\n\n","source":"_posts/normalize.md","raw":"---\ntitle: \ndate: 2019-02-18\n---\n  \n# \n## \n\nwebReactvue  \n<!-- more -->\n  \n\n## \n\n###   \n \n \n\n```js\n{\n    info: [\n        {\n            key:'a',\n            txt:'1',\n            value:0\n        },\n        {\n            key:'b',\n            txt:'2',\n            value:1\n        }\n    ]\n}\n```\n\ninfo  \nvalue   \n\n \n\n\n```js\n{\n    info: [\n        {\n            key:'a',\n            txt:'1'\n        },\n        {\n            key:'b',\n            txt:'2'\n        }\n    ],\n    values:{\n        a:0,\n        b:1\n    }\n}\n```\n\n    \n\n###     \n \n****  \n()\n  \n\n** 1NF**\n\n1NF  \n\n** 2NF**\n1NF1NF(key)  \n\n** 3NF**\n1NF2NF   \n   \n<img src='https://p1.meituan.net/dpnewvc/79de24890fe932435cb6ee08a1da03df503526.png'/>\n\n  \n\n\n\n  \n  \n### reduxstate\n\nreduxstate:    \n\n*  \n*   reducer   \n*   connect  UI  render UI  render  \n\n\n Redux Store \n  \n  \n*   state  \n*     ID  key value\n*   ID \n*  ID    \n\n\n### -Normalizr \n\n[Normalizr](https://github.com/paularmstrong/normalizr)Normalizes nested JSON according to a schemajson   \n  \n\n**:**  \n\n```js\n{\n  \"id\": \"123\",\n  \"author\": {\n    \"id\": \"1\",\n    \"name\": \"Paul\"\n  },\n  \"title\": \"My awesome blog post\",\n  \"comments\": [\n    {\n      \"id\": \"324\",\n      \"commenter\": {\n        \"id\": \"2\",\n        \"name\": \"Nicole\"\n      }\n    }\n  ]\n}\n```  \n****  \n\n```js\n{\n  result: \"123\",\n  entities: {\n    \"articles\": {\n      \"123\": {\n        id: \"123\",\n        author: \"1\",\n        title: \"My awesome blog post\",\n        comments: [ \"324\" ]\n      }\n    },\n    \"users\": {\n      \"1\": { \"id\": \"1\", \"name\": \"Paul\" },\n      \"2\": { \"id\": \"2\", \"name\": \"Nicole\" }\n    },\n    \"comments\": {\n      \"324\": { id: \"324\", \"commenter\": \"2\" }\n    }\n  }\n}\n```\nredux\n  \n##   \njs  \n\n\n### :  \n[https://blog.csdn.net/qq_35401191/article/details/82760301](https://blog.csdn.net/qq_35401191/article/details/82760301)   \n[https://zhuanlan.zhihu.com/p/36487766](https://zhuanlan.zhihu.com/p/36487766)   \n[http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html](http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html)\n\n\n\n\n\n","slug":"normalize","published":1,"updated":"2019-02-19T08:37:16.487Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1s000tgw92p1qa42po","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webReactvue<br><a id=\"more\"></a><br>  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    info: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'a'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'1'</span>,</span><br><span class=\"line\">            value:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'b'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'2'</span>,</span><br><span class=\"line\">            value:<span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>info<br>value<br></p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    info: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'a'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'1'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'b'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'2'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    values:&#123;</span><br><span class=\"line\">        a:<span class=\"number\">0</span>,</span><br><span class=\"line\">        b:<span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>    </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"  \"></a>  </h3><p><strong></strong><br>()<br>  </p>\n<p><strong> 1NF</strong><br><br>1NF  </p>\n<p><strong> 2NF</strong><br>1NF1NF(key)  </p>\n<p><strong> 3NF</strong><br>1NF2NF<br> <br><img src=\"https://p1.meituan.net/dpnewvc/79de24890fe932435cb6ee08a1da03df503526.png\"></p>\n<p>  </p>\n<p><br><br>  </p>\n<h3 id=\"reduxstate\"><a href=\"#reduxstate\" class=\"headerlink\" title=\"reduxstate\"></a>reduxstate</h3><p>reduxstate:    </p>\n<ul>\n<li></li>\n<li> reducer   </li>\n<li> connect  UI  render UI  render  </li>\n</ul>\n<p> Redux Store <br>  </p>\n<ul>\n<li> state  </li>\n<li>   ID  key value</li>\n<li> ID </li>\n<li>ID    </li>\n</ul>\n<h3 id=\"-Normalizr\"><a href=\"#-Normalizr\" class=\"headerlink\" title=\"-Normalizr\"></a>-Normalizr</h3><p><a href=\"https://github.com/paularmstrong/normalizr\" target=\"_blank\" rel=\"noopener\">Normalizr</a>Normalizes nested JSON according to a schemajson<br>  </p>\n<p><strong>:</strong>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"id\"</span>: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"author\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Paul\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"title\"</span>: <span class=\"string\">\"My awesome blog post\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"comments\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"string\">\"324\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"commenter\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Nicole\"</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">****  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  result: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">  entities: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"articles\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"123\"</span>: &#123;</span><br><span class=\"line\">        id: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">        author: <span class=\"string\">\"1\"</span>,</span><br><span class=\"line\">        title: <span class=\"string\">\"My awesome blog post\"</span>,</span><br><span class=\"line\">        comments: [ <span class=\"string\">\"324\"</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"users\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"1\"</span>: &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Paul\"</span> &#125;,</span><br><span class=\"line\">      <span class=\"string\">\"2\"</span>: &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Nicole\"</span> &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"comments\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"324\"</span>: &#123; <span class=\"attr\">id</span>: <span class=\"string\">\"324\"</span>, <span class=\"string\">\"commenter\"</span>: <span class=\"string\">\"2\"</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redux</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>js<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p><a href=\"https://blog.csdn.net/qq_35401191/article/details/82760301\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_35401191/article/details/82760301</a><br><a href=\"https://zhuanlan.zhihu.com/p/36487766\" target=\"_blank\" rel=\"noopener\">https://zhuanlan.zhihu.com/p/36487766</a><br><a href=\"http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html</a></p>\n","site":{"data":{}},"excerpt":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webReactvue<br>","more":"<br>  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    info: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'a'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'1'</span>,</span><br><span class=\"line\">            value:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'b'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'2'</span>,</span><br><span class=\"line\">            value:<span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>info<br>value<br></p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    info: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'a'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'1'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            key:<span class=\"string\">'b'</span>,</span><br><span class=\"line\">            txt:<span class=\"string\">'2'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    values:&#123;</span><br><span class=\"line\">        a:<span class=\"number\">0</span>,</span><br><span class=\"line\">        b:<span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>    </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"  \"></a>  </h3><p><strong></strong><br>()<br>  </p>\n<p><strong> 1NF</strong><br><br>1NF  </p>\n<p><strong> 2NF</strong><br>1NF1NF(key)  </p>\n<p><strong> 3NF</strong><br>1NF2NF<br> <br><img src=\"https://p1.meituan.net/dpnewvc/79de24890fe932435cb6ee08a1da03df503526.png\"></p>\n<p>  </p>\n<p><br><br>  </p>\n<h3 id=\"reduxstate\"><a href=\"#reduxstate\" class=\"headerlink\" title=\"reduxstate\"></a>reduxstate</h3><p>reduxstate:    </p>\n<ul>\n<li></li>\n<li> reducer   </li>\n<li> connect  UI  render UI  render  </li>\n</ul>\n<p> Redux Store <br>  </p>\n<ul>\n<li> state  </li>\n<li>   ID  key value</li>\n<li> ID </li>\n<li>ID    </li>\n</ul>\n<h3 id=\"-Normalizr\"><a href=\"#-Normalizr\" class=\"headerlink\" title=\"-Normalizr\"></a>-Normalizr</h3><p><a href=\"https://github.com/paularmstrong/normalizr\" target=\"_blank\" rel=\"noopener\">Normalizr</a>Normalizes nested JSON according to a schemajson<br>  </p>\n<p><strong>:</strong>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"id\"</span>: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"author\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Paul\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"title\"</span>: <span class=\"string\">\"My awesome blog post\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"comments\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"string\">\"324\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"commenter\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Nicole\"</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\">****  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  result: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">  entities: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"articles\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"123\"</span>: &#123;</span><br><span class=\"line\">        id: <span class=\"string\">\"123\"</span>,</span><br><span class=\"line\">        author: <span class=\"string\">\"1\"</span>,</span><br><span class=\"line\">        title: <span class=\"string\">\"My awesome blog post\"</span>,</span><br><span class=\"line\">        comments: [ <span class=\"string\">\"324\"</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"users\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"1\"</span>: &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Paul\"</span> &#125;,</span><br><span class=\"line\">      <span class=\"string\">\"2\"</span>: &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Nicole\"</span> &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"comments\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"324\"</span>: &#123; <span class=\"attr\">id</span>: <span class=\"string\">\"324\"</span>, <span class=\"string\">\"commenter\"</span>: <span class=\"string\">\"2\"</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redux</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>js<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p><a href=\"https://blog.csdn.net/qq_35401191/article/details/82760301\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_35401191/article/details/82760301</a><br><a href=\"https://zhuanlan.zhihu.com/p/36487766\" target=\"_blank\" rel=\"noopener\">https://zhuanlan.zhihu.com/p/36487766</a><br><a href=\"http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html</a></p>"},{"title":"(IOC)","date":"2018-10-18T16:00:00.000Z","_content":"  \n## \n(IOC)\n<!-- more -->\n## IOC\n  \nInversion of ControlIoCDependency InjectionDIDependency Lookup \n\n###  \n\n1.  \n2. \n3. \n\n\n  \n\n### \n\n  \n####   \n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1cb4bdc20?w=808&h=580&f=png&s=32302'/>\n\nobj2  \n   \n  \n  \n\n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1ca073f1e?w=1158&h=868&f=png&s=112204' />\nbug\n\nIOC\njsangular\n\n\n####  \n\nnba:\n\n```js\n//\nclass RTeam {\n    constructor(){\n        this.name = ''\n    }\n}\n// \nclass Player{\n    constructor(){\n        this.team = new Team()\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}\n// ym\nlet ym = new Player()\nym.info() // \n\n```\n\nplayerRTeam \nplayer\n\n,team2  \nplayerRTeam\n    \n  \n    \n  \n  \nplayerIOC\n\n### IOC \nIOC\n\n1.  \n    playerplayerteamclass  \n    \n2.   \n    playerteamteaminfo\n           \n  \n    \n```js\n// \n// \nclass TeamInfo {\n    constructor(name) {\n        this.name = name\n    }\n}\nclass Player {\n    // teamInfo\n    // \n    constructor(team) {\n        this.team = team\n    }\n    info() {\n        console.log(this.team.name)\n    }\n}\n// \n// PlayerTeamInfo\n// teaminfoplayer\n// ()\nvar ym = new Player(new TeamInfo(''))\nym.info()\nvar kobe = new Player(new TeamInfo(''))\nkobe.info()\n```  \n\nTeamInfoPlayergetTeamInfo  \nplayer\nteam3\n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1c7e53fff?w=1274&h=860&f=png&s=64137'/>\n\n\n### \nIOCIOC    \n\n####  \njs\n\nRequireJS/AMDangular\n### \n\n\n\n[Dependency-injection-in-JavaScript](https://juejin.im/post/5bd177806fb9a05d30179925)\n\n\n","source":"_posts/ioc.md","raw":"---\ntitle: (IOC)\ndate: 2018-10-19\n---\n  \n## \n(IOC)\n<!-- more -->\n## IOC\n  \nInversion of ControlIoCDependency InjectionDIDependency Lookup \n\n###  \n\n1.  \n2. \n3. \n\n\n  \n\n### \n\n  \n####   \n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1cb4bdc20?w=808&h=580&f=png&s=32302'/>\n\nobj2  \n   \n  \n  \n\n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1ca073f1e?w=1158&h=868&f=png&s=112204' />\nbug\n\nIOC\njsangular\n\n\n####  \n\nnba:\n\n```js\n//\nclass RTeam {\n    constructor(){\n        this.name = ''\n    }\n}\n// \nclass Player{\n    constructor(){\n        this.team = new Team()\n    }\n    info(){\n        console.log(this.team.name)\n    }\n}\n// ym\nlet ym = new Player()\nym.info() // \n\n```\n\nplayerRTeam \nplayer\n\n,team2  \nplayerRTeam\n    \n  \n    \n  \n  \nplayerIOC\n\n### IOC \nIOC\n\n1.  \n    playerplayerteamclass  \n    \n2.   \n    playerteamteaminfo\n           \n  \n    \n```js\n// \n// \nclass TeamInfo {\n    constructor(name) {\n        this.name = name\n    }\n}\nclass Player {\n    // teamInfo\n    // \n    constructor(team) {\n        this.team = team\n    }\n    info() {\n        console.log(this.team.name)\n    }\n}\n// \n// PlayerTeamInfo\n// teaminfoplayer\n// ()\nvar ym = new Player(new TeamInfo(''))\nym.info()\nvar kobe = new Player(new TeamInfo(''))\nkobe.info()\n```  \n\nTeamInfoPlayergetTeamInfo  \nplayer\nteam3\n\n<img src='https://user-gold-cdn.xitu.io/2018/10/24/166a60f1c7e53fff?w=1274&h=860&f=png&s=64137'/>\n\n\n### \nIOCIOC    \n\n####  \njs\n\nRequireJS/AMDangular\n### \n\n\n\n[Dependency-injection-in-JavaScript](https://juejin.im/post/5bd177806fb9a05d30179925)\n\n\n","slug":"ioc","published":1,"updated":"2018-10-25T08:14:31.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1t000ugw92oves2v4b","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(IOC)<br><a id=\"more\"></a></p>\n<h2 id=\"IOC\"><a href=\"#IOC\" class=\"headerlink\" title=\"IOC\"></a>IOC</h2><p><br>Inversion of ControlIoCDependency InjectionDIDependency Lookup </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> </li>\n<li></li>\n<li></li>\n</ol>\n<p><br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1cb4bdc20?w=808&h=580&f=png&s=32302\"><br><br>obj2<br><br><br>  </p>\n<p><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1ca073f1e?w=1158&h=868&f=png&s=112204\"><br>bug</p>\n<p>IOC<br>jsangular</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nba:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RTeam</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">''</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Player</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.team = <span class=\"keyword\">new</span> Team()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    info()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.team.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ym</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> ym = <span class=\"keyword\">new</span> Player()</span><br><span class=\"line\">ym.info() <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>playerRTeam<br>player</p>\n<p>,team2<br>playerRTeam<br><br><br><br><br><br>playerIOC</p>\n<h3 id=\"IOC-\"><a href=\"#IOC-\" class=\"headerlink\" title=\"IOC \"></a>IOC </h3><p>IOC</p>\n<ol>\n<li><p><br> playerplayerteamclass  </p>\n</li>\n<li><p><br> playerteamteaminfo</p>\n</li>\n</ol>\n<p>  </p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"comment\">// </span>\n<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TeamInfo</span> </span>{\n    <span class=\"keyword\">constructor</span>(name) {\n        <span class=\"keyword\">this</span>.name = name\n    }\n}\n<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Player</span> </span>{\n    <span class=\"comment\">// teamInfo</span>\n    <span class=\"comment\">// </span>\n    <span class=\"keyword\">constructor</span>(team) {\n        <span class=\"keyword\">this</span>.team = team\n    }\n    info() {\n        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.team.name)\n    }\n}\n<span class=\"comment\">// </span>\n<span class=\"comment\">// PlayerTeamInfo</span>\n<span class=\"comment\">// teaminfoplayer</span>\n<span class=\"comment\">// ()</span>\n<span class=\"keyword\">var</span> ym = <span class=\"keyword\">new</span> Player(<span class=\"keyword\">new</span> TeamInfo(<span class=\"string\">''</span>))\nym.info()\n<span class=\"keyword\">var</span> kobe = <span class=\"keyword\">new</span> Player(<span class=\"keyword\">new</span> TeamInfo(<span class=\"string\">''</span>))\nkobe.info()\n</code></pre>\n<p>TeamInfoPlayergetTeamInfo<br>player<br>team3<br><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1c7e53fff?w=1274&h=860&f=png&s=64137\"><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IOCIOC    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>js</p>\n<p>RequireJS/AMDangular</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br><a href=\"https://juejin.im/post/5bd177806fb9a05d30179925\" target=\"_blank\" rel=\"noopener\">Dependency-injection-in-JavaScript</a><br></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>(IOC)<br>","more":"</p>\n<h2 id=\"IOC\"><a href=\"#IOC\" class=\"headerlink\" title=\"IOC\"></a>IOC</h2><p><br>Inversion of ControlIoCDependency InjectionDIDependency Lookup </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> </li>\n<li></li>\n<li></li>\n</ol>\n<p><br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1cb4bdc20?w=808&h=580&f=png&s=32302\"><br><br>obj2<br><br><br>  </p>\n<p><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1ca073f1e?w=1158&h=868&f=png&s=112204\"><br>bug</p>\n<p>IOC<br>jsangular</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nba:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RTeam</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">''</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Player</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.team = <span class=\"keyword\">new</span> Team()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    info()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.team.name)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ym</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> ym = <span class=\"keyword\">new</span> Player()</span><br><span class=\"line\">ym.info() <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>playerRTeam<br>player</p>\n<p>,team2<br>playerRTeam<br><br><br><br><br><br>playerIOC</p>\n<h3 id=\"IOC-\"><a href=\"#IOC-\" class=\"headerlink\" title=\"IOC \"></a>IOC </h3><p>IOC</p>\n<ol>\n<li><p><br> playerplayerteamclass  </p>\n</li>\n<li><p><br> playerteamteaminfo</p>\n</li>\n</ol>\n<p>  </p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"comment\">// </span>\n<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TeamInfo</span> </span>{\n    <span class=\"keyword\">constructor</span>(name) {\n        <span class=\"keyword\">this</span>.name = name\n    }\n}\n<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Player</span> </span>{\n    <span class=\"comment\">// teamInfo</span>\n    <span class=\"comment\">// </span>\n    <span class=\"keyword\">constructor</span>(team) {\n        <span class=\"keyword\">this</span>.team = team\n    }\n    info() {\n        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.team.name)\n    }\n}\n<span class=\"comment\">// </span>\n<span class=\"comment\">// PlayerTeamInfo</span>\n<span class=\"comment\">// teaminfoplayer</span>\n<span class=\"comment\">// ()</span>\n<span class=\"keyword\">var</span> ym = <span class=\"keyword\">new</span> Player(<span class=\"keyword\">new</span> TeamInfo(<span class=\"string\">''</span>))\nym.info()\n<span class=\"keyword\">var</span> kobe = <span class=\"keyword\">new</span> Player(<span class=\"keyword\">new</span> TeamInfo(<span class=\"string\">''</span>))\nkobe.info()\n</code></pre>\n<p>TeamInfoPlayergetTeamInfo<br>player<br>team3<br><br><img src=\"https://user-gold-cdn.xitu.io/2018/10/24/166a60f1c7e53fff?w=1274&h=860&f=png&s=64137\"><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IOCIOC    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>js</p>\n<p>RequireJS/AMDangular</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br><a href=\"https://juejin.im/post/5bd177806fb9a05d30179925\" target=\"_blank\" rel=\"noopener\">Dependency-injection-in-JavaScript</a><br></p>"},{"title":"","date":"2018-05-06T16:00:00.000Z","_content":"## web app\n[https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0](https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0)\n<!-- more -->\n###  \n  \n###    \n  \njs\n<img src='/img/performance/1.png'> \n  \njs  \ncpujs(js)\n1. js\n2. js\n3. \n### 1.1 js\n####  \nES580%ES2015(80%+ES2015oppopvivio):   \n\n```js\n//ES2015\nbooks.map(b => b.title);\n//ES5\nbooks.map(function(b) { return b.title; }, this);\n//\n```\n#### /  \nUglifyJS & Closure Compiler \njs95%\n  \n* \n* \n* \n*  \n  \n\n* \n*   \n\n#### tree-shaking  \nwebpackrollup  \ntree-shakingexports  \n\n```js\n//tool \n//used\nexport function a(){\n    console.log('1')\n}\nexport function b(){\n    console.log('2')\n}\n//app.js\nimport {a} from './tool'\na()\n```   \n \nfunction b b\n#### ES2015tree-shaking  \nimport/export ()  \n#### tree-shaking  \n  \n*   \n* ES2015 \n*   \n       \n   \n####   \n  \n  \n####    \n300kb   \n   \n \n*   \n*  \n*     \n*   \n\n\n### 1.2 js   \n  \njs  \n\n|  |  | Async | Defer |\n| --- | --- | --- | --- |\n|  |  |  |  |\n|  |  |  | document |\n\n####   \n* js  \n* js   \nBundle jschunk  \n  \n* js  \n      \n      \n    \n* js   \n      \n      \n    \n\n### 1.3   \n#### htmlcss   \nvanilla JS(js)[ React  VanillaJS ](https://www.w3ctech.com/topic/1978)\n\nNetflix 50%TTI\n* jsReact\n*    \n\n#### server\nserver,ssrclient-side-render.  \nssr1/5\nssrssr\n\n##   \n  \n\n* :  (/)\n* : (ms)\n\n  \n(26)3.5Mb3.5/260.13s\n\n  \n\n|  | ms |\n| --- | :-- |\n| 5G | <=4 |\n| 4G | <=100 |\n| 3G | 100-500 |\n| 3G | 300-1000 |\n\n###    \n\n   \n  \n* \n*   \n*   \n\n### 2.1    \n\n####   \n13+   \n \n1. DNS () \n2. TLS ()\n3.       \n\n\n####   \n\nTCP slow-start  \n\n####     \n\n  \n50k100k   \n  \n####     \n\n*   \n* server-side client-side\n* 301302code    \n\n\n####   \n  \n    \n\n* Content-addressed URLs: \n      log13234d.jpglog.jpg    \n* max-age   \n\nFacebook60%  \n\n#### service workers  \n\nservice worker  \n  \n*  \n*   \n*   \n\n#### http2  \nHTTP2   \n### 2.2   \n  \n\n####    \n  \n \n<img src='/img/performance/2.png'> \n  \n####   \n    \n\n* Dns-prefresh  \n* preconnect\n* preconnect\n* Preload\n* Prefetch()  \n\n### 2.3    \n \n* Brotli    \n   gzip \n    \n      \n    \n* js  \n* \n23   \n \n###   \n   \n","source":"_posts/performance.md","raw":"---\ntitle: \ndate: 2018-05-07\n---\n## web app\n[https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0](https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0)\n<!-- more -->\n###  \n  \n###    \n  \njs\n<img src='/img/performance/1.png'> \n  \njs  \ncpujs(js)\n1. js\n2. js\n3. \n### 1.1 js\n####  \nES580%ES2015(80%+ES2015oppopvivio):   \n\n```js\n//ES2015\nbooks.map(b => b.title);\n//ES5\nbooks.map(function(b) { return b.title; }, this);\n//\n```\n#### /  \nUglifyJS & Closure Compiler \njs95%\n  \n* \n* \n* \n*  \n  \n\n* \n*   \n\n#### tree-shaking  \nwebpackrollup  \ntree-shakingexports  \n\n```js\n//tool \n//used\nexport function a(){\n    console.log('1')\n}\nexport function b(){\n    console.log('2')\n}\n//app.js\nimport {a} from './tool'\na()\n```   \n \nfunction b b\n#### ES2015tree-shaking  \nimport/export ()  \n#### tree-shaking  \n  \n*   \n* ES2015 \n*   \n       \n   \n####   \n  \n  \n####    \n300kb   \n   \n \n*   \n*  \n*     \n*   \n\n\n### 1.2 js   \n  \njs  \n\n|  |  | Async | Defer |\n| --- | --- | --- | --- |\n|  |  |  |  |\n|  |  |  | document |\n\n####   \n* js  \n* js   \nBundle jschunk  \n  \n* js  \n      \n      \n    \n* js   \n      \n      \n    \n\n### 1.3   \n#### htmlcss   \nvanilla JS(js)[ React  VanillaJS ](https://www.w3ctech.com/topic/1978)\n\nNetflix 50%TTI\n* jsReact\n*    \n\n#### server\nserver,ssrclient-side-render.  \nssr1/5\nssrssr\n\n##   \n  \n\n* :  (/)\n* : (ms)\n\n  \n(26)3.5Mb3.5/260.13s\n\n  \n\n|  | ms |\n| --- | :-- |\n| 5G | <=4 |\n| 4G | <=100 |\n| 3G | 100-500 |\n| 3G | 300-1000 |\n\n###    \n\n   \n  \n* \n*   \n*   \n\n### 2.1    \n\n####   \n13+   \n \n1. DNS () \n2. TLS ()\n3.       \n\n\n####   \n\nTCP slow-start  \n\n####     \n\n  \n50k100k   \n  \n####     \n\n*   \n* server-side client-side\n* 301302code    \n\n\n####   \n  \n    \n\n* Content-addressed URLs: \n      log13234d.jpglog.jpg    \n* max-age   \n\nFacebook60%  \n\n#### service workers  \n\nservice worker  \n  \n*  \n*   \n*   \n\n#### http2  \nHTTP2   \n### 2.2   \n  \n\n####    \n  \n \n<img src='/img/performance/2.png'> \n  \n####   \n    \n\n* Dns-prefresh  \n* preconnect\n* preconnect\n* Preload\n* Prefetch()  \n\n### 2.3    \n \n* Brotli    \n   gzip \n    \n      \n    \n* js  \n* \n23   \n \n###   \n   \n","slug":"performance","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1u000vgw92v9xmimci","content":"<h2 id=\"web-app\"><a href=\"#web-app\" class=\"headerlink\" title=\"web app\"></a>web app</h2><p><a href=\"https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0</a><br><a id=\"more\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><p><br>js<br><img src=\"/img/performance/1.png\"><br><br>js<br>cpujs(js)</p>\n<ol>\n<li>js</li>\n<li>js</li>\n<li><h3 id=\"1-1-js\"><a href=\"#1-1-js\" class=\"headerlink\" title=\"1.1 js\"></a>1.1 js</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>ES580%ES2015(80%+ES2015oppopvivio):   </li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ES2015</span></span><br><span class=\"line\">books.map(<span class=\"function\"><span class=\"params\">b</span> =&gt;</span> b.title);</span><br><span class=\"line\"><span class=\"comment\">//ES5</span></span><br><span class=\"line\">books.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">b</span>) </span>&#123; <span class=\"keyword\">return</span> b.title; &#125;, <span class=\"keyword\">this</span>);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h4><p>UglifyJS &amp; Closure Compiler <br>js95%<br>  </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li><br><br></li>\n<li></li>\n<li>  </li>\n</ul>\n<h4 id=\"tree-shaking\"><a href=\"#tree-shaking\" class=\"headerlink\" title=\"tree-shaking\"></a>tree-shaking</h4><p>webpackrollup<br>tree-shakingexports  </p>\n<pre><code class=\"js\"><span class=\"comment\">//tool </span>\n<span class=\"comment\">//used</span>\n<span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>)\n}\n<span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>)\n}\n<span class=\"comment\">//app.js</span>\n<span class=\"keyword\">import</span> {a} <span class=\"keyword\">from</span> <span class=\"string\">'./tool'</span>\na()\n</code></pre>\n<p>function b b</p>\n<h4 id=\"ES2015tree-shaking\"><a href=\"#ES2015tree-shaking\" class=\"headerlink\" title=\"ES2015tree-shaking\"></a>ES2015tree-shaking</h4><p>import/export ()  </p>\n<h4 id=\"tree-shaking\"><a href=\"#tree-shaking\" class=\"headerlink\" title=\"tree-shaking\"></a>tree-shaking</h4><ul>\n<li>  </li>\n<li>ES2015 </li>\n<li><br>     </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>300kb<br>   </p>\n<ul>\n<li>  </li>\n<li> </li>\n<li>    </li>\n<li>  </li>\n</ul>\n<h3 id=\"1-2-js\"><a href=\"#1-2-js\" class=\"headerlink\" title=\"1.2 js\"></a>1.2 js</h3><p>js  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th>Async</th>\n<th>Defer</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td>document</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>js  </li>\n<li>js<br>Bundle jschunk<br>  </li>\n<li>js<br>  <br>  <br>  </li>\n<li>js<br>  <br>  <br>  <br><h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><h4 id=\"htmlcss\"><a href=\"#htmlcss\" class=\"headerlink\" title=\"htmlcss\"></a>htmlcss</h4>vanilla JS(js)<a href=\"https://www.w3ctech.com/topic/1978\" target=\"_blank\" rel=\"noopener\"> React  VanillaJS </a><br><br>Netflix 50%TTI</li>\n<li>jsReact</li>\n<li>   </li>\n</ul>\n<h4 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h4><p>server,ssrclient-side-render.<br>ssr1/5<br>ssrssr</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ul>\n<li>:  (/)</li>\n<li>: (ms)</li>\n</ul>\n<p>(26)3.5Mb3.5/260.13s<br><br>  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th style=\"text-align:left\">ms</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5G</td>\n<td style=\"text-align:left\">&lt;=4</td>\n</tr>\n<tr>\n<td>4G</td>\n<td style=\"text-align:left\">&lt;=100</td>\n</tr>\n<tr>\n<td>3G</td>\n<td style=\"text-align:left\">100-500</td>\n</tr>\n<tr>\n<td>3G</td>\n<td style=\"text-align:left\">300-1000</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<ul>\n<li></li>\n<li>  </li>\n<li>  </li>\n</ul>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>13+   </p>\n<ol>\n<li>DNS () </li>\n<li>TLS ()</li>\n<li>      </li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>TCP slow-start  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>50k100k   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n<li>server-side client-side</li>\n<li>301302code    </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>    </p>\n<ul>\n<li>Content-addressed URLs: <pre><code>log13234d.jpglog.jpg    \n</code></pre></li>\n<li>max-age   </li>\n</ul>\n<p>Facebook60%  </p>\n<h4 id=\"service-workers\"><a href=\"#service-workers\" class=\"headerlink\" title=\"service workers\"></a>service workers</h4><p>service worker  </p>\n<ul>\n<li> </li>\n<li>  </li>\n<li>  </li>\n</ul>\n<h4 id=\"http2\"><a href=\"#http2\" class=\"headerlink\" title=\"http2\"></a>http2</h4><p>HTTP2   </p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br><img src=\"/img/performance/2.png\"> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>    </p>\n<ul>\n<li>Dns-prefresh  </li>\n<li>preconnect</li>\n<li>preconnect</li>\n<li>Preload</li>\n<li>Prefetch()  </li>\n</ul>\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><ul>\n<li>Brotli<br> gzip<br>  <br>  <br>  </li>\n<li>js  </li>\n<li><br>23   </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"web-app\"><a href=\"#web-app\" class=\"headerlink\" title=\"web app\"></a>web app</h2><p><a href=\"https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/presentation/d/1hBIb0CshY9DlM1fkxSLXVSW3Srg3CxaxAbdocI67NCQ/edit#slide=id.g32e52b1ea6_1_0</a><br>","more":"</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><p><br>js<br><img src=\"/img/performance/1.png\"><br><br>js<br>cpujs(js)</p>\n<ol>\n<li>js</li>\n<li>js</li>\n<li><h3 id=\"1-1-js\"><a href=\"#1-1-js\" class=\"headerlink\" title=\"1.1 js\"></a>1.1 js</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>ES580%ES2015(80%+ES2015oppopvivio):   </li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ES2015</span></span><br><span class=\"line\">books.map(<span class=\"function\"><span class=\"params\">b</span> =&gt;</span> b.title);</span><br><span class=\"line\"><span class=\"comment\">//ES5</span></span><br><span class=\"line\">books.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">b</span>) </span>&#123; <span class=\"keyword\">return</span> b.title; &#125;, <span class=\"keyword\">this</span>);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h4><p>UglifyJS &amp; Closure Compiler <br>js95%<br>  </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li><br><br></li>\n<li></li>\n<li>  </li>\n</ul>\n<h4 id=\"tree-shaking\"><a href=\"#tree-shaking\" class=\"headerlink\" title=\"tree-shaking\"></a>tree-shaking</h4><p>webpackrollup<br>tree-shakingexports  </p>\n<pre><code class=\"js\"><span class=\"comment\">//tool </span>\n<span class=\"comment\">//used</span>\n<span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>)\n}\n<span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>)\n}\n<span class=\"comment\">//app.js</span>\n<span class=\"keyword\">import</span> {a} <span class=\"keyword\">from</span> <span class=\"string\">'./tool'</span>\na()\n</code></pre>\n<p>function b b</p>\n<h4 id=\"ES2015tree-shaking\"><a href=\"#ES2015tree-shaking\" class=\"headerlink\" title=\"ES2015tree-shaking\"></a>ES2015tree-shaking</h4><p>import/export ()  </p>\n<h4 id=\"tree-shaking\"><a href=\"#tree-shaking\" class=\"headerlink\" title=\"tree-shaking\"></a>tree-shaking</h4><ul>\n<li>  </li>\n<li>ES2015 </li>\n<li><br>     </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>300kb<br>   </p>\n<ul>\n<li>  </li>\n<li> </li>\n<li>    </li>\n<li>  </li>\n</ul>\n<h3 id=\"1-2-js\"><a href=\"#1-2-js\" class=\"headerlink\" title=\"1.2 js\"></a>1.2 js</h3><p>js  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th>Async</th>\n<th>Defer</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td>document</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>js  </li>\n<li>js<br>Bundle jschunk<br>  </li>\n<li>js<br>  <br>  <br>  </li>\n<li>js<br>  <br>  <br>  <br><h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><h4 id=\"htmlcss\"><a href=\"#htmlcss\" class=\"headerlink\" title=\"htmlcss\"></a>htmlcss</h4>vanilla JS(js)<a href=\"https://www.w3ctech.com/topic/1978\" target=\"_blank\" rel=\"noopener\"> React  VanillaJS </a><br><br>Netflix 50%TTI</li>\n<li>jsReact</li>\n<li>   </li>\n</ul>\n<h4 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h4><p>server,ssrclient-side-render.<br>ssr1/5<br>ssrssr</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ul>\n<li>:  (/)</li>\n<li>: (ms)</li>\n</ul>\n<p>(26)3.5Mb3.5/260.13s<br><br>  </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th style=\"text-align:left\">ms</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5G</td>\n<td style=\"text-align:left\">&lt;=4</td>\n</tr>\n<tr>\n<td>4G</td>\n<td style=\"text-align:left\">&lt;=100</td>\n</tr>\n<tr>\n<td>3G</td>\n<td style=\"text-align:left\">100-500</td>\n</tr>\n<tr>\n<td>3G</td>\n<td style=\"text-align:left\">300-1000</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<ul>\n<li></li>\n<li>  </li>\n<li>  </li>\n</ul>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>13+   </p>\n<ol>\n<li>DNS () </li>\n<li>TLS ()</li>\n<li>      </li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>TCP slow-start  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>50k100k   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n<li>server-side client-side</li>\n<li>301302code    </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>    </p>\n<ul>\n<li>Content-addressed URLs: <pre><code>log13234d.jpglog.jpg    \n</code></pre></li>\n<li>max-age   </li>\n</ul>\n<p>Facebook60%  </p>\n<h4 id=\"service-workers\"><a href=\"#service-workers\" class=\"headerlink\" title=\"service workers\"></a>service workers</h4><p>service worker  </p>\n<ul>\n<li> </li>\n<li>  </li>\n<li>  </li>\n</ul>\n<h4 id=\"http2\"><a href=\"#http2\" class=\"headerlink\" title=\"http2\"></a>http2</h4><p>HTTP2   </p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br><img src=\"/img/performance/2.png\"> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>    </p>\n<ul>\n<li>Dns-prefresh  </li>\n<li>preconnect</li>\n<li>preconnect</li>\n<li>Preload</li>\n<li>Prefetch()  </li>\n</ul>\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><ul>\n<li>Brotli<br> gzip<br>  <br>  <br>  </li>\n<li>js  </li>\n<li><br>23   </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>"},{"title":"","date":"2017-09-14T16:00:00.000Z","_content":"  \n<!-- more -->  \n\n##    \n* [nodeWebsocket](https://juejin.im/post/5a2bf66151882546d71f44b2)\n* [websocket-](https://juejin.im/post/5a05d89051882540f36305df)\n* [webpack plugin](https://juejin.im/post/59e8b724f265da431875dd5c)\n* [-iosfixed](https://juejin.im/post/59e725865188257e0c3246bf)\n* [webpack loader](https://juejin.im/post/59e6a5de518825469c7461da)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)","source":"_posts/review.md","raw":"---\ntitle: \ndate: 2017-09-15\n---\n  \n<!-- more -->  \n\n##    \n* [nodeWebsocket](https://juejin.im/post/5a2bf66151882546d71f44b2)\n* [websocket-](https://juejin.im/post/5a05d89051882540f36305df)\n* [webpack plugin](https://juejin.im/post/59e8b724f265da431875dd5c)\n* [-iosfixed](https://juejin.im/post/59e725865188257e0c3246bf)\n* [webpack loader](https://juejin.im/post/59e6a5de518825469c7461da)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)\n* [nodeWebsocket](http://www.cnblogs.com/pqjwyn/p/8012197.html)","slug":"review","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1u000wgw92xzha2jpl","content":"<p><br><a id=\"more\"></a>  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://juejin.im/post/5a2bf66151882546d71f44b2\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"https://juejin.im/post/5a05d89051882540f36305df\" target=\"_blank\" rel=\"noopener\">websocket-</a></li>\n<li><a href=\"https://juejin.im/post/59e8b724f265da431875dd5c\" target=\"_blank\" rel=\"noopener\">webpack plugin</a></li>\n<li><a href=\"https://juejin.im/post/59e725865188257e0c3246bf\" target=\"_blank\" rel=\"noopener\">-iosfixed</a></li>\n<li><a href=\"https://juejin.im/post/59e6a5de518825469c7461da\" target=\"_blank\" rel=\"noopener\">webpack loader</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p><br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://juejin.im/post/5a2bf66151882546d71f44b2\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"https://juejin.im/post/5a05d89051882540f36305df\" target=\"_blank\" rel=\"noopener\">websocket-</a></li>\n<li><a href=\"https://juejin.im/post/59e8b724f265da431875dd5c\" target=\"_blank\" rel=\"noopener\">webpack plugin</a></li>\n<li><a href=\"https://juejin.im/post/59e725865188257e0c3246bf\" target=\"_blank\" rel=\"noopener\">-iosfixed</a></li>\n<li><a href=\"https://juejin.im/post/59e6a5de518825469c7461da\" target=\"_blank\" rel=\"noopener\">webpack loader</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n<li><a href=\"http://www.cnblogs.com/pqjwyn/p/8012197.html\" target=\"_blank\" rel=\"noopener\">nodeWebsocket</a></li>\n</ul>"},{"title":"erPWA","date":"2018-05-08T16:00:00.000Z","_content":"## web   \nweb     \n<img src='/img/pwa/1.png'/>   \n\n* - \n* web  \n*  \n<!-- more -->\nweb app \n## PWA  \nPWA Progressive Web Apps(Web)web\n    \n \n* Reliable\n    \n* Fast\n    \n* (Engaging)\n       \n    \nPWA  PWA Checklist   \n\n  \n\n*  - \n*  -  Service Worker \n*  -  App Shell  Native App  Native App \n*  - \n*  -  HTTPS \n*  -  Service Worker \n*  - \n*  -  webapp \n*  -   \n\n\n,PWAweb  \n\n##   \n  \n\n* App Manifest\n* Service Worker\n* Notifications API\n* Push API  \n\nService WorkerPWAappapp \n### 3.1 service worker\n####   \n\n\n\n####    \nweb  \nAppCache(h5)\n Application Cache is a douchebag\n\n#### workers \n\n javaScript web,\nW3CWeb Worker  API\nWeb Worker \n\nWeb WorkerW3Cservice worker\n\n  \n\nService Worker    \n\n* \n* \n* \n* \n* \nPWAService WorkerPWA \n#### \nService Worker \n*  Service Worker  HTTPS   \n     Service Worker  host  localhost  127.0.0.1 \n* Service Worker  Cache API ()\n*  HTML5 fetch API\n*  Promise    \n  \n\n <img src='/img/pwa/2.png'/>\niOS  safariiOS11.3\nIEEdge     \n### 3.2 Cache  \n\nCacheService WorkerAPIService Worker\ncachecssjshtml  \ncachekey-valuekeyrequestvalueresponse   \n \n* caches.open(cacheName) cache   \n* cachesglobalcachePromise\n* cache.keys() cachevalue\n* cache.match(Request|url) cacherequestPromise  \n* cache.matchAllmatchrequestresponse\n* cache.add(Request|url) addrequesturlcache.addfetchrequestresponsecache\n* cache.addAllsw installcache.addAll\n* cache.put(Request, Response) cache.addfetchresponsecache\n* cache.delete(Request|url)      \n\n \n### 3.3 Service Worker         \n\nswjs  \n\n```js\n//promise\nfunction registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nwindow.onload = function () {\n    //\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    registerServiceWorker()\n}\n```   \n### 3.4       \n\nService worker web \n serice worker  service worker\nservice worker  service worker \n service worker ,  \n \n* service worker \n*   \n\n\n  \n  \n* Installing   \n            Service Worker  install  \n* Installed\n           Service Worker  Service Worker \n* Activating \n           Service Worker  worker \n* Activated   \n           activate  () fetch ()sync ()push ()\n* Redundant\n           \n         \nPWA\n \n* install \n \nevent.waitUntil() Promise  Promise  resolve \nself.skipWaiting()self  context  global  waiting  Service Worker  activate \n \n* activate \n \nevent.waitUntil() Promise  Promise  resolve \nself.clients.claim() activate ,  Service Worker    \n\n```js \nconst CURCACHE = 'CURCACHE_test_1'\nconst RUNTIME = 'runtime';\nconst CURCACHE_URLS = [\n    './',\n    '/asset/sw.jpg',\n    'index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n      //\n        caches.open(CURCACHE).then(cache=>{\n            cache.addAll(CURCACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})  \n  //\n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      // \n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          //\n          return response\n        }\n        //\n        return fetch(e.request.url)\n      })\n    )\n  });\n```  \n#### service worker  \n\nservice worker    \n\n*  service worker    \n             \n*  service worker install\n* service worker service worker  waiting \n*  service worker  servicer worker \n*  service worker  activate   \n\n```js\nconst CURCACHE = 'precache_test_1'\n//keyprecache_test_2 CURCACHE\nself.addEventListener('activate', e => {\n  e.waitUntil(\n      //keys\n      caches.keys().then(cacheNames=>{\n        return Promise.all(\n          cacheNames.map(function(cacheName) {\n            //key,\n            if (cacheName !== CURCACHE) {\n              return caches.delete(cacheName);\n            }\n          })\n    )}).then(() => self.clients.claim())\n )\n}) \n```  \n\nservice workerservice worker  \n\n<img src='/img/pwa/3.png'>\nsw.jssw\n<img src='/img/pwa/4.png'>  \n   \n  \n##   \n\n PWA   \n\n### manifest.json  \n\n manifest.json \n \n```js\n{\n    //\n    \"name\": \"PQJ-PWA\",\n    //\n    \"short_name\":\"PQJ\",\n    \"description\": \"demo\",\n    //\n    \"start_url\": \"/index.html\",\n    //\n    \"icons\": {\n      \"128\": \"/asset/sw.jpg\"\n    },\n    \"developer\": {\n      \"name\": \"pqj\",\n      \"url\": \"\"\n    },\n    \"display\": \"standalone\",\n    \"background_color\": \"#287fc5\",\n    \"theme_color\": \"#fff\",\n    \"permissions\": {\n        \"desktop-notification\": {\n          \"description\": \"Needed for creating system notifications.\"\n        }\n      }\n}  \n```  \nhtml\n\n```js\n<link rel=\"manifest\" href=\"/mainfest.json\" />\n```  \nchrome(),icon\n  \n  \n###   \nservice worker   \n   \n \n* \n* service worker \n*   \n\n```js \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        //\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            //\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n} \n```  \n  \n\n```js\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}  \n```  \n###    \n####   \n[https://lavas.baidu.com/doc](https://lavas.baidu.com/doc)  \n[https://developer.mozilla.org/zh-CN/Apps/Progressive](https://developer.mozilla.org/zh-CN/Apps/Progressive)\n[](https://github.com/xiaoxiangdaiyu/PWA)PWAwebweb\npwa \n\n  \n\n","source":"_posts/pwa.md","raw":"---\ntitle: erPWA\ndate: 2018-05-09\n---\n## web   \nweb     \n<img src='/img/pwa/1.png'/>   \n\n* - \n* web  \n*  \n<!-- more -->\nweb app \n## PWA  \nPWA Progressive Web Apps(Web)web\n    \n \n* Reliable\n    \n* Fast\n    \n* (Engaging)\n       \n    \nPWA  PWA Checklist   \n\n  \n\n*  - \n*  -  Service Worker \n*  -  App Shell  Native App  Native App \n*  - \n*  -  HTTPS \n*  -  Service Worker \n*  - \n*  -  webapp \n*  -   \n\n\n,PWAweb  \n\n##   \n  \n\n* App Manifest\n* Service Worker\n* Notifications API\n* Push API  \n\nService WorkerPWAappapp \n### 3.1 service worker\n####   \n\n\n\n####    \nweb  \nAppCache(h5)\n Application Cache is a douchebag\n\n#### workers \n\n javaScript web,\nW3CWeb Worker  API\nWeb Worker \n\nWeb WorkerW3Cservice worker\n\n  \n\nService Worker    \n\n* \n* \n* \n* \n* \nPWAService WorkerPWA \n#### \nService Worker \n*  Service Worker  HTTPS   \n     Service Worker  host  localhost  127.0.0.1 \n* Service Worker  Cache API ()\n*  HTML5 fetch API\n*  Promise    \n  \n\n <img src='/img/pwa/2.png'/>\niOS  safariiOS11.3\nIEEdge     \n### 3.2 Cache  \n\nCacheService WorkerAPIService Worker\ncachecssjshtml  \ncachekey-valuekeyrequestvalueresponse   \n \n* caches.open(cacheName) cache   \n* cachesglobalcachePromise\n* cache.keys() cachevalue\n* cache.match(Request|url) cacherequestPromise  \n* cache.matchAllmatchrequestresponse\n* cache.add(Request|url) addrequesturlcache.addfetchrequestresponsecache\n* cache.addAllsw installcache.addAll\n* cache.put(Request, Response) cache.addfetchresponsecache\n* cache.delete(Request|url)      \n\n \n### 3.3 Service Worker         \n\nswjs  \n\n```js\n//promise\nfunction registerServiceWorker(){\n    // service worker\n    return navigator.serviceWorker.register('./sw1.js').then(registration => {\n        console.log('');\n        // \n        return registration;\n    })\n    .catch(err => {\n        console.error('', err);\n    });\n}\nwindow.onload = function () {\n    //\n    if (!('serviceWorker' in navigator)) {\n        return;\n    }\n    registerServiceWorker()\n}\n```   \n### 3.4       \n\nService worker web \n serice worker  service worker\nservice worker  service worker \n service worker ,  \n \n* service worker \n*   \n\n\n  \n  \n* Installing   \n            Service Worker  install  \n* Installed\n           Service Worker  Service Worker \n* Activating \n           Service Worker  worker \n* Activated   \n           activate  () fetch ()sync ()push ()\n* Redundant\n           \n         \nPWA\n \n* install \n \nevent.waitUntil() Promise  Promise  resolve \nself.skipWaiting()self  context  global  waiting  Service Worker  activate \n \n* activate \n \nevent.waitUntil() Promise  Promise  resolve \nself.clients.claim() activate ,  Service Worker    \n\n```js \nconst CURCACHE = 'CURCACHE_test_1'\nconst RUNTIME = 'runtime';\nconst CURCACHE_URLS = [\n    './',\n    '/asset/sw.jpg',\n    'index.js'\n]\nself.addEventListener('install',e=>{\n    e.waitUntil(\n      //\n        caches.open(CURCACHE).then(cache=>{\n            cache.addAll(CURCACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})  \n  //\n  self.addEventListener('fetch', e => {\n    e.respondWith(\n      // \n      caches.match(e.request).then(function(response) {\n        if (response != null) {\n          //\n          return response\n        }\n        //\n        return fetch(e.request.url)\n      })\n    )\n  });\n```  \n#### service worker  \n\nservice worker    \n\n*  service worker    \n             \n*  service worker install\n* service worker service worker  waiting \n*  service worker  servicer worker \n*  service worker  activate   \n\n```js\nconst CURCACHE = 'precache_test_1'\n//keyprecache_test_2 CURCACHE\nself.addEventListener('activate', e => {\n  e.waitUntil(\n      //keys\n      caches.keys().then(cacheNames=>{\n        return Promise.all(\n          cacheNames.map(function(cacheName) {\n            //key,\n            if (cacheName !== CURCACHE) {\n              return caches.delete(cacheName);\n            }\n          })\n    )}).then(() => self.clients.claim())\n )\n}) \n```  \n\nservice workerservice worker  \n\n<img src='/img/pwa/3.png'>\nsw.jssw\n<img src='/img/pwa/4.png'>  \n   \n  \n##   \n\n PWA   \n\n### manifest.json  \n\n manifest.json \n \n```js\n{\n    //\n    \"name\": \"PQJ-PWA\",\n    //\n    \"short_name\":\"PQJ\",\n    \"description\": \"demo\",\n    //\n    \"start_url\": \"/index.html\",\n    //\n    \"icons\": {\n      \"128\": \"/asset/sw.jpg\"\n    },\n    \"developer\": {\n      \"name\": \"pqj\",\n      \"url\": \"\"\n    },\n    \"display\": \"standalone\",\n    \"background_color\": \"#287fc5\",\n    \"theme_color\": \"#fff\",\n    \"permissions\": {\n        \"desktop-notification\": {\n          \"description\": \"Needed for creating system notifications.\"\n        }\n      }\n}  \n```  \nhtml\n\n```js\n<link rel=\"manifest\" href=\"/mainfest.json\" />\n```  \nchrome(),icon\n  \n  \n###   \nservice worker   \n   \n \n* \n* service worker \n*   \n\n```js \nfunction getPermission(){\n    return new Promise((resolve, reject) => {\n        //\n        const permissionPromise = Notification.requestPermission(result => {\n            resolve(result);\n        });\n    }).then(result => {\n            //\n            if (result === 'granted') {\n                execute();\n            }\n            else {\n                console.log('no permission');\n            }\n        });\n} \n```  \n  \n\n```js\nfunction execute() {\n    // \n    registerServiceWorker().then(registration => {\n        // \n        registration.showNotification('Hello World!');\n    });\n}  \n```  \n###    \n####   \n[https://lavas.baidu.com/doc](https://lavas.baidu.com/doc)  \n[https://developer.mozilla.org/zh-CN/Apps/Progressive](https://developer.mozilla.org/zh-CN/Apps/Progressive)\n[](https://github.com/xiaoxiangdaiyu/PWA)PWAwebweb\npwa \n\n  \n\n","slug":"pwa","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1v000xgw921glllwi0","content":"<h2 id=\"web-\"><a href=\"#web-\" class=\"headerlink\" title=\"web \"></a>web </h2><p>web<br><img src=\"/img/pwa/1.png\"><br></p>\n<ul>\n<li>- </li>\n<li>web  </li>\n<li><p> </p>\n<a id=\"more\"></a>\n<p>web app </p>\n<h2 id=\"PWA\"><a href=\"#PWA\" class=\"headerlink\" title=\"PWA\"></a>PWA</h2><p>PWA Progressive Web Apps(Web)web<br>    </p>\n</li>\n<li><p>Reliable<br>  </p>\n</li>\n<li>Fast<br>  </li>\n<li>(Engaging)<br>     </li>\n</ul>\n<p>PWA  PWA Checklist   </p>\n<p>  </p>\n<ul>\n<li> - </li>\n<li> -  Service Worker </li>\n<li> -  App Shell  Native App  Native App </li>\n<li> - </li>\n<li> -  HTTPS </li>\n<li> -  Service Worker </li>\n<li> - </li>\n<li> -  webapp </li>\n<li> -   </li>\n</ul>\n<p>,PWAweb  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ul>\n<li>App Manifest</li>\n<li>Service Worker</li>\n<li>Notifications API</li>\n<li>Push API  </li>\n</ul>\n<p>Service WorkerPWAappapp </p>\n<h3 id=\"3-1-service-worker\"><a href=\"#3-1-service-worker\" class=\"headerlink\" title=\"3.1 service worker\"></a>3.1 service worker</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>web<br>AppCache(h5)<br> Application Cache is a douchebag<br></p>\n<h4 id=\"workers\"><a href=\"#workers\" class=\"headerlink\" title=\"workers\"></a>workers</h4><p><br> javaScript web,<br>W3CWeb Worker  API<br>Web Worker <br><br>Web WorkerW3Cservice worker<br><br>  </p>\n<p>Service Worker    </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><br>PWAService WorkerPWA <h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>Service Worker </li>\n<li> Service Worker  HTTPS <br>   Service Worker  host  localhost  127.0.0.1 </li>\n<li>Service Worker  Cache API ()</li>\n<li> HTML5 fetch API</li>\n<li><p> Promise <br>  </p>\n<p><img src=\"/img/pwa/2.png\"><br>iOS  safariiOS11.3<br>IEEdge     </p>\n<h3 id=\"3-2-Cache\"><a href=\"#3-2-Cache\" class=\"headerlink\" title=\"3.2 Cache\"></a>3.2 Cache</h3></li>\n</ul>\n<p>CacheService WorkerAPIService Worker<br>cachecssjshtml<br>cachekey-valuekeyrequestvalueresponse   </p>\n<ul>\n<li>caches.open(cacheName) cache   </li>\n<li>cachesglobalcachePromise</li>\n<li>cache.keys() cachevalue</li>\n<li>cache.match(Request|url) cacherequestPromise  </li>\n<li>cache.matchAllmatchrequestresponse</li>\n<li>cache.add(Request|url) addrequesturlcache.addfetchrequestresponsecache</li>\n<li>cache.addAllsw installcache.addAll</li>\n<li>cache.put(Request, Response) cache.addfetchresponsecache</li>\n<li>cache.delete(Request|url)      </li>\n</ul>\n<h3 id=\"3-3-Service-Worker\"><a href=\"#3-3-Service-Worker\" class=\"headerlink\" title=\"3.3 Service Worker\"></a>3.3 Service Worker</h3><p>swjs  </p>\n<pre><code class=\"js\"><span class=\"comment\">//promise</span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">registerServiceWorker</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"comment\">// service worker</span>\n    <span class=\"keyword\">return</span> navigator.serviceWorker.register(<span class=\"string\">'./sw1.js'</span>).then(<span class=\"function\"><span class=\"params\">registration</span> =&gt;</span> {\n        <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>);\n        <span class=\"comment\">// </span>\n        <span class=\"keyword\">return</span> registration;\n    })\n    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {\n        <span class=\"built_in\">console</span>.error(<span class=\"string\">''</span>, err);\n    });\n}\n<span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{\n    <span class=\"comment\">//</span>\n    <span class=\"keyword\">if</span> (!(<span class=\"string\">'serviceWorker'</span> <span class=\"keyword\">in</span> navigator)) {\n        <span class=\"keyword\">return</span>;\n    }\n    registerServiceWorker()\n}\n</code></pre>\n<h3 id=\"3-4-\"><a href=\"#3-4-\" class=\"headerlink\" title=\"3.4 \"></a>3.4 </h3><p>Service worker web <br> serice worker  service worker<br>service worker  service worker <br> service worker ,  </p>\n<ul>\n<li>service worker </li>\n<li>  </li>\n</ul>\n<p>  </p>\n<ul>\n<li>Installing   <pre><code> Service Worker  install  \n</code></pre></li>\n<li>Installed<pre><code>Service Worker  Service Worker \n</code></pre></li>\n<li>Activating <pre><code> Service Worker  worker \n</code></pre></li>\n<li>Activated   <pre><code> activate  () fetch ()sync ()push ()\n</code></pre></li>\n<li>Redundant<pre><code>  \n</code></pre></li>\n</ul>\n<p>PWA</p>\n<ul>\n<li>install </li>\n</ul>\n<p>event.waitUntil() Promise  Promise  resolve <br>self.skipWaiting()self  context  global  waiting  Service Worker  activate </p>\n<ul>\n<li>activate </li>\n</ul>\n<p>event.waitUntil() Promise  Promise  resolve <br>self.clients.claim() activate ,  Service Worker    </p>\n<pre><code class=\"js\"><span class=\"keyword\">const</span> CURCACHE = <span class=\"string\">'CURCACHE_test_1'</span>\n<span class=\"keyword\">const</span> RUNTIME = <span class=\"string\">'runtime'</span>;\n<span class=\"keyword\">const</span> CURCACHE_URLS = [\n    <span class=\"string\">'./'</span>,\n    <span class=\"string\">'/asset/sw.jpg'</span>,\n    <span class=\"string\">'index.js'</span>\n]\nself.addEventListener(<span class=\"string\">'install'</span>,e=&gt;{\n    e.waitUntil(\n      <span class=\"comment\">//</span>\n        caches.open(CURCACHE).then(<span class=\"function\"><span class=\"params\">cache</span>=&gt;</span>{\n            cache.addAll(CURCACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})  \n  <span class=\"comment\">//</span>\n  self.addEventListener(<span class=\"string\">'fetch'</span>, e =&gt; {\n    e.respondWith(\n      <span class=\"comment\">// </span>\n      caches.match(e.request).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>{\n        <span class=\"keyword\">if</span> (response != <span class=\"literal\">null</span>) {\n          <span class=\"comment\">//</span>\n          <span class=\"keyword\">return</span> response\n        }\n        <span class=\"comment\">//</span>\n        <span class=\"keyword\">return</span> fetch(e.request.url)\n      })\n    )\n  });\n</code></pre>\n<h4 id=\"service-worker\"><a href=\"#service-worker\" class=\"headerlink\" title=\"service worker\"></a>service worker</h4><p>service worker    </p>\n<ul>\n<li> service worker    <pre><code>  \n</code></pre></li>\n<li> service worker install</li>\n<li>service worker service worker  waiting </li>\n<li> service worker  servicer worker </li>\n<li> service worker  activate   </li>\n</ul>\n<pre><code class=\"js\"><span class=\"keyword\">const</span> CURCACHE = <span class=\"string\">'precache_test_1'</span>\n<span class=\"comment\">//keyprecache_test_2 CURCACHE</span>\nself.addEventListener(<span class=\"string\">'activate'</span>, e =&gt; {\n  e.waitUntil(\n      <span class=\"comment\">//keys</span>\n      caches.keys().then(<span class=\"function\"><span class=\"params\">cacheNames</span>=&gt;</span>{\n        <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all(\n          cacheNames.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cacheName</span>) </span>{\n            <span class=\"comment\">//key,</span>\n            <span class=\"keyword\">if</span> (cacheName !== CURCACHE) {\n              <span class=\"keyword\">return</span> caches.delete(cacheName);\n            }\n          })\n    )}).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.clients.claim())\n )\n}) \n</code></pre>\n<p>service workerservice worker  </p>\n<p><img src=\"/img/pwa/3.png\"><br>sw.jssw<br><img src=\"/img/pwa/4.png\"><br>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> PWA   </p>\n<h3 id=\"manifest-json\"><a href=\"#manifest-json\" class=\"headerlink\" title=\"manifest.json\"></a>manifest.json</h3><p> manifest.json </p>\n<pre><code class=\"js\">{\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"PQJ-PWA\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"short_name\"</span>:<span class=\"string\">\"PQJ\"</span>,\n    <span class=\"string\">\"description\"</span>: <span class=\"string\">\"demo\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"start_url\"</span>: <span class=\"string\">\"/index.html\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"icons\"</span>: {\n      <span class=\"string\">\"128\"</span>: <span class=\"string\">\"/asset/sw.jpg\"</span>\n    },\n    <span class=\"string\">\"developer\"</span>: {\n      <span class=\"string\">\"name\"</span>: <span class=\"string\">\"pqj\"</span>,\n      <span class=\"string\">\"url\"</span>: <span class=\"string\">\"\"</span>\n    },\n    <span class=\"string\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,\n    <span class=\"string\">\"background_color\"</span>: <span class=\"string\">\"#287fc5\"</span>,\n    <span class=\"string\">\"theme_color\"</span>: <span class=\"string\">\"#fff\"</span>,\n    <span class=\"string\">\"permissions\"</span>: {\n        <span class=\"string\">\"desktop-notification\"</span>: {\n          <span class=\"string\">\"description\"</span>: <span class=\"string\">\"Needed for creating system notifications.\"</span>\n        }\n      }\n}  \n</code></pre>\n<p>html</p>\n<pre><code class=\"js\">&lt;link rel=<span class=\"string\">\"manifest\"</span> href=<span class=\"string\">\"/mainfest.json\"</span> /&gt;\n</code></pre>\n<p>chrome(),icon<br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>service worker<br>   </p>\n<ul>\n<li></li>\n<li>service worker </li>\n<li>  </li>\n</ul>\n<pre><code class=\"js\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPermission</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> {\n        <span class=\"comment\">//</span>\n        <span class=\"keyword\">const</span> permissionPromise = Notification.requestPermission(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {\n            resolve(result);\n        });\n    }).then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {\n            <span class=\"comment\">//</span>\n            <span class=\"keyword\">if</span> (result === <span class=\"string\">'granted'</span>) {\n                execute();\n            }\n            <span class=\"keyword\">else</span> {\n                <span class=\"built_in\">console</span>.log(<span class=\"string\">'no permission'</span>);\n            }\n        });\n} \n</code></pre>\n<p>  </p>\n<pre><code class=\"js\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"comment\">// </span>\n    registerServiceWorker().then(<span class=\"function\"><span class=\"params\">registration</span> =&gt;</span> {\n        <span class=\"comment\">// </span>\n        registration.showNotification(<span class=\"string\">'Hello World!'</span>);\n    });\n}  \n</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://lavas.baidu.com/doc\" target=\"_blank\" rel=\"noopener\">https://lavas.baidu.com/doc</a><br><a href=\"https://developer.mozilla.org/zh-CN/Apps/Progressive\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/Apps/Progressive</a><br><a href=\"https://github.com/xiaoxiangdaiyu/PWA\" target=\"_blank\" rel=\"noopener\"></a>PWAwebweb<br>pwa </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"web-\"><a href=\"#web-\" class=\"headerlink\" title=\"web \"></a>web </h2><p>web<br><img src=\"/img/pwa/1.png\"><br></p>\n<ul>\n<li>- </li>\n<li>web  </li>\n<li><p> </p>","more":"<p>web app </p>\n<h2 id=\"PWA\"><a href=\"#PWA\" class=\"headerlink\" title=\"PWA\"></a>PWA</h2><p>PWA Progressive Web Apps(Web)web<br>    </p>\n</li>\n<li><p>Reliable<br>  </p>\n</li>\n<li>Fast<br>  </li>\n<li>(Engaging)<br>     </li>\n</ul>\n<p>PWA  PWA Checklist   </p>\n<p>  </p>\n<ul>\n<li> - </li>\n<li> -  Service Worker </li>\n<li> -  App Shell  Native App  Native App </li>\n<li> - </li>\n<li> -  HTTPS </li>\n<li> -  Service Worker </li>\n<li> - </li>\n<li> -  webapp </li>\n<li> -   </li>\n</ul>\n<p>,PWAweb  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ul>\n<li>App Manifest</li>\n<li>Service Worker</li>\n<li>Notifications API</li>\n<li>Push API  </li>\n</ul>\n<p>Service WorkerPWAappapp </p>\n<h3 id=\"3-1-service-worker\"><a href=\"#3-1-service-worker\" class=\"headerlink\" title=\"3.1 service worker\"></a>3.1 service worker</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>web<br>AppCache(h5)<br> Application Cache is a douchebag<br></p>\n<h4 id=\"workers\"><a href=\"#workers\" class=\"headerlink\" title=\"workers\"></a>workers</h4><p><br> javaScript web,<br>W3CWeb Worker  API<br>Web Worker <br><br>Web WorkerW3Cservice worker<br><br>  </p>\n<p>Service Worker    </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><br>PWAService WorkerPWA <h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>Service Worker </li>\n<li> Service Worker  HTTPS <br>   Service Worker  host  localhost  127.0.0.1 </li>\n<li>Service Worker  Cache API ()</li>\n<li> HTML5 fetch API</li>\n<li><p> Promise <br>  </p>\n<p><img src=\"/img/pwa/2.png\"><br>iOS  safariiOS11.3<br>IEEdge     </p>\n<h3 id=\"3-2-Cache\"><a href=\"#3-2-Cache\" class=\"headerlink\" title=\"3.2 Cache\"></a>3.2 Cache</h3></li>\n</ul>\n<p>CacheService WorkerAPIService Worker<br>cachecssjshtml<br>cachekey-valuekeyrequestvalueresponse   </p>\n<ul>\n<li>caches.open(cacheName) cache   </li>\n<li>cachesglobalcachePromise</li>\n<li>cache.keys() cachevalue</li>\n<li>cache.match(Request|url) cacherequestPromise  </li>\n<li>cache.matchAllmatchrequestresponse</li>\n<li>cache.add(Request|url) addrequesturlcache.addfetchrequestresponsecache</li>\n<li>cache.addAllsw installcache.addAll</li>\n<li>cache.put(Request, Response) cache.addfetchresponsecache</li>\n<li>cache.delete(Request|url)      </li>\n</ul>\n<h3 id=\"3-3-Service-Worker\"><a href=\"#3-3-Service-Worker\" class=\"headerlink\" title=\"3.3 Service Worker\"></a>3.3 Service Worker</h3><p>swjs  </p>\n<pre><code class=\"js\"><span class=\"comment\">//promise</span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">registerServiceWorker</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"comment\">// service worker</span>\n    <span class=\"keyword\">return</span> navigator.serviceWorker.register(<span class=\"string\">'./sw1.js'</span>).then(<span class=\"function\"><span class=\"params\">registration</span> =&gt;</span> {\n        <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>);\n        <span class=\"comment\">// </span>\n        <span class=\"keyword\">return</span> registration;\n    })\n    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {\n        <span class=\"built_in\">console</span>.error(<span class=\"string\">''</span>, err);\n    });\n}\n<span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{\n    <span class=\"comment\">//</span>\n    <span class=\"keyword\">if</span> (!(<span class=\"string\">'serviceWorker'</span> <span class=\"keyword\">in</span> navigator)) {\n        <span class=\"keyword\">return</span>;\n    }\n    registerServiceWorker()\n}\n</code></pre>\n<h3 id=\"3-4-\"><a href=\"#3-4-\" class=\"headerlink\" title=\"3.4 \"></a>3.4 </h3><p>Service worker web <br> serice worker  service worker<br>service worker  service worker <br> service worker ,  </p>\n<ul>\n<li>service worker </li>\n<li>  </li>\n</ul>\n<p>  </p>\n<ul>\n<li>Installing   <pre><code> Service Worker  install  \n</code></pre></li>\n<li>Installed<pre><code>Service Worker  Service Worker \n</code></pre></li>\n<li>Activating <pre><code> Service Worker  worker \n</code></pre></li>\n<li>Activated   <pre><code> activate  () fetch ()sync ()push ()\n</code></pre></li>\n<li>Redundant<pre><code>  \n</code></pre></li>\n</ul>\n<p>PWA</p>\n<ul>\n<li>install </li>\n</ul>\n<p>event.waitUntil() Promise  Promise  resolve <br>self.skipWaiting()self  context  global  waiting  Service Worker  activate </p>\n<ul>\n<li>activate </li>\n</ul>\n<p>event.waitUntil() Promise  Promise  resolve <br>self.clients.claim() activate ,  Service Worker    </p>\n<pre><code class=\"js\"><span class=\"keyword\">const</span> CURCACHE = <span class=\"string\">'CURCACHE_test_1'</span>\n<span class=\"keyword\">const</span> RUNTIME = <span class=\"string\">'runtime'</span>;\n<span class=\"keyword\">const</span> CURCACHE_URLS = [\n    <span class=\"string\">'./'</span>,\n    <span class=\"string\">'/asset/sw.jpg'</span>,\n    <span class=\"string\">'index.js'</span>\n]\nself.addEventListener(<span class=\"string\">'install'</span>,e=&gt;{\n    e.waitUntil(\n      <span class=\"comment\">//</span>\n        caches.open(CURCACHE).then(<span class=\"function\"><span class=\"params\">cache</span>=&gt;</span>{\n            cache.addAll(CURCACHE_URLS)\n        }).then(\n            self.skipWaiting()\n        )\n    )\n})  \n  <span class=\"comment\">//</span>\n  self.addEventListener(<span class=\"string\">'fetch'</span>, e =&gt; {\n    e.respondWith(\n      <span class=\"comment\">// </span>\n      caches.match(e.request).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>{\n        <span class=\"keyword\">if</span> (response != <span class=\"literal\">null</span>) {\n          <span class=\"comment\">//</span>\n          <span class=\"keyword\">return</span> response\n        }\n        <span class=\"comment\">//</span>\n        <span class=\"keyword\">return</span> fetch(e.request.url)\n      })\n    )\n  });\n</code></pre>\n<h4 id=\"service-worker\"><a href=\"#service-worker\" class=\"headerlink\" title=\"service worker\"></a>service worker</h4><p>service worker    </p>\n<ul>\n<li> service worker    <pre><code>  \n</code></pre></li>\n<li> service worker install</li>\n<li>service worker service worker  waiting </li>\n<li> service worker  servicer worker </li>\n<li> service worker  activate   </li>\n</ul>\n<pre><code class=\"js\"><span class=\"keyword\">const</span> CURCACHE = <span class=\"string\">'precache_test_1'</span>\n<span class=\"comment\">//keyprecache_test_2 CURCACHE</span>\nself.addEventListener(<span class=\"string\">'activate'</span>, e =&gt; {\n  e.waitUntil(\n      <span class=\"comment\">//keys</span>\n      caches.keys().then(<span class=\"function\"><span class=\"params\">cacheNames</span>=&gt;</span>{\n        <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all(\n          cacheNames.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cacheName</span>) </span>{\n            <span class=\"comment\">//key,</span>\n            <span class=\"keyword\">if</span> (cacheName !== CURCACHE) {\n              <span class=\"keyword\">return</span> caches.delete(cacheName);\n            }\n          })\n    )}).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.clients.claim())\n )\n}) \n</code></pre>\n<p>service workerservice worker  </p>\n<p><img src=\"/img/pwa/3.png\"><br>sw.jssw<br><img src=\"/img/pwa/4.png\"><br>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> PWA   </p>\n<h3 id=\"manifest-json\"><a href=\"#manifest-json\" class=\"headerlink\" title=\"manifest.json\"></a>manifest.json</h3><p> manifest.json </p>\n<pre><code class=\"js\">{\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"PQJ-PWA\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"short_name\"</span>:<span class=\"string\">\"PQJ\"</span>,\n    <span class=\"string\">\"description\"</span>: <span class=\"string\">\"demo\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"start_url\"</span>: <span class=\"string\">\"/index.html\"</span>,\n    <span class=\"comment\">//</span>\n    <span class=\"string\">\"icons\"</span>: {\n      <span class=\"string\">\"128\"</span>: <span class=\"string\">\"/asset/sw.jpg\"</span>\n    },\n    <span class=\"string\">\"developer\"</span>: {\n      <span class=\"string\">\"name\"</span>: <span class=\"string\">\"pqj\"</span>,\n      <span class=\"string\">\"url\"</span>: <span class=\"string\">\"\"</span>\n    },\n    <span class=\"string\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,\n    <span class=\"string\">\"background_color\"</span>: <span class=\"string\">\"#287fc5\"</span>,\n    <span class=\"string\">\"theme_color\"</span>: <span class=\"string\">\"#fff\"</span>,\n    <span class=\"string\">\"permissions\"</span>: {\n        <span class=\"string\">\"desktop-notification\"</span>: {\n          <span class=\"string\">\"description\"</span>: <span class=\"string\">\"Needed for creating system notifications.\"</span>\n        }\n      }\n}  \n</code></pre>\n<p>html</p>\n<pre><code class=\"js\">&lt;link rel=<span class=\"string\">\"manifest\"</span> href=<span class=\"string\">\"/mainfest.json\"</span> /&gt;\n</code></pre>\n<p>chrome(),icon<br>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>service worker<br>   </p>\n<ul>\n<li></li>\n<li>service worker </li>\n<li>  </li>\n</ul>\n<pre><code class=\"js\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPermission</span>(<span class=\"params\"></span>)</span>{\n    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> {\n        <span class=\"comment\">//</span>\n        <span class=\"keyword\">const</span> permissionPromise = Notification.requestPermission(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {\n            resolve(result);\n        });\n    }).then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {\n            <span class=\"comment\">//</span>\n            <span class=\"keyword\">if</span> (result === <span class=\"string\">'granted'</span>) {\n                execute();\n            }\n            <span class=\"keyword\">else</span> {\n                <span class=\"built_in\">console</span>.log(<span class=\"string\">'no permission'</span>);\n            }\n        });\n} \n</code></pre>\n<p>  </p>\n<pre><code class=\"js\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"comment\">// </span>\n    registerServiceWorker().then(<span class=\"function\"><span class=\"params\">registration</span> =&gt;</span> {\n        <span class=\"comment\">// </span>\n        registration.showNotification(<span class=\"string\">'Hello World!'</span>);\n    });\n}  \n</code></pre>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://lavas.baidu.com/doc\" target=\"_blank\" rel=\"noopener\">https://lavas.baidu.com/doc</a><br><a href=\"https://developer.mozilla.org/zh-CN/Apps/Progressive\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/Apps/Progressive</a><br><a href=\"https://github.com/xiaoxiangdaiyu/PWA\" target=\"_blank\" rel=\"noopener\"></a>PWAwebweb<br>pwa </p>"},{"title":" react-redux ","date":"2019-05-19T16:00:00.000Z","_content":"\n## \nReduxreactreduxReactreact-reduxreactreduxreact-redux\n<!-- more -->\n## redux \nredux[redux](https://juejin.im/post/5b208ef06fb9a01e615ed8cb)  \n\nRedux  JavaScript \nactionstorereducer  \n\n\n\n1. \n2. \n3. \n\nredux\n<img src='https://user-gold-cdn.xitu.io/2019/5/15/16abbbc0689d7fe1?w=638&h=479&f=jpeg&s=21322'/>\n  \n\n### action\n  view()actonreducer\n\n```js\nfunction addTodo(text) {\n  return {\n    // \n    type: ADD_TODO,\n    text\n  }\n}\n```\n\n### reducer\n  \nstateaction\n\n```js\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    //   \n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    default:\n      return state\n  }\n}\n```\n\n### store\nstore\ndispatchsubscribleapi\n  \n\n```js\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nlet store = createStore(todoApp)\nimport {\n  addTodo} from './actions'\n// \nconst unsubscribe = store.subscribe(() => console.log(store.getState()))\n//  action\nstore.dispatch(addTodo('Learn about actions'))\n// \nunsubscribe()\n```\nredux\n\n* store.subscribe\n* stroe.getState()\n* actionreducer\n  \nreact-redux[demo](https://github.com/reduxjs/redux/tree/master/examples/todos/src)Reactredux\n\n### \n  \n\n1. store.subscrible() \n2. stateStore.getState()\n3. Providerconnect\n\nReact-reduxReactpropsstate\n\n## react-redux\n react-reduxreactHOC [](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0) \n\n1Provider\n2containerconnectstore.subscrible\n\n### provider \nproviderconnectprops\n\n```js\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nimport App from './components/App'\n\nlet store = createStore(todoApp)\nrender(\n  // store\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n```\n  \nProviderReact  \nstorestorepropscontext\n\n#### \n\n```js\nimport { Component, Children } from 'react'\nexport default class Provider extends Component {\n  // context \n  getChildContext() {\n    return { store: this.store }\n  }\n\n  constructor(props, context) {\n    super(props, context)\n    // storeProvider\n    this.store = props.store\n  }\n\n  render() {\n    // childchild\n    return Children.only(this.props.children)\n  }\n}\n```\n\nProviderstoreconect\n\n### connect\n\nconnectstorestore  \nReactHOC  \n\n```js\nconnect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])\n```\n\n[http://cn.redux.js.org/docs/react-redux/api.html](http://cn.redux.js.org/docs/react-redux/api.html)  \n\n* [mapStateToProps(state, [ownProps]): stateProps] (Function):  Redux store  Redux store mapStateToProps  props \n* [mapDispatchToProps(dispatch, [ownProps]): dispatchProps](Object or Function):  Redux action creatordispatch action creator  props \n* [mergeProps(stateProps, dispatchProps, ownProps): props] (Function): mapStateToProps()  mapDispatchToProps()  props  props \n* [options] (Object)  connector \n  * [pure = true] (Boolean):  trueconnector  shouldComponentUpdate  mergeProps true\n  * [withRef = false] (Boolean):  trueconnector  getWrappedInstance() false\n\n#### \n\n```js\nimport { connect } from 'react-redux'\nimport { toggleTodo } from '../actions'\nimport TodoList from '../components/TodoList'\nimport { VisibilityFilters } from '../actions'\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case VisibilityFilters.SHOW_ALL:\n      return todos\n    case VisibilityFilters.SHOW_COMPLETED:\n      return todos.filter(t => t.completed)\n    case VisibilityFilters.SHOW_ACTIVE:\n      return todos.filter(t => !t.completed)\n    default:\n      throw new Error('Unknown filter: ' + filter)\n  }\n}\n// storestateprops\n// mapStateToPropspropspropsstorestorestate.todos \nconst mapStateToProps = state => ({\n  todos: getVisibleTodos(state.todos, state.visibilityFilter)\n})\n// action \n// actionProps,toggleTodo\nconst mapDispatchToProps = dispatch => ({\n  toggleTodo: id => dispatch(toggleTodo(id))\n})\n// TodoList\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n```\n\n### \nconnect\n\n####  connect\n()\n wrapWithConnect \n\n```js\n// \nconst defaultMapStateToProps = state => ({}) // eslint-disable-line no-unused-vars\nconst defaultMapDispatchToProps = dispatch => ({ dispatch })\nconst defaultMergeProps = (stateProps, dispatchProps, parentProps) => ({\n  ...parentProps,\n  ...stateProps,\n  ...dispatchProps\n})\n\nexport default function connect(mapStateToProps, mapDispatchToProps, mergeProps, options = {}) {\n  // storestate\n  const shouldSubscribe = Boolean(mapStateToProps)\n  // state mapStateToProps\n  const mapState = mapStateToProps || defaultMapStateToProps\n\n  let mapDispatch\n  // action creater \n  if (typeof mapDispatchToProps === 'function') {\n    // \n    mapDispatch = mapDispatchToProps\n  } else if (!mapDispatchToProps) {\n    // \n    mapDispatch = defaultMapDispatchToProps\n  } else {\n    //  action Creater \n    mapDispatch = wrapActionCreators(mapDispatchToProps)\n  }\n\n  const finalMergeProps = mergeProps || defaultMergeProps\n  const { pure = true, withRef = false } = options\n  const checkMergedEquals = pure && finalMergeProps !== defaultMergeProps\nfunction wrapWithConnect(WrappedComponent) {\n    const connectDisplayName = `Connect(${getDisplayName(WrappedComponent)})`\n     class Connect extends Component {/****/}\n    // ****\n    return hoistStatics(Connect, WrappedComponent)\n    }\n```\n#### wrapWithConnect  \nwrapWithConnect (connectHOCconnect\n\n```js\n// *********\n// hoistStatics\n//  connectWrappedComponentmix\nreturn hoistStatics(Connect, WrappedComponent)\n```\n\nHOC  reduxprops\n\n#### connect\nconnect\n\n####  storestate\n\nthis.store ProviderStore\n\n```js\n// storestate\n      constructor(props, context) {\n        super(props, context)\n        this.version = version\n        // propscontextproviderstore\n        this.store = props.store || context.store\n        \n        //  state\n        const storeState = this.store.getState()\n        // state\n        this.state = { storeState }\n        this.clearCache()\n      }\n```\n#### shouldComponentUpdate\n\nshouldComponentUpdateoptions pure \n\n```js\nshouldComponentUpdate() {\n        return !pure || this.haveOwnPropsChanged || this.hasStoreStateChanged\n      }\n```\n#### componentDidMount \n componentDidMount shouldSubscribe(mapStateToPropstrue)\n \n ```js\n componentDidMount() {\n        this.trySubscribe()\n      }\n trySubscribe() {\n        //  \n        if (shouldSubscribe && !this.unsubscribe) {\n          // subscribe HOC\n          // this.unsubscribeunsubscribe\n          this.unsubscribe = this.store.subscribe(this.handleChange.bind(this))\n          this.handleChange()\n        }\n      }    \n ```\n \n#### componentWillReceiveProps\n \n componentWillReceiveProps  pure  shallowEqual\n shallowEqualImmtable\n \n```js\ncomponentWillReceiveProps(nextProps) {\n        if (!pure || !shallowEqual(nextProps, this.props)) {\n          this.haveOwnPropsChanged = true\n        }\n      }\n```\n#### shallowEqual\nImmutable  \nkeyvalue  \n \n ```js\n export default function shallowEqual(objA, objB) {\n   // \n  if (objA === objB) {\n    return true\n  }\n\n  const keysA = Object.keys(objA)\n  const keysB = Object.keys(objB)\n  // key \n  if (keysA.length !== keysB.length) {\n    return false\n  }\n  // vakue\n  const hasOwn = Object.prototype.hasOwnProperty\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) ||\n        objA[keysA[i]] !== objB[keysA[i]]) {\n      return false\n    }\n  }\n\n  return true\n}\n ```\n \n#### render\n renderprops\n render WrappedComponentprops\n \n ```js\n // this.mergedProps \n if (withRef) {\n          this.renderedElement = createElement(WrappedComponent, {\n            ...this.mergedProps,\n            ref: 'wrappedInstance'\n          })\n        } else {\n          this.renderedElement = createElement(WrappedComponent,\n            this.mergedProps\n          )\n        }\n ```\n\nthis.mergedProps propsmapStateToPropsmapDispatchToPropsmergePropsstate\n\n```js\n// \nthis.mergedProps = nextMergedProps = computeMergedProps(this.stateProps, this.dispatchProps, this.props)\n\n  /**\n     * props \n     * @param {*} stateProps mapStateToProps\n     * @param {*} dispatchProps mapDispatchToProps\n     * @param {*} parentProps connectprops this.props\n     * @returns\n     */\n    function computeMergedProps(stateProps, dispatchProps, parentProps) {\n      // finalMergeProps mergeProps  defaultMergeProps \n      const mergedProps = finalMergeProps(stateProps, dispatchProps, parentProps)\n      if (process.env.NODE_ENV !== 'production') {\n        checkStateShape(mergedProps, 'mergeProps')\n      }\n      return mergedProps\n    }\n```\n\nconnect \n \n1. \n2. storeactionwarperedpropsstorestateaction\n3. \n\n\n\n\n## \n\n### \n[http://cn.redux.js.org/docs/react-redux/api.html](http://cn.redux.js.org/docs/react-redux/api.html)  \n\nreact-redux  \n  \n\n\n\n\n\n \n\n\n\n\n\n\n","source":"_posts/react-redux.md","raw":"---\ntitle:  react-redux   \ndate: 2019-05-20\n---\n\n## \nReduxreactreduxReactreact-reduxreactreduxreact-redux\n<!-- more -->\n## redux \nredux[redux](https://juejin.im/post/5b208ef06fb9a01e615ed8cb)  \n\nRedux  JavaScript \nactionstorereducer  \n\n\n\n1. \n2. \n3. \n\nredux\n<img src='https://user-gold-cdn.xitu.io/2019/5/15/16abbbc0689d7fe1?w=638&h=479&f=jpeg&s=21322'/>\n  \n\n### action\n  view()actonreducer\n\n```js\nfunction addTodo(text) {\n  return {\n    // \n    type: ADD_TODO,\n    text\n  }\n}\n```\n\n### reducer\n  \nstateaction\n\n```js\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    //   \n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    default:\n      return state\n  }\n}\n```\n\n### store\nstore\ndispatchsubscribleapi\n  \n\n```js\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nlet store = createStore(todoApp)\nimport {\n  addTodo} from './actions'\n// \nconst unsubscribe = store.subscribe(() => console.log(store.getState()))\n//  action\nstore.dispatch(addTodo('Learn about actions'))\n// \nunsubscribe()\n```\nredux\n\n* store.subscribe\n* stroe.getState()\n* actionreducer\n  \nreact-redux[demo](https://github.com/reduxjs/redux/tree/master/examples/todos/src)Reactredux\n\n### \n  \n\n1. store.subscrible() \n2. stateStore.getState()\n3. Providerconnect\n\nReact-reduxReactpropsstate\n\n## react-redux\n react-reduxreactHOC [](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0) \n\n1Provider\n2containerconnectstore.subscrible\n\n### provider \nproviderconnectprops\n\n```js\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nimport App from './components/App'\n\nlet store = createStore(todoApp)\nrender(\n  // store\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n```\n  \nProviderReact  \nstorestorepropscontext\n\n#### \n\n```js\nimport { Component, Children } from 'react'\nexport default class Provider extends Component {\n  // context \n  getChildContext() {\n    return { store: this.store }\n  }\n\n  constructor(props, context) {\n    super(props, context)\n    // storeProvider\n    this.store = props.store\n  }\n\n  render() {\n    // childchild\n    return Children.only(this.props.children)\n  }\n}\n```\n\nProviderstoreconect\n\n### connect\n\nconnectstorestore  \nReactHOC  \n\n```js\nconnect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])\n```\n\n[http://cn.redux.js.org/docs/react-redux/api.html](http://cn.redux.js.org/docs/react-redux/api.html)  \n\n* [mapStateToProps(state, [ownProps]): stateProps] (Function):  Redux store  Redux store mapStateToProps  props \n* [mapDispatchToProps(dispatch, [ownProps]): dispatchProps](Object or Function):  Redux action creatordispatch action creator  props \n* [mergeProps(stateProps, dispatchProps, ownProps): props] (Function): mapStateToProps()  mapDispatchToProps()  props  props \n* [options] (Object)  connector \n  * [pure = true] (Boolean):  trueconnector  shouldComponentUpdate  mergeProps true\n  * [withRef = false] (Boolean):  trueconnector  getWrappedInstance() false\n\n#### \n\n```js\nimport { connect } from 'react-redux'\nimport { toggleTodo } from '../actions'\nimport TodoList from '../components/TodoList'\nimport { VisibilityFilters } from '../actions'\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case VisibilityFilters.SHOW_ALL:\n      return todos\n    case VisibilityFilters.SHOW_COMPLETED:\n      return todos.filter(t => t.completed)\n    case VisibilityFilters.SHOW_ACTIVE:\n      return todos.filter(t => !t.completed)\n    default:\n      throw new Error('Unknown filter: ' + filter)\n  }\n}\n// storestateprops\n// mapStateToPropspropspropsstorestorestate.todos \nconst mapStateToProps = state => ({\n  todos: getVisibleTodos(state.todos, state.visibilityFilter)\n})\n// action \n// actionProps,toggleTodo\nconst mapDispatchToProps = dispatch => ({\n  toggleTodo: id => dispatch(toggleTodo(id))\n})\n// TodoList\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n```\n\n### \nconnect\n\n####  connect\n()\n wrapWithConnect \n\n```js\n// \nconst defaultMapStateToProps = state => ({}) // eslint-disable-line no-unused-vars\nconst defaultMapDispatchToProps = dispatch => ({ dispatch })\nconst defaultMergeProps = (stateProps, dispatchProps, parentProps) => ({\n  ...parentProps,\n  ...stateProps,\n  ...dispatchProps\n})\n\nexport default function connect(mapStateToProps, mapDispatchToProps, mergeProps, options = {}) {\n  // storestate\n  const shouldSubscribe = Boolean(mapStateToProps)\n  // state mapStateToProps\n  const mapState = mapStateToProps || defaultMapStateToProps\n\n  let mapDispatch\n  // action creater \n  if (typeof mapDispatchToProps === 'function') {\n    // \n    mapDispatch = mapDispatchToProps\n  } else if (!mapDispatchToProps) {\n    // \n    mapDispatch = defaultMapDispatchToProps\n  } else {\n    //  action Creater \n    mapDispatch = wrapActionCreators(mapDispatchToProps)\n  }\n\n  const finalMergeProps = mergeProps || defaultMergeProps\n  const { pure = true, withRef = false } = options\n  const checkMergedEquals = pure && finalMergeProps !== defaultMergeProps\nfunction wrapWithConnect(WrappedComponent) {\n    const connectDisplayName = `Connect(${getDisplayName(WrappedComponent)})`\n     class Connect extends Component {/****/}\n    // ****\n    return hoistStatics(Connect, WrappedComponent)\n    }\n```\n#### wrapWithConnect  \nwrapWithConnect (connectHOCconnect\n\n```js\n// *********\n// hoistStatics\n//  connectWrappedComponentmix\nreturn hoistStatics(Connect, WrappedComponent)\n```\n\nHOC  reduxprops\n\n#### connect\nconnect\n\n####  storestate\n\nthis.store ProviderStore\n\n```js\n// storestate\n      constructor(props, context) {\n        super(props, context)\n        this.version = version\n        // propscontextproviderstore\n        this.store = props.store || context.store\n        \n        //  state\n        const storeState = this.store.getState()\n        // state\n        this.state = { storeState }\n        this.clearCache()\n      }\n```\n#### shouldComponentUpdate\n\nshouldComponentUpdateoptions pure \n\n```js\nshouldComponentUpdate() {\n        return !pure || this.haveOwnPropsChanged || this.hasStoreStateChanged\n      }\n```\n#### componentDidMount \n componentDidMount shouldSubscribe(mapStateToPropstrue)\n \n ```js\n componentDidMount() {\n        this.trySubscribe()\n      }\n trySubscribe() {\n        //  \n        if (shouldSubscribe && !this.unsubscribe) {\n          // subscribe HOC\n          // this.unsubscribeunsubscribe\n          this.unsubscribe = this.store.subscribe(this.handleChange.bind(this))\n          this.handleChange()\n        }\n      }    \n ```\n \n#### componentWillReceiveProps\n \n componentWillReceiveProps  pure  shallowEqual\n shallowEqualImmtable\n \n```js\ncomponentWillReceiveProps(nextProps) {\n        if (!pure || !shallowEqual(nextProps, this.props)) {\n          this.haveOwnPropsChanged = true\n        }\n      }\n```\n#### shallowEqual\nImmutable  \nkeyvalue  \n \n ```js\n export default function shallowEqual(objA, objB) {\n   // \n  if (objA === objB) {\n    return true\n  }\n\n  const keysA = Object.keys(objA)\n  const keysB = Object.keys(objB)\n  // key \n  if (keysA.length !== keysB.length) {\n    return false\n  }\n  // vakue\n  const hasOwn = Object.prototype.hasOwnProperty\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) ||\n        objA[keysA[i]] !== objB[keysA[i]]) {\n      return false\n    }\n  }\n\n  return true\n}\n ```\n \n#### render\n renderprops\n render WrappedComponentprops\n \n ```js\n // this.mergedProps \n if (withRef) {\n          this.renderedElement = createElement(WrappedComponent, {\n            ...this.mergedProps,\n            ref: 'wrappedInstance'\n          })\n        } else {\n          this.renderedElement = createElement(WrappedComponent,\n            this.mergedProps\n          )\n        }\n ```\n\nthis.mergedProps propsmapStateToPropsmapDispatchToPropsmergePropsstate\n\n```js\n// \nthis.mergedProps = nextMergedProps = computeMergedProps(this.stateProps, this.dispatchProps, this.props)\n\n  /**\n     * props \n     * @param {*} stateProps mapStateToProps\n     * @param {*} dispatchProps mapDispatchToProps\n     * @param {*} parentProps connectprops this.props\n     * @returns\n     */\n    function computeMergedProps(stateProps, dispatchProps, parentProps) {\n      // finalMergeProps mergeProps  defaultMergeProps \n      const mergedProps = finalMergeProps(stateProps, dispatchProps, parentProps)\n      if (process.env.NODE_ENV !== 'production') {\n        checkStateShape(mergedProps, 'mergeProps')\n      }\n      return mergedProps\n    }\n```\n\nconnect \n \n1. \n2. storeactionwarperedpropsstorestateaction\n3. \n\n\n\n\n## \n\n### \n[http://cn.redux.js.org/docs/react-redux/api.html](http://cn.redux.js.org/docs/react-redux/api.html)  \n\nreact-redux  \n  \n\n\n\n\n\n \n\n\n\n\n\n\n","slug":"react-redux","published":1,"updated":"2019-05-20T09:47:03.292Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1w000ygw9231maimyf","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReduxreactreduxReactreact-reduxreactreduxreact-redux<br><a id=\"more\"></a></p>\n<h2 id=\"redux-\"><a href=\"#redux-\" class=\"headerlink\" title=\"redux \"></a>redux </h2><p>redux<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb\" target=\"_blank\" rel=\"noopener\">redux</a>  </p>\n<p>Redux  JavaScript <br>actionstorereducer  </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p>redux<br><img src=\"https://user-gold-cdn.xitu.io/2019/5/15/16abbbc0689d7fe1?w=638&h=479&f=jpeg&s=21322\"><br>  </p>\n<h3 id=\"action\"><a href=\"#action\" class=\"headerlink\" title=\"action\"></a>action</h3><p>  view()actonreducer</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    text</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"reducer\"><a href=\"#reducer\" class=\"headerlink\" title=\"reducer\"></a>reducer</h3><p><br>stateaction</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        visibilityFilter: action.filter</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//   </span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            text: action.text,</span><br><span class=\"line\">            completed: <span class=\"literal\">false</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"store\"><a href=\"#store\" class=\"headerlink\" title=\"store\"></a>store</h3><p>store<br>dispatchsubscribleapi<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> todoApp <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(todoApp)</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  addTodo&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> unsubscribe = store.subscribe(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(store.getState()))</span><br><span class=\"line\"><span class=\"comment\">//  action</span></span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">'Learn about actions'</span>))</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">unsubscribe()</span><br></pre></td></tr></table></figure>\n<p>redux</p>\n<ul>\n<li>store.subscribe</li>\n<li>stroe.getState()</li>\n<li>actionreducer</li>\n</ul>\n<p>react-redux<a href=\"https://github.com/reduxjs/redux/tree/master/examples/todos/src\" target=\"_blank\" rel=\"noopener\">demo</a>Reactredux</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<ol>\n<li>store.subscrible() </li>\n<li>stateStore.getState()</li>\n<li>Providerconnect</li>\n</ol>\n<p>React-reduxReactpropsstate</p>\n<h2 id=\"react-redux\"><a href=\"#react-redux\" class=\"headerlink\" title=\"react-redux\"></a>react-redux</h2><p> react-reduxreactHOC <a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\"></a> <br><br>1Provider<br>2containerconnectstore.subscrible</p>\n<h3 id=\"provider-\"><a href=\"#provider-\" class=\"headerlink\" title=\"provider \"></a>provider </h3><p>providerconnectprops</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-dom'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> todoApp <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./components/App'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(todoApp)</span><br><span class=\"line\">render(</span><br><span class=\"line\">  <span class=\"comment\">// store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/Provider&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">  document.getElementById('root')</span></span><br><span class=\"line\"><span class=\"regexp\">)</span></span><br></pre></td></tr></table></figure>\n<p><br>ProviderReact<br>storestorepropscontext</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, Children &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Provider</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// context </span></span><br><span class=\"line\">  getChildContext() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">store</span>: <span class=\"keyword\">this</span>.store &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props, context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props, context)</span><br><span class=\"line\">    <span class=\"comment\">// storeProvider</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store = props.store</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// childchild</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Children.only(<span class=\"keyword\">this</span>.props.children)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Providerstoreconect</p>\n<h3 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h3><p>connectstorestore<br>ReactHOC  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://cn.redux.js.org/docs/react-redux/api.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/react-redux/api.html</a>  </p>\n<ul>\n<li>[mapStateToProps(state, [ownProps]): stateProps] (Function):  Redux store  Redux store mapStateToProps  props </li>\n<li><a href=\"Object or Function\">mapDispatchToProps(dispatch, [ownProps]): dispatchProps</a>:  Redux action creatordispatch action creator  props </li>\n<li>[mergeProps(stateProps, dispatchProps, ownProps): props] (Function): mapStateToProps()  mapDispatchToProps()  props  props </li>\n<li>[options] (Object)  connector <ul>\n<li>[pure = true] (Boolean):  trueconnector  shouldComponentUpdate  mergeProps true</li>\n<li>[withRef = false] (Boolean):  trueconnector  getWrappedInstance() false</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; toggleTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">'../components/TodoList'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; VisibilityFilters &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getVisibleTodos = <span class=\"function\">(<span class=\"params\">todos, filter</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (filter) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_ALL:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_COMPLETED:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos.filter(<span class=\"function\"><span class=\"params\">t</span> =&gt;</span> t.completed)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_ACTIVE:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos.filter(<span class=\"function\"><span class=\"params\">t</span> =&gt;</span> !t.completed)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Unknown filter: '</span> + filter)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// storestateprops</span></span><br><span class=\"line\"><span class=\"comment\">// mapStateToPropspropspropsstorestorestate.todos </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123;</span><br><span class=\"line\">  todos: getVisibleTodos(state.todos, state.visibilityFilter)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// action </span></span><br><span class=\"line\"><span class=\"comment\">// actionProps,toggleTodo</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> (&#123;</span><br><span class=\"line\">  toggleTodo: <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> dispatch(toggleTodo(id))</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// TodoList</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(</span><br><span class=\"line\">  mapStateToProps,</span><br><span class=\"line\">  mapDispatchToProps</span><br><span class=\"line\">)(TodoList)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>connect</p>\n<h4 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h4><p>()<br> wrapWithConnect </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123;&#125;) <span class=\"comment\">// eslint-disable-line no-unused-vars</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> (&#123; dispatch &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMergeProps = <span class=\"function\">(<span class=\"params\">stateProps, dispatchProps, parentProps</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  ...parentProps,</span><br><span class=\"line\">  ...stateProps,</span><br><span class=\"line\">  ...dispatchProps</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">connect</span>(<span class=\"params\">mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// storestate</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> shouldSubscribe = <span class=\"built_in\">Boolean</span>(mapStateToProps)</span><br><span class=\"line\">  <span class=\"comment\">// state mapStateToProps</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapState = mapStateToProps || defaultMapStateToProps</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> mapDispatch</span><br><span class=\"line\">  <span class=\"comment\">// action creater </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> mapDispatchToProps === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    mapDispatch = mapDispatchToProps</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!mapDispatchToProps) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    mapDispatch = defaultMapDispatchToProps</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  action Creater </span></span><br><span class=\"line\">    mapDispatch = wrapActionCreators(mapDispatchToProps)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> finalMergeProps = mergeProps || defaultMergeProps</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; pure = <span class=\"literal\">true</span>, withRef = <span class=\"literal\">false</span> &#125; = options</span><br><span class=\"line\">  <span class=\"keyword\">const</span> checkMergedEquals = pure &amp;&amp; finalMergeProps !== defaultMergeProps</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrapWithConnect</span>(<span class=\"params\">WrappedComponent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> connectDisplayName = <span class=\"string\">`Connect(<span class=\"subst\">$&#123;getDisplayName(WrappedComponent)&#125;</span>)`</span></span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Connect</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;<span class=\"comment\">/****/</span>&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ****</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hoistStatics(Connect, WrappedComponent)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"wrapWithConnect--\"><a href=\"#wrapWithConnect--\" class=\"headerlink\" title=\"wrapWithConnect  \"></a>wrapWithConnect  </h4><p>wrapWithConnect (connectHOCconnect</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// *********</span></span><br><span class=\"line\"><span class=\"comment\">// hoistStatics</span></span><br><span class=\"line\"><span class=\"comment\">//  connectWrappedComponentmix</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> hoistStatics(Connect, WrappedComponent)</span><br></pre></td></tr></table></figure>\n<p>HOC  reduxprops</p>\n<h4 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h4><p>connect</p>\n<h4 id=\"storestate\"><a href=\"#storestate\" class=\"headerlink\" title=\"storestate\"></a>storestate</h4><p>this.store ProviderStore</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// storestate</span></span><br><span class=\"line\">      <span class=\"keyword\">constructor</span>(props, context) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(props, context)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.version = version</span><br><span class=\"line\">        <span class=\"comment\">// propscontextproviderstore</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.store = props.store || context.store</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//  state</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> storeState = <span class=\"keyword\">this</span>.store.getState()</span><br><span class=\"line\">        <span class=\"comment\">// state</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = &#123; storeState &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clearCache()</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"shouldComponentUpdate\"><a href=\"#shouldComponentUpdate\" class=\"headerlink\" title=\"shouldComponentUpdate\"></a>shouldComponentUpdate</h4><p>shouldComponentUpdateoptions pure </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shouldComponentUpdate() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> !pure || <span class=\"keyword\">this</span>.haveOwnPropsChanged || <span class=\"keyword\">this</span>.hasStoreStateChanged</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"componentDidMount\"><a href=\"#componentDidMount\" class=\"headerlink\" title=\"componentDidMount\"></a>componentDidMount</h4><p> componentDidMount shouldSubscribe(mapStateToPropstrue)</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentDidMount() &#123;</span><br><span class=\"line\">       <span class=\"keyword\">this</span>.trySubscribe()</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">trySubscribe() &#123;</span><br><span class=\"line\">       <span class=\"comment\">//  </span></span><br><span class=\"line\">       <span class=\"keyword\">if</span> (shouldSubscribe &amp;&amp; !<span class=\"keyword\">this</span>.unsubscribe) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// subscribe HOC</span></span><br><span class=\"line\">         <span class=\"comment\">// this.unsubscribeunsubscribe</span></span><br><span class=\"line\">         <span class=\"keyword\">this</span>.unsubscribe = <span class=\"keyword\">this</span>.store.subscribe(<span class=\"keyword\">this</span>.handleChange.bind(<span class=\"keyword\">this</span>))</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.handleChange()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"componentWillReceiveProps\"><a href=\"#componentWillReceiveProps\" class=\"headerlink\" title=\"componentWillReceiveProps\"></a>componentWillReceiveProps</h4><p> componentWillReceiveProps  pure  shallowEqual<br> shallowEqualImmtable</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentWillReceiveProps(nextProps) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!pure || !shallowEqual(nextProps, <span class=\"keyword\">this</span>.props)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.haveOwnPropsChanged = <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"shallowEqual\"><a href=\"#shallowEqual\" class=\"headerlink\" title=\"shallowEqual\"></a>shallowEqual</h4><p>Immutable<br>keyvalue  </p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shallowEqual</span>(<span class=\"params\">objA, objB</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (objA === objB) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> keysA = <span class=\"built_in\">Object</span>.keys(objA)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> keysB = <span class=\"built_in\">Object</span>.keys(objB)</span><br><span class=\"line\">  <span class=\"comment\">// key </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (keysA.length !== keysB.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// vakue</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> hasOwn = <span class=\"built_in\">Object</span>.prototype.hasOwnProperty</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keysA.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!hasOwn.call(objB, keysA[i]) ||</span><br><span class=\"line\">        objA[keysA[i]] !== objB[keysA[i]]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h4><p> renderprops<br> render WrappedComponentprops</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// this.mergedProps </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (withRef) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.renderedElement = createElement(WrappedComponent, &#123;</span><br><span class=\"line\">           ...this.mergedProps,</span><br><span class=\"line\">           ref: <span class=\"string\">'wrappedInstance'</span></span><br><span class=\"line\">         &#125;)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.renderedElement = createElement(WrappedComponent,</span><br><span class=\"line\">           <span class=\"keyword\">this</span>.mergedProps</span><br><span class=\"line\">         )</span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure>\n<p>this.mergedProps propsmapStateToPropsmapDispatchToPropsmergePropsstate</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.mergedProps = nextMergedProps = computeMergedProps(<span class=\"keyword\">this</span>.stateProps, <span class=\"keyword\">this</span>.dispatchProps, <span class=\"keyword\">this</span>.props)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * props </span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; stateProps mapStateToProps</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; dispatchProps mapDispatchToProps</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; parentProps connectprops this.props</span></span><br><span class=\"line\"><span class=\"comment\">     * @returns</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeMergedProps</span>(<span class=\"params\">stateProps, dispatchProps, parentProps</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// finalMergeProps mergeProps  defaultMergeProps </span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> mergedProps = finalMergeProps(stateProps, dispatchProps, parentProps)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">        checkStateShape(mergedProps, <span class=\"string\">'mergeProps'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> mergedProps</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>connect </p>\n<ol>\n<li></li>\n<li>storeactionwarperedpropsstorestateaction</li>\n<li></li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://cn.redux.js.org/docs/react-redux/api.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/react-redux/api.html</a>  </p>\n<p>react-redux<br><br><br></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReduxreactreduxReactreact-reduxreactreduxreact-redux<br>","more":"</p>\n<h2 id=\"redux-\"><a href=\"#redux-\" class=\"headerlink\" title=\"redux \"></a>redux </h2><p>redux<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb\" target=\"_blank\" rel=\"noopener\">redux</a>  </p>\n<p>Redux  JavaScript <br>actionstorereducer  </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p>redux<br><img src=\"https://user-gold-cdn.xitu.io/2019/5/15/16abbbc0689d7fe1?w=638&h=479&f=jpeg&s=21322\"><br>  </p>\n<h3 id=\"action\"><a href=\"#action\" class=\"headerlink\" title=\"action\"></a>action</h3><p>  view()actonreducer</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    text</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"reducer\"><a href=\"#reducer\" class=\"headerlink\" title=\"reducer\"></a>reducer</h3><p><br>stateaction</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        visibilityFilter: action.filter</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//   </span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            text: action.text,</span><br><span class=\"line\">            completed: <span class=\"literal\">false</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"store\"><a href=\"#store\" class=\"headerlink\" title=\"store\"></a>store</h3><p>store<br>dispatchsubscribleapi<br>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> todoApp <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(todoApp)</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  addTodo&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> unsubscribe = store.subscribe(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(store.getState()))</span><br><span class=\"line\"><span class=\"comment\">//  action</span></span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">'Learn about actions'</span>))</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">unsubscribe()</span><br></pre></td></tr></table></figure>\n<p>redux</p>\n<ul>\n<li>store.subscribe</li>\n<li>stroe.getState()</li>\n<li>actionreducer</li>\n</ul>\n<p>react-redux<a href=\"https://github.com/reduxjs/redux/tree/master/examples/todos/src\" target=\"_blank\" rel=\"noopener\">demo</a>Reactredux</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<ol>\n<li>store.subscrible() </li>\n<li>stateStore.getState()</li>\n<li>Providerconnect</li>\n</ol>\n<p>React-reduxReactpropsstate</p>\n<h2 id=\"react-redux\"><a href=\"#react-redux\" class=\"headerlink\" title=\"react-redux\"></a>react-redux</h2><p> react-reduxreactHOC <a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\"></a> <br><br>1Provider<br>2containerconnectstore.subscrible</p>\n<h3 id=\"provider-\"><a href=\"#provider-\" class=\"headerlink\" title=\"provider \"></a>provider </h3><p>providerconnectprops</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-dom'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> todoApp <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./components/App'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(todoApp)</span><br><span class=\"line\">render(</span><br><span class=\"line\">  <span class=\"comment\">// store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/Provider&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">  document.getElementById('root')</span></span><br><span class=\"line\"><span class=\"regexp\">)</span></span><br></pre></td></tr></table></figure>\n<p><br>ProviderReact<br>storestorepropscontext</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, Children &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Provider</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// context </span></span><br><span class=\"line\">  getChildContext() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">store</span>: <span class=\"keyword\">this</span>.store &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props, context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props, context)</span><br><span class=\"line\">    <span class=\"comment\">// storeProvider</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store = props.store</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// childchild</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Children.only(<span class=\"keyword\">this</span>.props.children)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Providerstoreconect</p>\n<h3 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h3><p>connectstorestore<br>ReactHOC  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://cn.redux.js.org/docs/react-redux/api.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/react-redux/api.html</a>  </p>\n<ul>\n<li>[mapStateToProps(state, [ownProps]): stateProps] (Function):  Redux store  Redux store mapStateToProps  props </li>\n<li><a href=\"Object or Function\">mapDispatchToProps(dispatch, [ownProps]): dispatchProps</a>:  Redux action creatordispatch action creator  props </li>\n<li>[mergeProps(stateProps, dispatchProps, ownProps): props] (Function): mapStateToProps()  mapDispatchToProps()  props  props </li>\n<li>[options] (Object)  connector <ul>\n<li>[pure = true] (Boolean):  trueconnector  shouldComponentUpdate  mergeProps true</li>\n<li>[withRef = false] (Boolean):  trueconnector  getWrappedInstance() false</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; toggleTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">'../components/TodoList'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; VisibilityFilters &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getVisibleTodos = <span class=\"function\">(<span class=\"params\">todos, filter</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (filter) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_ALL:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_COMPLETED:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos.filter(<span class=\"function\"><span class=\"params\">t</span> =&gt;</span> t.completed)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> VisibilityFilters.SHOW_ACTIVE:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> todos.filter(<span class=\"function\"><span class=\"params\">t</span> =&gt;</span> !t.completed)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Unknown filter: '</span> + filter)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// storestateprops</span></span><br><span class=\"line\"><span class=\"comment\">// mapStateToPropspropspropsstorestorestate.todos </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123;</span><br><span class=\"line\">  todos: getVisibleTodos(state.todos, state.visibilityFilter)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// action </span></span><br><span class=\"line\"><span class=\"comment\">// actionProps,toggleTodo</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> (&#123;</span><br><span class=\"line\">  toggleTodo: <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> dispatch(toggleTodo(id))</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// TodoList</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(</span><br><span class=\"line\">  mapStateToProps,</span><br><span class=\"line\">  mapDispatchToProps</span><br><span class=\"line\">)(TodoList)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>connect</p>\n<h4 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h4><p>()<br> wrapWithConnect </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123;&#125;) <span class=\"comment\">// eslint-disable-line no-unused-vars</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> (&#123; dispatch &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> defaultMergeProps = <span class=\"function\">(<span class=\"params\">stateProps, dispatchProps, parentProps</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  ...parentProps,</span><br><span class=\"line\">  ...stateProps,</span><br><span class=\"line\">  ...dispatchProps</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">connect</span>(<span class=\"params\">mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// storestate</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> shouldSubscribe = <span class=\"built_in\">Boolean</span>(mapStateToProps)</span><br><span class=\"line\">  <span class=\"comment\">// state mapStateToProps</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapState = mapStateToProps || defaultMapStateToProps</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> mapDispatch</span><br><span class=\"line\">  <span class=\"comment\">// action creater </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> mapDispatchToProps === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    mapDispatch = mapDispatchToProps</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!mapDispatchToProps) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    mapDispatch = defaultMapDispatchToProps</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  action Creater </span></span><br><span class=\"line\">    mapDispatch = wrapActionCreators(mapDispatchToProps)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> finalMergeProps = mergeProps || defaultMergeProps</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; pure = <span class=\"literal\">true</span>, withRef = <span class=\"literal\">false</span> &#125; = options</span><br><span class=\"line\">  <span class=\"keyword\">const</span> checkMergedEquals = pure &amp;&amp; finalMergeProps !== defaultMergeProps</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrapWithConnect</span>(<span class=\"params\">WrappedComponent</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> connectDisplayName = <span class=\"string\">`Connect(<span class=\"subst\">$&#123;getDisplayName(WrappedComponent)&#125;</span>)`</span></span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Connect</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;<span class=\"comment\">/****/</span>&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ****</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hoistStatics(Connect, WrappedComponent)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"wrapWithConnect--\"><a href=\"#wrapWithConnect--\" class=\"headerlink\" title=\"wrapWithConnect  \"></a>wrapWithConnect  </h4><p>wrapWithConnect (connectHOCconnect</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// *********</span></span><br><span class=\"line\"><span class=\"comment\">// hoistStatics</span></span><br><span class=\"line\"><span class=\"comment\">//  connectWrappedComponentmix</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> hoistStatics(Connect, WrappedComponent)</span><br></pre></td></tr></table></figure>\n<p>HOC  reduxprops</p>\n<h4 id=\"connect\"><a href=\"#connect\" class=\"headerlink\" title=\"connect\"></a>connect</h4><p>connect</p>\n<h4 id=\"storestate\"><a href=\"#storestate\" class=\"headerlink\" title=\"storestate\"></a>storestate</h4><p>this.store ProviderStore</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// storestate</span></span><br><span class=\"line\">      <span class=\"keyword\">constructor</span>(props, context) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(props, context)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.version = version</span><br><span class=\"line\">        <span class=\"comment\">// propscontextproviderstore</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.store = props.store || context.store</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//  state</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> storeState = <span class=\"keyword\">this</span>.store.getState()</span><br><span class=\"line\">        <span class=\"comment\">// state</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = &#123; storeState &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clearCache()</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"shouldComponentUpdate\"><a href=\"#shouldComponentUpdate\" class=\"headerlink\" title=\"shouldComponentUpdate\"></a>shouldComponentUpdate</h4><p>shouldComponentUpdateoptions pure </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shouldComponentUpdate() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> !pure || <span class=\"keyword\">this</span>.haveOwnPropsChanged || <span class=\"keyword\">this</span>.hasStoreStateChanged</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"componentDidMount\"><a href=\"#componentDidMount\" class=\"headerlink\" title=\"componentDidMount\"></a>componentDidMount</h4><p> componentDidMount shouldSubscribe(mapStateToPropstrue)</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentDidMount() &#123;</span><br><span class=\"line\">       <span class=\"keyword\">this</span>.trySubscribe()</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">trySubscribe() &#123;</span><br><span class=\"line\">       <span class=\"comment\">//  </span></span><br><span class=\"line\">       <span class=\"keyword\">if</span> (shouldSubscribe &amp;&amp; !<span class=\"keyword\">this</span>.unsubscribe) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// subscribe HOC</span></span><br><span class=\"line\">         <span class=\"comment\">// this.unsubscribeunsubscribe</span></span><br><span class=\"line\">         <span class=\"keyword\">this</span>.unsubscribe = <span class=\"keyword\">this</span>.store.subscribe(<span class=\"keyword\">this</span>.handleChange.bind(<span class=\"keyword\">this</span>))</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.handleChange()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"componentWillReceiveProps\"><a href=\"#componentWillReceiveProps\" class=\"headerlink\" title=\"componentWillReceiveProps\"></a>componentWillReceiveProps</h4><p> componentWillReceiveProps  pure  shallowEqual<br> shallowEqualImmtable</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentWillReceiveProps(nextProps) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!pure || !shallowEqual(nextProps, <span class=\"keyword\">this</span>.props)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.haveOwnPropsChanged = <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"shallowEqual\"><a href=\"#shallowEqual\" class=\"headerlink\" title=\"shallowEqual\"></a>shallowEqual</h4><p>Immutable<br>keyvalue  </p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shallowEqual</span>(<span class=\"params\">objA, objB</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (objA === objB) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> keysA = <span class=\"built_in\">Object</span>.keys(objA)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> keysB = <span class=\"built_in\">Object</span>.keys(objB)</span><br><span class=\"line\">  <span class=\"comment\">// key </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (keysA.length !== keysB.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// vakue</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> hasOwn = <span class=\"built_in\">Object</span>.prototype.hasOwnProperty</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keysA.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!hasOwn.call(objB, keysA[i]) ||</span><br><span class=\"line\">        objA[keysA[i]] !== objB[keysA[i]]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h4><p> renderprops<br> render WrappedComponentprops</p>\n <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// this.mergedProps </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (withRef) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.renderedElement = createElement(WrappedComponent, &#123;</span><br><span class=\"line\">           ...this.mergedProps,</span><br><span class=\"line\">           ref: <span class=\"string\">'wrappedInstance'</span></span><br><span class=\"line\">         &#125;)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.renderedElement = createElement(WrappedComponent,</span><br><span class=\"line\">           <span class=\"keyword\">this</span>.mergedProps</span><br><span class=\"line\">         )</span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure>\n<p>this.mergedProps propsmapStateToPropsmapDispatchToPropsmergePropsstate</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.mergedProps = nextMergedProps = computeMergedProps(<span class=\"keyword\">this</span>.stateProps, <span class=\"keyword\">this</span>.dispatchProps, <span class=\"keyword\">this</span>.props)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * props </span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; stateProps mapStateToProps</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; dispatchProps mapDispatchToProps</span></span><br><span class=\"line\"><span class=\"comment\">     * @param &#123;*&#125; parentProps connectprops this.props</span></span><br><span class=\"line\"><span class=\"comment\">     * @returns</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeMergedProps</span>(<span class=\"params\">stateProps, dispatchProps, parentProps</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// finalMergeProps mergeProps  defaultMergeProps </span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> mergedProps = finalMergeProps(stateProps, dispatchProps, parentProps)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">        checkStateShape(mergedProps, <span class=\"string\">'mergeProps'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> mergedProps</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>connect </p>\n<ol>\n<li></li>\n<li>storeactionwarperedpropsstorestateaction</li>\n<li></li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://cn.redux.js.org/docs/react-redux/api.html\" target=\"_blank\" rel=\"noopener\">http://cn.redux.js.org/docs/react-redux/api.html</a>  </p>\n<p>react-redux<br><br><br></p>"},{"title":"react-router v4 ","date":"2018-11-07T16:00:00.000Z","_content":"  \n\n##   \nreact-router4  \n[All About React Router 4](https://css-tricks.com/react-router-4/)  \n    \n[path-to-regexp](path-to-regexp)\n\nreact-router\n<!-- more -->\n## path-to-regexp    \n:  /user/namereact-router matchPath   \n\n###   \n\n```js\nvar pathToRegexp = require('path-to-regexp')\n\n// pathToRegexp(path, keys?, options?)\n// pathToRegexp.parse(path)\n// pathToRegexp.compile(path)\n```\n\n  \n* **path**:   \n* **keys**    pathkey\n* **options**    \n   1.  falsetrue\n   2.  false true\n   3. end true \n   4. start true \n   5. hostname  \n        1.  '/'\n        2.  \n        3.   ./ \n\n\n\n```js\n// path\n// \nvar keys = []\nvar re = pathToRegexp('/foo/:bar', keys)\n// \n// re = /^\\/foo\\/([^\\/]+?)\\/?$/i\n// \nkeys = [\n    { \n        // path\n        name: 'bar', \n        //     \n        prefix: '/', \n        delimiter: '/', \n        optional: false, \n        repeat: false, \n        pattern: '[^\\\\/]+?' \n    }\n]\n```\n\n  \n         \n###   \n\nreact-router-config  :\n \n```js\nconst routes = [\n  { component: Root,  \n    routes: [\n      { \n        ///  \n        path: '/',\n        exact: true,\n        component: Home\n      }\n    ]\n  }\n]  \n```\n\n:'/a/1/3.html' /1/3  \n\n```js\n'/a/1/3.html'\n'/a.html'\n'/a/2.html'\n```\n\n\n### \n  \n(keys)  \n\n####   \n foopath(///:foo/:foo (segment))\n\n```js\nvar re = pathToRegexp('/:foo/:bar')\n// key\nkeys = [\n    { name: 'foo', prefix: '/', ... },\n    { name: 'bar', prefix: '/', ... }\n]\n// path\nre.exec('/test/route')\n//=> ['/test/route', 'test', 'route']\n```\n\n####   \n\n##### \n'?',,undefined  \n\n```js\nvar re = pathToRegexp('/:foo/:bar?')\nkeys = [\n    { name: 'foo', ... }, \n    { \n    name: 'bar', \n    delimiter: '/', \n    // keytrue\n    optional: true, \n    repeat: false }\n]\n// bar\nre.exec('/test')\n//=> ['/test', 'test', undefined]\n\nre.exec('/test/route')\n//=> ['/test', 'test', 'route']\n```\n  \n##### 0-n  \n\n*0-n()(/)/  \n\n```js\nvar re = pathToRegexp('/:foo*')\n// keys = [{ name: 'foo', delimiter: '/', optional: true, repeat: true }]\n\nre.exec('/')\n//=> ['/', undefined]\n// /baz foovalue\nre.exec('/bar/baz')\n//=> ['/bar/baz', 'bar/baz']\n```\n \n\n\n```js\nvar re = pathToRegexp('/:foo?')\n\n// null\nre.exec('/bar/baz')\n//=> null\n```\n\n##### 1-n \n+1*\n\n```js\nvar re = pathToRegexp('/:foo+')\n// keys = [{ name: 'foo', delimiter: '/', optional: false, repeat: true }]\n// / \nre.exec('/')\n//=> null\n// *\nre.exec('/bar/baz')\n//=> ['/bar/baz', 'bar/baz']\n```\n\n##### \n\n([^\\/]+)  \n\n```js\n// (\\d+) \nvar re = pathToRegexp('/icon-:foo(\\\\d+).png')\n// keys = [{ name: 'foo', ... }]\n\nre.exec('/icon-123.png')\n//=> ['/icon-123.png', '123']\n\nre.exec('/icon-abc.png')\n//=> null\n```\n(\\)(\\\\d+)()  \n\n####   \n\nnamekey  \n\n```js\n// .*\nvar re = pathToRegexp('/:foo/(.*)')\nkeys = [\n{ name: 'foo', ... }, \n// name0    \n{ name: 0, ... }]\n// \nre.exec('/test/route')\n//=> ['/test/route', 'test', 'route']  \n```  \n react-router v4 querystring  \n\n/a/1/3.html\n  \n\n```js\nconst routes = [\n  { component: Root,  \n    routes: [\n      {  \n        path: '/a(/)?:num1?(/)?:num2?(/)?',\n        exact: true,\n        component: Home\n      }\n    ]\n  }\n]  \n```\n\n   \n1. /a  \n2. 1num1  /a/:num1?\n3. 3num2, /a/:num1?/:num2?.html\n\n\n\n```js\nvar re = pathToRegexp('/a/:num1?/:num2?.html')\n// value 34\nconsole.log(re.exec('/a/3/4.html')) \n// [ '/a/3/4.html', '3', '4', index: 0, input: '/a/3/4.html' ]\n// num1  undefined\n// num1num2\nconsole.log(re.exec('/a/4.html'))\n// [ '/a/4.html', undefined, '4', index: 0, input: '/a/4.html' ]\n\n// \nconsole.log(re.exec('/a.html'))\n// null\n```\n\n  \n\n4.htmlnum2value  \n\n4.html([^\\/]+?)?\\.html(?:\\/)?$\n\n```js\n/^\\/a(?:\\/([^\\/]+?))?\\/([^\\/]+?)?\\.html(?:\\/)?$/i\n```  \n\n()    \n\n.html  \n\n```js\nvar re = pathToRegexp('/a(/)?:num1?(/)?:num2?.html')\nconsole.log(re.exec('/a/0/4.html'))\n//[ '/a/0/4.html', '/', '0', '/', '4', index: 0, input: '/a/0/4.html' ]\n// 4num2value \nconsole.log(re.exec('/a/4.html'))\n//[ '/a/4.html','/','4',undefined,undefined,index: 0,input: '/a/4.html' ]\n// \nconsole.log(re.exec('/a.html'))\n// [ '/a.html',undefined,undefined,undefined,undefined,index: 0,input: '/a.html' ]\n```\n\n  \n\n####  \n\n  \n* Parse keys\n* Compile (\"Reverse\" Path-To-RegExp)   \n* [](https://github.com/pillarjs/path-to-regexp)\n\n## \nreact-router V4   \n[](https://github.com/xiaoxiangdaiyu/blog)\n###   \n* [path-to-regexp](https://github.com/pillarjs/path-to-regexp)  \n* [https://css-tricks.com/react-router-4/](https://css-tricks.com/react-router-4/)\n\n\n","source":"_posts/react-router.md","raw":"---\ntitle: react-router v4 \ndate: 2018-11-08\n---\n  \n\n##   \nreact-router4  \n[All About React Router 4](https://css-tricks.com/react-router-4/)  \n    \n[path-to-regexp](path-to-regexp)\n\nreact-router\n<!-- more -->\n## path-to-regexp    \n:  /user/namereact-router matchPath   \n\n###   \n\n```js\nvar pathToRegexp = require('path-to-regexp')\n\n// pathToRegexp(path, keys?, options?)\n// pathToRegexp.parse(path)\n// pathToRegexp.compile(path)\n```\n\n  \n* **path**:   \n* **keys**    pathkey\n* **options**    \n   1.  falsetrue\n   2.  false true\n   3. end true \n   4. start true \n   5. hostname  \n        1.  '/'\n        2.  \n        3.   ./ \n\n\n\n```js\n// path\n// \nvar keys = []\nvar re = pathToRegexp('/foo/:bar', keys)\n// \n// re = /^\\/foo\\/([^\\/]+?)\\/?$/i\n// \nkeys = [\n    { \n        // path\n        name: 'bar', \n        //     \n        prefix: '/', \n        delimiter: '/', \n        optional: false, \n        repeat: false, \n        pattern: '[^\\\\/]+?' \n    }\n]\n```\n\n  \n         \n###   \n\nreact-router-config  :\n \n```js\nconst routes = [\n  { component: Root,  \n    routes: [\n      { \n        ///  \n        path: '/',\n        exact: true,\n        component: Home\n      }\n    ]\n  }\n]  \n```\n\n:'/a/1/3.html' /1/3  \n\n```js\n'/a/1/3.html'\n'/a.html'\n'/a/2.html'\n```\n\n\n### \n  \n(keys)  \n\n####   \n foopath(///:foo/:foo (segment))\n\n```js\nvar re = pathToRegexp('/:foo/:bar')\n// key\nkeys = [\n    { name: 'foo', prefix: '/', ... },\n    { name: 'bar', prefix: '/', ... }\n]\n// path\nre.exec('/test/route')\n//=> ['/test/route', 'test', 'route']\n```\n\n####   \n\n##### \n'?',,undefined  \n\n```js\nvar re = pathToRegexp('/:foo/:bar?')\nkeys = [\n    { name: 'foo', ... }, \n    { \n    name: 'bar', \n    delimiter: '/', \n    // keytrue\n    optional: true, \n    repeat: false }\n]\n// bar\nre.exec('/test')\n//=> ['/test', 'test', undefined]\n\nre.exec('/test/route')\n//=> ['/test', 'test', 'route']\n```\n  \n##### 0-n  \n\n*0-n()(/)/  \n\n```js\nvar re = pathToRegexp('/:foo*')\n// keys = [{ name: 'foo', delimiter: '/', optional: true, repeat: true }]\n\nre.exec('/')\n//=> ['/', undefined]\n// /baz foovalue\nre.exec('/bar/baz')\n//=> ['/bar/baz', 'bar/baz']\n```\n \n\n\n```js\nvar re = pathToRegexp('/:foo?')\n\n// null\nre.exec('/bar/baz')\n//=> null\n```\n\n##### 1-n \n+1*\n\n```js\nvar re = pathToRegexp('/:foo+')\n// keys = [{ name: 'foo', delimiter: '/', optional: false, repeat: true }]\n// / \nre.exec('/')\n//=> null\n// *\nre.exec('/bar/baz')\n//=> ['/bar/baz', 'bar/baz']\n```\n\n##### \n\n([^\\/]+)  \n\n```js\n// (\\d+) \nvar re = pathToRegexp('/icon-:foo(\\\\d+).png')\n// keys = [{ name: 'foo', ... }]\n\nre.exec('/icon-123.png')\n//=> ['/icon-123.png', '123']\n\nre.exec('/icon-abc.png')\n//=> null\n```\n(\\)(\\\\d+)()  \n\n####   \n\nnamekey  \n\n```js\n// .*\nvar re = pathToRegexp('/:foo/(.*)')\nkeys = [\n{ name: 'foo', ... }, \n// name0    \n{ name: 0, ... }]\n// \nre.exec('/test/route')\n//=> ['/test/route', 'test', 'route']  \n```  \n react-router v4 querystring  \n\n/a/1/3.html\n  \n\n```js\nconst routes = [\n  { component: Root,  \n    routes: [\n      {  \n        path: '/a(/)?:num1?(/)?:num2?(/)?',\n        exact: true,\n        component: Home\n      }\n    ]\n  }\n]  \n```\n\n   \n1. /a  \n2. 1num1  /a/:num1?\n3. 3num2, /a/:num1?/:num2?.html\n\n\n\n```js\nvar re = pathToRegexp('/a/:num1?/:num2?.html')\n// value 34\nconsole.log(re.exec('/a/3/4.html')) \n// [ '/a/3/4.html', '3', '4', index: 0, input: '/a/3/4.html' ]\n// num1  undefined\n// num1num2\nconsole.log(re.exec('/a/4.html'))\n// [ '/a/4.html', undefined, '4', index: 0, input: '/a/4.html' ]\n\n// \nconsole.log(re.exec('/a.html'))\n// null\n```\n\n  \n\n4.htmlnum2value  \n\n4.html([^\\/]+?)?\\.html(?:\\/)?$\n\n```js\n/^\\/a(?:\\/([^\\/]+?))?\\/([^\\/]+?)?\\.html(?:\\/)?$/i\n```  \n\n()    \n\n.html  \n\n```js\nvar re = pathToRegexp('/a(/)?:num1?(/)?:num2?.html')\nconsole.log(re.exec('/a/0/4.html'))\n//[ '/a/0/4.html', '/', '0', '/', '4', index: 0, input: '/a/0/4.html' ]\n// 4num2value \nconsole.log(re.exec('/a/4.html'))\n//[ '/a/4.html','/','4',undefined,undefined,index: 0,input: '/a/4.html' ]\n// \nconsole.log(re.exec('/a.html'))\n// [ '/a.html',undefined,undefined,undefined,undefined,index: 0,input: '/a.html' ]\n```\n\n  \n\n####  \n\n  \n* Parse keys\n* Compile (\"Reverse\" Path-To-RegExp)   \n* [](https://github.com/pillarjs/path-to-regexp)\n\n## \nreact-router V4   \n[](https://github.com/xiaoxiangdaiyu/blog)\n###   \n* [path-to-regexp](https://github.com/pillarjs/path-to-regexp)  \n* [https://css-tricks.com/react-router-4/](https://css-tricks.com/react-router-4/)\n\n\n","slug":"react-router","published":1,"updated":"2018-11-09T12:56:43.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1x000zgw92jt2x9qyn","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>react-router4<br><a href=\"https://css-tricks.com/react-router-4/\" target=\"_blank\" rel=\"noopener\">All About React Router 4</a><br>  <br><a href=\"path-to-regexp\">path-to-regexp</a></p>\n<p>react-router<br><a id=\"more\"></a></p>\n<h2 id=\"path-to-regexp-\"><a href=\"#path-to-regexp-\" class=\"headerlink\" title=\"path-to-regexp \"></a>path-to-regexp </h2><p>:  /user/namereact-router matchPath   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pathToRegexp = <span class=\"built_in\">require</span>(<span class=\"string\">'path-to-regexp'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp(path, keys?, options?)</span></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp.parse(path)</span></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp.compile(path)</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><strong>path</strong>:   </li>\n<li><strong>keys</strong>    pathkey</li>\n<li><strong>options</strong>    <ol>\n<li> falsetrue</li>\n<li> false true</li>\n<li>end true </li>\n<li>start true </li>\n<li>hostname  <ol>\n<li> /</li>\n<li> </li>\n<li>  ./ </li>\n</ol>\n</li>\n</ol>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// path</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> keys = []</span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/foo/:bar'</span>, keys)</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// re = /^\\/foo\\/([^\\/]+?)\\/?$/i</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">        <span class=\"comment\">// path</span></span><br><span class=\"line\">        name: <span class=\"string\">'bar'</span>, </span><br><span class=\"line\">        <span class=\"comment\">//     </span></span><br><span class=\"line\">        prefix: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">        delimiter: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">        optional: <span class=\"literal\">false</span>, </span><br><span class=\"line\">        repeat: <span class=\"literal\">false</span>, </span><br><span class=\"line\">        pattern: <span class=\"string\">'[^\\\\/]+?'</span> </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>react-router-config  :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> routes = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">component</span>: Root,  </span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      &#123; </span><br><span class=\"line\">        <span class=\"comment\">///  </span></span><br><span class=\"line\">        path: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        exact: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        component: Home</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>:/a/1/3.html /1/3  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'/a/1/3.html'</span></span><br><span class=\"line\"><span class=\"string\">'/a.html'</span></span><br><span class=\"line\"><span class=\"string\">'/a/2.html'</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(keys)  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> foopath(///:foo/:foo (segment))</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/:bar'</span>)</span><br><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, <span class=\"attr\">prefix</span>: <span class=\"string\">'/'</span>, ... &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'bar'</span>, <span class=\"attr\">prefix</span>: <span class=\"string\">'/'</span>, ... &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">// path</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test/route', 'test', 'route']</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>?,,undefined  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/:bar?'</span>)</span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, ... &#125;, </span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">    name: <span class=\"string\">'bar'</span>, </span><br><span class=\"line\">    delimiter: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">    <span class=\"comment\">// keytrue</span></span><br><span class=\"line\">    optional: <span class=\"literal\">true</span>, </span><br><span class=\"line\">    repeat: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">// bar</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test', 'test', undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test', 'test', 'route']</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"0-n\"><a href=\"#0-n\" class=\"headerlink\" title=\"0-n\"></a>0-n</h5><p>*0-n()(/)/  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo*'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', delimiter: '/', optional: true, repeat: true &#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/', undefined]</span></span><br><span class=\"line\"><span class=\"comment\">// /baz foovalue</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/bar/baz', 'bar/baz']</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo?'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// null</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"1-n\"><a href=\"#1-n\" class=\"headerlink\" title=\"1-n\"></a>1-n</h5><p>+1*</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo+'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', delimiter: '/', optional: false, repeat: true &#125;]</span></span><br><span class=\"line\"><span class=\"comment\">// / </span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br><span class=\"line\"><span class=\"comment\">// *</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/bar/baz', 'bar/baz']</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>([^\\/]+)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// (\\d+) </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/icon-:foo(\\\\d+).png'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', ... &#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/icon-123.png'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/icon-123.png', '123']</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/icon-abc.png'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br></pre></td></tr></table></figure>\n<p>()(\\d+)()  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>namekey  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .*</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/(.*)'</span>)</span><br><span class=\"line\">keys = [</span><br><span class=\"line\">&#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, ... &#125;, </span><br><span class=\"line\"><span class=\"comment\">// name0    </span></span><br><span class=\"line\">&#123; <span class=\"attr\">name</span>: <span class=\"number\">0</span>, ... &#125;]</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test/route', 'test', 'route']  </span></span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"> react-router v4 querystring  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">/a/1/3.html</span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">component</span>: Root,  </span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      &#123;  </span><br><span class=\"line\">        path: <span class=\"string\">'/a(/)?:num1?(/)?:num2?(/)?'</span>,</span><br><span class=\"line\">        exact: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        component: Home</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>/a  </li>\n<li>1num1  /a/:num1?</li>\n<li>3num2, /a/:num1?/:num2?.html</li>\n</ol>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/a/:num1?/:num2?.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// value 34</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/3/4.html'</span>)) </span><br><span class=\"line\"><span class=\"comment\">// [ '/a/3/4.html', '3', '4', index: 0, input: '/a/3/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// num1  undefined</span></span><br><span class=\"line\"><span class=\"comment\">// num1num2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// [ '/a/4.html', undefined, '4', index: 0, input: '/a/4.html' ]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<p>4.htmlnum2value<br><br>4.html([^\\/]+?)?.html(?:\\/)?$</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^\\/a(?:\\/([^\\/]+?))?\\/([^\\/]+?)?\\.html(?:\\/)?$/i</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">()    </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">.html  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/a(/)?:num1?(/)?:num2?.html'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/0/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">//[ '/a/0/4.html', '/', '0', '/', '4', index: 0, input: '/a/0/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// 4num2value </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">//[ '/a/4.html','/','4',undefined,undefined,index: 0,input: '/a/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// [ '/a.html',undefined,undefined,undefined,undefined,index: 0,input: '/a.html' ]</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ul>\n<li>Parse keys</li>\n<li>Compile (Reverse Path-To-RegExp)   </li>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>react-router V4 <br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\" target=\"_blank\" rel=\"noopener\">path-to-regexp</a>  </li>\n<li><a href=\"https://css-tricks.com/react-router-4/\" target=\"_blank\" rel=\"noopener\">https://css-tricks.com/react-router-4/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>react-router4<br><a href=\"https://css-tricks.com/react-router-4/\" target=\"_blank\" rel=\"noopener\">All About React Router 4</a><br>  <br><a href=\"path-to-regexp\">path-to-regexp</a></p>\n<p>react-router<br>","more":"</p>\n<h2 id=\"path-to-regexp-\"><a href=\"#path-to-regexp-\" class=\"headerlink\" title=\"path-to-regexp \"></a>path-to-regexp </h2><p>:  /user/namereact-router matchPath   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pathToRegexp = <span class=\"built_in\">require</span>(<span class=\"string\">'path-to-regexp'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp(path, keys?, options?)</span></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp.parse(path)</span></span><br><span class=\"line\"><span class=\"comment\">// pathToRegexp.compile(path)</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><strong>path</strong>:   </li>\n<li><strong>keys</strong>    pathkey</li>\n<li><strong>options</strong>    <ol>\n<li> falsetrue</li>\n<li> false true</li>\n<li>end true </li>\n<li>start true </li>\n<li>hostname  <ol>\n<li> /</li>\n<li> </li>\n<li>  ./ </li>\n</ol>\n</li>\n</ol>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// path</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> keys = []</span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/foo/:bar'</span>, keys)</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// re = /^\\/foo\\/([^\\/]+?)\\/?$/i</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">        <span class=\"comment\">// path</span></span><br><span class=\"line\">        name: <span class=\"string\">'bar'</span>, </span><br><span class=\"line\">        <span class=\"comment\">//     </span></span><br><span class=\"line\">        prefix: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">        delimiter: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">        optional: <span class=\"literal\">false</span>, </span><br><span class=\"line\">        repeat: <span class=\"literal\">false</span>, </span><br><span class=\"line\">        pattern: <span class=\"string\">'[^\\\\/]+?'</span> </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>react-router-config  :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> routes = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">component</span>: Root,  </span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      &#123; </span><br><span class=\"line\">        <span class=\"comment\">///  </span></span><br><span class=\"line\">        path: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        exact: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        component: Home</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>:/a/1/3.html /1/3  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'/a/1/3.html'</span></span><br><span class=\"line\"><span class=\"string\">'/a.html'</span></span><br><span class=\"line\"><span class=\"string\">'/a/2.html'</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(keys)  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> foopath(///:foo/:foo (segment))</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/:bar'</span>)</span><br><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, <span class=\"attr\">prefix</span>: <span class=\"string\">'/'</span>, ... &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'bar'</span>, <span class=\"attr\">prefix</span>: <span class=\"string\">'/'</span>, ... &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">// path</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test/route', 'test', 'route']</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>?,,undefined  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/:bar?'</span>)</span><br><span class=\"line\">keys = [</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, ... &#125;, </span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">    name: <span class=\"string\">'bar'</span>, </span><br><span class=\"line\">    delimiter: <span class=\"string\">'/'</span>, </span><br><span class=\"line\">    <span class=\"comment\">// keytrue</span></span><br><span class=\"line\">    optional: <span class=\"literal\">true</span>, </span><br><span class=\"line\">    repeat: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">// bar</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test', 'test', undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test', 'test', 'route']</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"0-n\"><a href=\"#0-n\" class=\"headerlink\" title=\"0-n\"></a>0-n</h5><p>*0-n()(/)/  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo*'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', delimiter: '/', optional: true, repeat: true &#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/', undefined]</span></span><br><span class=\"line\"><span class=\"comment\">// /baz foovalue</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/bar/baz', 'bar/baz']</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo?'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// null</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"1-n\"><a href=\"#1-n\" class=\"headerlink\" title=\"1-n\"></a>1-n</h5><p>+1*</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo+'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', delimiter: '/', optional: false, repeat: true &#125;]</span></span><br><span class=\"line\"><span class=\"comment\">// / </span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br><span class=\"line\"><span class=\"comment\">// *</span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/bar/baz'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/bar/baz', 'bar/baz']</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>([^\\/]+)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// (\\d+) </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/icon-:foo(\\\\d+).png'</span>)</span><br><span class=\"line\"><span class=\"comment\">// keys = [&#123; name: 'foo', ... &#125;]</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/icon-123.png'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/icon-123.png', '123']</span></span><br><span class=\"line\"></span><br><span class=\"line\">re.exec(<span class=\"string\">'/icon-abc.png'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; null</span></span><br></pre></td></tr></table></figure>\n<p>()(\\d+)()  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>namekey  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .*</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/:foo/(.*)'</span>)</span><br><span class=\"line\">keys = [</span><br><span class=\"line\">&#123; <span class=\"attr\">name</span>: <span class=\"string\">'foo'</span>, ... &#125;, </span><br><span class=\"line\"><span class=\"comment\">// name0    </span></span><br><span class=\"line\">&#123; <span class=\"attr\">name</span>: <span class=\"number\">0</span>, ... &#125;]</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">re.exec(<span class=\"string\">'/test/route'</span>)</span><br><span class=\"line\"><span class=\"comment\">//=&gt; ['/test/route', 'test', 'route']  </span></span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"> react-router v4 querystring  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">/a/1/3.html</span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">component</span>: Root,  </span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      &#123;  </span><br><span class=\"line\">        path: <span class=\"string\">'/a(/)?:num1?(/)?:num2?(/)?'</span>,</span><br><span class=\"line\">        exact: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        component: Home</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>/a  </li>\n<li>1num1  /a/:num1?</li>\n<li>3num2, /a/:num1?/:num2?.html</li>\n</ol>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/a/:num1?/:num2?.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// value 34</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/3/4.html'</span>)) </span><br><span class=\"line\"><span class=\"comment\">// [ '/a/3/4.html', '3', '4', index: 0, input: '/a/3/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// num1  undefined</span></span><br><span class=\"line\"><span class=\"comment\">// num1num2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// [ '/a/4.html', undefined, '4', index: 0, input: '/a/4.html' ]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<p>4.htmlnum2value<br><br>4.html([^\\/]+?)?.html(?:\\/)?$</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^\\/a(?:\\/([^\\/]+?))?\\/([^\\/]+?)?\\.html(?:\\/)?$/i</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">()    </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">.html  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> re = pathToRegexp(<span class=\"string\">'/a(/)?:num1?(/)?:num2?.html'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/0/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">//[ '/a/0/4.html', '/', '0', '/', '4', index: 0, input: '/a/0/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// 4num2value </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a/4.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">//[ '/a/4.html','/','4',undefined,undefined,index: 0,input: '/a/4.html' ]</span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.exec(<span class=\"string\">'/a.html'</span>))</span><br><span class=\"line\"><span class=\"comment\">// [ '/a.html',undefined,undefined,undefined,undefined,index: 0,input: '/a.html' ]</span></span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ul>\n<li>Parse keys</li>\n<li>Compile (Reverse Path-To-RegExp)   </li>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>react-router V4 <br><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\" target=\"_blank\" rel=\"noopener\">path-to-regexp</a>  </li>\n<li><a href=\"https://css-tricks.com/react-router-4/\" target=\"_blank\" rel=\"noopener\">https://css-tricks.com/react-router-4/</a></li>\n</ul>"},{"title":"node.js","date":"2019-04-15T16:00:00.000Z","_content":"\n## \n\nHMRF5node\n<!-- more -->\n## \nindex.js  \nconsole\n\n## nodeAPI\n### fs.watchFile\nnodeApi[fs.watchFile](https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener)(fs)  \n\n```js\nfs.watchFile(filename[, options], listener)\n```\n\n* filename \n* options   \n        \n   *  persistent  true \n   *  interval 5007\n* listener  \n   * current  stat\n   * prev stat  \n\n\nintervallistener\n  \nfilename  \n\n  \n\n  \nnodestat curr.mtime  prev.mtime  \n\n\n\n```js\nconst fs = require('fs')\nconst filePath = './index.js'\nconsole.log(` ${filePath}`);\nfs.watchFile(filePath, (cur, prv) => {\n    if (filePath) {\n        // \n        console.log(`cur.mtime>>${cur.mtime.toLocaleString()}`)\n        console.log(`prv.mtime>>${prv.mtime.toLocaleString()}`)\n        // \n        if (cur.mtime != prv.mtime){\n            console.log(`${filePath}`)\n        }\n    }\n})\n```\n\n\n```js\n//  \nnode watch1.js\n// 1index.js \n// 2\n// 3\n```\n<img src='/img/watchfile/watchFile.gif'/>\n\n12mtime  \n\n\n  \n  \n```bash\nUsing fs.watch() is more efficient than fs.watchFile and fs.unwatchFile. fs.watch should be used instead of fs.watchFile and fs.unwatchFile when possible.\n```\n\n**fs.watchwatchFile **  \n  \n\n### fs.watch\n\n\n\n```js\nfs.watch(filename[, options][, listener])\n```\nfs.watchFile \n\n* filename \n* options   \n        \n   *  persistent  true\n   *  recursive false true \n   *  encoding utf8\n* listener  \n   * eventType  rename  change\n   * filename \n\noptionsencoding  \n\nfilename(recursive)fs.FSWatcher\n\n \n1  \n\n```js\nconst fs = require('fs')\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    if (filename){\n        console.log(`${filename}`)\n    }\n})\n```\n  \n\n\n  \n(mac)\n<img src='/img/watchfile/watch1.gif'/>\n  \neventchange  \n\n```js\nconst fs = require('fs')\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    console.log(`event${event}`)\n    if (filename && event == 'change') {\n        console.log(`${filename}`)\n    }\n})\n```\neventchangeeventpass   \n\n#### \nnodestat\n\n####   \nmd5:\n\n```js\nconst fs = require('fs'),\n    md5 = require('md5');\nconst filePath = './'    \nlet preveMd5 = null\n\nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    var currentMd5 = md5(fs.readFileSync(filePath + filename))\n    if (currentMd5 == preveMd5) {\n        return\n    }\n    preveMd5 = currentMd5\n    console.log(`${filePath}`)\n})\n```\nmd5()md5  \n<img src='/img/watchfile/md51.gif'/>\nnull\n\n#### \n\n(mac)debounce  \n\n```js\nconst fs = require('fs'),\n    md5 = require('md5');\nlet preveMd5 = null,\n    fsWait = false\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    if (filename){\n        if (fsWait) return;\n        fsWait = setTimeout(() => {\n            fsWait = false;\n        }, 100)\n        var currentMd5 = md5(fs.readFileSync(filePath + filename))\n        if (currentMd5 == preveMd5){\n            return \n        }\n        preveMd5 = currentMd5\n        console.log(`${filePath}`)\n    }\n})\n```\n\n\n##   \nnodenode-watchchokidar   \n#### \n[node](https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener)  \n[How to Watch for Files Changes in Node.js](https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/)  \n[Nodejs Monitor File Changes](https://stackfame.com/nodejs-monitor-file-changes)","source":"_posts/watchfile.md","raw":"---\ntitle: node.js\ndate: 2019-04-16\n---\n\n## \n\nHMRF5node\n<!-- more -->\n## \nindex.js  \nconsole\n\n## nodeAPI\n### fs.watchFile\nnodeApi[fs.watchFile](https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener)(fs)  \n\n```js\nfs.watchFile(filename[, options], listener)\n```\n\n* filename \n* options   \n        \n   *  persistent  true \n   *  interval 5007\n* listener  \n   * current  stat\n   * prev stat  \n\n\nintervallistener\n  \nfilename  \n\n  \n\n  \nnodestat curr.mtime  prev.mtime  \n\n\n\n```js\nconst fs = require('fs')\nconst filePath = './index.js'\nconsole.log(` ${filePath}`);\nfs.watchFile(filePath, (cur, prv) => {\n    if (filePath) {\n        // \n        console.log(`cur.mtime>>${cur.mtime.toLocaleString()}`)\n        console.log(`prv.mtime>>${prv.mtime.toLocaleString()}`)\n        // \n        if (cur.mtime != prv.mtime){\n            console.log(`${filePath}`)\n        }\n    }\n})\n```\n\n\n```js\n//  \nnode watch1.js\n// 1index.js \n// 2\n// 3\n```\n<img src='/img/watchfile/watchFile.gif'/>\n\n12mtime  \n\n\n  \n  \n```bash\nUsing fs.watch() is more efficient than fs.watchFile and fs.unwatchFile. fs.watch should be used instead of fs.watchFile and fs.unwatchFile when possible.\n```\n\n**fs.watchwatchFile **  \n  \n\n### fs.watch\n\n\n\n```js\nfs.watch(filename[, options][, listener])\n```\nfs.watchFile \n\n* filename \n* options   \n        \n   *  persistent  true\n   *  recursive false true \n   *  encoding utf8\n* listener  \n   * eventType  rename  change\n   * filename \n\noptionsencoding  \n\nfilename(recursive)fs.FSWatcher\n\n \n1  \n\n```js\nconst fs = require('fs')\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    if (filename){\n        console.log(`${filename}`)\n    }\n})\n```\n  \n\n\n  \n(mac)\n<img src='/img/watchfile/watch1.gif'/>\n  \neventchange  \n\n```js\nconst fs = require('fs')\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    console.log(`event${event}`)\n    if (filename && event == 'change') {\n        console.log(`${filename}`)\n    }\n})\n```\neventchangeeventpass   \n\n#### \nnodestat\n\n####   \nmd5:\n\n```js\nconst fs = require('fs'),\n    md5 = require('md5');\nconst filePath = './'    \nlet preveMd5 = null\n\nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    var currentMd5 = md5(fs.readFileSync(filePath + filename))\n    if (currentMd5 == preveMd5) {\n        return\n    }\n    preveMd5 = currentMd5\n    console.log(`${filePath}`)\n})\n```\nmd5()md5  \n<img src='/img/watchfile/md51.gif'/>\nnull\n\n#### \n\n(mac)debounce  \n\n```js\nconst fs = require('fs'),\n    md5 = require('md5');\nlet preveMd5 = null,\n    fsWait = false\nconst filePath = './'    \nconsole.log(` ${filePath}`);\nfs.watch(filePath,(event,filename)=>{\n    if (filename){\n        if (fsWait) return;\n        fsWait = setTimeout(() => {\n            fsWait = false;\n        }, 100)\n        var currentMd5 = md5(fs.readFileSync(filePath + filename))\n        if (currentMd5 == preveMd5){\n            return \n        }\n        preveMd5 = currentMd5\n        console.log(`${filePath}`)\n    }\n})\n```\n\n\n##   \nnodenode-watchchokidar   \n#### \n[node](https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener)  \n[How to Watch for Files Changes in Node.js](https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/)  \n[Nodejs Monitor File Changes](https://stackfame.com/nodejs-monitor-file-changes)","slug":"watchfile","published":1,"updated":"2019-04-16T14:19:11.683Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1x0010gw92w05l5w6g","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HMRF5node<br><a id=\"more\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>index.js<br>console</p>\n<h2 id=\"nodeAPI\"><a href=\"#nodeAPI\" class=\"headerlink\" title=\"nodeAPI\"></a>nodeAPI</h2><h3 id=\"fs-watchFile\"><a href=\"#fs-watchFile\" class=\"headerlink\" title=\"fs.watchFile\"></a>fs.watchFile</h3><p>nodeApi<a href=\"https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener\" target=\"_blank\" rel=\"noopener\">fs.watchFile</a>(fs)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.watchFile(filename[, options], listener)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>filename </li>\n<li><p>options   </p>\n<ul>\n<li>persistent  true </li>\n<li>interval 5007</li>\n</ul>\n</li>\n<li>listener  <ul>\n<li>current  stat</li>\n<li>prev stat  </li>\n</ul>\n</li>\n</ul>\n<p>intervallistener</p>\n<p>filename  </p>\n<p>  </p>\n<p><br>nodestat curr.mtime  prev.mtime  </p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watchFile(filePath, (cur, prv) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filePath) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`cur.mtime&gt;&gt;<span class=\"subst\">$&#123;cur.mtime.toLocaleString()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`prv.mtime&gt;&gt;<span class=\"subst\">$&#123;prv.mtime.toLocaleString()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cur.mtime != prv.mtime)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">node watch1.js</span><br><span class=\"line\"><span class=\"comment\">// 1index.js </span></span><br><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/watchfile/watchFile.gif\"></p>\n<p>12mtime<br></p>\n<p>  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Using fs.watch() is more efficient than fs.watchFile and fs.unwatchFile. fs.watch should be used instead of fs.watchFile and fs.unwatchFile when possible.</span><br></pre></td></tr></table></figure>\n<p><strong>fs.watchwatchFile </strong><br>  </p>\n<h3 id=\"fs-watch\"><a href=\"#fs-watch\" class=\"headerlink\" title=\"fs.watch\"></a>fs.watch</h3><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.watch(filename[, options][, listener])</span><br></pre></td></tr></table></figure>\n<p>fs.watchFile </p>\n<ul>\n<li>filename </li>\n<li><p>options   </p>\n<ul>\n<li>persistent  true</li>\n<li>recursive false true </li>\n<li>encoding utf8</li>\n</ul>\n</li>\n<li>listener  <ul>\n<li>eventType  rename  change</li>\n<li>filename </li>\n</ul>\n</li>\n</ul>\n<p>optionsencoding  </p>\n<p>filename(recursive)fs.FSWatcher</p>\n<p> <br>1  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filename&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<p><br><br>(mac)<br><img src=\"/img/watchfile/watch1.gif\"><br><br>eventchange  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`event<span class=\"subst\">$&#123;event&#125;</span>`</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename &amp;&amp; event == <span class=\"string\">'change'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filename&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>eventchangeeventpass   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nodestat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>md5:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>),</span><br><span class=\"line\">    md5 = <span class=\"built_in\">require</span>(<span class=\"string\">'md5'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"keyword\">let</span> preveMd5 = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentMd5 = md5(fs.readFileSync(filePath + filename))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentMd5 == preveMd5) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    preveMd5 = currentMd5</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>md5()md5<br><img src=\"/img/watchfile/md51.gif\"><br>null</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(mac)debounce  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>),</span><br><span class=\"line\">    md5 = <span class=\"built_in\">require</span>(<span class=\"string\">'md5'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> preveMd5 = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    fsWait = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fsWait) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        fsWait = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            fsWait = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;, <span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> currentMd5 = md5(fs.readFileSync(filePath + filename))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentMd5 == preveMd5)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        preveMd5 = currentMd5</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>nodenode-watchchokidar   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener\" target=\"_blank\" rel=\"noopener\">node</a><br><a href=\"https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/\" target=\"_blank\" rel=\"noopener\">How to Watch for Files Changes in Node.js</a><br><a href=\"https://stackfame.com/nodejs-monitor-file-changes\" target=\"_blank\" rel=\"noopener\">Nodejs Monitor File Changes</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HMRF5node<br>","more":"</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>index.js<br>console</p>\n<h2 id=\"nodeAPI\"><a href=\"#nodeAPI\" class=\"headerlink\" title=\"nodeAPI\"></a>nodeAPI</h2><h3 id=\"fs-watchFile\"><a href=\"#fs-watchFile\" class=\"headerlink\" title=\"fs.watchFile\"></a>fs.watchFile</h3><p>nodeApi<a href=\"https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener\" target=\"_blank\" rel=\"noopener\">fs.watchFile</a>(fs)  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.watchFile(filename[, options], listener)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>filename </li>\n<li><p>options   </p>\n<ul>\n<li>persistent  true </li>\n<li>interval 5007</li>\n</ul>\n</li>\n<li>listener  <ul>\n<li>current  stat</li>\n<li>prev stat  </li>\n</ul>\n</li>\n</ul>\n<p>intervallistener</p>\n<p>filename  </p>\n<p>  </p>\n<p><br>nodestat curr.mtime  prev.mtime  </p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watchFile(filePath, (cur, prv) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filePath) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`cur.mtime&gt;&gt;<span class=\"subst\">$&#123;cur.mtime.toLocaleString()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`prv.mtime&gt;&gt;<span class=\"subst\">$&#123;prv.mtime.toLocaleString()&#125;</span>`</span>)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cur.mtime != prv.mtime)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\">node watch1.js</span><br><span class=\"line\"><span class=\"comment\">// 1index.js </span></span><br><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/watchfile/watchFile.gif\"></p>\n<p>12mtime<br></p>\n<p>  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Using fs.watch() is more efficient than fs.watchFile and fs.unwatchFile. fs.watch should be used instead of fs.watchFile and fs.unwatchFile when possible.</span><br></pre></td></tr></table></figure>\n<p><strong>fs.watchwatchFile </strong><br>  </p>\n<h3 id=\"fs-watch\"><a href=\"#fs-watch\" class=\"headerlink\" title=\"fs.watch\"></a>fs.watch</h3><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.watch(filename[, options][, listener])</span><br></pre></td></tr></table></figure>\n<p>fs.watchFile </p>\n<ul>\n<li>filename </li>\n<li><p>options   </p>\n<ul>\n<li>persistent  true</li>\n<li>recursive false true </li>\n<li>encoding utf8</li>\n</ul>\n</li>\n<li>listener  <ul>\n<li>eventType  rename  change</li>\n<li>filename </li>\n</ul>\n</li>\n</ul>\n<p>optionsencoding  </p>\n<p>filename(recursive)fs.FSWatcher</p>\n<p> <br>1  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filename&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<p><br><br>(mac)<br><img src=\"/img/watchfile/watch1.gif\"><br><br>eventchange  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`event<span class=\"subst\">$&#123;event&#125;</span>`</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename &amp;&amp; event == <span class=\"string\">'change'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filename&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>eventchangeeventpass   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nodestat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>md5:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>),</span><br><span class=\"line\">    md5 = <span class=\"built_in\">require</span>(<span class=\"string\">'md5'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"keyword\">let</span> preveMd5 = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentMd5 = md5(fs.readFileSync(filePath + filename))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentMd5 == preveMd5) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    preveMd5 = currentMd5</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>md5()md5<br><img src=\"/img/watchfile/md51.gif\"><br>null</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(mac)debounce  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>),</span><br><span class=\"line\">    md5 = <span class=\"built_in\">require</span>(<span class=\"string\">'md5'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> preveMd5 = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    fsWait = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> filePath = <span class=\"string\">'./'</span>    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` <span class=\"subst\">$&#123;filePath&#125;</span>`</span>);</span><br><span class=\"line\">fs.watch(filePath,(event,filename)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filename)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fsWait) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        fsWait = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            fsWait = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;, <span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> currentMd5 = md5(fs.readFileSync(filePath + filename))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentMd5 == preveMd5)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        preveMd5 = currentMd5</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;filePath&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>nodenode-watchchokidar   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://nodejs.org/docs/latest-v9.x/api/fs.html#fs_fs_watchfile_filename_options_listener\" target=\"_blank\" rel=\"noopener\">node</a><br><a href=\"https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/\" target=\"_blank\" rel=\"noopener\">How to Watch for Files Changes in Node.js</a><br><a href=\"https://stackfame.com/nodejs-monitor-file-changes\" target=\"_blank\" rel=\"noopener\">Nodejs Monitor File Changes</a></p>"},{"title":"","date":"2018-08-24T16:00:00.000Z","_content":"###   \n[Scroll Bouncing On Your Websites](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n  <!--more  -->\n###   \n(scroll bouncing),css overscroll-behaviorfixed\n\n### Scroll bouncing  \n  \n1. html/()  \n2. CSS([CSS scroll-snapping](http://www.w3cplus.com/css/practical-css-scroll-snapping.html))\n  \nScroll bouncing\n\n### \n\nfixedheaderfooterfixed/   \n\n###    \n\nfooter\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd210e6d683?w=800&h=443&f=gif&s=175632'/> \nFirefoxmacchromescroll\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd22c2b7ef4?w=1280&h=710&f=gif&s=2726862'/>  \n\nfooterfixed=>bottomcss  \nposition:fixed  \nAccording to the CSS 2.1 Specification, when a box (in this case, the dark blue footer) is fixed, it is fixed with respect to the viewport and does not move when scrolled.  \nCSS 2.1  box(footer)fixedviewport  \n\n  \nEdgeSafariSafarifirefoxchrome  \n\n###   \ncsswin10macchromefirefoxsafariEdgesafari2018   \n\n```html\n<html>\n  <body>\n    <div class=\"body-container\">\n      <div class=\"color-picker-main-container\"> \n      </div>\n    </div>\n    <footer>\n    </footer>\n</body>    \n```\n## csshtml   \n\n###    \nabsolutefooterhtmlheight100%footercontent100%footerpadding-bottomcalcbody-containe100%footer  \n\n```css\nhtml {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n\nbody {\n  width: 100%;\n  margin: 0;\n  font-family: sans-serif;\n  height: 100%;\n  overflow: hidden;\n}\n\n.body-container {\n  height: calc(100% - 100px);\n  overflow: auto;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 10px;\n}\n\nfooter {\n  position: absolute;\n  bottom: 0;\n  height: 100px;\n  width: 100%;\n}\n```\nfixedcontentfootersafaricontentfooter\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247'/>\n\n  \n100%iosmomentum-based scrolling  \nmomentum-based scrolling  \n[](http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/)height100%  \n\nfixedabsolute+relativeheight100%height100%\n\n```css\nhtml {\n  width: 100%;\n  position: fixed;\n  overflow: hidden;\n}\n\nbody {\n  width: 100%;\n  margin: 0;\n  font-family: sans-serif;\n  position: fixed;\n  overflow: hidden;\n}\n\n.body-container {\n  width: 100vw;\n  height: calc(100vh - 100px);\n  overflow-y: auto;\n  // Use momentum-based scrolling on WebKit-based touch devices\n  -webkit-overflow-scrolling: touch;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 10px;\n}\n\nfooter {\n  position: fixed;\n  bottom: 0;\n  height: 100px;\n  width: 100%;\n}\n\n```\nhtmlbodyfixedoverflow: hiddenfooterfixed  \nbody-container100vh-footer  \n-webkit-overflow-scrolling: touch;   \n\nmacChromeFirefox100% height,  \n momentum-based scrollingSafarifooter   \n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd223f6b2a5?w=1280&h=709&f=gif&s=1743190'/> \niOS Safarifooter   \n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247'/>\n\n\n-webkit-overflow-scrolling: touch; momentum-based scrolling MDN  \n\n\n\n```css\nhtml {\n  position: fixed;\n  height: 100%;\n  overflow: hidden;\n}\n\nbody {\n  font-family: sans-serif;\n  margin: 0;\n  width: 100vw; \n  height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 110px;\n}\n\nfooter {\n  position: fixed;\n}\n\n```\nfooteriOS Safari footer  \ncontentfooter   \n\n## javascript  \njs  \nhtml+css\njs   \n\nwindowdocumenttouchmovetouchstartwindowtocuchcontenttouch\n  \n```js\n// Prevents window from moving on touch on older browsers.\nwindow.addEventListener('touchmove', function (event) {\n  event.preventDefault()\n}, false)\n\n// Allows content to move on touch.\ndocument.querySelector('.body-container').addEventListener('touchmove', function (event) {\n  event.stopPropagation()\n}, false)\n```\nwidowtouchmovedocumenttouchstarttouchmove  \nevent.preventDefault()falsepassive  \n\n```js\n// Prevents window from moving on touch on newer browsers.\nwindow.addEventListener('touchmove', function (event) {\n  event.preventDefault()\n}, {passive: false})\n```  \n\n##   \niNoBounceiosweb-webkit-overflow-scrolling   \n\n\n## Overscroll Behavior  \n\ncssoverscroll-behaviorCSS20171220183Chrome 63Firefox 59  \nmdn--  \nbodyoverscroll-behavior:none,footerfixedfotermomentum-based scrolling\nEdge  \n\n##   \n###   \n1. [Momentum Scrolling on iOS Overflow Elements](https://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/)\n2. [Scroll Bouncing On Your Websites](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n3. [MOMENTUM SCROLLING USING JQUERY](http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/)   \n\nWilliam Lim[](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n \n\n\n\n\n\n\n\n \n\n  ","source":"_posts/scroll.md","raw":"---\ntitle: \ndate: 2018-08-25\n---\n###   \n[Scroll Bouncing On Your Websites](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n  <!--more  -->\n###   \n(scroll bouncing),css overscroll-behaviorfixed\n\n### Scroll bouncing  \n  \n1. html/()  \n2. CSS([CSS scroll-snapping](http://www.w3cplus.com/css/practical-css-scroll-snapping.html))\n  \nScroll bouncing\n\n### \n\nfixedheaderfooterfixed/   \n\n###    \n\nfooter\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd210e6d683?w=800&h=443&f=gif&s=175632'/> \nFirefoxmacchromescroll\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd22c2b7ef4?w=1280&h=710&f=gif&s=2726862'/>  \n\nfooterfixed=>bottomcss  \nposition:fixed  \nAccording to the CSS 2.1 Specification, when a box (in this case, the dark blue footer) is fixed, it is fixed with respect to the viewport and does not move when scrolled.  \nCSS 2.1  box(footer)fixedviewport  \n\n  \nEdgeSafariSafarifirefoxchrome  \n\n###   \ncsswin10macchromefirefoxsafariEdgesafari2018   \n\n```html\n<html>\n  <body>\n    <div class=\"body-container\">\n      <div class=\"color-picker-main-container\"> \n      </div>\n    </div>\n    <footer>\n    </footer>\n</body>    \n```\n## csshtml   \n\n###    \nabsolutefooterhtmlheight100%footercontent100%footerpadding-bottomcalcbody-containe100%footer  \n\n```css\nhtml {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n\nbody {\n  width: 100%;\n  margin: 0;\n  font-family: sans-serif;\n  height: 100%;\n  overflow: hidden;\n}\n\n.body-container {\n  height: calc(100% - 100px);\n  overflow: auto;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 10px;\n}\n\nfooter {\n  position: absolute;\n  bottom: 0;\n  height: 100px;\n  width: 100%;\n}\n```\nfixedcontentfootersafaricontentfooter\n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247'/>\n\n  \n100%iosmomentum-based scrolling  \nmomentum-based scrolling  \n[](http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/)height100%  \n\nfixedabsolute+relativeheight100%height100%\n\n```css\nhtml {\n  width: 100%;\n  position: fixed;\n  overflow: hidden;\n}\n\nbody {\n  width: 100%;\n  margin: 0;\n  font-family: sans-serif;\n  position: fixed;\n  overflow: hidden;\n}\n\n.body-container {\n  width: 100vw;\n  height: calc(100vh - 100px);\n  overflow-y: auto;\n  // Use momentum-based scrolling on WebKit-based touch devices\n  -webkit-overflow-scrolling: touch;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 10px;\n}\n\nfooter {\n  position: fixed;\n  bottom: 0;\n  height: 100px;\n  width: 100%;\n}\n\n```\nhtmlbodyfixedoverflow: hiddenfooterfixed  \nbody-container100vh-footer  \n-webkit-overflow-scrolling: touch;   \n\nmacChromeFirefox100% height,  \n momentum-based scrollingSafarifooter   \n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd223f6b2a5?w=1280&h=709&f=gif&s=1743190'/> \niOS Safarifooter   \n<img src='https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247'/>\n\n\n-webkit-overflow-scrolling: touch; momentum-based scrolling MDN  \n\n\n\n```css\nhtml {\n  position: fixed;\n  height: 100%;\n  overflow: hidden;\n}\n\nbody {\n  font-family: sans-serif;\n  margin: 0;\n  width: 100vw; \n  height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n}\n\n.color-picker-main-container {\n  width: 100%;\n  font-size: 22px;\n  padding-bottom: 110px;\n}\n\nfooter {\n  position: fixed;\n}\n\n```\nfooteriOS Safari footer  \ncontentfooter   \n\n## javascript  \njs  \nhtml+css\njs   \n\nwindowdocumenttouchmovetouchstartwindowtocuchcontenttouch\n  \n```js\n// Prevents window from moving on touch on older browsers.\nwindow.addEventListener('touchmove', function (event) {\n  event.preventDefault()\n}, false)\n\n// Allows content to move on touch.\ndocument.querySelector('.body-container').addEventListener('touchmove', function (event) {\n  event.stopPropagation()\n}, false)\n```\nwidowtouchmovedocumenttouchstarttouchmove  \nevent.preventDefault()falsepassive  \n\n```js\n// Prevents window from moving on touch on newer browsers.\nwindow.addEventListener('touchmove', function (event) {\n  event.preventDefault()\n}, {passive: false})\n```  \n\n##   \niNoBounceiosweb-webkit-overflow-scrolling   \n\n\n## Overscroll Behavior  \n\ncssoverscroll-behaviorCSS20171220183Chrome 63Firefox 59  \nmdn--  \nbodyoverscroll-behavior:none,footerfixedfotermomentum-based scrolling\nEdge  \n\n##   \n###   \n1. [Momentum Scrolling on iOS Overflow Elements](https://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/)\n2. [Scroll Bouncing On Your Websites](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n3. [MOMENTUM SCROLLING USING JQUERY](http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/)   \n\nWilliam Lim[](https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/)\n \n\n\n\n\n\n\n\n \n\n  ","slug":"scroll","published":1,"updated":"2018-08-24T08:38:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt1y0011gw92xei84ggi","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\">Scroll Bouncing On Your Websites</a><br>  <a id=\"more\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(scroll bouncing),css overscroll-behaviorfixed</p>\n<h3 id=\"Scroll-bouncing\"><a href=\"#Scroll-bouncing\" class=\"headerlink\" title=\"Scroll bouncing\"></a>Scroll bouncing</h3><p>  </p>\n<ol>\n<li>html/()  </li>\n<li>CSS(<a href=\"http://www.w3cplus.com/css/practical-css-scroll-snapping.html\" target=\"_blank\" rel=\"noopener\">CSS scroll-snapping</a>)<br><br>Scroll bouncing</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>fixedheaderfooterfixed/   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>footer<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd210e6d683?w=800&h=443&f=gif&s=175632\"><br>Firefoxmacchromescroll<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd22c2b7ef4?w=1280&h=710&f=gif&s=2726862\">  </p>\n<p>footerfixed=&gt;bottomcss<br>position:fixed<br>According to the CSS 2.1 Specification, when a box (in this case, the dark blue footer) is fixed, it is fixed with respect to the viewport and does not move when scrolled.<br>CSS 2.1  box(footer)fixedviewport  </p>\n<p><br>EdgeSafariSafarifirefoxchrome  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>csswin10macchromefirefoxsafariEdgesafari2018   </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"body-container\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"color-picker-main-container\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"csshtml\"><a href=\"#csshtml\" class=\"headerlink\" title=\"csshtml\"></a>csshtml</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>absolutefooterhtmlheight100%footercontent100%footerpadding-bottomcalcbody-containe100%footer  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.body-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(100% - 100px);</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>fixedcontentfootersafaricontentfooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247\"></p>\n<p><br>100%iosmomentum-based scrolling<br>momentum-based scrolling<br><a href=\"http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/\" target=\"_blank\" rel=\"noopener\"></a>height100%  </p>\n<p>fixedabsolute+relativeheight100%height100%</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.body-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100vw</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(100vh - 100px);</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: auto;</span><br><span class=\"line\">  // Use momentum-based scrolling on WebKit-based touch devices</span><br><span class=\"line\">  <span class=\"selector-tag\">-webkit-overflow-scrolling</span>: <span class=\"selector-tag\">touch</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>htmlbodyfixedoverflow: hiddenfooterfixed<br>body-container100vh-footer<br>-webkit-overflow-scrolling: touch;<br><br>macChromeFirefox100% height,<br> momentum-based scrollingSafarifooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd223f6b2a5?w=1280&h=709&f=gif&s=1743190\"><br>iOS Safarifooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247\"></p>\n<p>-webkit-overflow-scrolling: touch; momentum-based scrolling MDN  </p>\n<p></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100vw</span>; </span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100vh</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: auto;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-x</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-overflow-scrolling</span>: touch;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">110px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>footeriOS Safari footer<br>contentfooter   </p>\n<h2 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h2><p>js<br>html+css<br>js   </p>\n<p>windowdocumenttouchmovetouchstartwindowtocuchcontenttouch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Prevents window from moving on touch on older browsers.</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  event.preventDefault()</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Allows content to move on touch.</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.body-container'</span>).addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  event.stopPropagation()</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>)</span><br></pre></td></tr></table></figure>\n<p>widowtouchmovedocumenttouchstarttouchmove<br>event.preventDefault()falsepassive  </p>\n<pre><code class=\"js\"><span class=\"comment\">// Prevents window from moving on touch on newer browsers.</span>\n<span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{\n  event.preventDefault()\n}, {<span class=\"attr\">passive</span>: <span class=\"literal\">false</span>})\n</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>iNoBounceiosweb-webkit-overflow-scrolling<br></p>\n<h2 id=\"Overscroll-Behavior\"><a href=\"#Overscroll-Behavior\" class=\"headerlink\" title=\"Overscroll Behavior\"></a>Overscroll Behavior</h2><p>cssoverscroll-behaviorCSS20171220183Chrome 63Firefox 59<br>mdn<br>bodyoverscroll-behavior:none,footerfixedfotermomentum-based scrolling<br>Edge  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><a href=\"https://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/\" target=\"_blank\" rel=\"noopener\">Momentum Scrolling on iOS Overflow Elements</a></li>\n<li><a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\">Scroll Bouncing On Your Websites</a></li>\n<li><a href=\"http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/\" target=\"_blank\" rel=\"noopener\">MOMENTUM SCROLLING USING JQUERY</a>   </li>\n</ol>\n<p>William Lim<a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\">Scroll Bouncing On Your Websites</a><br>","more":"</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(scroll bouncing),css overscroll-behaviorfixed</p>\n<h3 id=\"Scroll-bouncing\"><a href=\"#Scroll-bouncing\" class=\"headerlink\" title=\"Scroll bouncing\"></a>Scroll bouncing</h3><p>  </p>\n<ol>\n<li>html/()  </li>\n<li>CSS(<a href=\"http://www.w3cplus.com/css/practical-css-scroll-snapping.html\" target=\"_blank\" rel=\"noopener\">CSS scroll-snapping</a>)<br><br>Scroll bouncing</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>fixedheaderfooterfixed/   </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>footer<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd210e6d683?w=800&h=443&f=gif&s=175632\"><br>Firefoxmacchromescroll<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd22c2b7ef4?w=1280&h=710&f=gif&s=2726862\">  </p>\n<p>footerfixed=&gt;bottomcss<br>position:fixed<br>According to the CSS 2.1 Specification, when a box (in this case, the dark blue footer) is fixed, it is fixed with respect to the viewport and does not move when scrolled.<br>CSS 2.1  box(footer)fixedviewport  </p>\n<p><br>EdgeSafariSafarifirefoxchrome  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>csswin10macchromefirefoxsafariEdgesafari2018   </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"body-container\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"color-picker-main-container\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"csshtml\"><a href=\"#csshtml\" class=\"headerlink\" title=\"csshtml\"></a>csshtml</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>absolutefooterhtmlheight100%footercontent100%footerpadding-bottomcalcbody-containe100%footer  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.body-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(100% - 100px);</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>fixedcontentfootersafaricontentfooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247\"></p>\n<p><br>100%iosmomentum-based scrolling<br>momentum-based scrolling<br><a href=\"http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/\" target=\"_blank\" rel=\"noopener\"></a>height100%  </p>\n<p>fixedabsolute+relativeheight100%height100%</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.body-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100vw</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(100vh - 100px);</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: auto;</span><br><span class=\"line\">  // Use momentum-based scrolling on WebKit-based touch devices</span><br><span class=\"line\">  <span class=\"selector-tag\">-webkit-overflow-scrolling</span>: <span class=\"selector-tag\">touch</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>htmlbodyfixedoverflow: hiddenfooterfixed<br>body-container100vh-footer<br>-webkit-overflow-scrolling: touch;<br><br>macChromeFirefox100% height,<br> momentum-based scrollingSafarifooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd223f6b2a5?w=1280&h=709&f=gif&s=1743190\"><br>iOS Safarifooter<br><img src=\"https://user-gold-cdn.xitu.io/2018/8/20/16557cd21927ccd6?w=600&h=1067&f=gif&s=1828247\"></p>\n<p>-webkit-overflow-scrolling: touch; momentum-based scrolling MDN  </p>\n<p></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100vw</span>; </span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100vh</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: auto;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-x</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-overflow-scrolling</span>: touch;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.color-picker-main-container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">110px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>footeriOS Safari footer<br>contentfooter   </p>\n<h2 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h2><p>js<br>html+css<br>js   </p>\n<p>windowdocumenttouchmovetouchstartwindowtocuchcontenttouch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Prevents window from moving on touch on older browsers.</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  event.preventDefault()</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Allows content to move on touch.</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.body-container'</span>).addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  event.stopPropagation()</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>)</span><br></pre></td></tr></table></figure>\n<p>widowtouchmovedocumenttouchstarttouchmove<br>event.preventDefault()falsepassive  </p>\n<pre><code class=\"js\"><span class=\"comment\">// Prevents window from moving on touch on newer browsers.</span>\n<span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'touchmove'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>{\n  event.preventDefault()\n}, {<span class=\"attr\">passive</span>: <span class=\"literal\">false</span>})\n</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>iNoBounceiosweb-webkit-overflow-scrolling<br></p>\n<h2 id=\"Overscroll-Behavior\"><a href=\"#Overscroll-Behavior\" class=\"headerlink\" title=\"Overscroll Behavior\"></a>Overscroll Behavior</h2><p>cssoverscroll-behaviorCSS20171220183Chrome 63Firefox 59<br>mdn<br>bodyoverscroll-behavior:none,footerfixedfotermomentum-based scrolling<br>Edge  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><a href=\"https://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/\" target=\"_blank\" rel=\"noopener\">Momentum Scrolling on iOS Overflow Elements</a></li>\n<li><a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\">Scroll Bouncing On Your Websites</a></li>\n<li><a href=\"http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/\" target=\"_blank\" rel=\"noopener\">MOMENTUM SCROLLING USING JQUERY</a>   </li>\n</ol>\n<p>William Lim<a href=\"https://www.smashingmagazine.com/2018/08/scroll-bouncing-websites/\" target=\"_blank\" rel=\"noopener\"></a></p>"},{"title":"webpack runtime","date":"2019-10-14T16:00:00.000Z","_content":"\n## webpack runtime \n<!-- more -->\n```js\n(function(modules) {\n    function webpackJsonpCallback(data) {\n        var chunkIds = data[0];\n        var moreModules = data[1];\n        var executeModules = data[2];\n        var moduleId, chunkId, i = 0,\n            resolves = [];\n        for (; i < chunkIds.length; i++) {\n            chunkId = chunkIds[i];\n            if (Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n                resolves.push(installedChunks[chunkId][0])\n            }\n            installedChunks[chunkId] = 0\n        }\n        for (moduleId in moreModules) {\n            if (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n                modules[moduleId] = moreModules[moduleId]\n            }\n        }\n        if (parentJsonpFunction) parentJsonpFunction(data);\n        while (resolves.length) {\n            resolves.shift()()\n        }\n        deferredModules.push.apply(deferredModules, executeModules || []);\n        return checkDeferredModules()\n    };\n\n    function checkDeferredModules() {\n        var result;\n        for (var i = 0; i < deferredModules.length; i++) {\n            var deferredModule = deferredModules[i];\n            var fulfilled = true;\n            for (var j = 1; j < deferredModule.length; j++) {\n                var depId = deferredModule[j];\n                if (installedChunks[depId] !== 0) fulfilled = false\n            }\n            if (fulfilled) {\n                deferredModules.splice(i--, 1);\n                result = __webpack_require__(__webpack_require__.s = deferredModule[0])\n            }\n        }\n        return result\n    }\n    var installedModules = {};\n    var installedChunks = {\n        \"runtime\": 0\n    };\n    var deferredModules = [];\n\n    function __webpack_require__(moduleId) {\n        if (installedModules[moduleId]) {\n            return installedModules[moduleId].exports\n        }\n        var module = installedModules[moduleId] = {\n            i: moduleId,\n            l: false,\n            exports: {}\n        };\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        module.l = true;\n        return module.exports\n    }\n    __webpack_require__.m = modules;\n    __webpack_require__.c = installedModules;\n    __webpack_require__.d = function(exports, name, getter) {\n        if (!__webpack_require__.o(exports, name)) {\n            Object.defineProperty(exports, name, {\n                enumerable: true,\n                get: getter\n            })\n        }\n    };\n    __webpack_require__.r = function(exports) {\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            Object.defineProperty(exports, Symbol.toStringTag, {\n                value: 'Module'\n            })\n        }\n        Object.defineProperty(exports, '__esModule', {\n            value: true\n        })\n    };\n    __webpack_require__.t = function(value, mode) {\n        if (mode & 1) value = __webpack_require__(value);\n        if (mode & 8) return value;\n        if ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n        var ns = Object.create(null);\n        __webpack_require__.r(ns);\n        Object.defineProperty(ns, 'default', {\n            enumerable: true,\n            value: value\n        });\n        if (mode & 2 && typeof value != 'string')\n            for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key]\n            }.bind(null, key));\n        return ns\n    };\n    __webpack_require__.n = function(module) {\n        var getter = module && module.__esModule ? function getDefault() {\n            return module['default']\n        } : function getModuleExports() {\n            return module\n        };\n        __webpack_require__.d(getter, 'a', getter);\n        return getter\n    };\n    __webpack_require__.o = function(object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property)\n    };\n    __webpack_require__.p = \"\";\n    var jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n    var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n    jsonpArray.push = webpackJsonpCallback;\n    jsonpArray = jsonpArray.slice();\n    for (var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n    var parentJsonpFunction = oldJsonpFunction;\n    checkDeferredModules()\n})([]);\n```","source":"_posts/webpack.md","raw":"---\ntitle: webpack runtime\ndate: 2019-10-15\n---\n\n## webpack runtime \n<!-- more -->\n```js\n(function(modules) {\n    function webpackJsonpCallback(data) {\n        var chunkIds = data[0];\n        var moreModules = data[1];\n        var executeModules = data[2];\n        var moduleId, chunkId, i = 0,\n            resolves = [];\n        for (; i < chunkIds.length; i++) {\n            chunkId = chunkIds[i];\n            if (Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n                resolves.push(installedChunks[chunkId][0])\n            }\n            installedChunks[chunkId] = 0\n        }\n        for (moduleId in moreModules) {\n            if (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n                modules[moduleId] = moreModules[moduleId]\n            }\n        }\n        if (parentJsonpFunction) parentJsonpFunction(data);\n        while (resolves.length) {\n            resolves.shift()()\n        }\n        deferredModules.push.apply(deferredModules, executeModules || []);\n        return checkDeferredModules()\n    };\n\n    function checkDeferredModules() {\n        var result;\n        for (var i = 0; i < deferredModules.length; i++) {\n            var deferredModule = deferredModules[i];\n            var fulfilled = true;\n            for (var j = 1; j < deferredModule.length; j++) {\n                var depId = deferredModule[j];\n                if (installedChunks[depId] !== 0) fulfilled = false\n            }\n            if (fulfilled) {\n                deferredModules.splice(i--, 1);\n                result = __webpack_require__(__webpack_require__.s = deferredModule[0])\n            }\n        }\n        return result\n    }\n    var installedModules = {};\n    var installedChunks = {\n        \"runtime\": 0\n    };\n    var deferredModules = [];\n\n    function __webpack_require__(moduleId) {\n        if (installedModules[moduleId]) {\n            return installedModules[moduleId].exports\n        }\n        var module = installedModules[moduleId] = {\n            i: moduleId,\n            l: false,\n            exports: {}\n        };\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        module.l = true;\n        return module.exports\n    }\n    __webpack_require__.m = modules;\n    __webpack_require__.c = installedModules;\n    __webpack_require__.d = function(exports, name, getter) {\n        if (!__webpack_require__.o(exports, name)) {\n            Object.defineProperty(exports, name, {\n                enumerable: true,\n                get: getter\n            })\n        }\n    };\n    __webpack_require__.r = function(exports) {\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            Object.defineProperty(exports, Symbol.toStringTag, {\n                value: 'Module'\n            })\n        }\n        Object.defineProperty(exports, '__esModule', {\n            value: true\n        })\n    };\n    __webpack_require__.t = function(value, mode) {\n        if (mode & 1) value = __webpack_require__(value);\n        if (mode & 8) return value;\n        if ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n        var ns = Object.create(null);\n        __webpack_require__.r(ns);\n        Object.defineProperty(ns, 'default', {\n            enumerable: true,\n            value: value\n        });\n        if (mode & 2 && typeof value != 'string')\n            for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key]\n            }.bind(null, key));\n        return ns\n    };\n    __webpack_require__.n = function(module) {\n        var getter = module && module.__esModule ? function getDefault() {\n            return module['default']\n        } : function getModuleExports() {\n            return module\n        };\n        __webpack_require__.d(getter, 'a', getter);\n        return getter\n    };\n    __webpack_require__.o = function(object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property)\n    };\n    __webpack_require__.p = \"\";\n    var jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n    var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n    jsonpArray.push = webpackJsonpCallback;\n    jsonpArray = jsonpArray.slice();\n    for (var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n    var parentJsonpFunction = oldJsonpFunction;\n    checkDeferredModules()\n})([]);\n```","slug":"webpack","published":1,"updated":"2019-10-10T12:12:36.869Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt200012gw925wcyj5c5","content":"<h2 id=\"webpack-runtime-\"><a href=\"#webpack-runtime-\" class=\"headerlink\" title=\"webpack runtime \"></a>webpack runtime </h2><a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">modules</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">webpackJsonpCallback</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> chunkIds = data[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> moreModules = data[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> executeModules = data[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> moduleId, chunkId, i = <span class=\"number\">0</span>,</span><br><span class=\"line\">            resolves = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; i &lt; chunkIds.length; i++) &#123;</span><br><span class=\"line\">            chunkId = chunkIds[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(installedChunks, chunkId) &amp;&amp; installedChunks[chunkId]) &#123;</span><br><span class=\"line\">                resolves.push(installedChunks[chunkId][<span class=\"number\">0</span>])</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            installedChunks[chunkId] = <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (moduleId <span class=\"keyword\">in</span> moreModules) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(moreModules, moduleId)) &#123;</span><br><span class=\"line\">                modules[moduleId] = moreModules[moduleId]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (parentJsonpFunction) parentJsonpFunction(data);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resolves.length) &#123;</span><br><span class=\"line\">            resolves.shift()()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        deferredModules.push.apply(deferredModules, executeModules || []);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> checkDeferredModules()</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkDeferredModules</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; deferredModules.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> deferredModule = deferredModules[i];</span><br><span class=\"line\">            <span class=\"keyword\">var</span> fulfilled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; deferredModule.length; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> depId = deferredModule[j];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (installedChunks[depId] !== <span class=\"number\">0</span>) fulfilled = <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fulfilled) &#123;</span><br><span class=\"line\">                deferredModules.splice(i--, <span class=\"number\">1</span>);</span><br><span class=\"line\">                result = __webpack_require__(__webpack_require__.s = deferredModule[<span class=\"number\">0</span>])</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> installedModules = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> installedChunks = &#123;</span><br><span class=\"line\">        <span class=\"string\">\"runtime\"</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> deferredModules = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (installedModules[moduleId]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> installedModules[moduleId].exports</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> <span class=\"built_in\">module</span> = installedModules[moduleId] = &#123;</span><br><span class=\"line\">            i: moduleId,</span><br><span class=\"line\">            l: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            exports: &#123;&#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        modules[moduleId].call(<span class=\"built_in\">module</span>.exports, <span class=\"built_in\">module</span>, <span class=\"built_in\">module</span>.exports, __webpack_require__);</span><br><span class=\"line\">        <span class=\"built_in\">module</span>.l = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>.exports</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    __webpack_require__.m = modules;</span><br><span class=\"line\">    __webpack_require__.c = installedModules;</span><br><span class=\"line\">    __webpack_require__.d = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">exports, name, getter</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!__webpack_require__.o(exports, name)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">Object</span>.defineProperty(exports, name, &#123;</span><br><span class=\"line\">                enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                get: getter</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.r = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">exports</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">Symbol</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">Symbol</span>.toStringTag) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">Object</span>.defineProperty(exports, <span class=\"built_in\">Symbol</span>.toStringTag, &#123;</span><br><span class=\"line\">                value: <span class=\"string\">'Module'</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(exports, <span class=\"string\">'__esModule'</span>, &#123;</span><br><span class=\"line\">            value: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.t = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, mode</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">1</span>) value = __webpack_require__(value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">8</span>) <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((mode &amp; <span class=\"number\">4</span>) &amp;&amp; <span class=\"keyword\">typeof</span> value === <span class=\"string\">'object'</span> &amp;&amp; value &amp;&amp; value.__esModule) <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> ns = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>);</span><br><span class=\"line\">        __webpack_require__.r(ns);</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(ns, <span class=\"string\">'default'</span>, &#123;</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            value: value</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">2</span> &amp;&amp; <span class=\"keyword\">typeof</span> value != <span class=\"string\">'string'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> value) __webpack_require__.d(ns, key, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> value[key]</span><br><span class=\"line\">            &#125;.bind(<span class=\"literal\">null</span>, key));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ns</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.n = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">module</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> getter = <span class=\"built_in\">module</span> &amp;&amp; <span class=\"built_in\">module</span>.__esModule ? <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDefault</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>[<span class=\"string\">'default'</span>]</span><br><span class=\"line\">        &#125; : <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getModuleExports</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">module</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        __webpack_require__.d(getter, <span class=\"string\">'a'</span>, getter);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getter</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.o = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, property</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(object, property)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.p = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> jsonpArray = <span class=\"built_in\">window</span>[<span class=\"string\">\"webpackJsonp\"</span>] = <span class=\"built_in\">window</span>[<span class=\"string\">\"webpackJsonp\"</span>] || [];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> oldJsonpFunction = jsonpArray.push.bind(jsonpArray);</span><br><span class=\"line\">    jsonpArray.push = webpackJsonpCallback;</span><br><span class=\"line\">    jsonpArray = jsonpArray.slice();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> parentJsonpFunction = oldJsonpFunction;</span><br><span class=\"line\">    checkDeferredModules()</span><br><span class=\"line\">&#125;)([]);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h2 id=\"webpack-runtime-\"><a href=\"#webpack-runtime-\" class=\"headerlink\" title=\"webpack runtime \"></a>webpack runtime </h2>","more":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">modules</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">webpackJsonpCallback</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> chunkIds = data[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> moreModules = data[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> executeModules = data[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"keyword\">var</span> moduleId, chunkId, i = <span class=\"number\">0</span>,</span><br><span class=\"line\">            resolves = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; i &lt; chunkIds.length; i++) &#123;</span><br><span class=\"line\">            chunkId = chunkIds[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(installedChunks, chunkId) &amp;&amp; installedChunks[chunkId]) &#123;</span><br><span class=\"line\">                resolves.push(installedChunks[chunkId][<span class=\"number\">0</span>])</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            installedChunks[chunkId] = <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (moduleId <span class=\"keyword\">in</span> moreModules) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(moreModules, moduleId)) &#123;</span><br><span class=\"line\">                modules[moduleId] = moreModules[moduleId]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (parentJsonpFunction) parentJsonpFunction(data);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resolves.length) &#123;</span><br><span class=\"line\">            resolves.shift()()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        deferredModules.push.apply(deferredModules, executeModules || []);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> checkDeferredModules()</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkDeferredModules</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; deferredModules.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> deferredModule = deferredModules[i];</span><br><span class=\"line\">            <span class=\"keyword\">var</span> fulfilled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; deferredModule.length; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> depId = deferredModule[j];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (installedChunks[depId] !== <span class=\"number\">0</span>) fulfilled = <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fulfilled) &#123;</span><br><span class=\"line\">                deferredModules.splice(i--, <span class=\"number\">1</span>);</span><br><span class=\"line\">                result = __webpack_require__(__webpack_require__.s = deferredModule[<span class=\"number\">0</span>])</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> installedModules = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> installedChunks = &#123;</span><br><span class=\"line\">        <span class=\"string\">\"runtime\"</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> deferredModules = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (installedModules[moduleId]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> installedModules[moduleId].exports</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> <span class=\"built_in\">module</span> = installedModules[moduleId] = &#123;</span><br><span class=\"line\">            i: moduleId,</span><br><span class=\"line\">            l: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            exports: &#123;&#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        modules[moduleId].call(<span class=\"built_in\">module</span>.exports, <span class=\"built_in\">module</span>, <span class=\"built_in\">module</span>.exports, __webpack_require__);</span><br><span class=\"line\">        <span class=\"built_in\">module</span>.l = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>.exports</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    __webpack_require__.m = modules;</span><br><span class=\"line\">    __webpack_require__.c = installedModules;</span><br><span class=\"line\">    __webpack_require__.d = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">exports, name, getter</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!__webpack_require__.o(exports, name)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">Object</span>.defineProperty(exports, name, &#123;</span><br><span class=\"line\">                enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                get: getter</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.r = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">exports</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">Symbol</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">Symbol</span>.toStringTag) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">Object</span>.defineProperty(exports, <span class=\"built_in\">Symbol</span>.toStringTag, &#123;</span><br><span class=\"line\">                value: <span class=\"string\">'Module'</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(exports, <span class=\"string\">'__esModule'</span>, &#123;</span><br><span class=\"line\">            value: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.t = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, mode</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">1</span>) value = __webpack_require__(value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">8</span>) <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((mode &amp; <span class=\"number\">4</span>) &amp;&amp; <span class=\"keyword\">typeof</span> value === <span class=\"string\">'object'</span> &amp;&amp; value &amp;&amp; value.__esModule) <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> ns = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>);</span><br><span class=\"line\">        __webpack_require__.r(ns);</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(ns, <span class=\"string\">'default'</span>, &#123;</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            value: value</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode &amp; <span class=\"number\">2</span> &amp;&amp; <span class=\"keyword\">typeof</span> value != <span class=\"string\">'string'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> value) __webpack_require__.d(ns, key, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> value[key]</span><br><span class=\"line\">            &#125;.bind(<span class=\"literal\">null</span>, key));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ns</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.n = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">module</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> getter = <span class=\"built_in\">module</span> &amp;&amp; <span class=\"built_in\">module</span>.__esModule ? <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDefault</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>[<span class=\"string\">'default'</span>]</span><br><span class=\"line\">        &#125; : <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getModuleExports</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">module</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        __webpack_require__.d(getter, <span class=\"string\">'a'</span>, getter);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getter</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.o = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, property</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(object, property)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    __webpack_require__.p = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> jsonpArray = <span class=\"built_in\">window</span>[<span class=\"string\">\"webpackJsonp\"</span>] = <span class=\"built_in\">window</span>[<span class=\"string\">\"webpackJsonp\"</span>] || [];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> oldJsonpFunction = jsonpArray.push.bind(jsonpArray);</span><br><span class=\"line\">    jsonpArray.push = webpackJsonpCallback;</span><br><span class=\"line\">    jsonpArray = jsonpArray.slice();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> parentJsonpFunction = oldJsonpFunction;</span><br><span class=\"line\">    checkDeferredModules()</span><br><span class=\"line\">&#125;)([]);</span><br></pre></td></tr></table></figure>"},{"title":"css-PostCSS","date":"2017-12-21T16:00:00.000Z","_content":"postcss\n<!-- more -->\n## postcss  \n### css \n:  \n\n```css\n.div{\n    display: flex;\n}\n```\n   \npostcss:\n\n```css\n.div{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n``` \n  \n### css   \n \n```css\n    body{\n    color: #f0;\n    }\n```\n\n:    \n\n```\nsrc/er.css\n 2:12    Unexpected invalid hex color \"#f0\"   color-no-invalid-hex\n\n\n\n[18:27:28] 'css-lint' errored after 98 ms\n[18:27:28] Error in plugin 'gulp-stylelint'\nMessage:\n    Failed with 1 error\n```\n### css css4\ncss    \n```css\n:root { \n    --red: #d33;\n  }\n  a { \n      color: var(--red);\n  }\n```\nes2015postcss  \n\n```css\na{\n    color:#d33\n}\n```\npostcss\n\n## postcss  \n\npostcss  \njscss(A tool for transforming CSS with JavaScript)postcss\n1. postcssnpm install  \n2. postCss   \n   postcss  \n   \npostcss\n \n#### postcss   \n  \nless/sasspostcsscsspostcss  \njscssASTpostcsscsscss  \n   \n\n## postcss    \n\nless/sass csspostcss  \n\n#### css  \n\nlesspostcss \n\n1 less  \n\n```css\n.flex-block() {\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n}\n.test{\n    .flex-block()\n}\n```\n2postcss\n\n```css\n.test{\n    display: flex;\n}\n```\nautoprefixer  \n?  \n\n```css\n.flex-block() {\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n}\n.transform(){\n    //\n}\n.ccc(){\n}\n.test{\n    .flex-block()\n    .transform()\n    .ccc()\n}\n```\npostcss:  \n\n```css\n.test{\n    display: flex;\n    transform:rotate(7deg);\n}\n```\npostcss  \n\n## postcss   \n\npostcssnodecss(AST)ASTsourcemap(w3cplus)\n<img src='https://www.w3cplus.com/sites/default/files/blogs/2017/1707/figure-18.png'/>\n\nbabel  \n* \n* AST\n* \n*    \n\n#### postcss  \n  \npostcsswebpackgulp[](https://github.com/postcss/postcss#usage)  \n\n##   \n\npostCssless[](https://github.com/xiaoxiangdaiyu/postcss/tree/master/)\n\n####   \n[http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/](http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/)\n[http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/](http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/)\n","source":"_posts/css/postcss.md","raw":"---\ntitle: css-PostCSS\ndate: 2017-12-22\n---\npostcss\n<!-- more -->\n## postcss  \n### css \n:  \n\n```css\n.div{\n    display: flex;\n}\n```\n   \npostcss:\n\n```css\n.div{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n``` \n  \n### css   \n \n```css\n    body{\n    color: #f0;\n    }\n```\n\n:    \n\n```\nsrc/er.css\n 2:12    Unexpected invalid hex color \"#f0\"   color-no-invalid-hex\n\n\n\n[18:27:28] 'css-lint' errored after 98 ms\n[18:27:28] Error in plugin 'gulp-stylelint'\nMessage:\n    Failed with 1 error\n```\n### css css4\ncss    \n```css\n:root { \n    --red: #d33;\n  }\n  a { \n      color: var(--red);\n  }\n```\nes2015postcss  \n\n```css\na{\n    color:#d33\n}\n```\npostcss\n\n## postcss  \n\npostcss  \njscss(A tool for transforming CSS with JavaScript)postcss\n1. postcssnpm install  \n2. postCss   \n   postcss  \n   \npostcss\n \n#### postcss   \n  \nless/sasspostcsscsspostcss  \njscssASTpostcsscsscss  \n   \n\n## postcss    \n\nless/sass csspostcss  \n\n#### css  \n\nlesspostcss \n\n1 less  \n\n```css\n.flex-block() {\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n}\n.test{\n    .flex-block()\n}\n```\n2postcss\n\n```css\n.test{\n    display: flex;\n}\n```\nautoprefixer  \n?  \n\n```css\n.flex-block() {\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n}\n.transform(){\n    //\n}\n.ccc(){\n}\n.test{\n    .flex-block()\n    .transform()\n    .ccc()\n}\n```\npostcss:  \n\n```css\n.test{\n    display: flex;\n    transform:rotate(7deg);\n}\n```\npostcss  \n\n## postcss   \n\npostcssnodecss(AST)ASTsourcemap(w3cplus)\n<img src='https://www.w3cplus.com/sites/default/files/blogs/2017/1707/figure-18.png'/>\n\nbabel  \n* \n* AST\n* \n*    \n\n#### postcss  \n  \npostcsswebpackgulp[](https://github.com/postcss/postcss#usage)  \n\n##   \n\npostCssless[](https://github.com/xiaoxiangdaiyu/postcss/tree/master/)\n\n####   \n[http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/](http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/)\n[http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/](http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/)\n","slug":"css/postcss","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7t0019gw928t87n70z","content":"<p>postcss<br><a id=\"more\"></a></p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><p>:  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-box;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">``` </span><br><span class=\"line\">  </span><br><span class=\"line\">### <span class=\"selector-tag\">css</span>   </span><br><span class=\"line\"> </span><br><span class=\"line\">```<span class=\"selector-tag\">css</span></span><br><span class=\"line\">    <span class=\"selector-tag\">body</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#f0</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>:    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">src/er.css</span><br><span class=\"line\"> 2:12    Unexpected invalid hex color &quot;#f0&quot;   color-no-invalid-hex</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[18:27:28] &apos;css-lint&apos; errored after 98 ms</span><br><span class=\"line\">[18:27:28] Error in plugin &apos;gulp-stylelint&apos;</span><br><span class=\"line\">Message:</span><br><span class=\"line\">    Failed with 1 error</span><br></pre></td></tr></table></figure>\n<h3 id=\"css-css4\"><a href=\"#css-css4\" class=\"headerlink\" title=\"css css4\"></a>css css4</h3><p>css<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123; </span><br><span class=\"line\">    <span class=\"attribute\">--red</span>: <span class=\"number\">#d33</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> &#123; </span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--red);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>es2015postcss  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:<span class=\"number\">#d33</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss</p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>postcss<br>jscss(A tool for transforming CSS with JavaScript)postcss</p>\n<ol>\n<li>postcssnpm install  </li>\n<li>postCss<br>postcss  </li>\n</ol>\n<p>postcss</p>\n<h4 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h4><p>less/sasspostcsscsspostcss<br>jscssASTpostcsscsscss<br>   </p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>less/sass csspostcss  </p>\n<h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><p>lesspostcss </p>\n<p>1 less  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.flex-block</span>() &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    .flex-block()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2postcss</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>autoprefixer<br>?  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.flex-block</span>() &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.transform</span>()&#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.ccc</span>()&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    .flex-block()</span><br><span class=\"line\">    <span class=\"selector-class\">.transform</span>()</span><br><span class=\"line\">    <span class=\"selector-class\">.ccc</span>()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss:  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(7deg);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss  </p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>postcssnodecss(AST)ASTsourcemap(w3cplus)<br><img src=\"https://www.w3cplus.com/sites/default/files/blogs/2017/1707/figure-18.png\"></p>\n<p>babel  </p>\n<ul>\n<li></li>\n<li>AST</li>\n<li></li>\n<li>   </li>\n</ul>\n<h4 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h4><p>postcsswebpackgulp<a href=\"https://github.com/postcss/postcss#usage\" target=\"_blank\" rel=\"noopener\"></a>  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>postCssless<a href=\"https://github.com/xiaoxiangdaiyu/postcss/tree/master/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/\" target=\"_blank\" rel=\"noopener\">http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/</a><br><a href=\"http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/\" target=\"_blank\" rel=\"noopener\">http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/</a></p>\n","site":{"data":{}},"excerpt":"<p>postcss<br>","more":"</p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><p>:  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-box;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">``` </span><br><span class=\"line\">  </span><br><span class=\"line\">### <span class=\"selector-tag\">css</span>   </span><br><span class=\"line\"> </span><br><span class=\"line\">```<span class=\"selector-tag\">css</span></span><br><span class=\"line\">    <span class=\"selector-tag\">body</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#f0</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>:    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">src/er.css</span><br><span class=\"line\"> 2:12    Unexpected invalid hex color &quot;#f0&quot;   color-no-invalid-hex</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[18:27:28] &apos;css-lint&apos; errored after 98 ms</span><br><span class=\"line\">[18:27:28] Error in plugin &apos;gulp-stylelint&apos;</span><br><span class=\"line\">Message:</span><br><span class=\"line\">    Failed with 1 error</span><br></pre></td></tr></table></figure>\n<h3 id=\"css-css4\"><a href=\"#css-css4\" class=\"headerlink\" title=\"css css4\"></a>css css4</h3><p>css<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123; </span><br><span class=\"line\">    <span class=\"attribute\">--red</span>: <span class=\"number\">#d33</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> &#123; </span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--red);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>es2015postcss  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:<span class=\"number\">#d33</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss</p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>postcss<br>jscss(A tool for transforming CSS with JavaScript)postcss</p>\n<ol>\n<li>postcssnpm install  </li>\n<li>postCss<br>postcss  </li>\n</ol>\n<p>postcss</p>\n<h4 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h4><p>less/sasspostcsscsspostcss<br>jscssASTpostcsscsscss<br>   </p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>less/sass csspostcss  </p>\n<h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><p>lesspostcss </p>\n<p>1 less  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.flex-block</span>() &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    .flex-block()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2postcss</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>autoprefixer<br>?  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.flex-block</span>() &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -ms-flexbox;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.transform</span>()&#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.ccc</span>()&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    .flex-block()</span><br><span class=\"line\">    <span class=\"selector-class\">.transform</span>()</span><br><span class=\"line\">    <span class=\"selector-class\">.ccc</span>()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss:  </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.test</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(7deg);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>postcss  </p>\n<h2 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h2><p>postcssnodecss(AST)ASTsourcemap(w3cplus)<br><img src=\"https://www.w3cplus.com/sites/default/files/blogs/2017/1707/figure-18.png\"></p>\n<p>babel  </p>\n<ul>\n<li></li>\n<li>AST</li>\n<li></li>\n<li>   </li>\n</ul>\n<h4 id=\"postcss\"><a href=\"#postcss\" class=\"headerlink\" title=\"postcss\"></a>postcss</h4><p>postcsswebpackgulp<a href=\"https://github.com/postcss/postcss#usage\" target=\"_blank\" rel=\"noopener\"></a>  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>postCssless<a href=\"https://github.com/xiaoxiangdaiyu/postcss/tree/master/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/\" target=\"_blank\" rel=\"noopener\">http://davidtheclark.com/its-time-for-everyone-to-learn-about-postcss/</a><br><a href=\"http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/\" target=\"_blank\" rel=\"noopener\">http://julian.io/some-things-you-may-think-about-postcss-and-you-might-be-wrong/</a></p>"},{"title":"redux()","date":"2018-06-12T16:00:00.000Z","_content":"\n##   \nreactreduxreduxreduxredux\n<!--more-->\nredux[Redux ](http://www.redux.org.cn/)\n##   \n   \nredux   \n \n   \n  \nclone  \n   \n   \n \n     \n\n\n\nredux   \n\n```js  \nexport {\n  createStore,\n  combineReducers,\n  bindActionCreators,\n  applyMiddleware,\n  compose\n}\n```\nRedux   \n\n## actionactionCreater  \n### \naction  JavaScript  \n Redux  actionCreater action \n```js  \n//addTodo actionCreater\nfunction addTodo(text) {\n  //returnaction\n  return {\n    type: ADD_TODO,\n    text\n  }\n}\n```\n  Flux  action   \n dispatch  \nRedux  action  dispatch()  dispatch \n```js\ndispatch(addTodo(text))\n// \nconst boundAddTodo = text => dispatch(addTodo(text))\n```\nactionCreaterdispatch  \nreact-redux  connect()   \n  \nbindActionCreators()  action   dispatch()     \n\nconnectbindActionCreators  \n\nwarper  \n \n```js  \nfunction a (){\n   /*.....*/  \n};\nfunction b(f){\n  /*.....*/ \n  return f()\n}\n```    \nbac\n\n```js\nfunction c(){\n    return ()=> b(a)\n}\n```\n\n## bindActionCreators()    \n  \n\n```js\n// actionCreator\nfunction bindActionCreator(actionCreator, dispatch) {\n  //dispatchaction\n  return (...args) => dispatch(actionCreator(...args))\n}\nexport default function bindActionCreators(actionCreators, dispatch) {\n   // function actionCreator bindActionCreator\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n   // \n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(``)\n  }\n  //keys\n  var keys = Object.keys(actionCreators)\n  var boundActionCreators = {}\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    var actionCreator = actionCreators[key]\n    //\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }\n  //\n  return boundActionCreators\n}\n```\n\n####  bindActionCreator   \nActionCreator  \n\n```js\n   function bindActionCreator(actionCreator, dispatch) {\n  //dispatchaction\n  return (...args) => dispatch(actionCreator(...args))\n  } \n```\nbindActionCreatorsactionCreators,actionCreator  \n bindActionCreator    \n \n#### bindActionCreators  \n\n* typeof actionCreators === 'function'  \n   bindActionCreator  \n* null\n* key boundActionCreators    \n\n```js  \n  // function actionCreator bindActionCreator\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n   // \n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(``)\n  }\n  //keys\n  var keys = Object.keys(actionCreators)\n  var boundActionCreators = {}\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    var actionCreator = actionCreators[key]\n    //\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }  \n```\n actionCreatorsdispatch    \n\n\n   \n## reducer  \naction reducer  \n Redux  state   \n\nreduceratcion  \n  \n```js  \nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: state.todos.map((todo, index) => {\n          if (index === action.index) {\n            return Object.assign({}, todo, {\n              completed: !todo.completed\n            })\n          }\n          return todo\n        })\n      })\n    default:\n      return state\n  }\n}  \n```\nreducerstatestate\n:\n\n```js\n//reducer1  \n function reducer1(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return state.reducer1.a \n      //statestate.reducer1\n      return state.a\n }\n```\n\n reducer  state   \n reducer  state  state   \n\nreducer  \n\n```js\nfunction todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n```\nreduxcombineReducers()\n\n```js\nimport { combineReducers } from 'redux'\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n```\ncombineReducers \n\n## combineReducers    \n  \n  \n\n```js \nexport default function combineReducers(reducers) {\n  // reducerkey reducer\n  var reducerKeys = Object.keys(reducers)\n\n  var finalReducers = {}\n  //  finalReducersreducer\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i]\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key]\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers)\n\n  var sanityError\n  try {\n    // \n    assertReducerSanity(finalReducers)\n  } catch (e) {\n    sanityError = e\n  }\n\n  return function combination(state = {}, action) {\n    if (sanityError) {\n      throw sanityError\n    }\n    //  \n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action)\n      if (warningMessage) {\n        warning(warningMessage)\n      }\n    }\n    /**\n     * action\n     * finalReducersreducernextState\n     * keystatenextState\n     * */\n    // stateflag \n    var hasChanged = false\n    var nextState = {}\n    // \n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i]\n      var reducer = finalReducers[key]\n      // keystate\n      var previousStateForKey = state[key]\n      // key\n      var nextStateForKey = reducer(previousStateForKey, action)\n      // undefined\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action)\n        throw new Error(errorMessage)\n      }\n      //  nextState\n      nextState[key] = nextStateForKey\n      //  \n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n    }\n    // state\n    return hasChanged ? nextState : state\n  }\n}\n```\n####   \nreducers    \n \n* reducer\n* import * as reducers \n* tips  \nreducerdefault stateundefinedactionundefined\nreducerstate  \n#### reducers \n\n  \n```js\n// reducer key  keystate\n  var reducerKeys = Object.keys(reducers)\n\n  var finalReducers = {}\n  //  finalReducersreducer\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i]\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key]\n    }\n  }\n//finalReducers   \nvar finalReducerKeys = Object.keys(finalReducers)\n```\n  \n#### combination  \nfunction  \n* actiondispatchstatereducerstate  \n  \n* \n```js  \n    // stateflag \n    var hasChanged = false\n    var nextState = {}  \n```\n* finalReducers\n   previousStateForKey  \n   \n* reducernextStateForKey  \n   \n  nextStateForKey reducerundefined    \n  \n  nextStateForKeynextStatekey  \n\n* statehasChangedtrue \nstatenextState\n\n```js  \nfor (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i]\n      var reducer = finalReducers[key]\n      // keystate\n      var previousStateForKey = state[key]\n      // key\n      var nextStateForKey = reducer(previousStateForKey, action)\n      // undefined\n      if (typeof nextStateForKey === 'undefined') {\n         //.....\n      }\n      //  nextState\n      nextState[key] = nextStateForKey\n      //  \n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n    }\n```\nhasChangedstate \n \n```js\n// state\n    return hasChanged ? nextState : state\n```    \ncombineReducers\n##   \n[](https://github.com/xiaoxiangdaiyu/blog)\n####   \n[Redux ](http://www.redux.org.cn/)\n\n\n\n\n\n","source":"_posts/redux/redux1.md","raw":"---\ntitle: redux()\ndate: 2018-06-13\n---\n\n##   \nreactreduxreduxreduxredux\n<!--more-->\nredux[Redux ](http://www.redux.org.cn/)\n##   \n   \nredux   \n \n   \n  \nclone  \n   \n   \n \n     \n\n\n\nredux   \n\n```js  \nexport {\n  createStore,\n  combineReducers,\n  bindActionCreators,\n  applyMiddleware,\n  compose\n}\n```\nRedux   \n\n## actionactionCreater  \n### \naction  JavaScript  \n Redux  actionCreater action \n```js  \n//addTodo actionCreater\nfunction addTodo(text) {\n  //returnaction\n  return {\n    type: ADD_TODO,\n    text\n  }\n}\n```\n  Flux  action   \n dispatch  \nRedux  action  dispatch()  dispatch \n```js\ndispatch(addTodo(text))\n// \nconst boundAddTodo = text => dispatch(addTodo(text))\n```\nactionCreaterdispatch  \nreact-redux  connect()   \n  \nbindActionCreators()  action   dispatch()     \n\nconnectbindActionCreators  \n\nwarper  \n \n```js  \nfunction a (){\n   /*.....*/  \n};\nfunction b(f){\n  /*.....*/ \n  return f()\n}\n```    \nbac\n\n```js\nfunction c(){\n    return ()=> b(a)\n}\n```\n\n## bindActionCreators()    \n  \n\n```js\n// actionCreator\nfunction bindActionCreator(actionCreator, dispatch) {\n  //dispatchaction\n  return (...args) => dispatch(actionCreator(...args))\n}\nexport default function bindActionCreators(actionCreators, dispatch) {\n   // function actionCreator bindActionCreator\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n   // \n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(``)\n  }\n  //keys\n  var keys = Object.keys(actionCreators)\n  var boundActionCreators = {}\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    var actionCreator = actionCreators[key]\n    //\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }\n  //\n  return boundActionCreators\n}\n```\n\n####  bindActionCreator   \nActionCreator  \n\n```js\n   function bindActionCreator(actionCreator, dispatch) {\n  //dispatchaction\n  return (...args) => dispatch(actionCreator(...args))\n  } \n```\nbindActionCreatorsactionCreators,actionCreator  \n bindActionCreator    \n \n#### bindActionCreators  \n\n* typeof actionCreators === 'function'  \n   bindActionCreator  \n* null\n* key boundActionCreators    \n\n```js  \n  // function actionCreator bindActionCreator\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n   // \n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(``)\n  }\n  //keys\n  var keys = Object.keys(actionCreators)\n  var boundActionCreators = {}\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    var actionCreator = actionCreators[key]\n    //\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }  \n```\n actionCreatorsdispatch    \n\n\n   \n## reducer  \naction reducer  \n Redux  state   \n\nreduceratcion  \n  \n```js  \nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: state.todos.map((todo, index) => {\n          if (index === action.index) {\n            return Object.assign({}, todo, {\n              completed: !todo.completed\n            })\n          }\n          return todo\n        })\n      })\n    default:\n      return state\n  }\n}  \n```\nreducerstatestate\n:\n\n```js\n//reducer1  \n function reducer1(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return state.reducer1.a \n      //statestate.reducer1\n      return state.a\n }\n```\n\n reducer  state   \n reducer  state  state   \n\nreducer  \n\n```js\nfunction todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n```\nreduxcombineReducers()\n\n```js\nimport { combineReducers } from 'redux'\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n```\ncombineReducers \n\n## combineReducers    \n  \n  \n\n```js \nexport default function combineReducers(reducers) {\n  // reducerkey reducer\n  var reducerKeys = Object.keys(reducers)\n\n  var finalReducers = {}\n  //  finalReducersreducer\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i]\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key]\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers)\n\n  var sanityError\n  try {\n    // \n    assertReducerSanity(finalReducers)\n  } catch (e) {\n    sanityError = e\n  }\n\n  return function combination(state = {}, action) {\n    if (sanityError) {\n      throw sanityError\n    }\n    //  \n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action)\n      if (warningMessage) {\n        warning(warningMessage)\n      }\n    }\n    /**\n     * action\n     * finalReducersreducernextState\n     * keystatenextState\n     * */\n    // stateflag \n    var hasChanged = false\n    var nextState = {}\n    // \n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i]\n      var reducer = finalReducers[key]\n      // keystate\n      var previousStateForKey = state[key]\n      // key\n      var nextStateForKey = reducer(previousStateForKey, action)\n      // undefined\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action)\n        throw new Error(errorMessage)\n      }\n      //  nextState\n      nextState[key] = nextStateForKey\n      //  \n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n    }\n    // state\n    return hasChanged ? nextState : state\n  }\n}\n```\n####   \nreducers    \n \n* reducer\n* import * as reducers \n* tips  \nreducerdefault stateundefinedactionundefined\nreducerstate  \n#### reducers \n\n  \n```js\n// reducer key  keystate\n  var reducerKeys = Object.keys(reducers)\n\n  var finalReducers = {}\n  //  finalReducersreducer\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i]\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key]\n    }\n  }\n//finalReducers   \nvar finalReducerKeys = Object.keys(finalReducers)\n```\n  \n#### combination  \nfunction  \n* actiondispatchstatereducerstate  \n  \n* \n```js  \n    // stateflag \n    var hasChanged = false\n    var nextState = {}  \n```\n* finalReducers\n   previousStateForKey  \n   \n* reducernextStateForKey  \n   \n  nextStateForKey reducerundefined    \n  \n  nextStateForKeynextStatekey  \n\n* statehasChangedtrue \nstatenextState\n\n```js  \nfor (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i]\n      var reducer = finalReducers[key]\n      // keystate\n      var previousStateForKey = state[key]\n      // key\n      var nextStateForKey = reducer(previousStateForKey, action)\n      // undefined\n      if (typeof nextStateForKey === 'undefined') {\n         //.....\n      }\n      //  nextState\n      nextState[key] = nextStateForKey\n      //  \n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n    }\n```\nhasChangedstate \n \n```js\n// state\n    return hasChanged ? nextState : state\n```    \ncombineReducers\n##   \n[](https://github.com/xiaoxiangdaiyu/blog)\n####   \n[Redux ](http://www.redux.org.cn/)\n\n\n\n\n\n","slug":"redux/redux1","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7u001bgw923qu9amii","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>reactreduxreduxreduxredux<br><a id=\"more\"></a><br>redux<a href=\"http://www.redux.org.cn/\" target=\"_blank\" rel=\"noopener\">Redux </a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>redux   </p>\n<p>   </p>\n<p>clone  </p>\n<p>   </p>\n<p>     </p>\n<p></p>\n<p>redux   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123;</span><br><span class=\"line\">  createStore,</span><br><span class=\"line\">  combineReducers,</span><br><span class=\"line\">  bindActionCreators,</span><br><span class=\"line\">  applyMiddleware,</span><br><span class=\"line\">  compose</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Redux   </p>\n<h2 id=\"actionactionCreater\"><a href=\"#actionactionCreater\" class=\"headerlink\" title=\"actionactionCreater\"></a>actionactionCreater</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>action  JavaScript <br> Redux  actionCreater action <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//addTodo actionCreater</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//returnaction</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    text</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>  Flux  action <br> dispatch<br>Redux  action  dispatch()  dispatch <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dispatch(addTodo(text))</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> boundAddTodo = <span class=\"function\"><span class=\"params\">text</span> =&gt;</span> dispatch(addTodo(text))</span><br></pre></td></tr></table></figure></p>\n<p>actionCreaterdispatch<br>react-redux  connect()   </p>\n<p>bindActionCreators()  action   dispatch()     </p>\n<p>connectbindActionCreators  </p>\n<p>warper  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">/*.....*/</span>  </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\">f</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/*.....*/</span> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> f()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\">bac</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span>=&gt;</span> b(a)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"bindActionCreators\"><a href=\"#bindActionCreators\" class=\"headerlink\" title=\"bindActionCreators()\"></a>bindActionCreators()</h2><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// actionCreator</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//dispatchaction</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreators</span>(<span class=\"params\">actionCreators, dispatch</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// function actionCreator bindActionCreator</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">``</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//keys</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\">  <span class=\"keyword\">var</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = keys[i]</span><br><span class=\"line\">    <span class=\"keyword\">var</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> boundActionCreators</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"-bindActionCreator\"><a href=\"#-bindActionCreator\" class=\"headerlink\" title=\" bindActionCreator\"></a> bindActionCreator</h4><p>ActionCreator  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//dispatchaction</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>bindActionCreatorsactionCreators,actionCreator<br> bindActionCreator    </p>\n<h4 id=\"bindActionCreators\"><a href=\"#bindActionCreators\" class=\"headerlink\" title=\"bindActionCreators\"></a>bindActionCreators</h4><ul>\n<li>typeof actionCreators === function<br> bindActionCreator  </li>\n<li>null</li>\n<li>key boundActionCreators    </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// function actionCreator bindActionCreator</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">``</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//keys</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\"><span class=\"keyword\">var</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> key = keys[i]</span><br><span class=\"line\">  <span class=\"keyword\">var</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> actionCreatorsdispatch    </p>\n<h2 id=\"reducer\"><a href=\"#reducer\" class=\"headerlink\" title=\"reducer\"></a>reducer</h2><p>action reducer<br> Redux  state   </p>\n<p>reduceratcion  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        visibilityFilter: action.filter</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            text: action.text,</span><br><span class=\"line\">            completed: <span class=\"literal\">false</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> TOGGLE_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: state.todos.map(<span class=\"function\">(<span class=\"params\">todo, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (index === action.index) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, todo, &#123;</span><br><span class=\"line\">              completed: !todo.completed</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>reducerstatestate<br>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//reducer1  </span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer1</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state.reducer1.a </span><br><span class=\"line\">      <span class=\"comment\">//statestate.reducer1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> state.a</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p> reducer  state <br> reducer  state  state   </p>\n<p>reducer  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    visibilityFilter: visibilityFilter(state.visibilityFilter, action),</span><br><span class=\"line\">    todos: todos(state.todos, action)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>reduxcombineReducers()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoApp = combineReducers(&#123;</span><br><span class=\"line\">  visibilityFilter,</span><br><span class=\"line\">  todos</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>combineReducers </p>\n<h2 id=\"combineReducers\"><a href=\"#combineReducers\" class=\"headerlink\" title=\"combineReducers\"></a>combineReducers</h2><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combineReducers</span>(<span class=\"params\">reducers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// reducerkey reducer</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducers = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">//  finalReducersreducer</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = reducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      finalReducers[key] = reducers[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> sanityError</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    assertReducerSanity(finalReducers)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">    sanityError = e</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sanityError) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> sanityError</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (warningMessage) &#123;</span><br><span class=\"line\">        warning(warningMessage)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * action</span></span><br><span class=\"line\"><span class=\"comment\">     * finalReducersreducernextState</span></span><br><span class=\"line\"><span class=\"comment\">     * keystatenextState</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\">    <span class=\"comment\">// stateflag </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextState = &#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = finalReducerKeys[i]</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reducer = finalReducers[key]</span><br><span class=\"line\">      <span class=\"comment\">// keystate</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> previousStateForKey = state[key]</span><br><span class=\"line\">      <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">      <span class=\"comment\">// undefined</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(errorMessage)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  nextState</span></span><br><span class=\"line\">      nextState[key] = nextStateForKey</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hasChanged ? nextState : state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>reducers    </p>\n<ul>\n<li>reducer</li>\n<li>import * as reducers </li>\n<li>tips<br>reducerdefault stateundefinedactionundefined<br>reducerstate  <h4 id=\"reducers\"><a href=\"#reducers\" class=\"headerlink\" title=\"reducers\"></a>reducers</h4></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// reducer key  keystate</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducers = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">//  finalReducersreducer</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = reducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      finalReducers[key] = reducers[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//finalReducers   </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"combination\"><a href=\"#combination\" class=\"headerlink\" title=\"combination\"></a>combination</h4><p>function  </p>\n<ul>\n<li><p>actiondispatchstatereducerstate  </p>\n</li>\n<li><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// stateflag </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nextState = &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>finalReducers<br> previousStateForKey  </p>\n</li>\n<li><p>reducernextStateForKey  </p>\n<p>nextStateForKey reducerundefined    </p>\n<p>nextStateForKeynextStatekey  </p>\n</li>\n<li><p>statehasChangedtrue<br>statenextState</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = finalReducerKeys[i]</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reducer = finalReducers[key]</span><br><span class=\"line\">      <span class=\"comment\">// keystate</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> previousStateForKey = state[key]</span><br><span class=\"line\">      <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">      <span class=\"comment\">// undefined</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">//.....</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  nextState</span></span><br><span class=\"line\">      nextState[key] = nextStateForKey</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>hasChangedstate </p>\n<pre><code class=\"js\"><span class=\"comment\">// state</span>\n    <span class=\"keyword\">return</span> hasChanged ? nextState : state\n</code></pre>\n<p>combineReducers</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.redux.org.cn/\" target=\"_blank\" rel=\"noopener\">Redux </a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>reactreduxreduxreduxredux<br>","more":"<br>redux<a href=\"http://www.redux.org.cn/\" target=\"_blank\" rel=\"noopener\">Redux </a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>redux   </p>\n<p>   </p>\n<p>clone  </p>\n<p>   </p>\n<p>     </p>\n<p></p>\n<p>redux   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123;</span><br><span class=\"line\">  createStore,</span><br><span class=\"line\">  combineReducers,</span><br><span class=\"line\">  bindActionCreators,</span><br><span class=\"line\">  applyMiddleware,</span><br><span class=\"line\">  compose</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Redux   </p>\n<h2 id=\"actionactionCreater\"><a href=\"#actionactionCreater\" class=\"headerlink\" title=\"actionactionCreater\"></a>actionactionCreater</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>action  JavaScript <br> Redux  actionCreater action <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//addTodo actionCreater</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//returnaction</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    text</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>  Flux  action <br> dispatch<br>Redux  action  dispatch()  dispatch <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dispatch(addTodo(text))</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> boundAddTodo = <span class=\"function\"><span class=\"params\">text</span> =&gt;</span> dispatch(addTodo(text))</span><br></pre></td></tr></table></figure></p>\n<p>actionCreaterdispatch<br>react-redux  connect()   </p>\n<p>bindActionCreators()  action   dispatch()     </p>\n<p>connectbindActionCreators  </p>\n<p>warper  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">/*.....*/</span>  </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\">f</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/*.....*/</span> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> f()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\">bac</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span>=&gt;</span> b(a)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"bindActionCreators\"><a href=\"#bindActionCreators\" class=\"headerlink\" title=\"bindActionCreators()\"></a>bindActionCreators()</h2><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// actionCreator</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//dispatchaction</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreators</span>(<span class=\"params\">actionCreators, dispatch</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// function actionCreator bindActionCreator</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">``</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//keys</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\">  <span class=\"keyword\">var</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = keys[i]</span><br><span class=\"line\">    <span class=\"keyword\">var</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> boundActionCreators</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"-bindActionCreator\"><a href=\"#-bindActionCreator\" class=\"headerlink\" title=\" bindActionCreator\"></a> bindActionCreator</h4><p>ActionCreator  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//dispatchaction</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>bindActionCreatorsactionCreators,actionCreator<br> bindActionCreator    </p>\n<h4 id=\"bindActionCreators\"><a href=\"#bindActionCreators\" class=\"headerlink\" title=\"bindActionCreators\"></a>bindActionCreators</h4><ul>\n<li>typeof actionCreators === function<br> bindActionCreator  </li>\n<li>null</li>\n<li>key boundActionCreators    </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// function actionCreator bindActionCreator</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">``</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//keys</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\"><span class=\"keyword\">var</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> key = keys[i]</span><br><span class=\"line\">  <span class=\"keyword\">var</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> actionCreatorsdispatch    </p>\n<h2 id=\"reducer\"><a href=\"#reducer\" class=\"headerlink\" title=\"reducer\"></a>reducer</h2><p>action reducer<br> Redux  state   </p>\n<p>reduceratcion  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        visibilityFilter: action.filter</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            text: action.text,</span><br><span class=\"line\">            completed: <span class=\"literal\">false</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> TOGGLE_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, state, &#123;</span><br><span class=\"line\">        todos: state.todos.map(<span class=\"function\">(<span class=\"params\">todo, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (index === action.index) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.assign(&#123;&#125;, todo, &#123;</span><br><span class=\"line\">              completed: !todo.completed</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>reducerstatestate<br>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//reducer1  </span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer1</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SET_VISIBILITY_FILTER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state.reducer1.a </span><br><span class=\"line\">      <span class=\"comment\">//statestate.reducer1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> state.a</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p> reducer  state <br> reducer  state  state   </p>\n<p>reducer  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todoApp</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    visibilityFilter: visibilityFilter(state.visibilityFilter, action),</span><br><span class=\"line\">    todos: todos(state.todos, action)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>reduxcombineReducers()</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoApp = combineReducers(&#123;</span><br><span class=\"line\">  visibilityFilter,</span><br><span class=\"line\">  todos</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>combineReducers </p>\n<h2 id=\"combineReducers\"><a href=\"#combineReducers\" class=\"headerlink\" title=\"combineReducers\"></a>combineReducers</h2><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combineReducers</span>(<span class=\"params\">reducers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// reducerkey reducer</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducers = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">//  finalReducersreducer</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = reducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      finalReducers[key] = reducers[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> sanityError</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    assertReducerSanity(finalReducers)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">    sanityError = e</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sanityError) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> sanityError</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (warningMessage) &#123;</span><br><span class=\"line\">        warning(warningMessage)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * action</span></span><br><span class=\"line\"><span class=\"comment\">     * finalReducersreducernextState</span></span><br><span class=\"line\"><span class=\"comment\">     * keystatenextState</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\">    <span class=\"comment\">// stateflag </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextState = &#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = finalReducerKeys[i]</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reducer = finalReducers[key]</span><br><span class=\"line\">      <span class=\"comment\">// keystate</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> previousStateForKey = state[key]</span><br><span class=\"line\">      <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">      <span class=\"comment\">// undefined</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(errorMessage)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  nextState</span></span><br><span class=\"line\">      nextState[key] = nextStateForKey</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hasChanged ? nextState : state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>reducers    </p>\n<ul>\n<li>reducer</li>\n<li>import * as reducers </li>\n<li>tips<br>reducerdefault stateundefinedactionundefined<br>reducerstate  <h4 id=\"reducers\"><a href=\"#reducers\" class=\"headerlink\" title=\"reducers\"></a>reducers</h4></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// reducer key  keystate</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> finalReducers = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">//  finalReducersreducer</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = reducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      finalReducers[key] = reducers[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//finalReducers   </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"combination\"><a href=\"#combination\" class=\"headerlink\" title=\"combination\"></a>combination</h4><p>function  </p>\n<ul>\n<li><p>actiondispatchstatereducerstate  </p>\n</li>\n<li><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// stateflag </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nextState = &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>finalReducers<br> previousStateForKey  </p>\n</li>\n<li><p>reducernextStateForKey  </p>\n<p>nextStateForKey reducerundefined    </p>\n<p>nextStateForKeynextStatekey  </p>\n</li>\n<li><p>statehasChangedtrue<br>statenextState</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = finalReducerKeys[i]</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reducer = finalReducers[key]</span><br><span class=\"line\">      <span class=\"comment\">// keystate</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> previousStateForKey = state[key]</span><br><span class=\"line\">      <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">      <span class=\"comment\">// undefined</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">//.....</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  nextState</span></span><br><span class=\"line\">      nextState[key] = nextStateForKey</span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>hasChangedstate </p>\n<pre><code class=\"js\"><span class=\"comment\">// state</span>\n    <span class=\"keyword\">return</span> hasChanged ? nextState : state\n</code></pre>\n<p>combineReducers</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/xiaoxiangdaiyu/blog\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.redux.org.cn/\" target=\"_blank\" rel=\"noopener\">Redux </a></p>"},{"title":"webpackcode splitting","date":"2018-01-26T02:55:57.000Z","_content":"webpack  \n<!-- more -->\nn  \n  \n code splitting \n## code splitting \n   \n\n   \n     \n   webpack\n## webpack   \nwebpack\n1. Entry Points: \n2. Prevent Duplication:\n3. Dynamic Imports: \n\n\n\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd777da3adc1?w=738&h=254&f=jpeg&s=19970)  \n\n(commonjs):  \n\n```js\n//a.js\nvar react = require('react')\nvar tool = require('./tool')\nvar b = require('./b')\nfunction load(){\n    b()\n    tool()\n    console.log('')\n}\nload()\n//b.js\nvar react = require('react')\nvar tool = require('./tool')\nfunction b(){\n    tool()\n    console.log('bjs')\n}\nmodule.exports = b;\n//tool.js\nvar react = require('react')\nfunction tool(){\n    console.log('tooljs')\n}\nmodule.exports = tool;\n```  \n\n:\n\n```js\nvar webpack = require('webpack');module.exports = {\n    entry: './codesplitting/c1/a.js',\n    output: {\n        path: __dirname,\n        filename: '/dist/index.js'\n    }\n    //*****\n}\n```\n2047,\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd777e941ac1?w=1280&h=402&f=png&s=119875)  \n\nreact  \n### Entry Points\n\nb.js:\n\n```js\n    entry: {\n        index:'./codesplitting/c1/a.js',\n        other:'./codesplitting/c1/b.js'\n    },\n    output: {\n        path: path.resolve(__dirname, './dist'),\n        filename: '[name].js'\n    }\n    //***\n```\na.js,b\n:\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd77812b0d89?w=1170&h=342&f=png&s=129329)  \n  \ndistreacttool.js  \n  \n  \n\n\n### Prevent Duplication  \nwebpack[CommonsChunkPlugin](https://webpack.js.org/plugins/commons-chunk-plugin/)\n\n```js\n{\n    //chunkcommon,string\n    //namenames\n    name:string,\n    names:[],\n    //\n    //'[name].js'\n    //name\n    filename:string,\n     //\n    //Infinity\n    minChunks:2  \n}\n```\nwebpackvendorcommon\n\n```js\nentry: {\n        index:'./codesplitting/c1/a.js',\n        other:'./codesplitting/c1/b.js',\n        //\n        vendor:['react'],\n        //common\n        common:['./codesplitting/c1/tool']\n    },\n    //***\n    plugins: [\n        new webpack.optimize.CommonsChunkPlugin({\n            names:[\"common\", \"vendor\"],\n            filename: \"[name].js\"\n        })  \n    ]\n```  \n\n\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd7786a1c7a1?w=958&h=266&f=png&s=95165)\n\nindexotherreact  \n  \n  \n### Dynamic Imports  \nwebpack   \n\n1)ECMAScriptimport()   \n\n2)webpack  require.ensure   \n\n(babel...),ajsdi.js  \n\n```js\n    //,\n    if(true){\n        require.ensure([],function(require){\n            var di = require('./di')\n        })\n    }\n    //js\n    function di(){\n        tool()\n        console.log('')\n    }\n    module.exports = di;\n```\n2.2.js,di.js\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd77c0c64a7d?w=1086&h=266&f=png&s=94861)\n\n(dev server)\nindex.js\n\n```js\n      var react = __webpack_require__(2)\n\t   var tool = __webpack_require__(1)  \n\t   /****8*****/\n      //\n\t    if(true){\n\t        __webpack_require__.e/* nsure */(2, function(require){\n\t            var di = __webpack_require__(13)\n\t        })\n\t    }\n```\n\nrequire,require.ensure __webpack_require__.e\n\n```js  \n   \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n\t\t// \"0\" is the signal for \"already loaded\"\n\t\tif(installedChunks[chunkId] === 0)\n\t\t\treturn callback.call(null, __webpack_require__);\n\n\t\t// an array means \"currently loading\".\n\t\tif(installedChunks[chunkId] !== undefined) {\n\t\t\tinstalledChunks[chunkId].push(callback);\n\t\t} else {\n\t\t\t// start chunk loading\n\t\t\tinstalledChunks[chunkId] = [callback];\n\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\tvar script = document.createElement('script');\n\t\t\tscript.type = 'text/javascript';\n\t\t\tscript.charset = 'utf-8';\n\t\t\tscript.async = true;\n\n\t\t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + ({\"0\":\"common\",\"1\":\"index\",\"3\":\"other\"}[chunkId]||chunkId) + \".js\";\n\t\t\thead.appendChild(script);\n\t\t}\n\t};\n```  \nscriptscript\n#### \n[github](https://github.com/xiaoxiangdaiyu/webpack_demo/tree/master/codesplitting)","source":"_posts/webpack/code-splitting.md","raw":"---\ntitle: webpackcode splitting\ndate: 2018-01-26 10:55:57\ntags: webpack\n---\nwebpack  \n<!-- more -->\nn  \n  \n code splitting \n## code splitting \n   \n\n   \n     \n   webpack\n## webpack   \nwebpack\n1. Entry Points: \n2. Prevent Duplication:\n3. Dynamic Imports: \n\n\n\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd777da3adc1?w=738&h=254&f=jpeg&s=19970)  \n\n(commonjs):  \n\n```js\n//a.js\nvar react = require('react')\nvar tool = require('./tool')\nvar b = require('./b')\nfunction load(){\n    b()\n    tool()\n    console.log('')\n}\nload()\n//b.js\nvar react = require('react')\nvar tool = require('./tool')\nfunction b(){\n    tool()\n    console.log('bjs')\n}\nmodule.exports = b;\n//tool.js\nvar react = require('react')\nfunction tool(){\n    console.log('tooljs')\n}\nmodule.exports = tool;\n```  \n\n:\n\n```js\nvar webpack = require('webpack');module.exports = {\n    entry: './codesplitting/c1/a.js',\n    output: {\n        path: __dirname,\n        filename: '/dist/index.js'\n    }\n    //*****\n}\n```\n2047,\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd777e941ac1?w=1280&h=402&f=png&s=119875)  \n\nreact  \n### Entry Points\n\nb.js:\n\n```js\n    entry: {\n        index:'./codesplitting/c1/a.js',\n        other:'./codesplitting/c1/b.js'\n    },\n    output: {\n        path: path.resolve(__dirname, './dist'),\n        filename: '[name].js'\n    }\n    //***\n```\na.js,b\n:\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd77812b0d89?w=1170&h=342&f=png&s=129329)  \n  \ndistreacttool.js  \n  \n  \n\n\n### Prevent Duplication  \nwebpack[CommonsChunkPlugin](https://webpack.js.org/plugins/commons-chunk-plugin/)\n\n```js\n{\n    //chunkcommon,string\n    //namenames\n    name:string,\n    names:[],\n    //\n    //'[name].js'\n    //name\n    filename:string,\n     //\n    //Infinity\n    minChunks:2  \n}\n```\nwebpackvendorcommon\n\n```js\nentry: {\n        index:'./codesplitting/c1/a.js',\n        other:'./codesplitting/c1/b.js',\n        //\n        vendor:['react'],\n        //common\n        common:['./codesplitting/c1/tool']\n    },\n    //***\n    plugins: [\n        new webpack.optimize.CommonsChunkPlugin({\n            names:[\"common\", \"vendor\"],\n            filename: \"[name].js\"\n        })  \n    ]\n```  \n\n\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd7786a1c7a1?w=958&h=266&f=png&s=95165)\n\nindexotherreact  \n  \n  \n### Dynamic Imports  \nwebpack   \n\n1)ECMAScriptimport()   \n\n2)webpack  require.ensure   \n\n(babel...),ajsdi.js  \n\n```js\n    //,\n    if(true){\n        require.ensure([],function(require){\n            var di = require('./di')\n        })\n    }\n    //js\n    function di(){\n        tool()\n        console.log('')\n    }\n    module.exports = di;\n```\n2.2.js,di.js\n![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd77c0c64a7d?w=1086&h=266&f=png&s=94861)\n\n(dev server)\nindex.js\n\n```js\n      var react = __webpack_require__(2)\n\t   var tool = __webpack_require__(1)  \n\t   /****8*****/\n      //\n\t    if(true){\n\t        __webpack_require__.e/* nsure */(2, function(require){\n\t            var di = __webpack_require__(13)\n\t        })\n\t    }\n```\n\nrequire,require.ensure __webpack_require__.e\n\n```js  \n   \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n\t\t// \"0\" is the signal for \"already loaded\"\n\t\tif(installedChunks[chunkId] === 0)\n\t\t\treturn callback.call(null, __webpack_require__);\n\n\t\t// an array means \"currently loading\".\n\t\tif(installedChunks[chunkId] !== undefined) {\n\t\t\tinstalledChunks[chunkId].push(callback);\n\t\t} else {\n\t\t\t// start chunk loading\n\t\t\tinstalledChunks[chunkId] = [callback];\n\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\tvar script = document.createElement('script');\n\t\t\tscript.type = 'text/javascript';\n\t\t\tscript.charset = 'utf-8';\n\t\t\tscript.async = true;\n\n\t\t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + ({\"0\":\"common\",\"1\":\"index\",\"3\":\"other\"}[chunkId]||chunkId) + \".js\";\n\t\t\thead.appendChild(script);\n\t\t}\n\t};\n```  \nscriptscript\n#### \n[github](https://github.com/xiaoxiangdaiyu/webpack_demo/tree/master/codesplitting)","slug":"webpack/code-splitting","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7v001dgw929xvckk02","content":"<p>webpack<br><a id=\"more\"></a><br>n<br><br> code splitting </p>\n<h2 id=\"code-splitting\"><a href=\"#code-splitting\" class=\"headerlink\" title=\"code splitting\"></a>code splitting</h2><p><br></p>\n<p>   <br>   webpack</p>\n<h2 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h2><p>webpack</p>\n<ol>\n<li>Entry Points: </li>\n<li>Prevent Duplication:</li>\n<li>Dynamic Imports:<br></li>\n</ol>\n<p><br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd777da3adc1?w=738&amp;h=254&amp;f=jpeg&amp;s=19970\" alt=\"\">  </p>\n<p>(commonjs):  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = <span class=\"built_in\">require</span>(<span class=\"string\">'./tool'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">'./b'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">load</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    b()</span><br><span class=\"line\">    tool()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">load()</span><br><span class=\"line\"><span class=\"comment\">//b.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = <span class=\"built_in\">require</span>(<span class=\"string\">'./tool'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    tool()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'bjs'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = b;</span><br><span class=\"line\"><span class=\"comment\">//tool.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tool</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'tooljs'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = tool;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);<span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    entry: <span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        path: __dirname,</span><br><span class=\"line\">        filename: <span class=\"string\">'/dist/index.js'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//*****</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2047,<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd777e941ac1?w=1280&amp;h=402&amp;f=png&amp;s=119875\" alt=\"\">  </p>\n<p>react  </p>\n<h3 id=\"Entry-Points\"><a href=\"#Entry-Points\" class=\"headerlink\" title=\"Entry Points\"></a>Entry Points</h3><p>b.js:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: &#123;</span><br><span class=\"line\">    index:<span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">    other:<span class=\"string\">'./codesplitting/c1/b.js'</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//***</span></span><br></pre></td></tr></table></figure>\n<p>a.js,b<br>:<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd77812b0d89?w=1170&amp;h=342&amp;f=png&amp;s=129329\" alt=\"\"><br><br>distreacttool.js<br><br><br></p>\n<h3 id=\"Prevent-Duplication\"><a href=\"#Prevent-Duplication\" class=\"headerlink\" title=\"Prevent Duplication\"></a>Prevent Duplication</h3><p>webpack<a href=\"https://webpack.js.org/plugins/commons-chunk-plugin/\" target=\"_blank\" rel=\"noopener\">CommonsChunkPlugin</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//chunkcommon,string</span></span><br><span class=\"line\">    <span class=\"comment\">//namenames</span></span><br><span class=\"line\">    name:string,</span><br><span class=\"line\">    names:[],</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"comment\">//'[name].js'</span></span><br><span class=\"line\">    <span class=\"comment\">//name</span></span><br><span class=\"line\">    filename:string,</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"comment\">//Infinity</span></span><br><span class=\"line\">    minChunks:<span class=\"number\">2</span>  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>webpackvendorcommon</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: &#123;</span><br><span class=\"line\">        index:<span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">        other:<span class=\"string\">'./codesplitting/c1/b.js'</span>,</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        vendor:[<span class=\"string\">'react'</span>],</span><br><span class=\"line\">        <span class=\"comment\">//common</span></span><br><span class=\"line\">        common:[<span class=\"string\">'./codesplitting/c1/tool'</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//***</span></span><br><span class=\"line\">    plugins: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">            names:[<span class=\"string\">\"common\"</span>, <span class=\"string\">\"vendor\"</span>],</span><br><span class=\"line\">            filename: <span class=\"string\">\"[name].js\"</span></span><br><span class=\"line\">        &#125;)  </span><br><span class=\"line\">    ]</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd7786a1c7a1?w=958&amp;h=266&amp;f=png&amp;s=95165)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">indexotherreact  </span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">### Dynamic Imports  </span></span><br><span class=\"line\"><span class=\"string\">webpack   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">1)ECMAScriptimport()   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">2)webpack  require.ensure   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">(babel...),ajsdi.js  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">    <span class=\"comment\">//,</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">require</span>.ensure([],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require</span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> di = <span class=\"built_in\">require</span>(<span class=\"string\">'./di'</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//js</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">di</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        tool()</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = di;</span><br></pre></td></tr></table></figure>\n<p>2.2.js,di.js<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd77c0c64a7d?w=1086&amp;h=266&amp;f=png&amp;s=94861\" alt=\"\"></p>\n<p>(dev server)<br>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">var</span> react = __webpack_require__(<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = __webpack_require__(<span class=\"number\">1</span>)  </span><br><span class=\"line\"><span class=\"comment\">/****8*****/</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">     __webpack_require__.e<span class=\"comment\">/* nsure */</span>(<span class=\"number\">2</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require</span>)</span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> di = __webpack_require__(<span class=\"number\">13</span>)</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>require,require.ensure <strong>webpack_require</strong>.e</p>\n<pre><code class=\"js\">   __webpack_require__.e = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">requireEnsure</span>(<span class=\"params\">chunkId, callback</span>) </span>{\n    <span class=\"comment\">// \"0\" is the signal for \"already loaded\"</span>\n    <span class=\"keyword\">if</span>(installedChunks[chunkId] === <span class=\"number\">0</span>)\n        <span class=\"keyword\">return</span> callback.call(<span class=\"literal\">null</span>, __webpack_require__);\n\n    <span class=\"comment\">// an array means \"currently loading\".</span>\n    <span class=\"keyword\">if</span>(installedChunks[chunkId] !== <span class=\"literal\">undefined</span>) {\n        installedChunks[chunkId].push(callback);\n    } <span class=\"keyword\">else</span> {\n        <span class=\"comment\">// start chunk loading</span>\n        installedChunks[chunkId] = [callback];\n        <span class=\"keyword\">var</span> head = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];\n        <span class=\"keyword\">var</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);\n        script.type = <span class=\"string\">'text/javascript'</span>;\n        script.charset = <span class=\"string\">'utf-8'</span>;\n        script.async = <span class=\"literal\">true</span>;\n\n        script.src = __webpack_require__.p + <span class=\"string\">\"\"</span> + chunkId + <span class=\"string\">\".\"</span> + ({<span class=\"string\">\"0\"</span>:<span class=\"string\">\"common\"</span>,<span class=\"string\">\"1\"</span>:<span class=\"string\">\"index\"</span>,<span class=\"string\">\"3\"</span>:<span class=\"string\">\"other\"</span>}[chunkId]||chunkId) + <span class=\"string\">\".js\"</span>;\n        head.appendChild(script);\n    }\n};\n</code></pre>\n<p>scriptscript</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://github.com/xiaoxiangdaiyu/webpack_demo/tree/master/codesplitting\" target=\"_blank\" rel=\"noopener\">github</a></p>\n","site":{"data":{}},"excerpt":"<p>webpack<br>","more":"<br>n<br><br> code splitting </p>\n<h2 id=\"code-splitting\"><a href=\"#code-splitting\" class=\"headerlink\" title=\"code splitting\"></a>code splitting</h2><p><br></p>\n<p>   <br>   webpack</p>\n<h2 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h2><p>webpack</p>\n<ol>\n<li>Entry Points: </li>\n<li>Prevent Duplication:</li>\n<li>Dynamic Imports:<br></li>\n</ol>\n<p><br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd777da3adc1?w=738&amp;h=254&amp;f=jpeg&amp;s=19970\" alt=\"\">  </p>\n<p>(commonjs):  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = <span class=\"built_in\">require</span>(<span class=\"string\">'./tool'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">'./b'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">load</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    b()</span><br><span class=\"line\">    tool()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">load()</span><br><span class=\"line\"><span class=\"comment\">//b.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = <span class=\"built_in\">require</span>(<span class=\"string\">'./tool'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    tool()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'bjs'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = b;</span><br><span class=\"line\"><span class=\"comment\">//tool.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> react = <span class=\"built_in\">require</span>(<span class=\"string\">'react'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tool</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'tooljs'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = tool;</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);<span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    entry: <span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        path: __dirname,</span><br><span class=\"line\">        filename: <span class=\"string\">'/dist/index.js'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//*****</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2047,<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd777e941ac1?w=1280&amp;h=402&amp;f=png&amp;s=119875\" alt=\"\">  </p>\n<p>react  </p>\n<h3 id=\"Entry-Points\"><a href=\"#Entry-Points\" class=\"headerlink\" title=\"Entry Points\"></a>Entry Points</h3><p>b.js:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: &#123;</span><br><span class=\"line\">    index:<span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">    other:<span class=\"string\">'./codesplitting/c1/b.js'</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//***</span></span><br></pre></td></tr></table></figure>\n<p>a.js,b<br>:<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd77812b0d89?w=1170&amp;h=342&amp;f=png&amp;s=129329\" alt=\"\"><br><br>distreacttool.js<br><br><br></p>\n<h3 id=\"Prevent-Duplication\"><a href=\"#Prevent-Duplication\" class=\"headerlink\" title=\"Prevent Duplication\"></a>Prevent Duplication</h3><p>webpack<a href=\"https://webpack.js.org/plugins/commons-chunk-plugin/\" target=\"_blank\" rel=\"noopener\">CommonsChunkPlugin</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//chunkcommon,string</span></span><br><span class=\"line\">    <span class=\"comment\">//namenames</span></span><br><span class=\"line\">    name:string,</span><br><span class=\"line\">    names:[],</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"comment\">//'[name].js'</span></span><br><span class=\"line\">    <span class=\"comment\">//name</span></span><br><span class=\"line\">    filename:string,</span><br><span class=\"line\">     <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"comment\">//Infinity</span></span><br><span class=\"line\">    minChunks:<span class=\"number\">2</span>  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>webpackvendorcommon</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: &#123;</span><br><span class=\"line\">        index:<span class=\"string\">'./codesplitting/c1/a.js'</span>,</span><br><span class=\"line\">        other:<span class=\"string\">'./codesplitting/c1/b.js'</span>,</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        vendor:[<span class=\"string\">'react'</span>],</span><br><span class=\"line\">        <span class=\"comment\">//common</span></span><br><span class=\"line\">        common:[<span class=\"string\">'./codesplitting/c1/tool'</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//***</span></span><br><span class=\"line\">    plugins: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">            names:[<span class=\"string\">\"common\"</span>, <span class=\"string\">\"vendor\"</span>],</span><br><span class=\"line\">            filename: <span class=\"string\">\"[name].js\"</span></span><br><span class=\"line\">        &#125;)  </span><br><span class=\"line\">    ]</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">`  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">![](https://user-gold-cdn.xitu.io/2018/1/25/1612dd7786a1c7a1?w=958&amp;h=266&amp;f=png&amp;s=95165)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">indexotherreact  </span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">### Dynamic Imports  </span></span><br><span class=\"line\"><span class=\"string\">webpack   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">1)ECMAScriptimport()   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">2)webpack  require.ensure   </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">(babel...),ajsdi.js  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\">    <span class=\"comment\">//,</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">require</span>.ensure([],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require</span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> di = <span class=\"built_in\">require</span>(<span class=\"string\">'./di'</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//js</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">di</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        tool()</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = di;</span><br></pre></td></tr></table></figure>\n<p>2.2.js,di.js<br><img src=\"https://user-gold-cdn.xitu.io/2018/1/25/1612dd77c0c64a7d?w=1086&amp;h=266&amp;f=png&amp;s=94861\" alt=\"\"></p>\n<p>(dev server)<br>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">var</span> react = __webpack_require__(<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> tool = __webpack_require__(<span class=\"number\">1</span>)  </span><br><span class=\"line\"><span class=\"comment\">/****8*****/</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">     __webpack_require__.e<span class=\"comment\">/* nsure */</span>(<span class=\"number\">2</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require</span>)</span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> di = __webpack_require__(<span class=\"number\">13</span>)</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>require,require.ensure <strong>webpack_require</strong>.e</p>\n<pre><code class=\"js\">   __webpack_require__.e = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">requireEnsure</span>(<span class=\"params\">chunkId, callback</span>) </span>{\n    <span class=\"comment\">// \"0\" is the signal for \"already loaded\"</span>\n    <span class=\"keyword\">if</span>(installedChunks[chunkId] === <span class=\"number\">0</span>)\n        <span class=\"keyword\">return</span> callback.call(<span class=\"literal\">null</span>, __webpack_require__);\n\n    <span class=\"comment\">// an array means \"currently loading\".</span>\n    <span class=\"keyword\">if</span>(installedChunks[chunkId] !== <span class=\"literal\">undefined</span>) {\n        installedChunks[chunkId].push(callback);\n    } <span class=\"keyword\">else</span> {\n        <span class=\"comment\">// start chunk loading</span>\n        installedChunks[chunkId] = [callback];\n        <span class=\"keyword\">var</span> head = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];\n        <span class=\"keyword\">var</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);\n        script.type = <span class=\"string\">'text/javascript'</span>;\n        script.charset = <span class=\"string\">'utf-8'</span>;\n        script.async = <span class=\"literal\">true</span>;\n\n        script.src = __webpack_require__.p + <span class=\"string\">\"\"</span> + chunkId + <span class=\"string\">\".\"</span> + ({<span class=\"string\">\"0\"</span>:<span class=\"string\">\"common\"</span>,<span class=\"string\">\"1\"</span>:<span class=\"string\">\"index\"</span>,<span class=\"string\">\"3\"</span>:<span class=\"string\">\"other\"</span>}[chunkId]||chunkId) + <span class=\"string\">\".js\"</span>;\n        head.appendChild(script);\n    }\n};\n</code></pre>\n<p>scriptscript</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://github.com/xiaoxiangdaiyu/webpack_demo/tree/master/codesplitting\" target=\"_blank\" rel=\"noopener\">github</a></p>"},{"title":"webpack loader","date":"2017-10-13T16:00:00.000Z","_content":"## webpack  \nwebpackwebpack  \n[webpack](http://www.cnblogs.com/pqjwyn/p/5380689.html) .  \nwebpackcssloader  \nloader   \n<!-- more -->\n####   \nloaderloader  \n[](https://webpack.js.org/contribute/writing-a-loader/)    \nloader  \n\n## loader  \n  \nloadernode.  \n####    \n\nloaderloader  \n\nloaderfunctionthis contextlaoder API   \n\nloaderreturn loaderthis.callback(err, values...)errorthis.callbackloader  \n\nloader1-2stringbufferjsSourceMapjs    \n\n#### :    \n\nloaderloader  \nloader1-2(JavaScriptSourceMap)  \nloaderloader  \n\nloader  \n  foo-loader==>bar-loader  \n```js\nmodule: {\n  loaders: [\n    {\n      test: /\\.js/,\n      loaders: [\n        'bar-loader',\n        'foo-loader'\n      ]\n    }\n  ]\n}\n```\n#### weboacknodemodulesloader   \n\nconfig:  \nnode_modules\n```js  \n    resolveLoader: {\n        modules: ['node_modules', path.resolve(__dirname, 'loaders')]\n    }\n```\n#### \npspath    \nloadernpm   \nmyloaderloaders  \n```js   \n     resolveLoader:{\n        modules: ['node_modules','loader']\n    }\n```\n## Examples     \n\nloader\n```js  \n    module.exports = function(source,map){\n    this.cacheable && this.cacheable()\n    this.value = source\n    return '/*copy@ xiaoxiangdaiyu*/'+JSON.stringify(source)\n    }\n```\n##   \n\nloader   \n   \n\n####     \n\nloadersloaderloader  \njs  \n\nhtml   \nloaderloader   \ntaskloader  \n* jade-loader: module   \n* apply-loader: module  \n* html-loade: htmlstring   \n \n#### moulde   \n\nloadermodulemodule  \n  \n```js\n    require(\"any-template-language-loader!./xyz.atl\");\n    var html = anyTemplateLanguage.render(\"xyz\");\n```\n#### loader  \n\nloaderscacheablecacheable   \nloader  \n```js  \n    // Cacheable identity loader\nmodule.exports = function(source) {\n\tthis.cacheable();\n\treturn source;\n};\n```\n####      \n\n* loader   \n* loader\n\n####    \n\nloader loader  \n\n```js  \n    var path = require(\"path\");\n    module.exports = function(source) {\n\tthis.cacheable();\n\tvar callback = this.async();\n\tvar headerPath = path.resolve(\"header.js\");\n\tthis.addDependency(headerPath);\n\tfs.readFile(headerPath, \"utf-8\", function(err, header) {\n\t\tif(err) return callback(err);\n\t\tcallback(null, header + \"\\n\" + source);\n\t});\n};\n```\n####   \n\ncss @import  url(...)  \n##### \n* 1require   \n* 2 this.resolve  \n\n#####    \n\n* 1css-loader: requirerequire@import url(...)  \n* 2less-loader: css-loaderlessmixinslessthis.resolvemodulealiasing, custom module directories  \n\nurlscssurl(file) ./file~.  \n```js  \n    url(file) -> require(\"./file\")\n    url(~module) -> require(\"module\")\n```\n####   \n\nextract common code    \nloaderruntime\n\n####   \n\nhashloader-utils stringifyRequest   \n  \n```js  \n    var loaderUtils = require(\"loader-utils\");\n    return \"var runtime = require(\" +\n    loaderUtils.stringifyRequest(this, \"!\" + require.resolve(\"module/runtime\")) +\n  \");\";\n```\n#### peerDependencies \n\npeerDependencypackage.jsonloaderpeerDependencyloader  \n\n####   \n\nloaderqueryless-loaderless-pluginloaderwebpackoptionsoptionloader\n\n```js  \n     // webpack.config.js\n    module.exports = {\n        ...\n    lessLoader: {\n        lessPlugins: [\n        new LessPluginCleanCSS({advanced: true})\n        ]\n    }\n};\n```\n####    \nwebpack loader [w-loader](https://github.com/xiaoxiangdaiyu/w-loader)   \n   \n","source":"_posts/webpack/loader.md","raw":"---\ntitle: webpack loader\ndate: 2017-10-14\n---\n## webpack  \nwebpackwebpack  \n[webpack](http://www.cnblogs.com/pqjwyn/p/5380689.html) .  \nwebpackcssloader  \nloader   \n<!-- more -->\n####   \nloaderloader  \n[](https://webpack.js.org/contribute/writing-a-loader/)    \nloader  \n\n## loader  \n  \nloadernode.  \n####    \n\nloaderloader  \n\nloaderfunctionthis contextlaoder API   \n\nloaderreturn loaderthis.callback(err, values...)errorthis.callbackloader  \n\nloader1-2stringbufferjsSourceMapjs    \n\n#### :    \n\nloaderloader  \nloader1-2(JavaScriptSourceMap)  \nloaderloader  \n\nloader  \n  foo-loader==>bar-loader  \n```js\nmodule: {\n  loaders: [\n    {\n      test: /\\.js/,\n      loaders: [\n        'bar-loader',\n        'foo-loader'\n      ]\n    }\n  ]\n}\n```\n#### weboacknodemodulesloader   \n\nconfig:  \nnode_modules\n```js  \n    resolveLoader: {\n        modules: ['node_modules', path.resolve(__dirname, 'loaders')]\n    }\n```\n#### \npspath    \nloadernpm   \nmyloaderloaders  \n```js   \n     resolveLoader:{\n        modules: ['node_modules','loader']\n    }\n```\n## Examples     \n\nloader\n```js  \n    module.exports = function(source,map){\n    this.cacheable && this.cacheable()\n    this.value = source\n    return '/*copy@ xiaoxiangdaiyu*/'+JSON.stringify(source)\n    }\n```\n##   \n\nloader   \n   \n\n####     \n\nloadersloaderloader  \njs  \n\nhtml   \nloaderloader   \ntaskloader  \n* jade-loader: module   \n* apply-loader: module  \n* html-loade: htmlstring   \n \n#### moulde   \n\nloadermodulemodule  \n  \n```js\n    require(\"any-template-language-loader!./xyz.atl\");\n    var html = anyTemplateLanguage.render(\"xyz\");\n```\n#### loader  \n\nloaderscacheablecacheable   \nloader  \n```js  \n    // Cacheable identity loader\nmodule.exports = function(source) {\n\tthis.cacheable();\n\treturn source;\n};\n```\n####      \n\n* loader   \n* loader\n\n####    \n\nloader loader  \n\n```js  \n    var path = require(\"path\");\n    module.exports = function(source) {\n\tthis.cacheable();\n\tvar callback = this.async();\n\tvar headerPath = path.resolve(\"header.js\");\n\tthis.addDependency(headerPath);\n\tfs.readFile(headerPath, \"utf-8\", function(err, header) {\n\t\tif(err) return callback(err);\n\t\tcallback(null, header + \"\\n\" + source);\n\t});\n};\n```\n####   \n\ncss @import  url(...)  \n##### \n* 1require   \n* 2 this.resolve  \n\n#####    \n\n* 1css-loader: requirerequire@import url(...)  \n* 2less-loader: css-loaderlessmixinslessthis.resolvemodulealiasing, custom module directories  \n\nurlscssurl(file) ./file~.  \n```js  \n    url(file) -> require(\"./file\")\n    url(~module) -> require(\"module\")\n```\n####   \n\nextract common code    \nloaderruntime\n\n####   \n\nhashloader-utils stringifyRequest   \n  \n```js  \n    var loaderUtils = require(\"loader-utils\");\n    return \"var runtime = require(\" +\n    loaderUtils.stringifyRequest(this, \"!\" + require.resolve(\"module/runtime\")) +\n  \");\";\n```\n#### peerDependencies \n\npeerDependencypackage.jsonloaderpeerDependencyloader  \n\n####   \n\nloaderqueryless-loaderless-pluginloaderwebpackoptionsoptionloader\n\n```js  \n     // webpack.config.js\n    module.exports = {\n        ...\n    lessLoader: {\n        lessPlugins: [\n        new LessPluginCleanCSS({advanced: true})\n        ]\n    }\n};\n```\n####    \nwebpack loader [w-loader](https://github.com/xiaoxiangdaiyu/w-loader)   \n   \n","slug":"webpack/loader","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7w001egw92nwofhsyz","content":"<h2 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h2><p>webpackwebpack<br><a href=\"http://www.cnblogs.com/pqjwyn/p/5380689.html\" target=\"_blank\" rel=\"noopener\">webpack</a> .<br>webpackcssloader<br>loader<br><a id=\"more\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderloader<br><a href=\"https://webpack.js.org/contribute/writing-a-loader/\" target=\"_blank\" rel=\"noopener\"></a><br>loader  </p>\n<h2 id=\"loader\"><a href=\"#loader\" class=\"headerlink\" title=\"loader\"></a>loader</h2><p>loadernode.  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderloader  </p>\n<p>loaderfunctionthis contextlaoder API   </p>\n<p>loaderreturn loaderthis.callback(err, values)errorthis.callbackloader  </p>\n<p>loader1-2stringbufferjsSourceMapjs    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>loaderloader<br>loader1-2(JavaScriptSourceMap)<br>loaderloader  </p>\n<p>loader<br>  foo-loader==&gt;bar-loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  loaders: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.js/</span>,</span><br><span class=\"line\">      loaders: [</span><br><span class=\"line\">        <span class=\"string\">'bar-loader'</span>,</span><br><span class=\"line\">        <span class=\"string\">'foo-loader'</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"weboacknodemodulesloader\"><a href=\"#weboacknodemodulesloader\" class=\"headerlink\" title=\"weboacknodemodulesloader\"></a>weboacknodemodulesloader</h4><p>config:<br>node_modules<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolveLoader: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'loaders'</span>)]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>pspath<br>loadernpm<br>myloaderloaders<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> resolveLoader:&#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>,<span class=\"string\">'loader'</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Examples\"><a href=\"#Examples\" class=\"headerlink\" title=\"Examples\"></a>Examples</h2><p>loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source,map</span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">this</span>.cacheable &amp;&amp; <span class=\"keyword\">this</span>.cacheable()</span><br><span class=\"line\"><span class=\"keyword\">this</span>.value = source</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"string\">'/*copy@ xiaoxiangdaiyu*/'</span>+<span class=\"built_in\">JSON</span>.stringify(source)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>loader<br>   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loadersloaderloader<br>js  </p>\n<p>html<br>loaderloader<br>taskloader  </p>\n<ul>\n<li>jade-loader: module   </li>\n<li>apply-loader: module  </li>\n<li>html-loade: htmlstring   </li>\n</ul>\n<h4 id=\"moulde\"><a href=\"#moulde\" class=\"headerlink\" title=\"moulde\"></a>moulde</h4><p>loadermodulemodule<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"any-template-language-loader!./xyz.atl\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> html = anyTemplateLanguage.render(<span class=\"string\">\"xyz\"</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"loader\"><a href=\"#loader\" class=\"headerlink\" title=\"loader\"></a>loader</h4><p>loaderscacheablecacheable<br>loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">// Cacheable identity loader</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.cacheable();</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> source;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>loader   </li>\n<li>loader</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loader loader  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">\"path\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.cacheable();</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> callback = <span class=\"keyword\">this</span>.async();</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> headerPath = path.resolve(<span class=\"string\">\"header.js\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.addDependency(headerPath);</span><br><span class=\"line\">\tfs.readFile(headerPath, <span class=\"string\">\"utf-8\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, header</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(err) <span class=\"keyword\">return</span> callback(err);</span><br><span class=\"line\">\t\tcallback(<span class=\"literal\">null</span>, header + <span class=\"string\">\"\\n\"</span> + source);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>css @import  url()  </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>1require   </li>\n<li>2 this.resolve  </li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>1css-loader: requirerequire@import url()  </li>\n<li>2less-loader: css-loaderlessmixinslessthis.resolvemodulealiasing, custom module directories  </li>\n</ul>\n<p>urlscssurl(file) ./file~.<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url(file) -&gt; <span class=\"built_in\">require</span>(<span class=\"string\">\"./file\"</span>)</span><br><span class=\"line\">url(~<span class=\"built_in\">module</span>) -&gt; <span class=\"built_in\">require</span>(<span class=\"string\">\"module\"</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>extract common code  <br>loaderruntime</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hashloader-utils stringifyRequest<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">var</span> loaderUtils = <span class=\"built_in\">require</span>(<span class=\"string\">\"loader-utils\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"var runtime = require(\"</span> +</span><br><span class=\"line\">  loaderUtils.stringifyRequest(<span class=\"keyword\">this</span>, <span class=\"string\">\"!\"</span> + <span class=\"built_in\">require</span>.resolve(<span class=\"string\">\"module/runtime\"</span>)) +</span><br><span class=\"line\"><span class=\"string\">\");\"</span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"peerDependencies\"><a href=\"#peerDependencies\" class=\"headerlink\" title=\"peerDependencies\"></a>peerDependencies</h4><p>peerDependencypackage.jsonloaderpeerDependencyloader  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderqueryless-loaderless-pluginloaderwebpackoptionsoptionloader</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">     <span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    lessLoader: &#123;</span><br><span class=\"line\">        lessPlugins: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> LessPluginCleanCSS(&#123;<span class=\"attr\">advanced</span>: <span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack loader <a href=\"https://github.com/xiaoxiangdaiyu/w-loader\" target=\"_blank\" rel=\"noopener\">w-loader</a><br>   </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h2><p>webpackwebpack<br><a href=\"http://www.cnblogs.com/pqjwyn/p/5380689.html\" target=\"_blank\" rel=\"noopener\">webpack</a> .<br>webpackcssloader<br>loader<br>","more":"</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderloader<br><a href=\"https://webpack.js.org/contribute/writing-a-loader/\" target=\"_blank\" rel=\"noopener\"></a><br>loader  </p>\n<h2 id=\"loader\"><a href=\"#loader\" class=\"headerlink\" title=\"loader\"></a>loader</h2><p>loadernode.  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderloader  </p>\n<p>loaderfunctionthis contextlaoder API   </p>\n<p>loaderreturn loaderthis.callback(err, values)errorthis.callbackloader  </p>\n<p>loader1-2stringbufferjsSourceMapjs    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>loaderloader<br>loader1-2(JavaScriptSourceMap)<br>loaderloader  </p>\n<p>loader<br>  foo-loader==&gt;bar-loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  loaders: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.js/</span>,</span><br><span class=\"line\">      loaders: [</span><br><span class=\"line\">        <span class=\"string\">'bar-loader'</span>,</span><br><span class=\"line\">        <span class=\"string\">'foo-loader'</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"weboacknodemodulesloader\"><a href=\"#weboacknodemodulesloader\" class=\"headerlink\" title=\"weboacknodemodulesloader\"></a>weboacknodemodulesloader</h4><p>config:<br>node_modules<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolveLoader: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'loaders'</span>)]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>pspath<br>loadernpm<br>myloaderloaders<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> resolveLoader:&#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>,<span class=\"string\">'loader'</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Examples\"><a href=\"#Examples\" class=\"headerlink\" title=\"Examples\"></a>Examples</h2><p>loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source,map</span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">this</span>.cacheable &amp;&amp; <span class=\"keyword\">this</span>.cacheable()</span><br><span class=\"line\"><span class=\"keyword\">this</span>.value = source</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"string\">'/*copy@ xiaoxiangdaiyu*/'</span>+<span class=\"built_in\">JSON</span>.stringify(source)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>loader<br>   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loadersloaderloader<br>js  </p>\n<p>html<br>loaderloader<br>taskloader  </p>\n<ul>\n<li>jade-loader: module   </li>\n<li>apply-loader: module  </li>\n<li>html-loade: htmlstring   </li>\n</ul>\n<h4 id=\"moulde\"><a href=\"#moulde\" class=\"headerlink\" title=\"moulde\"></a>moulde</h4><p>loadermodulemodule<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"any-template-language-loader!./xyz.atl\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> html = anyTemplateLanguage.render(<span class=\"string\">\"xyz\"</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"loader\"><a href=\"#loader\" class=\"headerlink\" title=\"loader\"></a>loader</h4><p>loaderscacheablecacheable<br>loader<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">// Cacheable identity loader</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.cacheable();</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> source;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>loader   </li>\n<li>loader</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loader loader  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">\"path\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.cacheable();</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> callback = <span class=\"keyword\">this</span>.async();</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> headerPath = path.resolve(<span class=\"string\">\"header.js\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.addDependency(headerPath);</span><br><span class=\"line\">\tfs.readFile(headerPath, <span class=\"string\">\"utf-8\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, header</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(err) <span class=\"keyword\">return</span> callback(err);</span><br><span class=\"line\">\t\tcallback(<span class=\"literal\">null</span>, header + <span class=\"string\">\"\\n\"</span> + source);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>css @import  url()  </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>1require   </li>\n<li>2 this.resolve  </li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>1css-loader: requirerequire@import url()  </li>\n<li>2less-loader: css-loaderlessmixinslessthis.resolvemodulealiasing, custom module directories  </li>\n</ul>\n<p>urlscssurl(file) ./file~.<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url(file) -&gt; <span class=\"built_in\">require</span>(<span class=\"string\">\"./file\"</span>)</span><br><span class=\"line\">url(~<span class=\"built_in\">module</span>) -&gt; <span class=\"built_in\">require</span>(<span class=\"string\">\"module\"</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>extract common code  <br>loaderruntime</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hashloader-utils stringifyRequest<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">var</span> loaderUtils = <span class=\"built_in\">require</span>(<span class=\"string\">\"loader-utils\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"var runtime = require(\"</span> +</span><br><span class=\"line\">  loaderUtils.stringifyRequest(<span class=\"keyword\">this</span>, <span class=\"string\">\"!\"</span> + <span class=\"built_in\">require</span>.resolve(<span class=\"string\">\"module/runtime\"</span>)) +</span><br><span class=\"line\"><span class=\"string\">\");\"</span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"peerDependencies\"><a href=\"#peerDependencies\" class=\"headerlink\" title=\"peerDependencies\"></a>peerDependencies</h4><p>peerDependencypackage.jsonloaderpeerDependencyloader  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loaderqueryless-loaderless-pluginloaderwebpackoptionsoptionloader</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">     <span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">    <span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    lessLoader: &#123;</span><br><span class=\"line\">        lessPlugins: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> LessPluginCleanCSS(&#123;<span class=\"attr\">advanced</span>: <span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack loader <a href=\"https://github.com/xiaoxiangdaiyu/w-loader\" target=\"_blank\" rel=\"noopener\">w-loader</a><br>   </p>"},{"title":"webpack plugin","date":"2017-10-22T16:00:00.000Z","_content":"[webpack loader](https://github.com/xiaoxiangdaiyu/w-loader/blob/master/loader/DOC.md) webpackplugin  \nloader[](https://webpack.js.org/contribute/writing-a-plugin/)  \n<!-- more -->\n## loaderplugin   \n\n*  loader : webpackjsloader loaderloader   \n*  pluginloaderswebpackloaderplugin\n   \n\n## plugin  \n\nwebpackbuildwebpackloaderswebpack       \n\n##    \n\nwebpack  \n* js   \n* apply  \n* webpack  \n* webpack  \n* webpack\n```js\n// A named JavaScript function.\nfunction MyExampleWebpackPlugin() {\n   //\n};\n// Defines `apply` method in it's prototype.\nMyExampleWebpackPlugin.prototype.apply = function(compiler) {\n  // Specifies webpack's event hook to attach itself.\n  compiler.plugin('webpacksEventHook', function(compilation /* Manipulates webpack internal instance specific data. */, callback) {\n    console.log(\"This is an example plugin!!!\");\n    // Invokes webpack provided callback after functionality is complete.\n    callback();\n  });\n};    \n```\n##      \n\ncompiler compilationwebpack   \n\nwebpackwebpackoptionsloaderspluginswebpackwebpack\n\ncompilationwebpack compilationcompilation   \n\nwebpack (compilation)   \n* [Compiler Source](https://github.com/webpack/webpack/blob/master/lib/Compiler.js)  \n* [Compilation Source](https://github.com/webpack/webpack/blob/master/lib/Compilation.js)   \n\n##    \n\napplyapplywebpackapplywebpack compilercompiler  \n \n```js\nfunction HelloWorldPlugin(options) {\n  // Setup the plugin instance with options...\n}\n\nHelloWorldPlugin.prototype.apply = function(compiler) {\n  compiler.plugin('done', function() {\n    console.log('Hello World!');\n  });\n};\n\nmodule.exports = HelloWorldPlugin;   \n```\n webpack config plugins   \n\n```js\nvar HelloWorldPlugin = require('hello-world');\n\nvar webpackConfig = {\n  // ... config settings here ...\n  plugins: [\n    new HelloWorldPlugin({options: true})\n  ]\n};\n```\n##     \n\ncompilationcompilations   \n\n```js\nfunction HelloCompilationPlugin(options) {}\n\nHelloCompilationPlugin.prototype.apply = function(compiler) {\n\n  // Setup callback for accessing a compilation:\n  compiler.plugin(\"compilation\", function(compilation) {\n\n    // Now setup callbacks for accessing compilation steps:\n    compilation.plugin(\"optimize\", function() {\n      console.log(\"Assets are being optimized.\");\n    });\n  });\n};\n\nmodule.exports = HelloCompilationPlugin;\n```\n[plugin](https://doc.webpack-china.org/api/plugins/) \n\n##     \n\n\n\n```js\nfunction HelloAsyncPlugin(options) {}\n\nHelloAsyncPlugin.prototype.apply = function(compiler) {\n  compiler.plugin(\"emit\", function(compilation, callback) {\n\n    // Do something async...\n    setTimeout(function() {\n      console.log(\"Done with async work...\");\n      callback();\n    }, 1000);\n\n  });\n};\n\nmodule.exports = HelloAsyncPlugin;\n```\n##   \n\nwebpack  \n\nfilelist.md\n \n```js\nfunction FileListPlugin(options) {}\n\nFileListPlugin.prototype.apply = function(compiler) {\n  compiler.plugin('emit', function(compilation, callback) {\n    // Create a header string for the generated file:\n    var filelist = 'In this build:\\n\\n';\n\n    // Loop through all compiled assets,\n    // adding a new line item for each filename.\n    for (var filename in compilation.assets) {\n      filelist += ('- '+ filename +'\\n');\n    }\n\n    // Insert this list into the webpack build as a new file asset:\n    compilation.assets['filelist.md'] = {\n      source: function() {\n        return filelist;\n      },\n      size: function() {\n        return filelist.length;\n      }\n    };\n\n    callback();\n  });\n};\n\nmodule.exports = FileListPlugin;\n```\n##    \n\n  \n\n####  \n\n  \n```js\napplyPlugins(name: string, args: any...)\n\napplyPluginsBailResult(name: string, args: any...)  \n```\nargs\"compile\", \"this-compilation\"  \n\n####  \n\nwaterfall Plugins   \n```js\napplyPluginsWaterfall(name: string, init: any, args: any...)\n```\n####    \n\n\n```js\napplyPluginsAsync(name: string, args: any..., callback: (err?: Error) -> void)\n```\nargs(err?: Error) -> voidhandlerhandlers\"emit\", \"run\"\n\n####     \n\n  \n\n```js\napplyPluginsAsyncWaterfall(name: string, init: any, callback: (err: Error, result: any) -> void)\n```\nhandlervalue(err?: Error) -> voidnextValuehandlerhandlerinithandlerhandlererrerrhandler\"before-resolve\" and \"after-resolve\"   \n\n####   \n\n   \n```js\napplyPluginsAsyncSeries(name: string, args: any..., callback: (err: Error, result: any) -> void)\n```\n####    \nwebpack plugin [w-loader](https://github.com/xiaoxiangdaiyu/w-loader)   \n   ","source":"_posts/webpack/plugin.md","raw":"---\ntitle: webpack plugin\ndate: 2017-10-23\n---\n[webpack loader](https://github.com/xiaoxiangdaiyu/w-loader/blob/master/loader/DOC.md) webpackplugin  \nloader[](https://webpack.js.org/contribute/writing-a-plugin/)  \n<!-- more -->\n## loaderplugin   \n\n*  loader : webpackjsloader loaderloader   \n*  pluginloaderswebpackloaderplugin\n   \n\n## plugin  \n\nwebpackbuildwebpackloaderswebpack       \n\n##    \n\nwebpack  \n* js   \n* apply  \n* webpack  \n* webpack  \n* webpack\n```js\n// A named JavaScript function.\nfunction MyExampleWebpackPlugin() {\n   //\n};\n// Defines `apply` method in it's prototype.\nMyExampleWebpackPlugin.prototype.apply = function(compiler) {\n  // Specifies webpack's event hook to attach itself.\n  compiler.plugin('webpacksEventHook', function(compilation /* Manipulates webpack internal instance specific data. */, callback) {\n    console.log(\"This is an example plugin!!!\");\n    // Invokes webpack provided callback after functionality is complete.\n    callback();\n  });\n};    \n```\n##      \n\ncompiler compilationwebpack   \n\nwebpackwebpackoptionsloaderspluginswebpackwebpack\n\ncompilationwebpack compilationcompilation   \n\nwebpack (compilation)   \n* [Compiler Source](https://github.com/webpack/webpack/blob/master/lib/Compiler.js)  \n* [Compilation Source](https://github.com/webpack/webpack/blob/master/lib/Compilation.js)   \n\n##    \n\napplyapplywebpackapplywebpack compilercompiler  \n \n```js\nfunction HelloWorldPlugin(options) {\n  // Setup the plugin instance with options...\n}\n\nHelloWorldPlugin.prototype.apply = function(compiler) {\n  compiler.plugin('done', function() {\n    console.log('Hello World!');\n  });\n};\n\nmodule.exports = HelloWorldPlugin;   \n```\n webpack config plugins   \n\n```js\nvar HelloWorldPlugin = require('hello-world');\n\nvar webpackConfig = {\n  // ... config settings here ...\n  plugins: [\n    new HelloWorldPlugin({options: true})\n  ]\n};\n```\n##     \n\ncompilationcompilations   \n\n```js\nfunction HelloCompilationPlugin(options) {}\n\nHelloCompilationPlugin.prototype.apply = function(compiler) {\n\n  // Setup callback for accessing a compilation:\n  compiler.plugin(\"compilation\", function(compilation) {\n\n    // Now setup callbacks for accessing compilation steps:\n    compilation.plugin(\"optimize\", function() {\n      console.log(\"Assets are being optimized.\");\n    });\n  });\n};\n\nmodule.exports = HelloCompilationPlugin;\n```\n[plugin](https://doc.webpack-china.org/api/plugins/) \n\n##     \n\n\n\n```js\nfunction HelloAsyncPlugin(options) {}\n\nHelloAsyncPlugin.prototype.apply = function(compiler) {\n  compiler.plugin(\"emit\", function(compilation, callback) {\n\n    // Do something async...\n    setTimeout(function() {\n      console.log(\"Done with async work...\");\n      callback();\n    }, 1000);\n\n  });\n};\n\nmodule.exports = HelloAsyncPlugin;\n```\n##   \n\nwebpack  \n\nfilelist.md\n \n```js\nfunction FileListPlugin(options) {}\n\nFileListPlugin.prototype.apply = function(compiler) {\n  compiler.plugin('emit', function(compilation, callback) {\n    // Create a header string for the generated file:\n    var filelist = 'In this build:\\n\\n';\n\n    // Loop through all compiled assets,\n    // adding a new line item for each filename.\n    for (var filename in compilation.assets) {\n      filelist += ('- '+ filename +'\\n');\n    }\n\n    // Insert this list into the webpack build as a new file asset:\n    compilation.assets['filelist.md'] = {\n      source: function() {\n        return filelist;\n      },\n      size: function() {\n        return filelist.length;\n      }\n    };\n\n    callback();\n  });\n};\n\nmodule.exports = FileListPlugin;\n```\n##    \n\n  \n\n####  \n\n  \n```js\napplyPlugins(name: string, args: any...)\n\napplyPluginsBailResult(name: string, args: any...)  \n```\nargs\"compile\", \"this-compilation\"  \n\n####  \n\nwaterfall Plugins   \n```js\napplyPluginsWaterfall(name: string, init: any, args: any...)\n```\n####    \n\n\n```js\napplyPluginsAsync(name: string, args: any..., callback: (err?: Error) -> void)\n```\nargs(err?: Error) -> voidhandlerhandlers\"emit\", \"run\"\n\n####     \n\n  \n\n```js\napplyPluginsAsyncWaterfall(name: string, init: any, callback: (err: Error, result: any) -> void)\n```\nhandlervalue(err?: Error) -> voidnextValuehandlerhandlerinithandlerhandlererrerrhandler\"before-resolve\" and \"after-resolve\"   \n\n####   \n\n   \n```js\napplyPluginsAsyncSeries(name: string, args: any..., callback: (err: Error, result: any) -> void)\n```\n####    \nwebpack plugin [w-loader](https://github.com/xiaoxiangdaiyu/w-loader)   \n   ","slug":"webpack/plugin","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7x001ggw92wer23v29","content":"<p><a href=\"https://github.com/xiaoxiangdaiyu/w-loader/blob/master/loader/DOC.md\" target=\"_blank\" rel=\"noopener\">webpack loader</a> webpackplugin<br>loader<a href=\"https://webpack.js.org/contribute/writing-a-plugin/\" target=\"_blank\" rel=\"noopener\"></a><br><a id=\"more\"></a></p>\n<h2 id=\"loaderplugin\"><a href=\"#loaderplugin\" class=\"headerlink\" title=\"loaderplugin\"></a>loaderplugin</h2><ul>\n<li>loader : webpackjsloader loaderloader   </li>\n<li>pluginloaderswebpackloaderplugin</li>\n</ul>\n<h2 id=\"plugin\"><a href=\"#plugin\" class=\"headerlink\" title=\"plugin\"></a>plugin</h2><p>webpackbuildwebpackloaderswebpack       </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webpack  </p>\n<ul>\n<li>js   </li>\n<li>apply  </li>\n<li>webpack  </li>\n<li>webpack  </li>\n<li>webpack<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A named JavaScript function.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyExampleWebpackPlugin</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// Defines `apply` method in it's prototype.</span></span><br><span class=\"line\">MyExampleWebpackPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Specifies webpack's event hook to attach itself.</span></span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'webpacksEventHook'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation <span class=\"regexp\">/* Manipulates webpack internal instance specific data. */</span>, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"This is an example plugin!!!\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Invokes webpack provided callback after functionality is complete.</span></span><br><span class=\"line\">    callback();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>compiler compilationwebpack   </p>\n<p>webpackwebpackoptionsloaderspluginswebpackwebpack</p>\n<p>compilationwebpack compilationcompilation   </p>\n<p>webpack (compilation)   </p>\n<ul>\n<li><a href=\"https://github.com/webpack/webpack/blob/master/lib/Compiler.js\" target=\"_blank\" rel=\"noopener\">Compiler Source</a>  </li>\n<li><a href=\"https://github.com/webpack/webpack/blob/master/lib/Compilation.js\" target=\"_blank\" rel=\"noopener\">Compilation Source</a>   </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>applyapplywebpackapplywebpack compilercompiler  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloWorldPlugin</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Setup the plugin instance with options...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloWorldPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'done'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello World!'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloWorldPlugin;</span><br></pre></td></tr></table></figure>\n<p> webpack config plugins   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> HelloWorldPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'hello-world'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> webpackConfig = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... config settings here ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HelloWorldPlugin(&#123;<span class=\"attr\">options</span>: <span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>compilationcompilations   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloCompilationPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloCompilationPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Setup callback for accessing a compilation:</span></span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">\"compilation\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Now setup callbacks for accessing compilation steps:</span></span><br><span class=\"line\">    compilation.plugin(<span class=\"string\">\"optimize\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Assets are being optimized.\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloCompilationPlugin;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://doc.webpack-china.org/api/plugins/\" target=\"_blank\" rel=\"noopener\">plugin</a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloAsyncPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloAsyncPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">\"emit\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation, callback</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Do something async...</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Done with async work...\"</span>);</span><br><span class=\"line\">      callback();</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloAsyncPlugin;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webpack  </p>\n<p>filelist.md</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FileListPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">FileListPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'emit'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a header string for the generated file:</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> filelist = <span class=\"string\">'In this build:\\n\\n'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Loop through all compiled assets,</span></span><br><span class=\"line\">    <span class=\"comment\">// adding a new line item for each filename.</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> filename <span class=\"keyword\">in</span> compilation.assets) &#123;</span><br><span class=\"line\">      filelist += (<span class=\"string\">'- '</span>+ filename +<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Insert this list into the webpack build as a new file asset:</span></span><br><span class=\"line\">    compilation.assets[<span class=\"string\">'filelist.md'</span>] = &#123;</span><br><span class=\"line\">      source: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> filelist;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      size: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> filelist.length;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    callback();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = FileListPlugin;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPlugins(name: string, <span class=\"attr\">args</span>: any...)</span><br><span class=\"line\"></span><br><span class=\"line\">applyPluginsBailResult(name: string, <span class=\"attr\">args</span>: any...)</span><br></pre></td></tr></table></figure></p>\n<p>argscompile, this-compilation  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>waterfall Plugins <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsWaterfall(name: string, <span class=\"attr\">init</span>: any, <span class=\"attr\">args</span>: any...)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsync(name: string, <span class=\"attr\">args</span>: any..., <span class=\"attr\">callback</span>: (err?: <span class=\"built_in\">Error</span>) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure></p>\n<p>args(err?: Error) -&gt; voidhandlerhandlersemit, run</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsyncWaterfall(name: string, <span class=\"attr\">init</span>: any, <span class=\"attr\">callback</span>: (err: <span class=\"built_in\">Error</span>, <span class=\"attr\">result</span>: any) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure>\n<p>handlervalue(err?: Error) -&gt; voidnextValuehandlerhandlerinithandlerhandlererrerrhandlerbefore-resolve and after-resolve   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsyncSeries(name: string, <span class=\"attr\">args</span>: any..., <span class=\"attr\">callback</span>: (err: <span class=\"built_in\">Error</span>, <span class=\"attr\">result</span>: any) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack plugin <a href=\"https://github.com/xiaoxiangdaiyu/w-loader\" target=\"_blank\" rel=\"noopener\">w-loader</a><br>   </p>\n","site":{"data":{}},"excerpt":"<p><a href=\"https://github.com/xiaoxiangdaiyu/w-loader/blob/master/loader/DOC.md\" target=\"_blank\" rel=\"noopener\">webpack loader</a> webpackplugin<br>loader<a href=\"https://webpack.js.org/contribute/writing-a-plugin/\" target=\"_blank\" rel=\"noopener\"></a><br>","more":"</p>\n<h2 id=\"loaderplugin\"><a href=\"#loaderplugin\" class=\"headerlink\" title=\"loaderplugin\"></a>loaderplugin</h2><ul>\n<li>loader : webpackjsloader loaderloader   </li>\n<li>pluginloaderswebpackloaderplugin</li>\n</ul>\n<h2 id=\"plugin\"><a href=\"#plugin\" class=\"headerlink\" title=\"plugin\"></a>plugin</h2><p>webpackbuildwebpackloaderswebpack       </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webpack  </p>\n<ul>\n<li>js   </li>\n<li>apply  </li>\n<li>webpack  </li>\n<li>webpack  </li>\n<li>webpack<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A named JavaScript function.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyExampleWebpackPlugin</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// Defines `apply` method in it's prototype.</span></span><br><span class=\"line\">MyExampleWebpackPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Specifies webpack's event hook to attach itself.</span></span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'webpacksEventHook'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation <span class=\"regexp\">/* Manipulates webpack internal instance specific data. */</span>, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"This is an example plugin!!!\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Invokes webpack provided callback after functionality is complete.</span></span><br><span class=\"line\">    callback();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>compiler compilationwebpack   </p>\n<p>webpackwebpackoptionsloaderspluginswebpackwebpack</p>\n<p>compilationwebpack compilationcompilation   </p>\n<p>webpack (compilation)   </p>\n<ul>\n<li><a href=\"https://github.com/webpack/webpack/blob/master/lib/Compiler.js\" target=\"_blank\" rel=\"noopener\">Compiler Source</a>  </li>\n<li><a href=\"https://github.com/webpack/webpack/blob/master/lib/Compilation.js\" target=\"_blank\" rel=\"noopener\">Compilation Source</a>   </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>applyapplywebpackapplywebpack compilercompiler  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloWorldPlugin</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Setup the plugin instance with options...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloWorldPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'done'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello World!'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloWorldPlugin;</span><br></pre></td></tr></table></figure>\n<p> webpack config plugins   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> HelloWorldPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'hello-world'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> webpackConfig = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... config settings here ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HelloWorldPlugin(&#123;<span class=\"attr\">options</span>: <span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>compilationcompilations   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloCompilationPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloCompilationPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Setup callback for accessing a compilation:</span></span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">\"compilation\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Now setup callbacks for accessing compilation steps:</span></span><br><span class=\"line\">    compilation.plugin(<span class=\"string\">\"optimize\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Assets are being optimized.\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloCompilationPlugin;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://doc.webpack-china.org/api/plugins/\" target=\"_blank\" rel=\"noopener\">plugin</a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HelloAsyncPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">HelloAsyncPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">\"emit\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation, callback</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Do something async...</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Done with async work...\"</span>);</span><br><span class=\"line\">      callback();</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = HelloAsyncPlugin;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>webpack  </p>\n<p>filelist.md</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FileListPlugin</span>(<span class=\"params\">options</span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">FileListPlugin.prototype.apply = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compiler</span>) </span>&#123;</span><br><span class=\"line\">  compiler.plugin(<span class=\"string\">'emit'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a header string for the generated file:</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> filelist = <span class=\"string\">'In this build:\\n\\n'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Loop through all compiled assets,</span></span><br><span class=\"line\">    <span class=\"comment\">// adding a new line item for each filename.</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> filename <span class=\"keyword\">in</span> compilation.assets) &#123;</span><br><span class=\"line\">      filelist += (<span class=\"string\">'- '</span>+ filename +<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Insert this list into the webpack build as a new file asset:</span></span><br><span class=\"line\">    compilation.assets[<span class=\"string\">'filelist.md'</span>] = &#123;</span><br><span class=\"line\">      source: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> filelist;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      size: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> filelist.length;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    callback();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = FileListPlugin;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPlugins(name: string, <span class=\"attr\">args</span>: any...)</span><br><span class=\"line\"></span><br><span class=\"line\">applyPluginsBailResult(name: string, <span class=\"attr\">args</span>: any...)</span><br></pre></td></tr></table></figure></p>\n<p>argscompile, this-compilation  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>waterfall Plugins <br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsWaterfall(name: string, <span class=\"attr\">init</span>: any, <span class=\"attr\">args</span>: any...)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsync(name: string, <span class=\"attr\">args</span>: any..., <span class=\"attr\">callback</span>: (err?: <span class=\"built_in\">Error</span>) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure></p>\n<p>args(err?: Error) -&gt; voidhandlerhandlersemit, run</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsyncWaterfall(name: string, <span class=\"attr\">init</span>: any, <span class=\"attr\">callback</span>: (err: <span class=\"built_in\">Error</span>, <span class=\"attr\">result</span>: any) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure>\n<p>handlervalue(err?: Error) -&gt; voidnextValuehandlerhandlerinithandlerhandlererrerrhandlerbefore-resolve and after-resolve   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyPluginsAsyncSeries(name: string, <span class=\"attr\">args</span>: any..., <span class=\"attr\">callback</span>: (err: <span class=\"built_in\">Error</span>, <span class=\"attr\">result</span>: any) -&gt; <span class=\"keyword\">void</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack plugin <a href=\"https://github.com/xiaoxiangdaiyu/w-loader\" target=\"_blank\" rel=\"noopener\">w-loader</a><br>   </p>"},{"title":"redux","date":"2019-05-20T16:00:00.000Z","_content":"\n## \nredux  \n<!-- more -->\n### \n  \n\n1. redux  \n   [](http://cn.redux.js.org/docs/introduction/ThreePrinciples.html)\n2. redux  \n3. redux\n\n\n### \nactonreducer[](https://juejin.im/post/5b208ef06fb9a01e615ed8cb)store\n\n## store\nstorereduxactionreduxerstore  \n\n### createStore \ncreateStore,[combineReducersreducer](https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8)state\n\n```js\nimport reducer from './reducers'\nconst store = createStore(reducer,initialState)\n```\nenhancer(,applyMiddleware)\n\n```js\n\n/**\n * state Redux store\n * storeactionreducer\n * combineReducersreducer\n * @param {Function} reducer   combineReducersreducer\n * @param {Object} preloadedState state\n * @param {Function} enhancer store\n * @returns Store state  \n */\nexport default function createStore(reducer, preloadedState, enhancer) {\n  // funcreduxstate\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    // enhancerredux\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n  // dispatch store\n  return {\n    dispatch,\n    subscribe,\n    getState,\n    replaceReducer,\n    [$$observable]: observable\n  }\n } \n```\n()\n### \nfunctionreduxeencherredux   \n\n```js\n// funcreduxstate\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    // enhancerredux\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.')\n    }\n    // enhancer,\n    // createStorereducerstore\n    return enhancer(createStore)(reducer, preloadedState)\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.')\n  }\n  //  enhancer\n  let currentReducer = reducer\n  let currentState = preloadedState\n  let currentListeners = []\n  // \n  let nextListeners = currentListeners\n  // dispatch\n  let isDispatching = false\n  \n  // init\n  dispatch({ type: ActionTypes.INIT })\n\n```\n\n\n### dispatch\ndispatchactionreducerstate  \ndispatch\n\n```js\n// redux \ndispatch({ type: ActionTypes.INIT })\n```\nredux  \n\n```js\n /**\n   * js\n   * @param {Object} action \n   */\n  function dispatch(action) {\n    // \n    if (!isPlainObject(action)) {\n      throw new Error(\n        ''\n      )\n    }\n    // type \n    if (typeof action.type === 'undefined') {\n      throw new Error(\n        ''\n      )\n    }\n    // actiondispatchdispatch\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.')\n    }\n\n    try {\n      // dispatch\n      isDispatching = true\n      // actionreducer\n      // reducerstateaction \n      /**\n       * const todos = (state = [], action) => {\n       */\n      currentState = currentReducer(currentState, action)\n    } finally {\n      // falsedispatch\n      isDispatching = false\n    }\n    // dispatch \n    const listeners = (currentListeners = nextListeners)\n    // \n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i]\n      listener()\n    }\n\n    return action\n  }\n```\n\ncreateStoredispatch({ type: ActionTypes.INIT })\n\ncurrentState  \ncurrentStateactionreducercurrentState\n\ncurrentStateinitState  \n\n```js\n// \nlet currentState = preloadedState\n/*******/\n// reducerstateaction\ncurrentState = currentReducer(currentState, action)\n``` \n\nreducer\n\n```js\nconst todos = (state = [], action) => {\nswitch (action.type) {\n    case 'ADD_TODO':\n      return [\n        ...state,\n        {\n          id: action.id,\n          text: action.text,\n          completed: false\n        }\n      ]\n    }\n```\n\n### getSate  \ngetStatestorestatereact-reduxstate  \n\n```js\n/**\n   * \n   * \n   */\n  function getState() {\n    // isDispatching \n    if (isDispatching) {\n      throw new Error('')\n    }\n    return currentState\n  }\n```\n\n### subscribe\nsubscribe  \nreact-reduxhandleChange purestate   \n\n****\n\n```js\n this.unsubscribe = this.store.subscribe(this.handleChange.bind(this))\n```\n\n****\nunsubscribe\n\n```js\n/** \n   * \n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.')\n    }\n\n    if (isDispatching) {\n      throw new Error(\n        ''\n      )\n    }\n    // \n    let isSubscribed = true\n    // nextListeners\n    ensureCanMutateNextListeners()\n    // \n    nextListeners.push(listener)\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return\n      }\n\n      if (isDispatching) {\n        throw new Error(\n          ''\n        )\n      }\n      // \n      isSubscribed = false\n      //  \n      ensureCanMutateNextListeners()\n      const index = nextListeners.indexOf(listener)\n      // \n      nextListeners.splice(index, 1)\n    }\n  }\n\n```\n\n### replaceReducer\n\n\n```js\n// reducer\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.')\n    }\n\n    currentReducer = nextReducer\n    // dispatch\n    dispatch({ type: ActionTypes.REPLACE })\n  }\n```\n createStore  \n reducerinitStatestore \n\n## \n,redux  \nactionredux-thunk  \nactionCreater  \n\n```js\nexport function func1() {\n  return dispatch => {\n      dispatch({\n      type:'test',\n      data:'a'\n      })\n  }\n}\n```\n\nredux\nreducerredux\n  \n\n## redux\nredux  Koa middleware \n<img src='/img/redux/middleware.jpg'/>\n\ndispatch  \n\ndispatch  \n  \nredux applyMiddleware  \n\n \n### applyMiddleware\n\n,composedispatchstore  \ndispatch action   \n\n```js\nexport default function applyMiddleware(...middlewares) {\n  return createStore => (...args) => {\n    const store = createStore(...args)\n    let dispatch = () => {\n      throw new Error(\n        `Dispatching while constructing your middleware is not allowed. ` +\n          `Other middleware would not be applied to this dispatch.`\n      )\n    }\n    // store\n    const middlewareAPI = {\n      getState: store.getState,\n      // dispatch\n      dispatch: (...args) => dispatch(...args)\n    }\n    // dispatch\n    const chain = middlewares.map(middleware => middleware(middlewareAPI))\n    // dispatch\n    // dispatch = f1(f2(f3(store.dispatch))));\n    dispatch = compose(...chain)(store.dispatch)\n    \n\n    return {\n      ...store,\n      dispatch\n    }\n  }\n}\n```\n\nstore\n### compose\nreduxcompose \n \n```js\n/**\n * \n */\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n\n  return funcs.reduce((a, b) => (...args) => a(b(...args)))\n}\n```\n\n\n### redux-thunk  \nredux-thunkfunctiondispatchdispatch\n\n```js\nfunction createThunkMiddleware(extraArgument) {\n  return ({ dispatch, getState }) => next => action => {\n    // dispatchaction\n    if (typeof action === 'function') {\n      return action(dispatch, getState, extraArgument);\n    }\n\n    return next(action);\n  };\n}\n\nconst thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexport default thunk;\n```\n,createStore  \n\n```js\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk';\nconst store = createStore(\n  reducer,\n  applyMiddleware({\n  ...middleware,\n  thunk})\n)\n```\n\nredux 2  \n\n\n## \n###   \n[redux](http://cn.redux.js.org/docs/recipes/ServerRendering.html)   \n[React](http://product.dangdang.com/24135483.html)  \n\n[redux](https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8)[ react-redux ](https://juejin.im/post/5ce25a76e51d4510835e01f3)reduxreact-redux  \n  \n\n\n\n\n\n\n\n\n\n","source":"_posts/redux/redux2.md","raw":"---\ntitle: redux\ndate: 2019-05-21\n---\n\n## \nredux  \n<!-- more -->\n### \n  \n\n1. redux  \n   [](http://cn.redux.js.org/docs/introduction/ThreePrinciples.html)\n2. redux  \n3. redux\n\n\n### \nactonreducer[](https://juejin.im/post/5b208ef06fb9a01e615ed8cb)store\n\n## store\nstorereduxactionreduxerstore  \n\n### createStore \ncreateStore,[combineReducersreducer](https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8)state\n\n```js\nimport reducer from './reducers'\nconst store = createStore(reducer,initialState)\n```\nenhancer(,applyMiddleware)\n\n```js\n\n/**\n * state Redux store\n * storeactionreducer\n * combineReducersreducer\n * @param {Function} reducer   combineReducersreducer\n * @param {Object} preloadedState state\n * @param {Function} enhancer store\n * @returns Store state  \n */\nexport default function createStore(reducer, preloadedState, enhancer) {\n  // funcreduxstate\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    // enhancerredux\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n  // dispatch store\n  return {\n    dispatch,\n    subscribe,\n    getState,\n    replaceReducer,\n    [$$observable]: observable\n  }\n } \n```\n()\n### \nfunctionreduxeencherredux   \n\n```js\n// funcreduxstate\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    // enhancerredux\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.')\n    }\n    // enhancer,\n    // createStorereducerstore\n    return enhancer(createStore)(reducer, preloadedState)\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.')\n  }\n  //  enhancer\n  let currentReducer = reducer\n  let currentState = preloadedState\n  let currentListeners = []\n  // \n  let nextListeners = currentListeners\n  // dispatch\n  let isDispatching = false\n  \n  // init\n  dispatch({ type: ActionTypes.INIT })\n\n```\n\n\n### dispatch\ndispatchactionreducerstate  \ndispatch\n\n```js\n// redux \ndispatch({ type: ActionTypes.INIT })\n```\nredux  \n\n```js\n /**\n   * js\n   * @param {Object} action \n   */\n  function dispatch(action) {\n    // \n    if (!isPlainObject(action)) {\n      throw new Error(\n        ''\n      )\n    }\n    // type \n    if (typeof action.type === 'undefined') {\n      throw new Error(\n        ''\n      )\n    }\n    // actiondispatchdispatch\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.')\n    }\n\n    try {\n      // dispatch\n      isDispatching = true\n      // actionreducer\n      // reducerstateaction \n      /**\n       * const todos = (state = [], action) => {\n       */\n      currentState = currentReducer(currentState, action)\n    } finally {\n      // falsedispatch\n      isDispatching = false\n    }\n    // dispatch \n    const listeners = (currentListeners = nextListeners)\n    // \n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i]\n      listener()\n    }\n\n    return action\n  }\n```\n\ncreateStoredispatch({ type: ActionTypes.INIT })\n\ncurrentState  \ncurrentStateactionreducercurrentState\n\ncurrentStateinitState  \n\n```js\n// \nlet currentState = preloadedState\n/*******/\n// reducerstateaction\ncurrentState = currentReducer(currentState, action)\n``` \n\nreducer\n\n```js\nconst todos = (state = [], action) => {\nswitch (action.type) {\n    case 'ADD_TODO':\n      return [\n        ...state,\n        {\n          id: action.id,\n          text: action.text,\n          completed: false\n        }\n      ]\n    }\n```\n\n### getSate  \ngetStatestorestatereact-reduxstate  \n\n```js\n/**\n   * \n   * \n   */\n  function getState() {\n    // isDispatching \n    if (isDispatching) {\n      throw new Error('')\n    }\n    return currentState\n  }\n```\n\n### subscribe\nsubscribe  \nreact-reduxhandleChange purestate   \n\n****\n\n```js\n this.unsubscribe = this.store.subscribe(this.handleChange.bind(this))\n```\n\n****\nunsubscribe\n\n```js\n/** \n   * \n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.')\n    }\n\n    if (isDispatching) {\n      throw new Error(\n        ''\n      )\n    }\n    // \n    let isSubscribed = true\n    // nextListeners\n    ensureCanMutateNextListeners()\n    // \n    nextListeners.push(listener)\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return\n      }\n\n      if (isDispatching) {\n        throw new Error(\n          ''\n        )\n      }\n      // \n      isSubscribed = false\n      //  \n      ensureCanMutateNextListeners()\n      const index = nextListeners.indexOf(listener)\n      // \n      nextListeners.splice(index, 1)\n    }\n  }\n\n```\n\n### replaceReducer\n\n\n```js\n// reducer\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.')\n    }\n\n    currentReducer = nextReducer\n    // dispatch\n    dispatch({ type: ActionTypes.REPLACE })\n  }\n```\n createStore  \n reducerinitStatestore \n\n## \n,redux  \nactionredux-thunk  \nactionCreater  \n\n```js\nexport function func1() {\n  return dispatch => {\n      dispatch({\n      type:'test',\n      data:'a'\n      })\n  }\n}\n```\n\nredux\nreducerredux\n  \n\n## redux\nredux  Koa middleware \n<img src='/img/redux/middleware.jpg'/>\n\ndispatch  \n\ndispatch  \n  \nredux applyMiddleware  \n\n \n### applyMiddleware\n\n,composedispatchstore  \ndispatch action   \n\n```js\nexport default function applyMiddleware(...middlewares) {\n  return createStore => (...args) => {\n    const store = createStore(...args)\n    let dispatch = () => {\n      throw new Error(\n        `Dispatching while constructing your middleware is not allowed. ` +\n          `Other middleware would not be applied to this dispatch.`\n      )\n    }\n    // store\n    const middlewareAPI = {\n      getState: store.getState,\n      // dispatch\n      dispatch: (...args) => dispatch(...args)\n    }\n    // dispatch\n    const chain = middlewares.map(middleware => middleware(middlewareAPI))\n    // dispatch\n    // dispatch = f1(f2(f3(store.dispatch))));\n    dispatch = compose(...chain)(store.dispatch)\n    \n\n    return {\n      ...store,\n      dispatch\n    }\n  }\n}\n```\n\nstore\n### compose\nreduxcompose \n \n```js\n/**\n * \n */\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n\n  return funcs.reduce((a, b) => (...args) => a(b(...args)))\n}\n```\n\n\n### redux-thunk  \nredux-thunkfunctiondispatchdispatch\n\n```js\nfunction createThunkMiddleware(extraArgument) {\n  return ({ dispatch, getState }) => next => action => {\n    // dispatchaction\n    if (typeof action === 'function') {\n      return action(dispatch, getState, extraArgument);\n    }\n\n    return next(action);\n  };\n}\n\nconst thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexport default thunk;\n```\n,createStore  \n\n```js\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk';\nconst store = createStore(\n  reducer,\n  applyMiddleware({\n  ...middleware,\n  thunk})\n)\n```\n\nredux 2  \n\n\n## \n###   \n[redux](http://cn.redux.js.org/docs/recipes/ServerRendering.html)   \n[React](http://product.dangdang.com/24135483.html)  \n\n[redux](https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8)[ react-redux ](https://juejin.im/post/5ce25a76e51d4510835e01f3)reduxreact-redux  \n  \n\n\n\n\n\n\n\n\n\n","slug":"redux/redux2","published":1,"updated":"2019-05-21T07:54:39.972Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7y001hgw92e308010r","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>redux<br><a id=\"more\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<ol>\n<li>redux<br><a href=\"http://cn.redux.js.org/docs/introduction/ThreePrinciples.html\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li>redux  </li>\n<li>redux</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>actonreducer<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb\" target=\"_blank\" rel=\"noopener\"></a>store</p>\n<h2 id=\"store\"><a href=\"#store\" class=\"headerlink\" title=\"store\"></a>store</h2><p>storereduxactionreduxerstore  </p>\n<h3 id=\"createStore-\"><a href=\"#createStore-\" class=\"headerlink\" title=\"createStore \"></a>createStore </h3><p>createStore,<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8\" target=\"_blank\" rel=\"noopener\">combineReducersreducer</a>state</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer,initialState)</span><br></pre></td></tr></table></figure>\n<p>enhancer(,applyMiddleware)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * state Redux store</span></span><br><span class=\"line\"><span class=\"comment\"> * storeactionreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * combineReducersreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Function&#125; reducer   combineReducersreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Object&#125; preloadedState state</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Function&#125; enhancer store</span></span><br><span class=\"line\"><span class=\"comment\"> * @returns Store state  </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// funcreduxstate</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// enhancerredux</span></span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// dispatch store</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    dispatch,</span><br><span class=\"line\">    subscribe,</span><br><span class=\"line\">    getState,</span><br><span class=\"line\">    replaceReducer,</span><br><span class=\"line\">    [$$observable]: observable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>functionreduxeencherredux   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// funcreduxstate</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// enhancerredux</span></span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the enhancer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// enhancer,</span></span><br><span class=\"line\">    <span class=\"comment\">// createStorereducerstore</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the reducer to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//  enhancer</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentReducer = reducer</span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentState = preloadedState</span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentListeners = []</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> nextListeners = currentListeners</span><br><span class=\"line\">  <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// init</span></span><br><span class=\"line\">  dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.INIT &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"dispatch\"><a href=\"#dispatch\" class=\"headerlink\" title=\"dispatch\"></a>dispatch</h3><p>dispatchactionreducerstate<br>dispatch<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// redux </span></span><br><span class=\"line\">dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.INIT &#125;)</span><br></pre></td></tr></table></figure></p>\n<p>redux  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * js</span></span><br><span class=\"line\"><span class=\"comment\">  * @param &#123;Object&#125; action </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!isPlainObject(action)) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">       <span class=\"string\">''</span></span><br><span class=\"line\">     )</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// type </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action.type === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">       <span class=\"string\">''</span></span><br><span class=\"line\">     )</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// actiondispatchdispatch</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Reducers may not dispatch actions.'</span>)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">     isDispatching = <span class=\"literal\">true</span></span><br><span class=\"line\">     <span class=\"comment\">// actionreducer</span></span><br><span class=\"line\">     <span class=\"comment\">// reducerstateaction </span></span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * const todos = (state = [], action) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     currentState = currentReducer(currentState, action)</span><br><span class=\"line\">   &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// falsedispatch</span></span><br><span class=\"line\">     isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// dispatch </span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> listeners = (currentListeners = nextListeners)</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> listener = listeners[i]</span><br><span class=\"line\">     listener()</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> action</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>createStoredispatch({ type: ActionTypes.INIT })</p>\n<p>currentState<br>currentStateactionreducercurrentState</p>\n<p>currentStateinitState  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentState = preloadedState</span><br><span class=\"line\"><span class=\"comment\">/*******/</span></span><br><span class=\"line\"><span class=\"comment\">// reducerstateaction</span></span><br><span class=\"line\">currentState = currentReducer(currentState, action)</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">reducer</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = <span class=\"function\">(<span class=\"params\">state = [], action</span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'ADD_TODO'</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> [</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          id: action.id,</span><br><span class=\"line\">          text: action.text,</span><br><span class=\"line\">          completed: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"getSate\"><a href=\"#getSate\" class=\"headerlink\" title=\"getSate\"></a>getSate</h3><p>getStatestorestatereact-reduxstate  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// isDispatching </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">''</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> currentState</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"subscribe\"><a href=\"#subscribe\" class=\"headerlink\" title=\"subscribe\"></a>subscribe</h3><p>subscribe<br>react-reduxhandleChange purestate   </p>\n<p><strong></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.unsubscribe = <span class=\"keyword\">this</span>.store.subscribe(<span class=\"keyword\">this</span>.handleChange.bind(<span class=\"keyword\">this</span>))</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>unsubscribe</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">subscribe</span>(<span class=\"params\">listener</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the listener to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">''</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> isSubscribed = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">// nextListeners</span></span><br><span class=\"line\">    ensureCanMutateNextListeners()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    nextListeners.push(listener)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unsubscribe</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!isSubscribed) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">          <span class=\"string\">''</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      isSubscribed = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      ensureCanMutateNextListeners()</span><br><span class=\"line\">      <span class=\"keyword\">const</span> index = nextListeners.indexOf(listener)</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      nextListeners.splice(index, <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"replaceReducer\"><a href=\"#replaceReducer\" class=\"headerlink\" title=\"replaceReducer\"></a>replaceReducer</h3><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceReducer</span>(<span class=\"params\">nextReducer</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextReducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the nextReducer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    currentReducer = nextReducer</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.REPLACE &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p> createStore<br> reducerinitStatestore </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>,redux<br>actionredux-thunk<br>actionCreater  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">      dispatch(&#123;</span><br><span class=\"line\">      type:<span class=\"string\">'test'</span>,</span><br><span class=\"line\">      data:<span class=\"string\">'a'</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redux<br>reducerredux</p>\n<h2 id=\"redux\"><a href=\"#redux\" class=\"headerlink\" title=\"redux\"></a>redux</h2><p>redux  Koa middleware <br><img src=\"/img/redux/middleware.jpg\"></p>\n<p>dispatch  </p>\n<p>dispatch<br><br>redux applyMiddleware<br></p>\n<h3 id=\"applyMiddleware\"><a href=\"#applyMiddleware\" class=\"headerlink\" title=\"applyMiddleware\"></a>applyMiddleware</h3><p>,composedispatchstore<br>dispatch action   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMiddleware</span>(<span class=\"params\">...middlewares</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">createStore</span> =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> store = createStore(...args)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> dispatch = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Dispatching while constructing your middleware is not allowed. `</span> +</span><br><span class=\"line\">          <span class=\"string\">`Other middleware would not be applied to this dispatch.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// store</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> middlewareAPI = &#123;</span><br><span class=\"line\">      getState: store.getState,</span><br><span class=\"line\">      <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">      dispatch: <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(...args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> chain = middlewares.map(<span class=\"function\"><span class=\"params\">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    <span class=\"comment\">// dispatch = f1(f2(f3(store.dispatch))));</span></span><br><span class=\"line\">    dispatch = compose(...chain)(store.dispatch)</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...store,</span><br><span class=\"line\">      dispatch</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>store</p>\n<h3 id=\"compose\"><a href=\"#compose\" class=\"headerlink\" title=\"compose\"></a>compose</h3><p>reduxcompose </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compose</span>(<span class=\"params\">...funcs</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">arg</span> =&gt;</span> arg</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> funcs[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> funcs.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"redux-thunk\"><a href=\"#redux-thunk\" class=\"headerlink\" title=\"redux-thunk\"></a>redux-thunk</h3><p>redux-thunkfunctiondispatchdispatch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createThunkMiddleware</span>(<span class=\"params\">extraArgument</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">&#123; dispatch, getState &#125;</span>) =&gt;</span> next =&gt; <span class=\"function\"><span class=\"params\">action</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// dispatchaction</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> action(dispatch, getState, extraArgument);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> next(action);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> thunk = createThunkMiddleware();</span><br><span class=\"line\">thunk.withExtraArgument = createThunkMiddleware;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> thunk;</span><br></pre></td></tr></table></figure>\n<p>,createStore  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">'redux-thunk'</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  reducer,</span><br><span class=\"line\">  applyMiddleware(&#123;</span><br><span class=\"line\">  ...middleware,</span><br><span class=\"line\">  thunk&#125;)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>redux 2<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://cn.redux.js.org/docs/recipes/ServerRendering.html\" target=\"_blank\" rel=\"noopener\">redux</a><br><a href=\"http://product.dangdang.com/24135483.html\" target=\"_blank\" rel=\"noopener\">React</a>  </p>\n<p><a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8\" target=\"_blank\" rel=\"noopener\">redux</a><a href=\"https://juejin.im/post/5ce25a76e51d4510835e01f3\" target=\"_blank\" rel=\"noopener\"> react-redux </a>reduxreact-redux<br>  </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>redux<br>","more":"</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<ol>\n<li>redux<br><a href=\"http://cn.redux.js.org/docs/introduction/ThreePrinciples.html\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li>redux  </li>\n<li>redux</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>actonreducer<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb\" target=\"_blank\" rel=\"noopener\"></a>store</p>\n<h2 id=\"store\"><a href=\"#store\" class=\"headerlink\" title=\"store\"></a>store</h2><p>storereduxactionreduxerstore  </p>\n<h3 id=\"createStore-\"><a href=\"#createStore-\" class=\"headerlink\" title=\"createStore \"></a>createStore </h3><p>createStore,<a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8\" target=\"_blank\" rel=\"noopener\">combineReducersreducer</a>state</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">'./reducers'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer,initialState)</span><br></pre></td></tr></table></figure>\n<p>enhancer(,applyMiddleware)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * state Redux store</span></span><br><span class=\"line\"><span class=\"comment\"> * storeactionreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * combineReducersreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Function&#125; reducer   combineReducersreducer</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Object&#125; preloadedState state</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Function&#125; enhancer store</span></span><br><span class=\"line\"><span class=\"comment\"> * @returns Store state  </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// funcreduxstate</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// enhancerredux</span></span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// dispatch store</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    dispatch,</span><br><span class=\"line\">    subscribe,</span><br><span class=\"line\">    getState,</span><br><span class=\"line\">    replaceReducer,</span><br><span class=\"line\">    [$$observable]: observable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>functionreduxeencherredux   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// funcreduxstate</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// enhancerredux</span></span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the enhancer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// enhancer,</span></span><br><span class=\"line\">    <span class=\"comment\">// createStorereducerstore</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the reducer to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//  enhancer</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentReducer = reducer</span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentState = preloadedState</span><br><span class=\"line\">  <span class=\"keyword\">let</span> currentListeners = []</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> nextListeners = currentListeners</span><br><span class=\"line\">  <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// init</span></span><br><span class=\"line\">  dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.INIT &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"dispatch\"><a href=\"#dispatch\" class=\"headerlink\" title=\"dispatch\"></a>dispatch</h3><p>dispatchactionreducerstate<br>dispatch<br><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// redux </span></span><br><span class=\"line\">dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.INIT &#125;)</span><br></pre></td></tr></table></figure></p>\n<p>redux  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * js</span></span><br><span class=\"line\"><span class=\"comment\">  * @param &#123;Object&#125; action </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!isPlainObject(action)) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">       <span class=\"string\">''</span></span><br><span class=\"line\">     )</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// type </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action.type === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">       <span class=\"string\">''</span></span><br><span class=\"line\">     )</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// actiondispatchdispatch</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Reducers may not dispatch actions.'</span>)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">     isDispatching = <span class=\"literal\">true</span></span><br><span class=\"line\">     <span class=\"comment\">// actionreducer</span></span><br><span class=\"line\">     <span class=\"comment\">// reducerstateaction </span></span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * const todos = (state = [], action) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     currentState = currentReducer(currentState, action)</span><br><span class=\"line\">   &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// falsedispatch</span></span><br><span class=\"line\">     isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// dispatch </span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> listeners = (currentListeners = nextListeners)</span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> listener = listeners[i]</span><br><span class=\"line\">     listener()</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> action</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>createStoredispatch({ type: ActionTypes.INIT })</p>\n<p>currentState<br>currentStateactionreducercurrentState</p>\n<p>currentStateinitState  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentState = preloadedState</span><br><span class=\"line\"><span class=\"comment\">/*******/</span></span><br><span class=\"line\"><span class=\"comment\">// reducerstateaction</span></span><br><span class=\"line\">currentState = currentReducer(currentState, action)</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">reducer</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span>js</span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = <span class=\"function\">(<span class=\"params\">state = [], action</span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'ADD_TODO'</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> [</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          id: action.id,</span><br><span class=\"line\">          text: action.text,</span><br><span class=\"line\">          completed: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"getSate\"><a href=\"#getSate\" class=\"headerlink\" title=\"getSate\"></a>getSate</h3><p>getStatestorestatereact-reduxstate  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// isDispatching </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">''</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> currentState</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"subscribe\"><a href=\"#subscribe\" class=\"headerlink\" title=\"subscribe\"></a>subscribe</h3><p>subscribe<br>react-reduxhandleChange purestate   </p>\n<p><strong></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.unsubscribe = <span class=\"keyword\">this</span>.store.subscribe(<span class=\"keyword\">this</span>.handleChange.bind(<span class=\"keyword\">this</span>))</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>unsubscribe</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">subscribe</span>(<span class=\"params\">listener</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the listener to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">''</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> isSubscribed = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">// nextListeners</span></span><br><span class=\"line\">    ensureCanMutateNextListeners()</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    nextListeners.push(listener)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unsubscribe</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!isSubscribed) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">          <span class=\"string\">''</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      isSubscribed = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"comment\">//  </span></span><br><span class=\"line\">      ensureCanMutateNextListeners()</span><br><span class=\"line\">      <span class=\"keyword\">const</span> index = nextListeners.indexOf(listener)</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      nextListeners.splice(index, <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"replaceReducer\"><a href=\"#replaceReducer\" class=\"headerlink\" title=\"replaceReducer\"></a>replaceReducer</h3><p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceReducer</span>(<span class=\"params\">nextReducer</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextReducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the nextReducer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    currentReducer = nextReducer</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    dispatch(&#123; <span class=\"attr\">type</span>: ActionTypes.REPLACE &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p> createStore<br> reducerinitStatestore </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>,redux<br>actionredux-thunk<br>actionCreater  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">      dispatch(&#123;</span><br><span class=\"line\">      type:<span class=\"string\">'test'</span>,</span><br><span class=\"line\">      data:<span class=\"string\">'a'</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redux<br>reducerredux</p>\n<h2 id=\"redux\"><a href=\"#redux\" class=\"headerlink\" title=\"redux\"></a>redux</h2><p>redux  Koa middleware <br><img src=\"/img/redux/middleware.jpg\"></p>\n<p>dispatch  </p>\n<p>dispatch<br><br>redux applyMiddleware<br></p>\n<h3 id=\"applyMiddleware\"><a href=\"#applyMiddleware\" class=\"headerlink\" title=\"applyMiddleware\"></a>applyMiddleware</h3><p>,composedispatchstore<br>dispatch action   </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMiddleware</span>(<span class=\"params\">...middlewares</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">createStore</span> =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> store = createStore(...args)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> dispatch = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Dispatching while constructing your middleware is not allowed. `</span> +</span><br><span class=\"line\">          <span class=\"string\">`Other middleware would not be applied to this dispatch.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// store</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> middlewareAPI = &#123;</span><br><span class=\"line\">      getState: store.getState,</span><br><span class=\"line\">      <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">      dispatch: <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(...args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> chain = middlewares.map(<span class=\"function\"><span class=\"params\">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class=\"line\">    <span class=\"comment\">// dispatch</span></span><br><span class=\"line\">    <span class=\"comment\">// dispatch = f1(f2(f3(store.dispatch))));</span></span><br><span class=\"line\">    dispatch = compose(...chain)(store.dispatch)</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...store,</span><br><span class=\"line\">      dispatch</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>store</p>\n<h3 id=\"compose\"><a href=\"#compose\" class=\"headerlink\" title=\"compose\"></a>compose</h3><p>reduxcompose </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compose</span>(<span class=\"params\">...funcs</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">arg</span> =&gt;</span> arg</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> funcs[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> funcs.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"redux-thunk\"><a href=\"#redux-thunk\" class=\"headerlink\" title=\"redux-thunk\"></a>redux-thunk</h3><p>redux-thunkfunctiondispatchdispatch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createThunkMiddleware</span>(<span class=\"params\">extraArgument</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">&#123; dispatch, getState &#125;</span>) =&gt;</span> next =&gt; <span class=\"function\"><span class=\"params\">action</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// dispatchaction</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> action(dispatch, getState, extraArgument);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> next(action);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> thunk = createThunkMiddleware();</span><br><span class=\"line\">thunk.withExtraArgument = createThunkMiddleware;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> thunk;</span><br></pre></td></tr></table></figure>\n<p>,createStore  </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">'redux-thunk'</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  reducer,</span><br><span class=\"line\">  applyMiddleware(&#123;</span><br><span class=\"line\">  ...middleware,</span><br><span class=\"line\">  thunk&#125;)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>redux 2<br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://cn.redux.js.org/docs/recipes/ServerRendering.html\" target=\"_blank\" rel=\"noopener\">redux</a><br><a href=\"http://product.dangdang.com/24135483.html\" target=\"_blank\" rel=\"noopener\">React</a>  </p>\n<p><a href=\"https://juejin.im/post/5b208ef06fb9a01e615ed8cb#heading-8\" target=\"_blank\" rel=\"noopener\">redux</a><a href=\"https://juejin.im/post/5ce25a76e51d4510835e01f3\" target=\"_blank\" rel=\"noopener\"> react-redux </a>reduxreact-redux<br>  </p>"},{"title":"websocket-node","date":"2017-11-21T16:00:00.000Z","_content":"[websocket- ](https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/README.md)\n<!-- more -->\n## Websockt \nwebsocketwebsocket()   \n\n1. \n2.  \n3. \n4. \n5.   \n\n24\n##    \n\nwebsocketWebsocket \n### \n\nHTTP   \n \n    \n```\nGET / HTTP/1.1  //HTTP1.1GET\nHost: localhost:8081 //\nConnection: Upgrade \nPragma: no-cache\nCache-Control: no-cache\nUpgrade: websocket //websocket\nOrigin: http://192.168.132.170:8000\nSec-WebSocket-Version: 13 //\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN,zh;q=0.9,en;q=0.8\nCookie: optimizelyEndUserId=oeu1505722530441r0.5993643212774391; _ga=GA1.1.557695983.1505722531\nSec-WebSocket-Key: /2R6uuzPqLT/6z8fnZfN3w==   //\nSec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\n```\n  \n\n* HTTP1.1GET\n* Connection: Upgrade  \n* Upgrade: websocket //websocket  \n* Sec-WebSocket-Key    \n\n  \n\n   \n### \n\nwebsocket  \n  \n1. http\n2. websocket \n\n####   \n\n```\n    HTTP/1.1 101 Switching Protocols\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\n```\nheader\\r\\n\\r\\n \n\nSec-WebSocket-Accept Sec-WebSocket-Key  \nSec-WebSocket-Key \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\"SHA-1 hashbase64\n\n  \n```js\n// \nvar ws_key = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11';\n// key\nfunction getAccpectKey(rSWKey) {\n    return crypto.createHash('sha1').update(rSWKey + ws_key).digest('base64')\n}\nfunction handShake(socket, headers) {\n    var reqSWKey = headers['Sec-WebSocket-Key'],\n        resSWKey = getAccpectKey(reqSWKey)\n    socket.write('HTTP/1.1 101 Switching Protocols\\r\\n');\n    socket.write('Upgrade: websocket\\r\\n');\n    socket.write('Connection: Upgrade\\r\\n');\n    socket.write('Sec-WebSocket-Accept: ' + resSWKey + '\\r\\n');\n    socket.write('\\r\\n');\n}\n```\n\nwebsocketonopenwebsocket\n\n###   \n#### \n  \n\n```  \n    :  \n\n      0                   1                   2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-------+-+-------------+-------------------------------+\n     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n     |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n     | |1|2|3|       |K|             |                               |\n     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n     |     Extended payload length continued, if payload len == 127  |\n     + - - - - - - - - - - - - - - - +-------------------------------+\n     |                               |Masking-key, if MASK set to 1  |\n     +-------------------------------+-------------------------------+\n     | Masking-key (continued)       |          Payload Data         |\n     +-------------------------------- - - - - - - - - - - - - - - - +\n     :                     Payload Data continued ...                :\n     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n     |                     Payload Data continued ...                |\n     +---------------------------------------------------------------+\n\n```\n\n  \n\n1. MASK1   \n\n2. opcode  \n    * 0x0 \n    * 0x1 text(UTF-8)  \n    * 0x2  \n    * 0x3-0x7 0xB-0xF WebSockets   \n\n3. FIN 0\n4. Payload len  \n    * Payload len<126, \n    * 126,1252\n    * 127,655358 \n      \n\n####   \n  \n  \n1.   \n2. \n\n    \n\n```js\n// \nfunction decodeFrame(buffer) {\n    /**\n     * >>> 7 7\n     * 10010030  ====>   00000001\n     * &   11    \n     * 1500001111  ,0\n     * 11011000 & 00001111  ===  00001000\n     *  \n     */\n    var fBite = buffer[0],\n        /**\n         * Fin\n         * 1\n         * 0  \n         */\n        Fin = fBite >>> 7,\n        /**\n         * opcodeopcodefBite4-7\n         * &   11    \n         * 1500001111  ,0\n         */\n        opcode = buffer[0] & 15,\n        /**\n         *  \n         */\n        len = buffer[1] & 127,\n        // 1\n        Mask = buffer[1] >>> 7,\n        maskKey = null\n    // \n    //1252\n    if (len == 126) {\n        len = buffer.readUInt16BE(2)\n    } else if (len == 127) {\n        // 655358\n        len = buffer.readUInt64BE(2)\n    }\n    // \n    Mask && (maskKey = buffer.slice(2,5))\n    /**\n     *  \n     * octetstexti%4(i4)\n     */\n    if(Mask){\n        for (var i = 2;i<len ;i++){\n            buffer[i] = maskKey[(i - 2) % 4] ^ buffer[i];\n        }\n    }\n    var data = buffer.slice(2)\n    return {\n        Fin:Fin,\n        opcode:opcode,\n        data:data\n    }\n}\n```    \n\n#### \n \n()\n\n```js\n// \nfunction encodeFrame(data){\n    var len = Buffer.byteLength(data),\n        // 264\n        payload_len = len > 65535 ?10:(len > 125 ? 4 : 2),\n        buf = new Buffer(len+payload_len)\n    /**\n     * 0x81 = 10000001 \n     *Fin 1 opcode001 mask 0 \n     *  txt\n     */\n    buf[0] = 0x81  \n    /**\n     * payload_len\n     */        \n    if(payload_len == 2){\n        buf[1] = len\n    }else if(payload_len == 4){\n        buf[1] = 126;\n        buf.writeUInt16BE(payload_len, 2);\n    }else {\n        buf[1] = 127;\n        buf.writeUInt32BE(payload_len >>> 32, 2);\n        buf.writeUInt32BE(payload_len & 0xFFFFFFFF, 6);\n    }  \n    buf.write(data, payload_len);\n    return buf;\n}    \n```    \n\n####   \nopcode  9pingpong\nPingsopcode0x9pong0xA   \n\n```js\n// ping\nif(opcode == 9){\n   console.log(\"ping\");\n   /**\n    * ping pong125\n    * 10001010+\n    * pong125\n    */\n    socke.write(Buffer.concat([new Buffer([0x8A, data.length]), data]))\n}\n```  \n\n##  \nwebsocket[](https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/ws.js)websocket\n","source":"_posts/websocket/node.md","raw":"---\ntitle: websocket-node  \ndate: 2017-11-22\n---\n[websocket- ](https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/README.md)\n<!-- more -->\n## Websockt \nwebsocketwebsocket()   \n\n1. \n2.  \n3. \n4. \n5.   \n\n24\n##    \n\nwebsocketWebsocket \n### \n\nHTTP   \n \n    \n```\nGET / HTTP/1.1  //HTTP1.1GET\nHost: localhost:8081 //\nConnection: Upgrade \nPragma: no-cache\nCache-Control: no-cache\nUpgrade: websocket //websocket\nOrigin: http://192.168.132.170:8000\nSec-WebSocket-Version: 13 //\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN,zh;q=0.9,en;q=0.8\nCookie: optimizelyEndUserId=oeu1505722530441r0.5993643212774391; _ga=GA1.1.557695983.1505722531\nSec-WebSocket-Key: /2R6uuzPqLT/6z8fnZfN3w==   //\nSec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\n```\n  \n\n* HTTP1.1GET\n* Connection: Upgrade  \n* Upgrade: websocket //websocket  \n* Sec-WebSocket-Key    \n\n  \n\n   \n### \n\nwebsocket  \n  \n1. http\n2. websocket \n\n####   \n\n```\n    HTTP/1.1 101 Switching Protocols\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\n```\nheader\\r\\n\\r\\n \n\nSec-WebSocket-Accept Sec-WebSocket-Key  \nSec-WebSocket-Key \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\"SHA-1 hashbase64\n\n  \n```js\n// \nvar ws_key = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11';\n// key\nfunction getAccpectKey(rSWKey) {\n    return crypto.createHash('sha1').update(rSWKey + ws_key).digest('base64')\n}\nfunction handShake(socket, headers) {\n    var reqSWKey = headers['Sec-WebSocket-Key'],\n        resSWKey = getAccpectKey(reqSWKey)\n    socket.write('HTTP/1.1 101 Switching Protocols\\r\\n');\n    socket.write('Upgrade: websocket\\r\\n');\n    socket.write('Connection: Upgrade\\r\\n');\n    socket.write('Sec-WebSocket-Accept: ' + resSWKey + '\\r\\n');\n    socket.write('\\r\\n');\n}\n```\n\nwebsocketonopenwebsocket\n\n###   \n#### \n  \n\n```  \n    :  \n\n      0                   1                   2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-------+-+-------------+-------------------------------+\n     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n     |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n     | |1|2|3|       |K|             |                               |\n     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n     |     Extended payload length continued, if payload len == 127  |\n     + - - - - - - - - - - - - - - - +-------------------------------+\n     |                               |Masking-key, if MASK set to 1  |\n     +-------------------------------+-------------------------------+\n     | Masking-key (continued)       |          Payload Data         |\n     +-------------------------------- - - - - - - - - - - - - - - - +\n     :                     Payload Data continued ...                :\n     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n     |                     Payload Data continued ...                |\n     +---------------------------------------------------------------+\n\n```\n\n  \n\n1. MASK1   \n\n2. opcode  \n    * 0x0 \n    * 0x1 text(UTF-8)  \n    * 0x2  \n    * 0x3-0x7 0xB-0xF WebSockets   \n\n3. FIN 0\n4. Payload len  \n    * Payload len<126, \n    * 126,1252\n    * 127,655358 \n      \n\n####   \n  \n  \n1.   \n2. \n\n    \n\n```js\n// \nfunction decodeFrame(buffer) {\n    /**\n     * >>> 7 7\n     * 10010030  ====>   00000001\n     * &   11    \n     * 1500001111  ,0\n     * 11011000 & 00001111  ===  00001000\n     *  \n     */\n    var fBite = buffer[0],\n        /**\n         * Fin\n         * 1\n         * 0  \n         */\n        Fin = fBite >>> 7,\n        /**\n         * opcodeopcodefBite4-7\n         * &   11    \n         * 1500001111  ,0\n         */\n        opcode = buffer[0] & 15,\n        /**\n         *  \n         */\n        len = buffer[1] & 127,\n        // 1\n        Mask = buffer[1] >>> 7,\n        maskKey = null\n    // \n    //1252\n    if (len == 126) {\n        len = buffer.readUInt16BE(2)\n    } else if (len == 127) {\n        // 655358\n        len = buffer.readUInt64BE(2)\n    }\n    // \n    Mask && (maskKey = buffer.slice(2,5))\n    /**\n     *  \n     * octetstexti%4(i4)\n     */\n    if(Mask){\n        for (var i = 2;i<len ;i++){\n            buffer[i] = maskKey[(i - 2) % 4] ^ buffer[i];\n        }\n    }\n    var data = buffer.slice(2)\n    return {\n        Fin:Fin,\n        opcode:opcode,\n        data:data\n    }\n}\n```    \n\n#### \n \n()\n\n```js\n// \nfunction encodeFrame(data){\n    var len = Buffer.byteLength(data),\n        // 264\n        payload_len = len > 65535 ?10:(len > 125 ? 4 : 2),\n        buf = new Buffer(len+payload_len)\n    /**\n     * 0x81 = 10000001 \n     *Fin 1 opcode001 mask 0 \n     *  txt\n     */\n    buf[0] = 0x81  \n    /**\n     * payload_len\n     */        \n    if(payload_len == 2){\n        buf[1] = len\n    }else if(payload_len == 4){\n        buf[1] = 126;\n        buf.writeUInt16BE(payload_len, 2);\n    }else {\n        buf[1] = 127;\n        buf.writeUInt32BE(payload_len >>> 32, 2);\n        buf.writeUInt32BE(payload_len & 0xFFFFFFFF, 6);\n    }  \n    buf.write(data, payload_len);\n    return buf;\n}    \n```    \n\n####   \nopcode  9pingpong\nPingsopcode0x9pong0xA   \n\n```js\n// ping\nif(opcode == 9){\n   console.log(\"ping\");\n   /**\n    * ping pong125\n    * 10001010+\n    * pong125\n    */\n    socke.write(Buffer.concat([new Buffer([0x8A, data.length]), data]))\n}\n```  \n\n##  \nwebsocket[](https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/ws.js)websocket\n","slug":"websocket/node","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7y001igw929d9n1nad","content":"<p><a href=\"https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/README.md\" target=\"_blank\" rel=\"noopener\">websocket- </a><br><a id=\"more\"></a></p>\n<h2 id=\"Websockt-\"><a href=\"#Websockt-\" class=\"headerlink\" title=\"Websockt \"></a>Websockt </h2><p>websocketwebsocket()   </p>\n<ol>\n<li></li>\n<li> </li>\n<li></li>\n<li></li>\n<li>  </li>\n</ol>\n<p>24</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocketWebsocket </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HTTP   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET / HTTP/1.1  //HTTP1.1GET</span><br><span class=\"line\">Host: localhost:8081 //</span><br><span class=\"line\">Connection: Upgrade </span><br><span class=\"line\">Pragma: no-cache</span><br><span class=\"line\">Cache-Control: no-cache</span><br><span class=\"line\">Upgrade: websocket //websocket</span><br><span class=\"line\">Origin: http://192.168.132.170:8000</span><br><span class=\"line\">Sec-WebSocket-Version: 13 //</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36</span><br><span class=\"line\">Accept-Encoding: gzip, deflate, br</span><br><span class=\"line\">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8</span><br><span class=\"line\">Cookie: optimizelyEndUserId=oeu1505722530441r0.5993643212774391; _ga=GA1.1.557695983.1505722531</span><br><span class=\"line\">Sec-WebSocket-Key: /2R6uuzPqLT/6z8fnZfN3w==   //</span><br><span class=\"line\">Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li>HTTP1.1GET</li>\n<li>Connection: Upgrade  </li>\n<li>Upgrade: websocket //websocket  </li>\n<li>Sec-WebSocket-Key    </li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>websocket  </p>\n<ol>\n<li>http</li>\n<li>websocket </li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 101 Switching Protocols</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br></pre></td></tr></table></figure>\n<p>header\\r\\n\\r\\n </p>\n<p>Sec-WebSocket-Accept Sec-WebSocket-Key<br>Sec-WebSocket-Key 258EAFA5-E914-47DA-95CA-C5AB0DC85B11SHA-1 hashbase64<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ws_key = <span class=\"string\">'258EAFA5-E914-47DA-95CA-C5AB0DC85B11'</span>;</span><br><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAccpectKey</span>(<span class=\"params\">rSWKey</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> crypto.createHash(<span class=\"string\">'sha1'</span>).update(rSWKey + ws_key).digest(<span class=\"string\">'base64'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handShake</span>(<span class=\"params\">socket, headers</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> reqSWKey = headers[<span class=\"string\">'Sec-WebSocket-Key'</span>],</span><br><span class=\"line\">        resSWKey = getAccpectKey(reqSWKey)</span><br><span class=\"line\">    socket.write(<span class=\"string\">'HTTP/1.1 101 Switching Protocols\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Upgrade: websocket\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Connection: Upgrade\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Sec-WebSocket-Accept: '</span> + resSWKey + <span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>websocketonopenwebsocket</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    :  </span><br><span class=\"line\"></span><br><span class=\"line\">      0                   1                   2                   3</span><br><span class=\"line\">      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class=\"line\">     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class=\"line\">     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class=\"line\">     |N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class=\"line\">     | |1|2|3|       |K|             |                               |</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |     Extended payload length continued, if payload len == 127  |</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class=\"line\">     |                               |Masking-key, if MASK set to 1  |</span><br><span class=\"line\">     +-------------------------------+-------------------------------+</span><br><span class=\"line\">     | Masking-key (continued)       |          Payload Data         |</span><br><span class=\"line\">     +-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     :                     Payload Data continued ...                :</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |                     Payload Data continued ...                |</span><br><span class=\"line\">     +---------------------------------------------------------------+</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ol>\n<li><p>MASK1   </p>\n</li>\n<li><p>opcode  </p>\n<ul>\n<li>0x0 </li>\n<li>0x1 text(UTF-8)  </li>\n<li>0x2  </li>\n<li>0x3-0x7 0xB-0xF WebSockets   </li>\n</ul>\n</li>\n<li><p>FIN 0</p>\n</li>\n<li>Payload len  <ul>\n<li>Payload len&lt;126, </li>\n<li>126,1252</li>\n<li>127,655358 </li>\n</ul>\n</li>\n</ol>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ol>\n<li>  </li>\n<li></li>\n</ol>\n<p>    </p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decodeFrame</span>(<span class=\"params\">buffer</span>) </span>{\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * &gt;&gt;&gt; 7 7</span>\n<span class=\"comment\">     * 10010030  ====&gt;   00000001</span>\n<span class=\"comment\">     * &amp;   11    </span>\n<span class=\"comment\">     * 1500001111  ,0</span>\n<span class=\"comment\">     * 11011000 &amp; 00001111  ===  00001000</span>\n<span class=\"comment\">     *  </span>\n<span class=\"comment\">     */</span>\n    <span class=\"keyword\">var</span> fBite = buffer[<span class=\"number\">0</span>],\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         * Fin</span>\n<span class=\"comment\">         * 1</span>\n<span class=\"comment\">         * 0  </span>\n<span class=\"comment\">         */</span>\n        Fin = fBite &gt;&gt;&gt; <span class=\"number\">7</span>,\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         * opcodeopcodefBite4-7</span>\n<span class=\"comment\">         * &amp;   11    </span>\n<span class=\"comment\">         * 1500001111  ,0</span>\n<span class=\"comment\">         */</span>\n        opcode = buffer[<span class=\"number\">0</span>] &amp; <span class=\"number\">15</span>,\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         *  </span>\n<span class=\"comment\">         */</span>\n        len = buffer[<span class=\"number\">1</span>] &amp; <span class=\"number\">127</span>,\n        <span class=\"comment\">// 1</span>\n        Mask = buffer[<span class=\"number\">1</span>] &gt;&gt;&gt; <span class=\"number\">7</span>,\n        maskKey = <span class=\"literal\">null</span>\n    <span class=\"comment\">// </span>\n    <span class=\"comment\">//1252</span>\n    <span class=\"keyword\">if</span> (len == <span class=\"number\">126</span>) {\n        len = buffer.readUInt16BE(<span class=\"number\">2</span>)\n    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (len == <span class=\"number\">127</span>) {\n        <span class=\"comment\">// 655358</span>\n        len = buffer.readUInt64BE(<span class=\"number\">2</span>)\n    }\n    <span class=\"comment\">// </span>\n    Mask &amp;&amp; (maskKey = buffer.slice(<span class=\"number\">2</span>,<span class=\"number\">5</span>))\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     *  </span>\n<span class=\"comment\">     * octetstexti%4(i4)</span>\n<span class=\"comment\">     */</span>\n    <span class=\"keyword\">if</span>(Mask){\n        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">2</span>;i&lt;len ;i++){\n            buffer[i] = maskKey[(i - <span class=\"number\">2</span>) % <span class=\"number\">4</span>] ^ buffer[i];\n        }\n    }\n    <span class=\"keyword\">var</span> data = buffer.slice(<span class=\"number\">2</span>)\n    <span class=\"keyword\">return</span> {\n        Fin:Fin,\n        opcode:opcode,\n        data:data\n    }\n}\n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>()</p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">encodeFrame</span>(<span class=\"params\">data</span>)</span>{\n    <span class=\"keyword\">var</span> len = Buffer.byteLength(data),\n        <span class=\"comment\">// 264</span>\n        payload_len = len &gt; <span class=\"number\">65535</span> ?<span class=\"number\">10</span>:(len &gt; <span class=\"number\">125</span> ? <span class=\"number\">4</span> : <span class=\"number\">2</span>),\n        buf = <span class=\"keyword\">new</span> Buffer(len+payload_len)\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * 0x81 = 10000001 </span>\n<span class=\"comment\">     *Fin 1 opcode001 mask 0 </span>\n<span class=\"comment\">     *  txt</span>\n<span class=\"comment\">     */</span>\n    buf[<span class=\"number\">0</span>] = <span class=\"number\">0x81</span>  \n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * payload_len</span>\n<span class=\"comment\">     */</span>        \n    <span class=\"keyword\">if</span>(payload_len == <span class=\"number\">2</span>){\n        buf[<span class=\"number\">1</span>] = len\n    }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(payload_len == <span class=\"number\">4</span>){\n        buf[<span class=\"number\">1</span>] = <span class=\"number\">126</span>;\n        buf.writeUInt16BE(payload_len, <span class=\"number\">2</span>);\n    }<span class=\"keyword\">else</span> {\n        buf[<span class=\"number\">1</span>] = <span class=\"number\">127</span>;\n        buf.writeUInt32BE(payload_len &gt;&gt;&gt; <span class=\"number\">32</span>, <span class=\"number\">2</span>);\n        buf.writeUInt32BE(payload_len &amp; <span class=\"number\">0xFFFFFFFF</span>, <span class=\"number\">6</span>);\n    }  \n    buf.write(data, payload_len);\n    <span class=\"keyword\">return</span> buf;\n}    \n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>opcode  9pingpong<br>Pingsopcode0x9pong0xA   </p>\n<pre><code class=\"js\"><span class=\"comment\">// ping</span>\n<span class=\"keyword\">if</span>(opcode == <span class=\"number\">9</span>){\n   <span class=\"built_in\">console</span>.log(<span class=\"string\">\"ping\"</span>);\n   <span class=\"comment\">/**</span>\n<span class=\"comment\">    * ping pong125</span>\n<span class=\"comment\">    * 10001010+</span>\n<span class=\"comment\">    * pong125</span>\n<span class=\"comment\">    */</span>\n    socke.write(Buffer.concat([<span class=\"keyword\">new</span> Buffer([<span class=\"number\">0x8A</span>, data.length]), data]))\n}\n</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocket<a href=\"https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/ws.js\" target=\"_blank\" rel=\"noopener\"></a>websocket</p>\n","site":{"data":{}},"excerpt":"<p><a href=\"https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/README.md\" target=\"_blank\" rel=\"noopener\">websocket- </a><br>","more":"</p>\n<h2 id=\"Websockt-\"><a href=\"#Websockt-\" class=\"headerlink\" title=\"Websockt \"></a>Websockt </h2><p>websocketwebsocket()   </p>\n<ol>\n<li></li>\n<li> </li>\n<li></li>\n<li></li>\n<li>  </li>\n</ol>\n<p>24</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocketWebsocket </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HTTP   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET / HTTP/1.1  //HTTP1.1GET</span><br><span class=\"line\">Host: localhost:8081 //</span><br><span class=\"line\">Connection: Upgrade </span><br><span class=\"line\">Pragma: no-cache</span><br><span class=\"line\">Cache-Control: no-cache</span><br><span class=\"line\">Upgrade: websocket //websocket</span><br><span class=\"line\">Origin: http://192.168.132.170:8000</span><br><span class=\"line\">Sec-WebSocket-Version: 13 //</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36</span><br><span class=\"line\">Accept-Encoding: gzip, deflate, br</span><br><span class=\"line\">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8</span><br><span class=\"line\">Cookie: optimizelyEndUserId=oeu1505722530441r0.5993643212774391; _ga=GA1.1.557695983.1505722531</span><br><span class=\"line\">Sec-WebSocket-Key: /2R6uuzPqLT/6z8fnZfN3w==   //</span><br><span class=\"line\">Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li>HTTP1.1GET</li>\n<li>Connection: Upgrade  </li>\n<li>Upgrade: websocket //websocket  </li>\n<li>Sec-WebSocket-Key    </li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>websocket  </p>\n<ol>\n<li>http</li>\n<li>websocket </li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 101 Switching Protocols</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br></pre></td></tr></table></figure>\n<p>header\\r\\n\\r\\n </p>\n<p>Sec-WebSocket-Accept Sec-WebSocket-Key<br>Sec-WebSocket-Key 258EAFA5-E914-47DA-95CA-C5AB0DC85B11SHA-1 hashbase64<br></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ws_key = <span class=\"string\">'258EAFA5-E914-47DA-95CA-C5AB0DC85B11'</span>;</span><br><span class=\"line\"><span class=\"comment\">// key</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAccpectKey</span>(<span class=\"params\">rSWKey</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> crypto.createHash(<span class=\"string\">'sha1'</span>).update(rSWKey + ws_key).digest(<span class=\"string\">'base64'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handShake</span>(<span class=\"params\">socket, headers</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> reqSWKey = headers[<span class=\"string\">'Sec-WebSocket-Key'</span>],</span><br><span class=\"line\">        resSWKey = getAccpectKey(reqSWKey)</span><br><span class=\"line\">    socket.write(<span class=\"string\">'HTTP/1.1 101 Switching Protocols\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Upgrade: websocket\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Connection: Upgrade\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'Sec-WebSocket-Accept: '</span> + resSWKey + <span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">    socket.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>websocketonopenwebsocket</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    :  </span><br><span class=\"line\"></span><br><span class=\"line\">      0                   1                   2                   3</span><br><span class=\"line\">      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class=\"line\">     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class=\"line\">     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class=\"line\">     |N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class=\"line\">     | |1|2|3|       |K|             |                               |</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |     Extended payload length continued, if payload len == 127  |</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class=\"line\">     |                               |Masking-key, if MASK set to 1  |</span><br><span class=\"line\">     +-------------------------------+-------------------------------+</span><br><span class=\"line\">     | Masking-key (continued)       |          Payload Data         |</span><br><span class=\"line\">     +-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     :                     Payload Data continued ...                :</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |                     Payload Data continued ...                |</span><br><span class=\"line\">     +---------------------------------------------------------------+</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<ol>\n<li><p>MASK1   </p>\n</li>\n<li><p>opcode  </p>\n<ul>\n<li>0x0 </li>\n<li>0x1 text(UTF-8)  </li>\n<li>0x2  </li>\n<li>0x3-0x7 0xB-0xF WebSockets   </li>\n</ul>\n</li>\n<li><p>FIN 0</p>\n</li>\n<li>Payload len  <ul>\n<li>Payload len&lt;126, </li>\n<li>126,1252</li>\n<li>127,655358 </li>\n</ul>\n</li>\n</ol>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ol>\n<li>  </li>\n<li></li>\n</ol>\n<p>    </p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decodeFrame</span>(<span class=\"params\">buffer</span>) </span>{\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * &gt;&gt;&gt; 7 7</span>\n<span class=\"comment\">     * 10010030  ====&gt;   00000001</span>\n<span class=\"comment\">     * &amp;   11    </span>\n<span class=\"comment\">     * 1500001111  ,0</span>\n<span class=\"comment\">     * 11011000 &amp; 00001111  ===  00001000</span>\n<span class=\"comment\">     *  </span>\n<span class=\"comment\">     */</span>\n    <span class=\"keyword\">var</span> fBite = buffer[<span class=\"number\">0</span>],\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         * Fin</span>\n<span class=\"comment\">         * 1</span>\n<span class=\"comment\">         * 0  </span>\n<span class=\"comment\">         */</span>\n        Fin = fBite &gt;&gt;&gt; <span class=\"number\">7</span>,\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         * opcodeopcodefBite4-7</span>\n<span class=\"comment\">         * &amp;   11    </span>\n<span class=\"comment\">         * 1500001111  ,0</span>\n<span class=\"comment\">         */</span>\n        opcode = buffer[<span class=\"number\">0</span>] &amp; <span class=\"number\">15</span>,\n        <span class=\"comment\">/**</span>\n<span class=\"comment\">         *  </span>\n<span class=\"comment\">         */</span>\n        len = buffer[<span class=\"number\">1</span>] &amp; <span class=\"number\">127</span>,\n        <span class=\"comment\">// 1</span>\n        Mask = buffer[<span class=\"number\">1</span>] &gt;&gt;&gt; <span class=\"number\">7</span>,\n        maskKey = <span class=\"literal\">null</span>\n    <span class=\"comment\">// </span>\n    <span class=\"comment\">//1252</span>\n    <span class=\"keyword\">if</span> (len == <span class=\"number\">126</span>) {\n        len = buffer.readUInt16BE(<span class=\"number\">2</span>)\n    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (len == <span class=\"number\">127</span>) {\n        <span class=\"comment\">// 655358</span>\n        len = buffer.readUInt64BE(<span class=\"number\">2</span>)\n    }\n    <span class=\"comment\">// </span>\n    Mask &amp;&amp; (maskKey = buffer.slice(<span class=\"number\">2</span>,<span class=\"number\">5</span>))\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     *  </span>\n<span class=\"comment\">     * octetstexti%4(i4)</span>\n<span class=\"comment\">     */</span>\n    <span class=\"keyword\">if</span>(Mask){\n        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">2</span>;i&lt;len ;i++){\n            buffer[i] = maskKey[(i - <span class=\"number\">2</span>) % <span class=\"number\">4</span>] ^ buffer[i];\n        }\n    }\n    <span class=\"keyword\">var</span> data = buffer.slice(<span class=\"number\">2</span>)\n    <span class=\"keyword\">return</span> {\n        Fin:Fin,\n        opcode:opcode,\n        data:data\n    }\n}\n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>()</p>\n<pre><code class=\"js\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">encodeFrame</span>(<span class=\"params\">data</span>)</span>{\n    <span class=\"keyword\">var</span> len = Buffer.byteLength(data),\n        <span class=\"comment\">// 264</span>\n        payload_len = len &gt; <span class=\"number\">65535</span> ?<span class=\"number\">10</span>:(len &gt; <span class=\"number\">125</span> ? <span class=\"number\">4</span> : <span class=\"number\">2</span>),\n        buf = <span class=\"keyword\">new</span> Buffer(len+payload_len)\n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * 0x81 = 10000001 </span>\n<span class=\"comment\">     *Fin 1 opcode001 mask 0 </span>\n<span class=\"comment\">     *  txt</span>\n<span class=\"comment\">     */</span>\n    buf[<span class=\"number\">0</span>] = <span class=\"number\">0x81</span>  \n    <span class=\"comment\">/**</span>\n<span class=\"comment\">     * payload_len</span>\n<span class=\"comment\">     */</span>        \n    <span class=\"keyword\">if</span>(payload_len == <span class=\"number\">2</span>){\n        buf[<span class=\"number\">1</span>] = len\n    }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(payload_len == <span class=\"number\">4</span>){\n        buf[<span class=\"number\">1</span>] = <span class=\"number\">126</span>;\n        buf.writeUInt16BE(payload_len, <span class=\"number\">2</span>);\n    }<span class=\"keyword\">else</span> {\n        buf[<span class=\"number\">1</span>] = <span class=\"number\">127</span>;\n        buf.writeUInt32BE(payload_len &gt;&gt;&gt; <span class=\"number\">32</span>, <span class=\"number\">2</span>);\n        buf.writeUInt32BE(payload_len &amp; <span class=\"number\">0xFFFFFFFF</span>, <span class=\"number\">6</span>);\n    }  \n    buf.write(data, payload_len);\n    <span class=\"keyword\">return</span> buf;\n}    \n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>opcode  9pingpong<br>Pingsopcode0x9pong0xA   </p>\n<pre><code class=\"js\"><span class=\"comment\">// ping</span>\n<span class=\"keyword\">if</span>(opcode == <span class=\"number\">9</span>){\n   <span class=\"built_in\">console</span>.log(<span class=\"string\">\"ping\"</span>);\n   <span class=\"comment\">/**</span>\n<span class=\"comment\">    * ping pong125</span>\n<span class=\"comment\">    * 10001010+</span>\n<span class=\"comment\">    * pong125</span>\n<span class=\"comment\">    */</span>\n    socke.write(Buffer.concat([<span class=\"keyword\">new</span> Buffer([<span class=\"number\">0x8A</span>, data.length]), data]))\n}\n</code></pre>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocket<a href=\"https://github.com/xiaoxiangdaiyu/chartroom/blob/master/src/websocket/ws.js\" target=\"_blank\" rel=\"noopener\"></a>websocket</p>"},{"title":"websocket-","date":"2017-11-06T02:50:06.000Z","_content":"Writing WebSocket serversMDN[Writing WebSocket servers](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)\n<!-- more -->\n## websocket\nWebSocket tcpWebsocket   \n\nWebSocket serverBerkeley socketsc(++)PythonPHPJavaScript(node.js)   \n\nhttpTCP sockets WebSocket server   \n\n WebSocket serverWebSocket servers servers(),HTTP server WebSocketWebSocket serverWebSocket servercookie   \n## websocket     \n\nTCPsocketsocket()example.com8000socket server/chatGET   \n\n80443443(TLS/SSL)Websocket  \nWebSocketswebHTTPWS  \n\n##    \n\nWebsocketHTTP(HTTP1.1GET)     \n```\n    GET /chat HTTP/1.1\n    Host: example.com:8000\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\n    Sec-WebSocket-Version: 13 \n```\n\n[Miscellaneous](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous)headersUser-Agent, Referer, Cookie, or authenticationWebSocket \n\nheader'400 Bad Request'socketHTTP()WebSocketsSec-WebSocket-Version (V13,)Sec-WebSocket-Key    \n\n###   \n\n* Origin header,headeroriginorigin403 Forbiddenorigin  \n* (/chat)WebSocket example.com/chatapp/game[]()   \n* HTTP codecode7.4   \n\n##   \n\nHTTP header\\r\\n\\r\\n \n\n```\n    HTTP/1.1 101 Switching Protocols\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\n```\n\n[Miscellaneous](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous)Sec-WebSocket-Accept Sec-WebSocket-Key Sec-WebSocket-Key \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\"SHA-1 hashbase64   \n\n###   \n\nwebsocketWebsockethttp   \n\nkey\"dGhlIHNhbXBsZSBub25jZQ==\"Accept\"s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\"   \n\nheaderSet-Cookie   \n\n##   \n\nWebsocketsocketsIP(Denial-of-Service )  \n\n## FramesEdit   \n\nwebsocketX (32)\n \n     \n##   \n  \n  \n```  \n    :  \n\n      0                   1                   2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-------+-+-------------+-------------------------------+\n     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n     |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n     | |1|2|3|       |K|             |                               |\n     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n     |     Extended payload length continued, if payload len == 127  |\n     + - - - - - - - - - - - - - - - +-------------------------------+\n     |                               |Masking-key, if MASK set to 1  |\n     +-------------------------------+-------------------------------+\n     | Masking-key (continued)       |          Payload Data         |\n     +-------------------------------- - - - - - - - - - - - - - - - +\n     :                     Payload Data continued ...                :\n     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n     |                     Payload Data continued ...                |\n     +---------------------------------------------------------------+\n\n```\n\n\nMASK (:)1(5.1)masksocketRSV1-3   \n\nopcode  \n* 0x0 \n* 0x1 text(UTF-8)  \n* 0x2  \n* 0x3-0x7 0xB-0xF WebSockets   \n\nFIN 0   \n\n##   \n\n  \n1. 9-151251262,1273   \n2. 16  \n3. 64    \n\n\n##   \n\nMASK()432keykeysocketkeyoctetstexti%4(i4)js() \n\n```js\n    var DECODED = \"\";\n    for (var i = 0; i < ENCODED.length; i++) {\n        DECODED[i] = ENCODED[i] ^ MASK[i % 4];\n    }\n```\n\n\n## \n\nFINopcodeopcodes0x0-0x2  \n\nopcode0x1text0x20x0textFINopcode\n    \n```\nClient: FIN=1, opcode=0x1, msg=\"hello\"\nServer: () Hi.\nClient: FIN=0, opcode=0x1, msg=\"and a\"\nServer: ()\nClient: FIN=0, opcode=0x0, msg=\"happy new\"\nServer: ()\nClient: FIN=1, opcode=0x0, msg=\"year!\"\nServer: () Happy new year to you too!\n```\n \n:(FIN=1opcode!=0x0)text(opcode=0x1)(FIN=0)(opcode=0x0)FIN=1  \n\n## WebSockets pingpong  \n\npingpingpong  \n\npingpongPingsopcode0x9pong0xApingpong(pingpong125)pingpong\n\npongpingpong  \n##   \n\n\n\n##   \n\nWebSocket headerswebsocket websocket\n\n###  \n\nwebsockets \n\n###   \n\nxmlXMLWebSocket(client & server),  \n  \n\n```\nGET /chat HTTP/1.1\n...\nSec-WebSocket-Protocol: soap, wamp\n//   \n...\nSec-WebSocket-Protocol: soap\nSec-WebSocket-Protocol: wamp\n```\n\nsoapwamp\n\n```\nSec-WebSocket-Protocol: soap\n```\n\n\nSec-Websocket-ProtocolSec-WebSocket-Protocol     \n\njsonJSONJSON\n\n\ndomainapp:Sec-WebSocket-Protocol: chat.example.com  \n##  \nwebsocket[](https://github.com/xiaoxiangdaiyu/chartroom/tree/master/src/websocket) nodewebsocket\n##   \nMDN[Writing WebSocket servers](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)","source":"_posts/websocket/frame.md","raw":"---\ntitle: websocket- \ndate: 2017-11-06 10:50:06\n---\nWriting WebSocket serversMDN[Writing WebSocket servers](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)\n<!-- more -->\n## websocket\nWebSocket tcpWebsocket   \n\nWebSocket serverBerkeley socketsc(++)PythonPHPJavaScript(node.js)   \n\nhttpTCP sockets WebSocket server   \n\n WebSocket serverWebSocket servers servers(),HTTP server WebSocketWebSocket serverWebSocket servercookie   \n## websocket     \n\nTCPsocketsocket()example.com8000socket server/chatGET   \n\n80443443(TLS/SSL)Websocket  \nWebSocketswebHTTPWS  \n\n##    \n\nWebsocketHTTP(HTTP1.1GET)     \n```\n    GET /chat HTTP/1.1\n    Host: example.com:8000\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\n    Sec-WebSocket-Version: 13 \n```\n\n[Miscellaneous](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous)headersUser-Agent, Referer, Cookie, or authenticationWebSocket \n\nheader'400 Bad Request'socketHTTP()WebSocketsSec-WebSocket-Version (V13,)Sec-WebSocket-Key    \n\n###   \n\n* Origin header,headeroriginorigin403 Forbiddenorigin  \n* (/chat)WebSocket example.com/chatapp/game[]()   \n* HTTP codecode7.4   \n\n##   \n\nHTTP header\\r\\n\\r\\n \n\n```\n    HTTP/1.1 101 Switching Protocols\n    Upgrade: websocket\n    Connection: Upgrade\n    Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\n```\n\n[Miscellaneous](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous)Sec-WebSocket-Accept Sec-WebSocket-Key Sec-WebSocket-Key \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\"SHA-1 hashbase64   \n\n###   \n\nwebsocketWebsockethttp   \n\nkey\"dGhlIHNhbXBsZSBub25jZQ==\"Accept\"s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\"   \n\nheaderSet-Cookie   \n\n##   \n\nWebsocketsocketsIP(Denial-of-Service )  \n\n## FramesEdit   \n\nwebsocketX (32)\n \n     \n##   \n  \n  \n```  \n    :  \n\n      0                   1                   2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-------+-+-------------+-------------------------------+\n     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n     |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n     | |1|2|3|       |K|             |                               |\n     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n     |     Extended payload length continued, if payload len == 127  |\n     + - - - - - - - - - - - - - - - +-------------------------------+\n     |                               |Masking-key, if MASK set to 1  |\n     +-------------------------------+-------------------------------+\n     | Masking-key (continued)       |          Payload Data         |\n     +-------------------------------- - - - - - - - - - - - - - - - +\n     :                     Payload Data continued ...                :\n     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n     |                     Payload Data continued ...                |\n     +---------------------------------------------------------------+\n\n```\n\n\nMASK (:)1(5.1)masksocketRSV1-3   \n\nopcode  \n* 0x0 \n* 0x1 text(UTF-8)  \n* 0x2  \n* 0x3-0x7 0xB-0xF WebSockets   \n\nFIN 0   \n\n##   \n\n  \n1. 9-151251262,1273   \n2. 16  \n3. 64    \n\n\n##   \n\nMASK()432keykeysocketkeyoctetstexti%4(i4)js() \n\n```js\n    var DECODED = \"\";\n    for (var i = 0; i < ENCODED.length; i++) {\n        DECODED[i] = ENCODED[i] ^ MASK[i % 4];\n    }\n```\n\n\n## \n\nFINopcodeopcodes0x0-0x2  \n\nopcode0x1text0x20x0textFINopcode\n    \n```\nClient: FIN=1, opcode=0x1, msg=\"hello\"\nServer: () Hi.\nClient: FIN=0, opcode=0x1, msg=\"and a\"\nServer: ()\nClient: FIN=0, opcode=0x0, msg=\"happy new\"\nServer: ()\nClient: FIN=1, opcode=0x0, msg=\"year!\"\nServer: () Happy new year to you too!\n```\n \n:(FIN=1opcode!=0x0)text(opcode=0x1)(FIN=0)(opcode=0x0)FIN=1  \n\n## WebSockets pingpong  \n\npingpingpong  \n\npingpongPingsopcode0x9pong0xApingpong(pingpong125)pingpong\n\npongpingpong  \n##   \n\n\n\n##   \n\nWebSocket headerswebsocket websocket\n\n###  \n\nwebsockets \n\n###   \n\nxmlXMLWebSocket(client & server),  \n  \n\n```\nGET /chat HTTP/1.1\n...\nSec-WebSocket-Protocol: soap, wamp\n//   \n...\nSec-WebSocket-Protocol: soap\nSec-WebSocket-Protocol: wamp\n```\n\nsoapwamp\n\n```\nSec-WebSocket-Protocol: soap\n```\n\n\nSec-Websocket-ProtocolSec-WebSocket-Protocol     \n\njsonJSONJSON\n\n\ndomainapp:Sec-WebSocket-Protocol: chat.example.com  \n##  \nwebsocket[](https://github.com/xiaoxiangdaiyu/chartroom/tree/master/src/websocket) nodewebsocket\n##   \nMDN[Writing WebSocket servers](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)","slug":"websocket/frame","published":1,"updated":"2018-08-24T07:48:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4tbvt7z001kgw921piii6hk","content":"<p>Writing WebSocket serversMDN<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers\" target=\"_blank\" rel=\"noopener\">Writing WebSocket servers</a><br><a id=\"more\"></a></p>\n<h2 id=\"websocket\"><a href=\"#websocket\" class=\"headerlink\" title=\"websocket\"></a>websocket</h2><p>WebSocket tcpWebsocket   </p>\n<p>WebSocket serverBerkeley socketsc(++)PythonPHPJavaScript(node.js)   </p>\n<p>httpTCP sockets WebSocket server   </p>\n<p> WebSocket serverWebSocket servers servers(),HTTP server WebSocketWebSocket serverWebSocket servercookie   </p>\n<h2 id=\"websocket-\"><a href=\"#websocket-\" class=\"headerlink\" title=\"websocket \"></a>websocket </h2><p>TCPsocketsocket()example.com8000socket server/chatGET   </p>\n<p>80443443(TLS/SSL)Websocket<br>WebSocketswebHTTPWS  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebsocketHTTP(HTTP1.1GET)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /chat HTTP/1.1</span><br><span class=\"line\">Host: example.com:8000</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span><br><span class=\"line\">Sec-WebSocket-Version: 13</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous\" target=\"_blank\" rel=\"noopener\">Miscellaneous</a>headersUser-Agent, Referer, Cookie, or authenticationWebSocket </p>\n<p>header400 Bad RequestsocketHTTP()WebSocketsSec-WebSocket-Version (V13,)Sec-WebSocket-Key    </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Origin header,headeroriginorigin403 Forbiddenorigin  </li>\n<li>(/chat)WebSocket example.com/chatapp/game<a href=\"\"></a>   </li>\n<li>HTTP codecode7.4   </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTTP header\\r\\n\\r\\n </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 101 Switching Protocols</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous\" target=\"_blank\" rel=\"noopener\">Miscellaneous</a>Sec-WebSocket-Accept Sec-WebSocket-Key Sec-WebSocket-Key 258EAFA5-E914-47DA-95CA-C5AB0DC85B11SHA-1 hashbase64   </p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>websocketWebsockethttp   </p>\n<p>keydGhlIHNhbXBsZSBub25jZQ==Accepts3pPLMBiTxaQ9kYGzzhZRbK+xOo=   </p>\n<p>headerSet-Cookie   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebsocketsocketsIP(Denial-of-Service )  </p>\n<h2 id=\"FramesEdit-\"><a href=\"#FramesEdit-\" class=\"headerlink\" title=\"FramesEdit \"></a>FramesEdit </h2><p>websocketX (32)</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    :  </span><br><span class=\"line\"></span><br><span class=\"line\">      0                   1                   2                   3</span><br><span class=\"line\">      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class=\"line\">     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class=\"line\">     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class=\"line\">     |N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class=\"line\">     | |1|2|3|       |K|             |                               |</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |     Extended payload length continued, if payload len == 127  |</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class=\"line\">     |                               |Masking-key, if MASK set to 1  |</span><br><span class=\"line\">     +-------------------------------+-------------------------------+</span><br><span class=\"line\">     | Masking-key (continued)       |          Payload Data         |</span><br><span class=\"line\">     +-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     :                     Payload Data continued ...                :</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |                     Payload Data continued ...                |</span><br><span class=\"line\">     +---------------------------------------------------------------+</span><br></pre></td></tr></table></figure>\n<p>MASK (:)1(5.1)masksocketRSV1-3   </p>\n<p>opcode  </p>\n<ul>\n<li>0x0 </li>\n<li>0x1 text(UTF-8)  </li>\n<li>0x2  </li>\n<li>0x3-0x7 0xB-0xF WebSockets   </li>\n</ul>\n<p>FIN 0   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ol>\n<li>9-151251262,1273   </li>\n<li>16  </li>\n<li>64    </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MASK()432keykeysocketkeyoctetstexti%4(i4)js() </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> DECODED = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ENCODED.length; i++) &#123;</span><br><span class=\"line\">    DECODED[i] = ENCODED[i] ^ MASK[i % <span class=\"number\">4</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FINopcodeopcodes0x0-0x2  </p>\n<p>opcode0x1text0x20x0textFINopcode</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Client: FIN=1, opcode=0x1, msg=&quot;hello&quot;</span><br><span class=\"line\">Server: () Hi.</span><br><span class=\"line\">Client: FIN=0, opcode=0x1, msg=&quot;and a&quot;</span><br><span class=\"line\">Server: ()</span><br><span class=\"line\">Client: FIN=0, opcode=0x0, msg=&quot;happy new&quot;</span><br><span class=\"line\">Server: ()</span><br><span class=\"line\">Client: FIN=1, opcode=0x0, msg=&quot;year!&quot;</span><br><span class=\"line\">Server: () Happy new year to you too!</span><br></pre></td></tr></table></figure>\n<p>:(FIN=1opcode!=0x0)text(opcode=0x1)(FIN=0)(opcode=0x0)FIN=1  </p>\n<h2 id=\"WebSockets-pingpong\"><a href=\"#WebSockets-pingpong\" class=\"headerlink\" title=\"WebSockets pingpong\"></a>WebSockets pingpong</h2><p>pingpingpong  </p>\n<p>pingpongPingsopcode0x9pong0xApingpong(pingpong125)pingpong</p>\n<p>pongpingpong  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebSocket headerswebsocket websocket</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>websockets </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>xmlXMLWebSocket(client &amp; server),<br>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /chat HTTP/1.1</span><br><span class=\"line\">...</span><br><span class=\"line\">Sec-WebSocket-Protocol: soap, wamp</span><br><span class=\"line\">//   </span><br><span class=\"line\">...</span><br><span class=\"line\">Sec-WebSocket-Protocol: soap</span><br><span class=\"line\">Sec-WebSocket-Protocol: wamp</span><br></pre></td></tr></table></figure>\n<p>soapwamp</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sec-WebSocket-Protocol: soap</span><br></pre></td></tr></table></figure>\n<p>Sec-Websocket-ProtocolSec-WebSocket-Protocol     </p>\n<p>jsonJSONJSON</p>\n<p>domainapp:Sec-WebSocket-Protocol: chat.example.com  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocket<a href=\"https://github.com/xiaoxiangdaiyu/chartroom/tree/master/src/websocket\" target=\"_blank\" rel=\"noopener\"></a> nodewebsocket</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MDN<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers\" target=\"_blank\" rel=\"noopener\">Writing WebSocket servers</a></p>\n","site":{"data":{}},"excerpt":"<p>Writing WebSocket serversMDN<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers\" target=\"_blank\" rel=\"noopener\">Writing WebSocket servers</a><br>","more":"</p>\n<h2 id=\"websocket\"><a href=\"#websocket\" class=\"headerlink\" title=\"websocket\"></a>websocket</h2><p>WebSocket tcpWebsocket   </p>\n<p>WebSocket serverBerkeley socketsc(++)PythonPHPJavaScript(node.js)   </p>\n<p>httpTCP sockets WebSocket server   </p>\n<p> WebSocket serverWebSocket servers servers(),HTTP server WebSocketWebSocket serverWebSocket servercookie   </p>\n<h2 id=\"websocket-\"><a href=\"#websocket-\" class=\"headerlink\" title=\"websocket \"></a>websocket </h2><p>TCPsocketsocket()example.com8000socket server/chatGET   </p>\n<p>80443443(TLS/SSL)Websocket<br>WebSocketswebHTTPWS  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebsocketHTTP(HTTP1.1GET)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /chat HTTP/1.1</span><br><span class=\"line\">Host: example.com:8000</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span><br><span class=\"line\">Sec-WebSocket-Version: 13</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous\" target=\"_blank\" rel=\"noopener\">Miscellaneous</a>headersUser-Agent, Referer, Cookie, or authenticationWebSocket </p>\n<p>header400 Bad RequestsocketHTTP()WebSocketsSec-WebSocket-Version (V13,)Sec-WebSocket-Key    </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Origin header,headeroriginorigin403 Forbiddenorigin  </li>\n<li>(/chat)WebSocket example.com/chatapp/game<a href=\"\"></a>   </li>\n<li>HTTP codecode7.4   </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTTP header\\r\\n\\r\\n </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 101 Switching Protocols</span><br><span class=\"line\">Upgrade: websocket</span><br><span class=\"line\">Connection: Upgrade</span><br><span class=\"line\">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Miscellaneous\" target=\"_blank\" rel=\"noopener\">Miscellaneous</a>Sec-WebSocket-Accept Sec-WebSocket-Key Sec-WebSocket-Key 258EAFA5-E914-47DA-95CA-C5AB0DC85B11SHA-1 hashbase64   </p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>websocketWebsockethttp   </p>\n<p>keydGhlIHNhbXBsZSBub25jZQ==Accepts3pPLMBiTxaQ9kYGzzhZRbK+xOo=   </p>\n<p>headerSet-Cookie   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebsocketsocketsIP(Denial-of-Service )  </p>\n<h2 id=\"FramesEdit-\"><a href=\"#FramesEdit-\" class=\"headerlink\" title=\"FramesEdit \"></a>FramesEdit </h2><p>websocketX (32)</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    :  </span><br><span class=\"line\"></span><br><span class=\"line\">      0                   1                   2                   3</span><br><span class=\"line\">      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class=\"line\">     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class=\"line\">     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class=\"line\">     |N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class=\"line\">     | |1|2|3|       |K|             |                               |</span><br><span class=\"line\">     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |     Extended payload length continued, if payload len == 127  |</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class=\"line\">     |                               |Masking-key, if MASK set to 1  |</span><br><span class=\"line\">     +-------------------------------+-------------------------------+</span><br><span class=\"line\">     | Masking-key (continued)       |          Payload Data         |</span><br><span class=\"line\">     +-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     :                     Payload Data continued ...                :</span><br><span class=\"line\">     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class=\"line\">     |                     Payload Data continued ...                |</span><br><span class=\"line\">     +---------------------------------------------------------------+</span><br></pre></td></tr></table></figure>\n<p>MASK (:)1(5.1)masksocketRSV1-3   </p>\n<p>opcode  </p>\n<ul>\n<li>0x0 </li>\n<li>0x1 text(UTF-8)  </li>\n<li>0x2  </li>\n<li>0x3-0x7 0xB-0xF WebSockets   </li>\n</ul>\n<p>FIN 0   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<ol>\n<li>9-151251262,1273   </li>\n<li>16  </li>\n<li>64    </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MASK()432keykeysocketkeyoctetstexti%4(i4)js() </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> DECODED = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ENCODED.length; i++) &#123;</span><br><span class=\"line\">    DECODED[i] = ENCODED[i] ^ MASK[i % <span class=\"number\">4</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FINopcodeopcodes0x0-0x2  </p>\n<p>opcode0x1text0x20x0textFINopcode</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Client: FIN=1, opcode=0x1, msg=&quot;hello&quot;</span><br><span class=\"line\">Server: () Hi.</span><br><span class=\"line\">Client: FIN=0, opcode=0x1, msg=&quot;and a&quot;</span><br><span class=\"line\">Server: ()</span><br><span class=\"line\">Client: FIN=0, opcode=0x0, msg=&quot;happy new&quot;</span><br><span class=\"line\">Server: ()</span><br><span class=\"line\">Client: FIN=1, opcode=0x0, msg=&quot;year!&quot;</span><br><span class=\"line\">Server: () Happy new year to you too!</span><br></pre></td></tr></table></figure>\n<p>:(FIN=1opcode!=0x0)text(opcode=0x1)(FIN=0)(opcode=0x0)FIN=1  </p>\n<h2 id=\"WebSockets-pingpong\"><a href=\"#WebSockets-pingpong\" class=\"headerlink\" title=\"WebSockets pingpong\"></a>WebSockets pingpong</h2><p>pingpingpong  </p>\n<p>pingpongPingsopcode0x9pong0xApingpong(pingpong125)pingpong</p>\n<p>pongpingpong  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WebSocket headerswebsocket websocket</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>websockets </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>xmlXMLWebSocket(client &amp; server),<br>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /chat HTTP/1.1</span><br><span class=\"line\">...</span><br><span class=\"line\">Sec-WebSocket-Protocol: soap, wamp</span><br><span class=\"line\">//   </span><br><span class=\"line\">...</span><br><span class=\"line\">Sec-WebSocket-Protocol: soap</span><br><span class=\"line\">Sec-WebSocket-Protocol: wamp</span><br></pre></td></tr></table></figure>\n<p>soapwamp</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sec-WebSocket-Protocol: soap</span><br></pre></td></tr></table></figure>\n<p>Sec-Websocket-ProtocolSec-WebSocket-Protocol     </p>\n<p>jsonJSONJSON</p>\n<p>domainapp:Sec-WebSocket-Protocol: chat.example.com  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>websocket<a href=\"https://github.com/xiaoxiangdaiyu/chartroom/tree/master/src/websocket\" target=\"_blank\" rel=\"noopener\"></a> nodewebsocket</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MDN<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers\" target=\"_blank\" rel=\"noopener\">Writing WebSocket servers</a></p>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"ck4tbvt1b000agw92t3h9kmjg","tag_id":"ck4tbvt1f000egw92js3v59gk","_id":"ck4tbvt1n000lgw9242aeh262"},{"post_id":"ck4tbvt1j000hgw923edlvxr9","tag_id":"ck4tbvt1m000kgw92rwyt060a","_id":"ck4tbvt1q000pgw92npit62ax"},{"post_id":"ck4tbvt7v001dgw929xvckk02","tag_id":"ck4tbvt7x001fgw92ekl1ebbd","_id":"ck4tbvt7z001jgw92z7fgv42h"}],"Tag":[{"name":" ","_id":"ck4tbvt1f000egw92js3v59gk"},{"name":" ","_id":"ck4tbvt1m000kgw92rwyt060a"},{"name":"webpack","_id":"ck4tbvt7x001fgw92ekl1ebbd"}]}}